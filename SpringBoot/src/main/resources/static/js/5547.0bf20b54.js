"use strict";(self["webpackChunkmile"]=self["webpackChunkmile"]||[]).push([[5547],{5547:function(e,i,t){t.r(i),t.d(i,{default:function(){return O}});var o=t(641),n=t(33),a=t(3751);const s=e=>((0,o.Qi)("data-v-c6aa160a"),e=e(),(0,o.jt)(),e),l={class:"app-container"},c={key:0,class:"content cards"},d={class:"header"},r={class:"button-container"},u=s((()=>(0,o.Lk)("span",{class:"arrow"},"❮",-1))),p={key:0},m={class:"actions"},g={class:"content"},k={key:0,class:"new-label"},h={class:"title"},f={class:"meta"},_={class:"author"},w={class:"date"},L={class:"main-content"},y={class:"body"},v={class:"file cards"},b={style:{display:"flex","align-items":"center"}},N=s((()=>(0,o.Lk)("h2",{style:{"margin-right":"10px"}},"첨부파일",-1))),C={key:0,style:{color:"#4b4a4a","font-family":"'KB_S5', sans-serif","margin-left":"2%","white-space":"nowrap"}},G={key:0,style:{"margin-top":"10px"}},D={class:"icon-container"},B=s((()=>(0,o.Lk)("div",{class:"views-icon"},[(0,o.Lk)("i",{class:"bi bi-eye"})],-1))),M={class:"views-text"},E={key:1},I=s((()=>(0,o.Lk)("p",null,"Loading...",-1))),x=[I];function T(e,i,t,s,I,T){return(0,o.uX)(),(0,o.CE)("div",l,[e.notice?((0,o.uX)(),(0,o.CE)("div",c,[(0,o.Lk)("div",d,[(0,o.Lk)("div",r,[(0,o.Lk)("button",{class:"back-button",onClick:i[0]||(i[0]=(...e)=>T.goBack&&T.goBack(...e))},[u,(0,o.eW)(" 이전 ")])]),T.isLoggedIn&&e.loginInfo.user_is_admin&&!e.loginInfo.user_is_manager&&e.isChecked?((0,o.uX)(),(0,o.CE)("div",p,[(0,o.Lk)("div",m,[(0,o.Lk)("button",{class:"edit-button",onClick:i[1]||(i[1]=(...e)=>T.goToModifyView&&T.goToModifyView(...e))},"수정"),(0,o.Lk)("button",{class:"delete-button",onClick:i[2]||(i[2]=(...e)=>T.deleteNotice&&T.deleteNotice(...e))},"삭제")])])):(0,o.Q3)("",!0)]),(0,o.Lk)("div",g,[T.isNew(e.notice.mtip_guide_date)?((0,o.uX)(),(0,o.CE)("span",k,"NEW")):(0,o.Q3)("",!0),(0,o.Lk)("h1",h,(0,n.v_)(e.notice.mtip_guide_title),1),(0,o.Lk)("div",f,[(0,o.Lk)("span",_,(0,n.v_)(e.notice.user_name),1),(0,o.Lk)("span",w,(0,n.v_)(T.formatDate(e.notice.mtip_guide_date)),1)]),(0,o.Lk)("div",L,[(0,o.Lk)("div",y,[(0,o.Lk)("pre",null,[(0,o.Lk)("p",null,(0,n.v_)(e.notice.mtip_guide_content),1)])]),(0,o.Lk)("div",v,[(0,o.Lk)("div",b,[N,e.notice.mtip_guide_file?(0,o.Q3)("",!0):((0,o.uX)(),(0,o.CE)("span",C,"파일이 존재하지 않습니다."))]),e.notice.mtip_guide_file?((0,o.uX)(),(0,o.CE)("div",G,[(0,o.Lk)("a",{onClick:i[3]||(i[3]=(0,a.D$)(((...e)=>T.downloadFile&&T.downloadFile(...e)),["prevent"])),href:"#",class:"file-download-link"},(0,n.v_)(T.getDisplayFileName(e.notice.mtip_guide_file)),1)])):(0,o.Q3)("",!0)])]),(0,o.Lk)("div",D,[B,(0,o.Lk)("div",M,(0,n.v_)(e.notice.mtip_guide_hit),1)])])])):((0,o.uX)(),(0,o.CE)("div",E,x))])}t(4114),t(4603),t(7566),t(8721);var $=t(7682),X=t(6278),F=t(8465),V=t.n(F),A={props:{mtipGuideNo:{type:[Number,String],required:!0}},data(){return{guideDetail:null}},methods:{...(0,X.i0)("notice",["MtipGuideDetail","guide_incrementViews"]),async deleteNotice(){V().fire({title:"정말로 삭제하시겠습니까?",text:"다시 되돌릴 수 없습니다.",icon:"warning",showCancelButton:!0,confirmButtonColor:"#4b4a4a",cancelButtonColor:"#bd2c3a",confirmButtonText:"확인",cancelButtonText:"취소",reverseButtons:!1}).then((async e=>{if(e.isConfirmed)try{await $.A.delete(`/notice/Guidedelete/${this.notice.mtip_guide_no}`),V().fire("게시글 삭제 완료","게시글이 삭제 되었습니다.","success").then((()=>{this.$router.push("/mTipMainAdminView")}))}catch(i){console.error("게시글 삭제 중 오류가 발생했습니다.",i),V().fire("게시글 삭제 중 오류가 발생했습니다.","","error")}}))},showAlert(e,i){this.$swal({title:e,icon:i,confirmButtonText:"확인",confirmButtonColor:"#4b4a4a",allowOutsideClick:!1,allowEscapeKey:!1,allowEnterKey:!1,stopKeydownPropagation:!1,scrollbarPadding:!1,backdrop:!0,didOpen:()=>{document.querySelector(".swal2-container").style.zIndex="999999"}})},getDisplayFileName(e){return e.split("/").pop()},goBack(){this.$router.go(-1)},goToModifyView(){this.$router.push({name:"mTipGuideModify",params:{mtipGuideNo:this.notice.mtip_guide_no}})},isNew(e){const i=new Date,t=new Date(e),o=i-t,n=Math.floor(o/864e5);return n<=7},formatDate(e){const i=new Date(e);return i.toLocaleDateString()},async downloadFile(){try{const e=await $.A.get(`/notice/downloadGuide/${this.notice.mtip_guide_file}`,{responseType:"blob"}),i=new Blob([e.data],{type:e.headers["content-type"]}),t=URL.createObjectURL(i),o=document.createElement("a");o.href=t,o.download=this.getDisplayFileName(this.notice.mtip_guide_file),o.click(),URL.revokeObjectURL(t)}catch(e){console.error("파일 다운로드 중 오류가 발생했습니다.",e)}}},computed:{...(0,X.L8)("login",{loginInfo:"getLoginInfo",isChecked:"getIsChecked"}),...(0,X.L8)("notice",{notice:"getMtipGuideList",allNotices:"getMtipGuideLists"}),isLoggedIn(){return!!this.loginInfo},mileNo(){return this.$route.params.mile_no}},watch:{mtipGuideNo(e){e&&this.MtipGuideDetail(e)}},mounted(){console.log("mtipGuideNo:",this.mtipGuideNo),this.mtipGuideNo?(console.log("Calling MtipGuideDetail with:",this.mtipGuideNo),this.MtipGuideDetail(this.mtipGuideNo),this.guide_incrementViews(this.mtipGuideNo)):console.log("mtipGuideNo is not available")},created(){this.mtipGuideNo&&this.MtipGuideDetail(this.mtipGuideNo)}},Q=t(6262);const K=(0,Q.A)(A,[["render",T],["__scopeId","data-v-c6aa160a"]]);var O=K}}]);
//# sourceMappingURL=5547.0bf20b54.js.map
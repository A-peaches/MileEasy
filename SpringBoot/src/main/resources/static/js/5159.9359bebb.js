"use strict";(self["webpackChunkmile"]=self["webpackChunkmile"]||[]).push([[5159],{65159:function(e,n,t){t.r(n),t.d(n,{default:function(){return K}});var i=t(20641),l=t(90033),s=t(53751);const o={class:"cards page-back mx-auto"},m=(0,i.Lk)("h2",{class:"bold-x-lg my-5",style:{"font-family":"KB_C3"}},"마일리지 멘트",-1),a={style:{padding:"0 5%"}},c={class:"p-4 mt-5"},d=(0,i.Lk)("h3",{class:"lg p-3",style:{"text-align":"left","font-family":"KB_C2"}},"마일리지 항목",-1),h={class:"p-2"},r={class:"input-gray p-3",style:{"text-align":"left"}},g={class:"lg2",style:{width:"100%","text-align":"left"}},f={class:"p-4"},u={class:"d-flex justify-content-between align-items-center"},k=(0,i.Lk)("h3",{class:"lg p-3",style:{"text-align":"left","font-family":"KB_C2"}},"추천 멘트",-1),p=(0,i.Lk)("span",{class:"lg2 mr-5 brown",style:{"text-align":"right"}},[(0,i.Lk)("i",{class:"bi bi-plus-lg"}),(0,i.eW)(" 추가하기")],-1),w=[p],C={class:"input-gray p-3",style:{width:"95%","text-align":"left"}},L=["onUpdate:modelValue"],_=["onClick"],R=(0,i.Lk)("span",{class:"lg brown"},[(0,i.Lk)("i",{class:"bi bi-dash-lg"})],-1),I=[R],y={style:{"padding-top":"10%"}};function b(e,n,t,p,R,b){return(0,i.uX)(),(0,i.CE)("div",o,[m,(0,i.Lk)("div",a,[(0,i.Lk)("div",c,[d,(0,i.Lk)("div",h,[(0,i.Lk)("div",r,[(0,i.Lk)("span",g,(0,l.v_)(R.mile_name)+" 마일리지",1)])])]),(0,i.Lk)("div",f,[(0,i.Lk)("div",u,[k,(0,i.Lk)("button",{onClick:n[0]||(n[0]=(...e)=>b.addComment&&b.addComment(...e))},w)]),((0,i.uX)(!0),(0,i.CE)(i.FK,null,(0,i.pI)(R.mileRecommands,((e,n)=>((0,i.uX)(),(0,i.CE)("div",{key:n,class:"p-2 d-flex justify-content-between align-items-center"},[(0,i.Lk)("div",C,[(0,i.bo)((0,i.Lk)("input",{"onUpdate:modelValue":n=>e.mile_mention=n,class:"lg2",placeholder:"추천 멘트를 입력하세요",style:{"text-align":"left",width:"100%"}},null,8,L),[[s.Jo,e.mile_mention]])]),(0,i.Lk)("button",{onClick:e=>b.deleteComment(n)},I,8,_)])))),128))])]),(0,i.Lk)("div",y,[(0,i.Lk)("button",{onClick:n[1]||(n[1]=(...e)=>b.addCommentAction&&b.addCommentAction(...e)),class:"btn-green",style:{width:"8vw",height:"3vw","font-size":"1.2vw","font-family":"KB_C2"}},"등록")])])}t(44114);var v=t(66278),x={name:"CommentMieageeAdminView",data(){return{mile_no:"",mile_name:"",baseHeight:80,increment:10,mileRecommands:[]}},computed:{...(0,v.L8)("mile",["getMileInfo"]),...(0,v.L8)("login",["getLoginInfo","getIsChecked"]),...(0,v.L8)("mileRecommand",["getMileRecommandInfo"]),loginInfo(){return this.getLoginInfo},mileInfo(){return this.getMileInfo},computedHeight(){return`${this.baseHeight+this.mileRecommands.length*this.increment}vh`},mileRecommandInfo(){return this.getMileRecommandInfo},isChecked(){return this.getIsChecked}},methods:{...(0,v.i0)("mile",["fetchMileInfo"]),...(0,v.i0)("mileRecommand",["getMileRecommand","updateRecommands","addRecommands","deleteRecommands"]),addComment(){const e={mile_mention:"",mile_no:this.mileRecommands.length>0?this.mileRecommands[0].mile_no:null,mile_link:this.mileRecommands.length>0?this.mileRecommands[0].mile_link:null,mile_recommand_no:null};this.mileRecommands.push(e)},async deleteComment(e){const n=await this.showAlertConfirm("추천멘트를 삭제하시겠습니까?","warning");if(n){const n=this.mileRecommands[e];if(n.mile_recommand_no){const t=await this.deleteRecommands(n);t&&t.data.success?(this.mileRecommands.splice(e,1),console.log("삭제 완료")):console.log("삭제 실패")}else this.mileRecommands.splice(e,1)}else console.log("삭제 취소")},async addCommentAction(){if(null!=this.mileRecommands){for(const e of this.mileRecommands)e.mile_recommand_no?await this.updateRecommands(e):await this.addRecommands(e);this.showAlert("추천 멘트가 등록되었습니다","success","#")}else this.showAlert("추천 멘트 등록이 실패했습니다","error","#")},showAlert(e,n,t){this.$swal({title:e,icon:n,scrollbarPadding:!1}).then((e=>{e.isConfirmed&&("#"==t?location.reload():this.$router.push(t))}))},showAlertConfirm(e,n){return this.$swal({title:e,icon:n,scrollbarPadding:!1}).then((e=>e.isConfirmed))},checkLoginInfo(){(!this.getLoginInfo||1==this.getLoginInfo.user_is_manager&&0==this.getIsChecked)&&(window.location.href="/noAccess")}},async created(){this.checkLoginInfo();const e=this.loginInfo?this.loginInfo.user_no:null;if(e){await this.fetchMileInfo(e);const n=this.getMileInfo;n?this.mile_name=n.mile_no:console.error("마일리지 이름을 가져올 수 없습니다.")}else console.error("user_no이 유효하지 않습니다.");const n=this.loginInfo?this.loginInfo.mile_no:null;if(this.mile_no=n,n){await this.getMileRecommand(n);const e=this.getMileRecommandInfo;e?this.mileRecommands=e:console.error("추천멘트를 가져올 수 없습니다.")}}},A=t(66262);const M=(0,A.A)(x,[["render",b]]);var K=M}}]);
//# sourceMappingURL=5159.9359bebb.js.map
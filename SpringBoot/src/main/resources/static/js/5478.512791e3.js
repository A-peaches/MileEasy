"use strict";(self["webpackChunkmile"]=self["webpackChunkmile"]||[]).push([[5478],{25478:function(e,s,t){t.r(s),t.d(s,{default:function(){return V}});var l=t(20641),a=t(90033),i=t(53751),r=t(22499);const n=e=>((0,l.Qi)("data-v-264b76d5"),e=e(),(0,l.jt)(),e),o={class:"cards page-back mx-auto",style:{color:"#4b4a4a"}},c=(0,l.Fv)('<h2 class="bold-x-lg mt-5 mb-5 ml-5" style="font-family:KB_C3;" data-v-264b76d5> 마일리지 프로모션 </h2><div class="card shadow-sm mb-4 fade-in" style="background-color:#f5f5f5;border:#f5f5f5;" data-v-264b76d5><div class="card-body text-start card-ml pl-5" data-v-264b76d5><h5 class="text-emphasis text-start" data-v-264b76d5><i class="bi bi-info-circle-fill" data-v-264b76d5></i> 유의 사항 </h5><span style="font-size:13pt;" data-v-264b76d5> 본 서비스는 직원들의 마일리지에 대한 관심을 높이고, 관련 혜택을 적극적으로 알리기 위해 제작되었습니다. 마일리지 홍보 이외의 목적으로는 사용이 제한됩니다. <br data-v-264b76d5></span><span data-v-264b76d5><strong class="text-red" data-v-264b76d5>(일일 최대 발송 가능 횟수 : 1회 / 주중 최대 발송 가능 횟수 : 3회)</strong></span></div></div>',2),h={class:"row",style:{"margin-top":"60px"}},d={class:"left-item"},u={class:"phone-container"},m=n((()=>(0,l.Lk)("img",{src:r,class:"iphone"},null,-1))),p={class:"phone-overlay"},v={class:"receiver-area"},b={class:"message-area"},g={key:0,class:"message-bubble"},y={class:"right-item"},k={class:"message-input-container"},f={class:"sub-title mb-3",style:{"text-align":"start"}},L=n((()=>(0,l.Lk)("div",null,null,-1))),_={class:"flex"},C={class:"message-input-container mt-4"},w=n((()=>(0,l.Lk)("div",{class:"sub-title"},"메시지 입력",-1))),x={class:"sample-messages"},A=n((()=>(0,l.Lk)("p",{class:"sub-title my-3",style:{"text-align":"start"}},"샘플 메시지",-1))),M={class:"button-container"},E=["onClick"],$={class:"action-buttons mt-5"},I={key:0,class:"modal"},F={class:"modal-content"},Q=n((()=>(0,l.Lk)("h2",null,"직원 검색",-1))),S=n((()=>(0,l.Lk)("hr",{style:{"margin-top":"5px","margin-bottom":"5px"}},null,-1))),j={class:"checkbox-group"},R=["value","checked","onChange"],X=n((()=>(0,l.Lk)("span",{class:"custom-checkbox"},null,-1))),P={class:"checkbox-label"},U={class:"user-list"},q=["onClick"],B={key:0,class:"checkmark"};function D(e,s,t,r,n,D){return(0,l.uX)(),(0,l.CE)("div",o,[c,(0,l.Lk)("div",h,[(0,l.Lk)("div",d,[(0,l.Lk)("div",u,[m,(0,l.Lk)("div",p,[(0,l.Lk)("div",v,(0,a.v_)(D.receiverDisplay||""),1),(0,l.Lk)("div",b,[n.message?((0,l.uX)(),(0,l.CE)("div",g,(0,a.v_)(n.message||""),1)):(0,l.Q3)("",!0)])])])]),(0,l.Lk)("div",y,[(0,l.Lk)("div",k,[(0,l.Lk)("p",f,[(0,l.eW)(" 수신인 지정 "),(0,l.Lk)("i",{class:"bi bi-plus-lg",onClick:s[0]||(s[0]=(...e)=>D.openModal&&D.openModal(...e))})]),L]),(0,l.Lk)("div",_,[(0,l.bo)((0,l.Lk)("input",{"onUpdate:modelValue":s[1]||(s[1]=e=>D.receiverDisplay=e),type:"text",class:"form-control",style:{width:"100%",height:"50px"},placeholder:"수신인을 추가해주세요.",onClick:s[2]||(s[2]=(...e)=>D.openModal&&D.openModal(...e)),readonly:""},null,512),[[i.Jo,D.receiverDisplay]])]),(0,l.Lk)("div",C,[w,(0,l.Lk)("button",{class:"btn-yellow mb-4",onClick:s[3]||(s[3]=(...e)=>D.generateAIContent&&D.generateAIContent(...e))}," AI 내용 자동 생성 ")]),(0,l.bo)((0,l.Lk)("textarea",{"onUpdate:modelValue":s[4]||(s[4]=e=>n.message=e),class:"form-control",style:{height:"250px"},placeholder:"메시지를 입력하세요 (100자 이내)",maxlength:"100"},null,512),[[i.Jo,n.message]]),(0,l.Lk)("div",x,[A,(0,l.Lk)("div",M,[((0,l.uX)(!0),(0,l.CE)(l.FK,null,(0,l.pI)(n.sampleMessages,((e,s)=>((0,l.uX)(),(0,l.CE)("button",{key:s,class:"sample-button",onClick:s=>D.selectSampleMessage(e)},(0,a.v_)(e?.title),9,E)))),128))])]),(0,l.Lk)("div",$,[(0,l.Lk)("button",{class:"btn btn-primary",onClick:s[5]||(s[5]=(...e)=>D.sendSms&&D.sendSms(...e))},"메시지 발송"),(0,l.Lk)("button",{class:"btn btn-secondary",onClick:s[6]||(s[6]=(...e)=>D.reset&&D.reset(...e))},"작성 취소")])])]),n.showModal?((0,l.uX)(),(0,l.CE)("div",I,[(0,l.Lk)("div",F,[(0,l.Lk)("span",{class:"close",onClick:s[7]||(s[7]=(...e)=>D.closeModal&&D.closeModal(...e))},"×"),Q,S,(0,l.Lk)("div",j,[((0,l.uX)(!0),(0,l.CE)(l.FK,null,(0,l.pI)(n.filterOptions,(e=>((0,l.uX)(),(0,l.CE)("label",{class:"checkbox-container",key:e.value},[(0,l.Lk)("input",{type:"checkbox",value:e.value,checked:n.selectedFilter===e.value,onChange:s=>D.handleFilterChange(e.value)},null,40,R),X,(0,l.Lk)("span",P,(0,a.v_)(e.label),1)])))),128))]),(0,l.bo)((0,l.Lk)("input",{"onUpdate:modelValue":s[8]||(s[8]=e=>n.searchQuery=e),onInput:s[9]||(s[9]=(...e)=>D.searchEmployees&&D.searchEmployees(...e)),placeholder:"직원 이름 또는 번호를 검색해주세요."},null,544),[[i.Jo,n.searchQuery]]),(0,l.Lk)("div",U,[(0,l.Lk)("ul",null,[((0,l.uX)(!0),(0,l.CE)(l.FK,null,(0,l.pI)(n.searchResults,(e=>((0,l.uX)(),(0,l.CE)("li",{key:e.user_no,onClick:s=>D.addReceiver(e),class:(0,a.C4)({selected:D.isSelected(e)})},[(0,l.eW)((0,a.v_)(e?.user_no)+" - "+(0,a.v_)(e?.user_name)+" ",1),D.isSelected(e)?((0,l.uX)(),(0,l.CE)("span",B,"✓")):(0,l.Q3)("",!0)],10,q)))),128))])]),(0,l.Lk)("button",{onClick:s[10]||(s[10]=(...e)=>D.closeModal&&D.closeModal(...e)),class:"btn btn-primary mt-3"},"완료")])])):(0,l.Q3)("",!0)])}t(44114);var K=t(37682),T={name:"MileagePromotion",props:["mile_name"],data(){return{message:"",receivers:[],showModal:!1,searchQuery:"",searchResults:[],selectedFilter:null,filterOptions:[{label:"전체",value:"all"},{label:"영업점",value:"branch"},{label:"본부",value:"headquarters"}],employees:[],sampleMessages:[{title:"신규 목표 안내",content:`${this.mile_name} 마일리지의 신규 목표가 생성 되었습니다🤗. 마왕 선정에 도움이 되는 목표 설정🎯 지금 함께 떠나볼까요?`},{title:"M-Tip 방문 제안",content:`${this.mile_name} 마일리지, M-Tip 게시판에서 직원들과 🍯꿀팁을 공유해보세요! 당신도 마일리지 왕으로 거듭날수 있어요!`},{title:"동기 부여",content:`현재 다른직원들의 ${this.mile_name} 마일리지 관심도가 낮아졌어요! 이때가 기회예요! 얼른 잡아버리세요 🧐`}]}},methods:{selectSampleMessage(e){this.message=e.content},async generateAIContent(){this.AIAlret();try{const e=await K.A.post("bot/sms",null,{params:{prompt:`우리 회사 인사고과와 연결되는 마일리지 관리 사이트에서 ${this.mile_name} 마일리지에 관해서 홍보하고 방문을 독려하려고 홍보성 문자메시지를 보내려고해.그 홍보하는 문자 메시지 문구를 만들어주면 되는데, 마일리지는 이벤트성으로 종종 생성되는 공동목표에 참여해서 달성하면 뿌듯함을 얻기도하고, 마일리지가 전월에비해 크게 증가했거나, 마일리지부문에서 1등을하면 마왕(마일리지왕)이라는 배지를 획득하여 뿌듯함을 느낄수 있기도해. 이 사이트의 출석체크 또는 직원들과 마일리지 꿀팁을 공유하는 M-Tip게시판의 베스트 글로 선정되면 마왕 선정에 가점이 있어. 하지만 가장 중요한것은 인사고과에 반영된다는거야.  내가 예시로 직접 만든 문자문구를 몇개 줄게! ${this.mile_name} 마일리지의 신규 목표가 생성 되었습니다. 마왕 선정에 도움이 되는 목표 설정 지금 함께 떠나볼까요?,${this.mile_name} 마일리지, M-Tip 게시판에서 직원들과 꿀팁을 공유해보세요! 당신도 마일리지 왕으로 거듭날수 있어요!,현재 다른직원들의 ${this.mile_name} 마일리지 관심도가 낮아졌어요! 이때가 기회예요! 얼른 잡아버리세요 🧐 꼭 이런 멘트가 들어가지않아도 마일리지에 관심이 돋거나 독려하는 문장으로도 충분해. 100자이내로 하나의 메시지만 생성 부탁할게. 바로 문자메시지를 발송할거니까  하나의 문자메시지내용 그대로를 줘.`}});this.message=e.data}catch(e){console.error("Error during API request:",e)}},warningAlert(e){this.$swal({title:"경고",text:e,icon:"warning",scrollbarPadding:!1})},reset(){this.message="",this.receivers=[]},openModal(){this.showModal=!0,this.searchResults=this.employees,this.selectedFilter=null,this.searchQuery=""},closeModal(){this.showModal=!1,this.searchQuery="",this.searchResults=[]},searchEmployees(){this.filterEmployees()},addReceiver(e){const s=this.receivers.findIndex((s=>s.user_no===e.user_no));-1===s?this.receivers.push(e):this.receivers.splice(s,1)},isSelected(e){return this.receivers.some((s=>s.user_no===e.user_no))},handleFilterChange(e){this.selectedFilter===e?(this.selectedFilter=null,this.receivers=[]):(this.selectedFilter=e,this.addEmployeesByFilter(e)),this.filterEmployees()},addEmployeesByFilter(e){"all"===e?this.receivers=[...this.employees]:"branch"===e?this.receivers=this.employees.filter((e=>1==e.job_no||2==e.job_no)):"headquarters"===e&&(this.receivers=this.employees.filter((e=>3==e.job_no)))},removeEmployeesByFilter(e){"all"===e?this.receivers=[]:"branch"===e?this.receivers=this.receivers.filter((e=>1!==e.job_no&&2!==e.job_no)):"headquarters"===e&&(this.receivers=this.receivers.filter((e=>3!==e.job_no)))},filterEmployees(){let e=this.employees;if("branch"===this.selectedFilter?e=e.filter((e=>1==e.job_no||2==e.job_no)):"headquarters"===this.selectedFilter&&(e=e.filter((e=>3==e.job_no))),this.searchQuery){const s=this.searchQuery.toLowerCase();e=e.filter((e=>e.user_name.toLowerCase().includes(s)||e.user_no.toString().includes(this.searchQuery)))}this.searchResults=e},applySearch(){if(this.searchQuery){const e=this.searchQuery.toLowerCase();this.searchResults=this.searchResults.filter((s=>s.user_name.toLowerCase().includes(e)||s.user_no.toString().includes(this.searchQuery)))}},async getAllUsers(){try{const e=await K.A.get("/user/getAllUsers");this.employees=e.data}catch(e){console.error("Error getAllUsers")}},succesAlert(){this.$swal({title:"성공",text:"메시지 발송이 완료되었습니다.",icon:"success",scrollbarPadding:!1})},async sendSms(){if(0!==this.message.trim().length)if(0!==this.receivers.length)try{let e=this.receivers.map((e=>e.user_tel));const s=await K.A.post("/user/sendSms",{to:e,text:this.message,mile:this.mile_name});console.log(s),this.succesAlert(),this.reset()}catch(e){console.error("Error sending SMS:",e),this.errorAlert(e.message||"메시지 전송 중 오류가 발생했습니다.")}else this.warningAlert("수신자를 입력해주세요.");else this.warningAlert("메시지를 입력해주세요.")},AIAlret(){let e,s=10;this.$swal({title:"AI 문구 생성",html:"<b>${timeLeft}</b>초 후에 완료됩니다....",timer:1e4,timerProgressBar:!0,scrollbarPadding:!1,didOpen:()=>{const t=this.$swal.getPopup();t.style.height="200px",this.$swal.showLoading();const l=this.$swal.getHtmlContainer().querySelector("b");l.textContent=`${s}`,e=setInterval((()=>{s-=1,l.textContent=`${s}`,0===s&&clearInterval(e)}),1e3)},willClose:()=>{clearInterval(e)}}).then((e=>{e.dismiss===this.$swal.DismissReason.timer&&console.log("I was closed by the timer")}))}},computed:{receiverDisplay(){const e=this.receivers.length;if(0===e)return"";if(e<=3)return this.receivers.map((e=>e.user_name)).join(", ");{const s=this.receivers.slice(0,3).map((e=>e.user_name)).join(", ");return`${s} 외 ${e-3}명`}}},mounted(){this.getAllUsers()}},J=t(66262);const O=(0,J.A)(T,[["render",D],["__scopeId","data-v-264b76d5"]]);var V=O},22499:function(e,s,t){e.exports=t.p+"img/iphone.d3ce902e.png"}}]);
//# sourceMappingURL=5478.512791e3.js.map
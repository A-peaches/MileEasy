"use strict";(self["webpackChunkmile"]=self["webpackChunkmile"]||[]).push([[5478],{25478:function(e,s,t){t.r(s),t.d(s,{default:function(){return V}});var l=t(20641),a=t(90033),i=t(53751),r=t(22499);const n=e=>((0,l.Qi)("data-v-264b76d5"),e=e(),(0,l.jt)(),e),o={class:"cards page-back mx-auto",style:{color:"#4b4a4a"}},c=(0,l.Fv)('<h2 class="bold-x-lg mt-5 mb-5 ml-5" style="font-family:KB_C3;" data-v-264b76d5> ë§ˆì¼ë¦¬ì§€ í”„ë¡œëª¨ì…˜ </h2><div class="card shadow-sm mb-4 fade-in" style="background-color:#f5f5f5;border:#f5f5f5;" data-v-264b76d5><div class="card-body text-start card-ml pl-5" data-v-264b76d5><h5 class="text-emphasis text-start" data-v-264b76d5><i class="bi bi-info-circle-fill" data-v-264b76d5></i> ìœ ì˜ ì‚¬í•­ </h5><span style="font-size:13pt;" data-v-264b76d5> ë³¸ ì„œë¹„ìŠ¤ëŠ” ì§ì›ë“¤ì˜ ë§ˆì¼ë¦¬ì§€ì— ëŒ€í•œ ê´€ì‹¬ì„ ë†’ì´ê³ , ê´€ë ¨ í˜œíƒì„ ì ê·¹ì ìœ¼ë¡œ ì•Œë¦¬ê¸° ìœ„í•´ ì œì‘ë˜ì—ˆìŠµë‹ˆë‹¤. ë§ˆì¼ë¦¬ì§€ í™ë³´ ì´ì™¸ì˜ ëª©ì ìœ¼ë¡œëŠ” ì‚¬ìš©ì´ ì œí•œë©ë‹ˆë‹¤. <br data-v-264b76d5></span><span data-v-264b76d5><strong class="text-red" data-v-264b76d5>(ì¼ì¼ ìµœëŒ€ ë°œì†¡ ê°€ëŠ¥ íšŸìˆ˜ : 1íšŒ / ì£¼ì¤‘ ìµœëŒ€ ë°œì†¡ ê°€ëŠ¥ íšŸìˆ˜ : 3íšŒ)</strong></span></div></div>',2),h={class:"row",style:{"margin-top":"60px"}},d={class:"left-item"},u={class:"phone-container"},m=n((()=>(0,l.Lk)("img",{src:r,class:"iphone"},null,-1))),p={class:"phone-overlay"},v={class:"receiver-area"},b={class:"message-area"},g={key:0,class:"message-bubble"},y={class:"right-item"},k={class:"message-input-container"},f={class:"sub-title mb-3",style:{"text-align":"start"}},L=n((()=>(0,l.Lk)("div",null,null,-1))),_={class:"flex"},C={class:"message-input-container mt-4"},w=n((()=>(0,l.Lk)("div",{class:"sub-title"},"ë©”ì‹œì§€ ì…ë ¥",-1))),x={class:"sample-messages"},A=n((()=>(0,l.Lk)("p",{class:"sub-title my-3",style:{"text-align":"start"}},"ìƒ˜í”Œ ë©”ì‹œì§€",-1))),M={class:"button-container"},E=["onClick"],$={class:"action-buttons mt-5"},I={key:0,class:"modal"},F={class:"modal-content"},Q=n((()=>(0,l.Lk)("h2",null,"ì§ì› ê²€ìƒ‰",-1))),S=n((()=>(0,l.Lk)("hr",{style:{"margin-top":"5px","margin-bottom":"5px"}},null,-1))),j={class:"checkbox-group"},R=["value","checked","onChange"],X=n((()=>(0,l.Lk)("span",{class:"custom-checkbox"},null,-1))),P={class:"checkbox-label"},U={class:"user-list"},q=["onClick"],B={key:0,class:"checkmark"};function D(e,s,t,r,n,D){return(0,l.uX)(),(0,l.CE)("div",o,[c,(0,l.Lk)("div",h,[(0,l.Lk)("div",d,[(0,l.Lk)("div",u,[m,(0,l.Lk)("div",p,[(0,l.Lk)("div",v,(0,a.v_)(D.receiverDisplay||""),1),(0,l.Lk)("div",b,[n.message?((0,l.uX)(),(0,l.CE)("div",g,(0,a.v_)(n.message||""),1)):(0,l.Q3)("",!0)])])])]),(0,l.Lk)("div",y,[(0,l.Lk)("div",k,[(0,l.Lk)("p",f,[(0,l.eW)(" ìˆ˜ì‹ ì¸ ì§€ì • "),(0,l.Lk)("i",{class:"bi bi-plus-lg",onClick:s[0]||(s[0]=(...e)=>D.openModal&&D.openModal(...e))})]),L]),(0,l.Lk)("div",_,[(0,l.bo)((0,l.Lk)("input",{"onUpdate:modelValue":s[1]||(s[1]=e=>D.receiverDisplay=e),type:"text",class:"form-control",style:{width:"100%",height:"50px"},placeholder:"ìˆ˜ì‹ ì¸ì„ ì¶”ê°€í•´ì£¼ì„¸ìš”.",onClick:s[2]||(s[2]=(...e)=>D.openModal&&D.openModal(...e)),readonly:""},null,512),[[i.Jo,D.receiverDisplay]])]),(0,l.Lk)("div",C,[w,(0,l.Lk)("button",{class:"btn-yellow mb-4",onClick:s[3]||(s[3]=(...e)=>D.generateAIContent&&D.generateAIContent(...e))}," AI ë‚´ìš© ìë™ ìƒì„± ")]),(0,l.bo)((0,l.Lk)("textarea",{"onUpdate:modelValue":s[4]||(s[4]=e=>n.message=e),class:"form-control",style:{height:"250px"},placeholder:"ë©”ì‹œì§€ë¥¼ ì…ë ¥í•˜ì„¸ìš” (100ì ì´ë‚´)",maxlength:"100"},null,512),[[i.Jo,n.message]]),(0,l.Lk)("div",x,[A,(0,l.Lk)("div",M,[((0,l.uX)(!0),(0,l.CE)(l.FK,null,(0,l.pI)(n.sampleMessages,((e,s)=>((0,l.uX)(),(0,l.CE)("button",{key:s,class:"sample-button",onClick:s=>D.selectSampleMessage(e)},(0,a.v_)(e?.title),9,E)))),128))])]),(0,l.Lk)("div",$,[(0,l.Lk)("button",{class:"btn btn-primary",onClick:s[5]||(s[5]=(...e)=>D.sendSms&&D.sendSms(...e))},"ë©”ì‹œì§€ ë°œì†¡"),(0,l.Lk)("button",{class:"btn btn-secondary",onClick:s[6]||(s[6]=(...e)=>D.reset&&D.reset(...e))},"ì‘ì„± ì·¨ì†Œ")])])]),n.showModal?((0,l.uX)(),(0,l.CE)("div",I,[(0,l.Lk)("div",F,[(0,l.Lk)("span",{class:"close",onClick:s[7]||(s[7]=(...e)=>D.closeModal&&D.closeModal(...e))},"Ã—"),Q,S,(0,l.Lk)("div",j,[((0,l.uX)(!0),(0,l.CE)(l.FK,null,(0,l.pI)(n.filterOptions,(e=>((0,l.uX)(),(0,l.CE)("label",{class:"checkbox-container",key:e.value},[(0,l.Lk)("input",{type:"checkbox",value:e.value,checked:n.selectedFilter===e.value,onChange:s=>D.handleFilterChange(e.value)},null,40,R),X,(0,l.Lk)("span",P,(0,a.v_)(e.label),1)])))),128))]),(0,l.bo)((0,l.Lk)("input",{"onUpdate:modelValue":s[8]||(s[8]=e=>n.searchQuery=e),onInput:s[9]||(s[9]=(...e)=>D.searchEmployees&&D.searchEmployees(...e)),placeholder:"ì§ì› ì´ë¦„ ë˜ëŠ” ë²ˆí˜¸ë¥¼ ê²€ìƒ‰í•´ì£¼ì„¸ìš”."},null,544),[[i.Jo,n.searchQuery]]),(0,l.Lk)("div",U,[(0,l.Lk)("ul",null,[((0,l.uX)(!0),(0,l.CE)(l.FK,null,(0,l.pI)(n.searchResults,(e=>((0,l.uX)(),(0,l.CE)("li",{key:e.user_no,onClick:s=>D.addReceiver(e),class:(0,a.C4)({selected:D.isSelected(e)})},[(0,l.eW)((0,a.v_)(e?.user_no)+" - "+(0,a.v_)(e?.user_name)+" ",1),D.isSelected(e)?((0,l.uX)(),(0,l.CE)("span",B,"âœ“")):(0,l.Q3)("",!0)],10,q)))),128))])]),(0,l.Lk)("button",{onClick:s[10]||(s[10]=(...e)=>D.closeModal&&D.closeModal(...e)),class:"btn btn-primary mt-3"},"ì™„ë£Œ")])])):(0,l.Q3)("",!0)])}t(44114);var K=t(37682),T={name:"MileagePromotion",props:["mile_name"],data(){return{message:"",receivers:[],showModal:!1,searchQuery:"",searchResults:[],selectedFilter:null,filterOptions:[{label:"ì „ì²´",value:"all"},{label:"ì˜ì—…ì ",value:"branch"},{label:"ë³¸ë¶€",value:"headquarters"}],employees:[],sampleMessages:[{title:"ì‹ ê·œ ëª©í‘œ ì•ˆë‚´",content:`${this.mile_name} ë§ˆì¼ë¦¬ì§€ì˜ ì‹ ê·œ ëª©í‘œê°€ ìƒì„± ë˜ì—ˆìŠµë‹ˆë‹¤ğŸ¤—. ë§ˆì™• ì„ ì •ì— ë„ì›€ì´ ë˜ëŠ” ëª©í‘œ ì„¤ì •ğŸ¯ ì§€ê¸ˆ í•¨ê»˜ ë– ë‚˜ë³¼ê¹Œìš”?`},{title:"M-Tip ë°©ë¬¸ ì œì•ˆ",content:`${this.mile_name} ë§ˆì¼ë¦¬ì§€, M-Tip ê²Œì‹œíŒì—ì„œ ì§ì›ë“¤ê³¼ ğŸ¯ê¿€íŒì„ ê³µìœ í•´ë³´ì„¸ìš”! ë‹¹ì‹ ë„ ë§ˆì¼ë¦¬ì§€ ì™•ìœ¼ë¡œ ê±°ë“­ë‚ ìˆ˜ ìˆì–´ìš”!`},{title:"ë™ê¸° ë¶€ì—¬",content:`í˜„ì¬ ë‹¤ë¥¸ì§ì›ë“¤ì˜ ${this.mile_name} ë§ˆì¼ë¦¬ì§€ ê´€ì‹¬ë„ê°€ ë‚®ì•„ì¡Œì–´ìš”! ì´ë•Œê°€ ê¸°íšŒì˜ˆìš”! ì–¼ë¥¸ ì¡ì•„ë²„ë¦¬ì„¸ìš” ğŸ§`}]}},methods:{selectSampleMessage(e){this.message=e.content},async generateAIContent(){this.AIAlret();try{const e=await K.A.post("bot/sms",null,{params:{prompt:`ìš°ë¦¬ íšŒì‚¬ ì¸ì‚¬ê³ ê³¼ì™€ ì—°ê²°ë˜ëŠ” ë§ˆì¼ë¦¬ì§€ ê´€ë¦¬ ì‚¬ì´íŠ¸ì—ì„œ ${this.mile_name} ë§ˆì¼ë¦¬ì§€ì— ê´€í•´ì„œ í™ë³´í•˜ê³  ë°©ë¬¸ì„ ë…ë ¤í•˜ë ¤ê³  í™ë³´ì„± ë¬¸ìë©”ì‹œì§€ë¥¼ ë³´ë‚´ë ¤ê³ í•´.ê·¸ í™ë³´í•˜ëŠ” ë¬¸ì ë©”ì‹œì§€ ë¬¸êµ¬ë¥¼ ë§Œë“¤ì–´ì£¼ë©´ ë˜ëŠ”ë°, ë§ˆì¼ë¦¬ì§€ëŠ” ì´ë²¤íŠ¸ì„±ìœ¼ë¡œ ì¢…ì¢… ìƒì„±ë˜ëŠ” ê³µë™ëª©í‘œì— ì°¸ì—¬í•´ì„œ ë‹¬ì„±í•˜ë©´ ë¿Œë“¯í•¨ì„ ì–»ê¸°ë„í•˜ê³ , ë§ˆì¼ë¦¬ì§€ê°€ ì „ì›”ì—ë¹„í•´ í¬ê²Œ ì¦ê°€í–ˆê±°ë‚˜, ë§ˆì¼ë¦¬ì§€ë¶€ë¬¸ì—ì„œ 1ë“±ì„í•˜ë©´ ë§ˆì™•(ë§ˆì¼ë¦¬ì§€ì™•)ì´ë¼ëŠ” ë°°ì§€ë¥¼ íšë“í•˜ì—¬ ë¿Œë“¯í•¨ì„ ëŠë‚„ìˆ˜ ìˆê¸°ë„í•´. ì´ ì‚¬ì´íŠ¸ì˜ ì¶œì„ì²´í¬ ë˜ëŠ” ì§ì›ë“¤ê³¼ ë§ˆì¼ë¦¬ì§€ ê¿€íŒì„ ê³µìœ í•˜ëŠ” M-Tipê²Œì‹œíŒì˜ ë² ìŠ¤íŠ¸ ê¸€ë¡œ ì„ ì •ë˜ë©´ ë§ˆì™• ì„ ì •ì— ê°€ì ì´ ìˆì–´. í•˜ì§€ë§Œ ê°€ì¥ ì¤‘ìš”í•œê²ƒì€ ì¸ì‚¬ê³ ê³¼ì— ë°˜ì˜ëœë‹¤ëŠ”ê±°ì•¼.  ë‚´ê°€ ì˜ˆì‹œë¡œ ì§ì ‘ ë§Œë“  ë¬¸ìë¬¸êµ¬ë¥¼ ëª‡ê°œ ì¤„ê²Œ! ${this.mile_name} ë§ˆì¼ë¦¬ì§€ì˜ ì‹ ê·œ ëª©í‘œê°€ ìƒì„± ë˜ì—ˆìŠµë‹ˆë‹¤. ë§ˆì™• ì„ ì •ì— ë„ì›€ì´ ë˜ëŠ” ëª©í‘œ ì„¤ì • ì§€ê¸ˆ í•¨ê»˜ ë– ë‚˜ë³¼ê¹Œìš”?,${this.mile_name} ë§ˆì¼ë¦¬ì§€, M-Tip ê²Œì‹œíŒì—ì„œ ì§ì›ë“¤ê³¼ ê¿€íŒì„ ê³µìœ í•´ë³´ì„¸ìš”! ë‹¹ì‹ ë„ ë§ˆì¼ë¦¬ì§€ ì™•ìœ¼ë¡œ ê±°ë“­ë‚ ìˆ˜ ìˆì–´ìš”!,í˜„ì¬ ë‹¤ë¥¸ì§ì›ë“¤ì˜ ${this.mile_name} ë§ˆì¼ë¦¬ì§€ ê´€ì‹¬ë„ê°€ ë‚®ì•„ì¡Œì–´ìš”! ì´ë•Œê°€ ê¸°íšŒì˜ˆìš”! ì–¼ë¥¸ ì¡ì•„ë²„ë¦¬ì„¸ìš” ğŸ§ ê¼­ ì´ëŸ° ë©˜íŠ¸ê°€ ë“¤ì–´ê°€ì§€ì•Šì•„ë„ ë§ˆì¼ë¦¬ì§€ì— ê´€ì‹¬ì´ ë‹ê±°ë‚˜ ë…ë ¤í•˜ëŠ” ë¬¸ì¥ìœ¼ë¡œë„ ì¶©ë¶„í•´. 100ìì´ë‚´ë¡œ í•˜ë‚˜ì˜ ë©”ì‹œì§€ë§Œ ìƒì„± ë¶€íƒí• ê²Œ. ë°”ë¡œ ë¬¸ìë©”ì‹œì§€ë¥¼ ë°œì†¡í• ê±°ë‹ˆê¹Œ  í•˜ë‚˜ì˜ ë¬¸ìë©”ì‹œì§€ë‚´ìš© ê·¸ëŒ€ë¡œë¥¼ ì¤˜.`}});this.message=e.data}catch(e){console.error("Error during API request:",e)}},warningAlert(e){this.$swal({title:"ê²½ê³ ",text:e,icon:"warning",scrollbarPadding:!1})},reset(){this.message="",this.receivers=[]},openModal(){this.showModal=!0,this.searchResults=this.employees,this.selectedFilter=null,this.searchQuery=""},closeModal(){this.showModal=!1,this.searchQuery="",this.searchResults=[]},searchEmployees(){this.filterEmployees()},addReceiver(e){const s=this.receivers.findIndex((s=>s.user_no===e.user_no));-1===s?this.receivers.push(e):this.receivers.splice(s,1)},isSelected(e){return this.receivers.some((s=>s.user_no===e.user_no))},handleFilterChange(e){this.selectedFilter===e?(this.selectedFilter=null,this.receivers=[]):(this.selectedFilter=e,this.addEmployeesByFilter(e)),this.filterEmployees()},addEmployeesByFilter(e){"all"===e?this.receivers=[...this.employees]:"branch"===e?this.receivers=this.employees.filter((e=>1==e.job_no||2==e.job_no)):"headquarters"===e&&(this.receivers=this.employees.filter((e=>3==e.job_no)))},removeEmployeesByFilter(e){"all"===e?this.receivers=[]:"branch"===e?this.receivers=this.receivers.filter((e=>1!==e.job_no&&2!==e.job_no)):"headquarters"===e&&(this.receivers=this.receivers.filter((e=>3!==e.job_no)))},filterEmployees(){let e=this.employees;if("branch"===this.selectedFilter?e=e.filter((e=>1==e.job_no||2==e.job_no)):"headquarters"===this.selectedFilter&&(e=e.filter((e=>3==e.job_no))),this.searchQuery){const s=this.searchQuery.toLowerCase();e=e.filter((e=>e.user_name.toLowerCase().includes(s)||e.user_no.toString().includes(this.searchQuery)))}this.searchResults=e},applySearch(){if(this.searchQuery){const e=this.searchQuery.toLowerCase();this.searchResults=this.searchResults.filter((s=>s.user_name.toLowerCase().includes(e)||s.user_no.toString().includes(this.searchQuery)))}},async getAllUsers(){try{const e=await K.A.get("/user/getAllUsers");this.employees=e.data}catch(e){console.error("Error getAllUsers")}},succesAlert(){this.$swal({title:"ì„±ê³µ",text:"ë©”ì‹œì§€ ë°œì†¡ì´ ì™„ë£Œë˜ì—ˆìŠµë‹ˆë‹¤.",icon:"success",scrollbarPadding:!1})},async sendSms(){if(0!==this.message.trim().length)if(0!==this.receivers.length)try{let e=this.receivers.map((e=>e.user_tel));const s=await K.A.post("/user/sendSms",{to:e,text:this.message,mile:this.mile_name});console.log(s),this.succesAlert(),this.reset()}catch(e){console.error("Error sending SMS:",e),this.errorAlert(e.message||"ë©”ì‹œì§€ ì „ì†¡ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.")}else this.warningAlert("ìˆ˜ì‹ ìë¥¼ ì…ë ¥í•´ì£¼ì„¸ìš”.");else this.warningAlert("ë©”ì‹œì§€ë¥¼ ì…ë ¥í•´ì£¼ì„¸ìš”.")},AIAlret(){let e,s=10;this.$swal({title:"AI ë¬¸êµ¬ ìƒì„±",html:"<b>${timeLeft}</b>ì´ˆ í›„ì— ì™„ë£Œë©ë‹ˆë‹¤....",timer:1e4,timerProgressBar:!0,scrollbarPadding:!1,didOpen:()=>{const t=this.$swal.getPopup();t.style.height="200px",this.$swal.showLoading();const l=this.$swal.getHtmlContainer().querySelector("b");l.textContent=`${s}`,e=setInterval((()=>{s-=1,l.textContent=`${s}`,0===s&&clearInterval(e)}),1e3)},willClose:()=>{clearInterval(e)}}).then((e=>{e.dismiss===this.$swal.DismissReason.timer&&console.log("I was closed by the timer")}))}},computed:{receiverDisplay(){const e=this.receivers.length;if(0===e)return"";if(e<=3)return this.receivers.map((e=>e.user_name)).join(", ");{const s=this.receivers.slice(0,3).map((e=>e.user_name)).join(", ");return`${s} ì™¸ ${e-3}ëª…`}}},mounted(){this.getAllUsers()}},J=t(66262);const O=(0,J.A)(T,[["render",D],["__scopeId","data-v-264b76d5"]]);var V=O},22499:function(e,s,t){e.exports=t.p+"img/iphone.d3ce902e.png"}}]);
//# sourceMappingURL=5478.512791e3.js.map
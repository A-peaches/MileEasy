"use strict";(self["webpackChunkmile"]=self["webpackChunkmile"]||[]).push([[3671],{3671:function(t,e,a){a.r(e),a.d(e,{default:function(){return q}});var s=a(641),l=a(33),r=a(3751);const o={class:"cards page-back mx-auto"},n=(0,s.Lk)("h2",{class:"bold-x-lg my-5",style:{"font-family":"KB_C3"}},"목표 설정",-1),i={class:"d-flex justify-content-end mr-5"},d={class:"mileage-goals-container"},c=(0,s.Lk)("h3",{class:"mileage-goals-title"},"현재 진행중인 마일리지 목표",-1),g={key:0,class:"goals-list"},u={class:"goal-info"},m={class:"goal-date"},f={class:"goal-mileage"},h={class:"goal-rate"},p={class:"progress-container"},k={key:1,class:"no-goals"},_=(0,s.Lk)("p",{class:"lg2"},"현재 진행중인 목표가 없습니다.",-1),v=[_],L={style:{width:"90%"},class:"mx-auto mt-5"},y=(0,s.Lk)("h3",{class:"lg p-3 ml-5",style:{"text-align":"left","font-family":"'KB_S4'","font-size":"18pt"}},"예정된 마일리지 목표 내역",-1),D={class:"d-flex justify-content-evenly pr-3 pl-3"},b={class:"target-list"},w={class:"target-list"},M={style:{width:"90%"},class:"mx-auto mt-5"},T=(0,s.Lk)("h3",{class:"lg p-3 ml-5",style:{"text-align":"left","font-family":"'KB_S4'","font-size":"18pt"}},"지난 마일리지 목표 내역",-1),I={class:"d-flex justify-content-between pr-3 pl-3"},C={class:"target-list"},x={class:"target-list"},A={class:"target-list"},E={key:0,class:"modal-overlay"},S={class:"modal-content"},X={class:"modal-header"},V={class:"modal-title"},F={class:"modal-body"},K={class:"form-group"},$=(0,s.Lk)("label",null,"목표 기간",-1),O={class:"date-range"},R=(0,s.Lk)("span",{class:"date-separator"},"~",-1),j={class:"form-group"},B=(0,s.Lk)("label",{for:"mileage-score"},"목표 마일리지 점수",-1),H={class:"modal-footer"};function U(t,e,a,_,U,z){const J=(0,s.g2)("Datepicker");return(0,s.uX)(),(0,s.CE)(s.FK,null,[(0,s.Lk)("div",o,[n,(0,s.Lk)("div",i,[(0,s.Lk)("button",{class:"btn-green target-btn",onClick:e[0]||(e[0]=(...t)=>z.openModal&&z.openModal(...t))},"목표 등록하기")]),(0,s.Lk)("div",d,[c,z.currentTargets.length>0?((0,s.uX)(),(0,s.CE)("div",g,[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(z.currentTargets,((t,e)=>((0,s.uX)(),(0,s.CE)("div",{key:e,class:"goal-card"},[(0,s.Lk)("div",u,[(0,s.Lk)("span",m,"📅 "+(0,l.v_)(t.start_date)+" ~ "+(0,l.v_)(t.end_date),1),(0,s.Lk)("span",f,"🎯 "+(0,l.v_)(t.target_mileage)+" 마일리지 목표",1),(0,s.Lk)("span",h,"✨ "+(0,l.v_)(t.targetRate)+"% 달성",1)]),(0,s.Lk)("div",p,[(0,s.Lk)("div",{class:"progress-bar",style:(0,l.Tr)({width:t.targetRate+"%"})},null,4)])])))),128))])):((0,s.uX)(),(0,s.CE)("div",k,v))]),(0,s.Lk)("div",L,[y,((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(z.futureTargets,(t=>((0,s.uX)(),(0,s.CE)("div",{key:t.target_no,class:"cards card-red mx-auto m-3 pointer",style:{width:"90%",height:"6vh"}},[(0,s.Lk)("div",D,[(0,s.Lk)("span",b,"목표기간: "+(0,l.v_)(t.start_date)+" ~ "+(0,l.v_)(t.end_date),1),(0,s.Lk)("span",w,"목표 마일리지: "+(0,l.v_)(t.target_mileage),1)])])))),128))]),(0,s.Lk)("div",M,[T,((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(z.pastTargets,(t=>((0,s.uX)(),(0,s.CE)("div",{key:t.target_no,class:"cards card-gray mx-auto m-3 pointer",style:{width:"90%",height:"6vh"}},[(0,s.Lk)("div",I,[(0,s.Lk)("span",C,"목표기간: "+(0,l.v_)(t.start_date)+" ~ "+(0,l.v_)(t.end_date),1),(0,s.Lk)("span",x,"목표 마일리지: "+(0,l.v_)(t.target_mileage),1),(0,s.Lk)("span",A,"달성률: "+(0,l.v_)(t.targetRate)+"%",1)])])))),128))])]),U.isModalOpen?((0,s.uX)(),(0,s.CE)("div",E,[(0,s.Lk)("div",S,[(0,s.Lk)("div",X,[(0,s.Lk)("h2",V,(0,l.v_)(U.mile_name)+" 목표 등록하기",1),(0,s.Lk)("button",{class:"close-button",onClick:e[1]||(e[1]=(...t)=>z.closeModal&&z.closeModal(...t))},"×")]),(0,s.Lk)("div",F,[(0,s.Lk)("div",K,[$,(0,s.Lk)("div",O,[(0,s.bF)(J,{modelValue:U.startDate,"onUpdate:modelValue":e[2]||(e[2]=t=>U.startDate=t),format:z.formatDate,placeholder:"시작일"},null,8,["modelValue","format"]),R,(0,s.bF)(J,{modelValue:U.endDate,"onUpdate:modelValue":e[3]||(e[3]=t=>U.endDate=t),format:z.formatDate,placeholder:"종료일"},null,8,["modelValue","format"])])]),(0,s.Lk)("div",j,[B,(0,s.bo)((0,s.Lk)("input",{type:"number",id:"mileage-score","onUpdate:modelValue":e[4]||(e[4]=t=>U.targetScore=t)},null,512),[[r.Jo,U.targetScore]])])]),(0,s.Lk)("div",H,[(0,s.Lk)("button",{class:"submit-button",onClick:e[5]||(e[5]=(...t)=>z.addAction&&z.addAction(...t))},"등록")])])])):(0,s.Q3)("",!0)],64)}a(4114);var z=a(6278),J=a(6652),P={name:"TargetMileageAdminView",components:{Datepicker:J.A},data(){return{isModalOpen:!1,startDate:null,endDate:null,targetScore:0,mile_name:""}},computed:{...(0,z.L8)("mile",["getMileInfo","getArrayMiles"]),...(0,z.L8)("login",["getLoginInfo"]),...(0,z.L8)("mileage",["getTargets"]),targets(){return this.getTargets||[]},loginInfo(){return this.getLoginInfo},mileInfo(){return this.getMileInfo},formattedTargets(){return this.targets?this.targets.map((t=>{const e=new Date(t.start_date),a=new Date(t.end_date);return{...t,targetRate:t.achievement_rate,startDate:e,endDate:a}})):[]},currentTargets(){const t=new Date;return t.setHours(0,0,0,0),this.formattedTargets.filter((e=>e.startDate<=t&&t<=e.endDate))},pastTargets(){const t=new Date;return t.setHours(0,0,0,0),this.formattedTargets.filter((e=>e.endDate<t))},futureTargets(){const t=new Date;return t.setHours(0,0,0,0),this.formattedTargets.filter((e=>e.startDate>t))}},methods:{...(0,z.i0)("mile",["fetchMileInfo"]),...(0,z.i0)("mileage",["addTarget","fetchMileTarget"]),async addAction(){const t={mile_no:this.loginInfo.mile_no,user_no:this.loginInfo.user_no,start_date:this.formatDate(this.startDate),end_date:this.formatDate(this.endDate),target_mileage:this.targetScore},e=await this.addTarget(t);e&&e.data.success?this.showAlert("목표가 등록되었습니다","success","#"):this.showAlert("목표 등록에 실패했습니다","fail","#")},openModal(){this.isModalOpen=!0},closeModal(){this.isModalOpen=!1},showAlert(t,e,a){this.$swal({title:t,icon:e,scrollbarPadding:!1}).then((t=>{t.isConfirmed&&("#"==a?location.reload():this.$router.push(a))}))},formatDate(t){const e=t.getFullYear(),a=String(t.getMonth()+1).padStart(2,"0"),s=String(t.getDate()).padStart(2,"0");return`${e}-${a}-${s}`}},async created(){const t=this.loginInfo?this.loginInfo.user_no:null;if(t){await this.fetchMileInfo(t);const e=this.getMileInfo;e?this.mile_name=e.mile_no:console.error("마일리지 이름을 가져올 수 없습니다.")}else console.error("user_no이 유효하지 않습니다.");const e=this.loginInfo?this.loginInfo.mile_no:null;if(e)try{await this.fetchMileTarget(e)}catch(a){console.error("마일리지 목표 리스트를 가져오는 중 오류 발생:",a)}else console.error("mile_no가 유효하지 않습니다.")}},Q=a(6262);const Y=(0,Q.A)(P,[["render",U]]);var q=Y}}]);
//# sourceMappingURL=3671.ed97e696.js.map
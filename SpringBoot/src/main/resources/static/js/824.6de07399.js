"use strict";(self["webpackChunkmile"]=self["webpackChunkmile"]||[]).push([[824],{824:function(e,t,i){i.r(t),i.d(t,{default:function(){return we}});var a=i(641);const s={class:"mtip-container"},o={class:"row"},n={class:"col-md-8",style:{width:"75%"}},c={class:"col-md"},l={class:"mtip-container"},d={class:"mtip-container"},r={class:"row"},p={class:"col-md-5",style:{width:"50%"}},m={class:"col-md-5",style:{width:"50%"}};function g(e,t,i,g,v,u){const h=(0,a.g2)("Banner"),f=(0,a.g2)("Profile"),_=(0,a.g2)("Guide"),b=(0,a.g2)("MTip"),k=(0,a.g2)("BestMTip");return(0,a.uX)(),(0,a.CE)(a.FK,null,[(0,a.Lk)("div",s,[(0,a.Lk)("div",o,[(0,a.Lk)("div",n,[(0,a.bF)(h)]),(0,a.Lk)("div",c,[(0,a.bF)(f)])])]),(0,a.Lk)("div",l,[(0,a.bF)(_)]),(0,a.Lk)("div",d,[(0,a.Lk)("div",r,[(0,a.Lk)("div",p,[(0,a.bF)(b)]),(0,a.Lk)("div",m,[(0,a.bF)(k)])])])],64)}var v=i(33);const u={key:"profile",class:"cards",style:{height:"320px","padding-left":"30px"}},h={class:"profile-remark"},f={class:"text-start brown mt-2"},_=(0,a.Fv)('<div class="text-start" style="margin-top:80px;" data-v-add6d682><a class="btn-mtip" href="/m_TipWriteView" data-v-add6d682><i class="bi bi-pencil mr-2" data-v-add6d682></i><span class="btn-text" data-v-add6d682>글작성</span><span class="right-arrow" data-v-add6d682>&gt;</span></a><br data-v-add6d682><div class="mt-2" data-v-add6d682></div><a class="btn-mtip" href="/myM_TipView" data-v-add6d682><i class="bi bi-file-earmark-text mr-2" data-v-add6d682></i><span class="btn-text" data-v-add6d682>나의 M-Tip</span><span class="right-arrow" data-v-add6d682>&gt;</span></a><br data-v-add6d682><div class="mt-2" data-v-add6d682></div><a class="btn-mtip" href="/MyM_TipBestView" data-v-add6d682><i class="bi bi-heart mr-2" data-v-add6d682></i><span class="btn-text" data-v-add6d682>내가 좋아요한 M-Tip</span><span class="right-arrow" data-v-add6d682>&gt;</span></a><br data-v-add6d682></div>',1);function b(e,t,i,s,o,n){return(0,a.uX)(),(0,a.CE)("div",u,[(0,a.Lk)("div",h,(0,v.v_)(n.loginInfo?n.loginInfo.user_name:"")+"님, 오늘도 좋은하루 되세요! ",1),(0,a.Lk)("div",f,"나의 M-Tip 작성 건수 : "+(0,v.v_)(e.userTotalNotices)+" 건",1),_])}var k=i(6278),w={name:"ProfileCom",data(){return{remark:[""]}},computed:{...(0,k.L8)("login",["getLoginInfo"]),...(0,k.L8)("mtipBoard",["notices","userTotalNotices"]),loginInfo(){const e=this.getLoginInfo;return e?{...e,position_no:e.position_no||"",level_no:e.level_no||"",job_no:e.job_no||"",dp_no:e.dp_no||""}:null}},methods:{...(0,k.i0)("mtipBoard",["fetchNotices","fetchUserTotalNotices"]),setDefaultImage(e){e.target.src=i(6468)},goToMyMileageView(){window.location.href="/myMileageView"}},async mounted(){await this.fetchNotices(),this.loginInfo&&await this.fetchUserTotalNotices(this.loginInfo.user_no)}},y=i(6262);const L=(0,y.A)(w,[["render",b],["__scopeId","data-v-add6d682"]]);var C=L;const M={class:"cards banner-back",style:{height:"320px"}},T={autoplay:"",muted:"",loop:"",class:"video-background"},N=["src"];function B(e,t,i,s,o,n){return(0,a.uX)(),(0,a.CE)("div",M,[(0,a.Lk)("video",T,[(0,a.Lk)("source",{src:o.videoSrc,type:"video/mp4"},null,8,N),(0,a.eW)(" Your browser does not support the video tag. ")]),(0,a.Lk)("div",{class:"video-overlay",onClick:t[0]||(t[0]=(...e)=>n.navigate&&n.navigate(...e))})])}var x={name:"BannerCom",data(){return{videoSrc:i(2667)}},methods:{navigate(){window.location.href="/m_TipWriteView"}}};const E=(0,y.A)(x,[["render",B],["__scopeId","data-v-b65f2b48"]]);var I=E,D=i(3751);const F=e=>((0,a.Qi)("data-v-60c1d504"),e=e(),(0,a.jt)(),e),X={key:"profile",class:"cards",style:{height:"105%","padding-left":"30px","margin-top":"20px"}},A={class:"guide-container"},V=F((()=>(0,a.Lk)("div",{class:"fw-bold",style:{"font-size":"24px","font-family":"'KB_C2', sans-serif","margin-right":"10px","text-align":"left"}},"M-Tip 가이드",-1))),j={key:0,style:{"font-family":"'KB_C2', sans-serif",color:"#4b4a4a","margin-top":"20px"}},K={class:"notice-details"},U={class:"notice-content-wrapper"},P={class:"notice-content"},G={key:0,class:"file-download-wrapper"},R=["onClick"];function S(e,t,i,s,o,n){return(0,a.uX)(),(0,a.CE)("div",X,[(0,a.Lk)("div",A,[V,0===o.notices.length?((0,a.uX)(),(0,a.CE)("div",j," 등재된 게시글이 없습니다. ")):((0,a.uX)(!0),(0,a.CE)(a.FK,{key:1},(0,a.pI)(o.notices,(e=>((0,a.uX)(),(0,a.CE)("div",{class:"notice-item",key:e?.mtip_guide_no},[(0,a.Lk)("div",K,[(0,a.Lk)("div",U,[(0,a.Lk)("div",P,(0,v.v_)(e?.mtip_guide_content),1),e.mtip_guide_file?((0,a.uX)(),(0,a.CE)("div",G,[(0,a.Lk)("a",{onClick:(0,D.D$)((t=>n.downloadFile(e)),["prevent"]),href:"#",class:"file-download-link",style:{color:"#ffca05","margin-right":"2px","font-family":"'KB_C2', sans-serif","font-size":"17px"}}," 상세보기 ",8,R)])):(0,a.Q3)("",!0)])])])))),128))])])}i(4603),i(7566),i(8721);var $=i(7682),W={name:"GuideCom",data(){return{notices:[]}},computed:{...(0,k.L8)("login",["getLoginInfo"]),loginInfo(){const e=this.getLoginInfo;return e?{...e,position_no:e.position_no||"",level_no:e.level_no||"",job_no:e.job_no||"",dp_no:e.dp_no||""}:null}},methods:{handleMouseDown(e){e.target.style.color="#f4ada4"},handleMouseUp(e){e.target.style.color="#f4ada4"},async fetchNotices(){try{console.log("m-tip 게시글 db 접근");const e=await $.A.get("/mtip/list");console.log("m-tip 게시글 db에서 가지고 온 데이터:",e.data),this.notices=e.data.filter((e=>e&&e.mtip_guide_no)),console.log("Filtered notices:",this.notices)}catch(e){console.error("Error fetching notices:",e)}},async downloadFile(e){console.log("downloadFile 함수가 호출되었습니다.");try{console.log("다운로드 요청 URL:",`/notice/downloadGuide/${e.mtip_guide_file}`);const t=await $.A.get(`/notice/downloadGuide/${e.mtip_guide_file}`,{responseType:"blob"});console.log("서버 응답:",t);const i=new Blob([t.data],{type:t.headers["content-type"]}),a=URL.createObjectURL(i),s=document.createElement("a");s.href=a,s.download=this.getDisplayFileName(e.mtip_guide_file),s.click(),URL.revokeObjectURL(a)}catch(t){console.error("파일 다운로드 중 오류가 발생했습니다.",t.response?t.response.data:t.message),t.response&&(console.error("서버 응답 상태 코드:",t.response.status),console.error("서버 응답 데이터:",t.response.data))}},getDisplayFileName(e){return e.split("/").pop()}},created(){this.fetchNotices()}};const Q=(0,y.A)(W,[["render",S],["__scopeId","data-v-60c1d504"]]);var z=Q;const H=e=>((0,a.Qi)("data-v-12cb4301"),e=e(),(0,a.jt)(),e),O={class:"cards",style:{"margin-top":"20px",padding:"20px"}},Y=H((()=>(0,a.Lk)("div",{class:"m-tip-header"},[(0,a.Lk)("h2",{class:"m-tip-title fw-bold"},"M-Tip"),(0,a.Lk)("a",{href:"/M_TipListView",class:"view-all"},"전체보기")],-1))),q={class:"notice-list"},J={class:"notice-mile"},Z={class:"notice-title"},ee=H((()=>(0,a.Lk)("span",{class:"title-icon"},"new",-1))),te={class:"notice-date",style:{"margin-left":"auto","font-size":"14px","font-family":"'KB_C2', sans-serif","margin-right":"0"}},ie={key:1,class:"no-notice"};function ae(e,t,i,s,o,n){return(0,a.uX)(),(0,a.CE)("div",O,[Y,(0,a.Lk)("div",q,[((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(o.mileageCategories,(e=>((0,a.uX)(),(0,a.CE)("div",{key:e,class:"notice-item"},[(0,a.Lk)("span",J,(0,v.v_)(e),1),n.latestNotices[e]?((0,a.uX)(),(0,a.CE)(a.FK,{key:0},[(0,a.Lk)("span",Z,[(0,a.eW)((0,v.v_)(n.truncateTitle(n.latestNotices[e].mtip_board_title))+" ",1),ee]),(0,a.Lk)("span",te,(0,v.v_)(n.formatDate(n.latestNotices[e].mtip_board_date)),1)],64)):((0,a.uX)(),(0,a.CE)("span",ie,"게시글이 없습니다."))])))),128))])])}i(4114);var se={name:"M-TipCom",data(){return{notices:[],paginatedNotices:[],mileageCategories:["HRD","Monthly Best","Monthly Base","HotTip","BEST PG","BEST Branch","소비자 지원","리그 테이블","기타"]}},computed:{latestNotices(){const e={};return this.mileageCategories.forEach((t=>{const i=this.paginatedNotices.find((e=>e.mile_name===t||"기타"===t&&(null===e.mile_name||"기타"===e.mile_name)));i&&(e[t]=i)})),e}},methods:{truncateTitle(e){return e.length>25?e.slice(0,25)+"....":e},formatDate(e){const t=new Date(e);return t.toLocaleDateString()},async fetchNotices(){console.log("Mtiplist DB 메소드로 이동 ~ ");try{const e=await $.A.get("/mtip/Mtiplist");this.notices=e.data,this.paginatedNotices=this.notices,console.log("Mtiplist 서버에서 가지고 온 값 :",this.notices)}catch(e){console.error("Error fetching notices:",e.response?e.response.data:e.message)}},async handleNoticeClick(e){if(console.log("notice:",e),!this.isProcessing){this.isProcessing=!0;try{console.log("게시글 상세보기+조회수 메소드 도달",e),await $.A.post(`/notice/increment-views/${e.notice_board_no}`);const t=await $.A.get(`/notice/details/${e.notice_board_no}`);console.log("게시글 상세보기 서버에서 가지고 온 데이터:",t);const i=t.data;console.log("Fetched notice details:",i),e.notice_board_hit+=1;const a={...i,mile_no:i.mile_no,mile_name:i.mile_name,file:i.file||null,notice_board_hit:e.notice_board_hit};console.log("Navigating to noticeDetailView with notice:",{id:e.notice_board_no,notice:a}),this.$router.push({name:"noticeDetailView",params:{id:e.notice_board_no,notice:a}})}catch(t){console.error("Error fetching notice details:",t.response?t.response.data:t.message)}finally{this.isProcessing=!1}}}},mounted(){this.fetchNotices()}};const oe=(0,y.A)(se,[["render",ae],["__scopeId","data-v-12cb4301"]]);var ne=oe;const ce=e=>((0,a.Qi)("data-v-44ce80d6"),e=e(),(0,a.jt)(),e),le={class:"cards",style:{"margin-top":"20px",padding:"20px"}},de=ce((()=>(0,a.Lk)("div",{class:"m-tip-header"},[(0,a.Lk)("h2",{class:"m-tip-title fw-bold"},"Best M-Tip"),(0,a.Lk)("a",{href:"/M_TipBestView",class:"view-all"},"전체보기")],-1))),re={class:"notice-list"},pe={class:"notice-mile"},me={class:"notice-title"},ge=ce((()=>(0,a.Lk)("i",{class:"bi bi-heart-fill title-icon"},null,-1))),ve={class:"notice-date"};function ue(e,t,i,s,o,n){return(0,a.uX)(),(0,a.CE)("div",le,[de,(0,a.Lk)("div",re,[((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(o.bestNotices,(e=>((0,a.uX)(),(0,a.CE)("div",{key:e.mtip_board_no,class:"notice-item"},[(0,a.Lk)("span",pe,(0,v.v_)(e.mile_name||"기타"),1),(0,a.Lk)("span",me,[(0,a.eW)((0,v.v_)(n.truncateTitle(e.mtip_board_title))+" ",1),ge]),(0,a.Lk)("span",ve,(0,v.v_)(n.formatDate(e.mtip_board_date)),1)])))),128))])])}var he={name:"M-TipCom",data(){return{bestNotices:[]}},methods:{truncateTitle(e){return e.length>25?e.slice(0,25)+"....":e},formatDate(e){const t=new Date(e);return t.toLocaleDateString()},async fetchBestNotices(){console.log("Mtiplist DB 메소드로 이동 ~ ");try{const e=await $.A.get("/mtip/bestMtiplist");this.bestNotices=e.data.slice(0,9),console.log("Best Mtiplist 서버에서 가지고 온 값 :",this.bestNotices)}catch(e){console.error("Error fetching best notices:",e.response?e.response.data:e.message)}}},mounted(){this.fetchBestNotices()}};const fe=(0,y.A)(he,[["render",ue],["__scopeId","data-v-44ce80d6"]]);var _e=fe,be={name:"M_TipMainView",components:{Profile:C,Banner:I,Guide:z,MTip:ne,BestMTip:_e}};const ke=(0,y.A)(be,[["render",g],["__scopeId","data-v-1a8e32a3"]]);var we=ke},2667:function(e,t,i){e.exports=i.p+"media/M-Tip.a7626c21.mp4"}}]);
//# sourceMappingURL=824.6de07399.js.map
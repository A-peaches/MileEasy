"use strict";(self["webpackChunkmile"]=self["webpackChunkmile"]||[]).push([[1794],{9413:function(e,t,n){n.r(t),n.d(t,{default:function(){return A}});var i=n(641),l=n(33),s=n(3751);const o=(0,i.Lk)("h2",{class:"bold-x-lg my-5",style:{"font-family":"KB_C3"}},"마일리지 멘트",-1),m={style:{padding:"0 5%"}},a={class:"p-4 mt-5"},c=(0,i.Lk)("h3",{class:"lg p-3",style:{"text-align":"left","font-family":"KB_C2"}},"마일리지 항목",-1),d={class:"p-2"},h={class:"input-gray p-3",style:{"text-align":"left"}},r={class:"lg2",style:{width:"100%","text-align":"left"}},g={class:"p-4"},f={class:"d-flex justify-content-between align-items-center"},u=(0,i.Lk)("h3",{class:"lg p-3",style:{"text-align":"left","font-family":"KB_C2"}},"추천 멘트",-1),p=(0,i.Lk)("span",{class:"lg2 mr-5 brown",style:{"text-align":"right"}},[(0,i.Lk)("i",{class:"bi bi-plus-lg"}),(0,i.eW)(" 추가하기")],-1),k=[p],w={class:"input-gray p-3",style:{width:"95%","text-align":"left"}},R=["onUpdate:modelValue"],C=["onClick"],_=(0,i.Lk)("span",{class:"lg brown"},[(0,i.Lk)("i",{class:"bi bi-dash-lg"})],-1),y=[_],L={style:{"padding-top":"10%"}};function b(e,t,n,p,_,b){return(0,i.uX)(),(0,i.CE)("div",{class:"cards page-back mx-auto",style:(0,l.Tr)({height:b.computedHeight})},[o,(0,i.Lk)("div",m,[(0,i.Lk)("div",a,[c,(0,i.Lk)("div",d,[(0,i.Lk)("div",h,[(0,i.Lk)("span",r,(0,l.v_)(_.mile_name)+" 마일리지",1)])])]),(0,i.Lk)("div",g,[(0,i.Lk)("div",f,[u,(0,i.Lk)("button",{onClick:t[0]||(t[0]=(...e)=>b.addComment&&b.addComment(...e))},k)]),((0,i.uX)(!0),(0,i.CE)(i.FK,null,(0,i.pI)(_.mileRecommands,((e,t)=>((0,i.uX)(),(0,i.CE)("div",{key:t,class:"p-2 d-flex justify-content-between align-items-center"},[(0,i.Lk)("div",w,[(0,i.bo)((0,i.Lk)("input",{"onUpdate:modelValue":t=>e.mile_mention=t,class:"lg2",placeholder:"추천 멘트를 입력하세요",style:{"text-align":"left",width:"100%"}},null,8,R),[[s.Jo,e.mile_mention]])]),(0,i.Lk)("button",{onClick:e=>b.deleteComment(t)},y,8,C)])))),128))])]),(0,i.Lk)("div",L,[(0,i.Lk)("button",{onClick:t[1]||(t[1]=(...e)=>b.addCommentAction&&b.addCommentAction(...e)),class:"btn-green",style:{width:"8vw",height:"3vw","font-size":"1.2vw","font-family":"KB_C2"}},"등록")])],4)}n(4114);var v=n(6278),I={name:"CommentMieageeAdminView",data(){return{mile_no:"",mile_name:"",baseHeight:80,increment:10,mileRecommands:[]}},computed:{...(0,v.L8)("mile",["getMileInfo"]),...(0,v.L8)("login",["getLoginInfo"]),...(0,v.L8)("mileRecommand",["getMileRecommandInfo"]),loginInfo(){return this.getLoginInfo},mileInfo(){return this.getMileInfo},computedHeight(){return`${this.baseHeight+this.mileRecommands.length*this.increment}vh`},mileRecommandInfo(){return this.getMileRecommandInfo}},methods:{...(0,v.i0)("mile",["fetchMileInfo"]),...(0,v.i0)("mileRecommand",["getMileRecommand","updateRecommands","addRecommands","deleteRecommands"]),addComment(){const e={mile_mention:"",mile_no:this.mileRecommands.length>0?this.mileRecommands[0].mile_no:null,mile_link:this.mileRecommands.length>0?this.mileRecommands[0].mile_link:null,mile_recommand_no:null};this.mileRecommands.push(e)},async deleteComment(e){const t=await this.showAlertConfirm("추천멘트를 삭제하시겠습니까?","warning");if(t){const t=this.mileRecommands[e];if(t.mile_recommand_no){const n=await this.deleteRecommands(t);n&&n.data.success?(this.mileRecommands.splice(e,1),console.log("삭제 완료")):console.log("삭제 실패")}else this.mileRecommands.splice(e,1)}else console.log("삭제 취소")},async addCommentAction(){if(null!=this.mileRecommands){for(const e of this.mileRecommands)e.mile_recommand_no?await this.updateRecommands(e):await this.addRecommands(e);this.showAlert("추천 멘트가 등록되었습니다","success","#")}else this.showAlert("추천 멘트 등록이 실패했습니다","error","#")},showAlert(e,t,n){this.$swal({title:e,icon:t,scrollbarPadding:!1}).then((e=>{e.isConfirmed&&("#"==n?location.reload():this.$router.push(n))}))},showAlertConfirm(e,t){return this.$swal({title:e,icon:t,showCancelButton:!0,confirmButtonText:"확인",cancelButtonText:"취소",scrollbarPadding:!1}).then((e=>e.isConfirmed))}},async created(){const e=this.loginInfo?this.loginInfo.user_no:null;if(e){await this.fetchMileInfo(e);const t=this.getMileInfo;t?this.mile_name=t.mile_no:console.error("마일리지 이름을 가져올 수 없습니다.")}else console.error("user_no이 유효하지 않습니다.");const t=this.loginInfo?this.loginInfo.mile_no:null;if(this.mile_no=t,t){await this.getMileRecommand(t);const e=this.getMileRecommandInfo;e?this.mileRecommands=e:console.error("추천멘트를 가져올 수 없습니다.")}}},x=n(6262);const M=(0,x.A)(I,[["render",b]]);var A=M}}]);
//# sourceMappingURL=1794.177b4fef.js.map
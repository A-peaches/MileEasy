"use strict";(self["webpackChunkmile"]=self["webpackChunkmile"]||[]).push([[6343],{6343:function(t,e,o){o.r(e),o.d(e,{default:function(){return en}});var n=o(641),r=o(33);const i=t=>((0,n.Qi)("data-v-46617832"),t=t(),(0,n.jt)(),t),s={class:"cards page-back mx-auto",style:{color:"#4b4a4a"}},a={class:"bold-x-lg mt-5 mb-5",style:{"font-family":"KB_C3"}},l={class:"text-end mb-4 mr-3"},d={key:0,class:"text-center",style:{display:"flex","justify-content":"center","align-items":"center",height:"300px"}},c=i((()=>(0,n.Lk)("h4",{class:"text-center"},"조회한 이력이 없습니다.",-1))),h=[c],u={key:1},f={class:"row"},y={class:"col-md-3 mb-4"},p={class:"card h-100 shadow-sm fade-in"},g={class:"card-body"},x=i((()=>(0,n.Lk)("h5",{class:"card-title text-goal",style:{"font-size":"20pt"}}," 전체 순위 ",-1))),b=i((()=>(0,n.Lk)("hr",null,null,-1))),m={class:"mt-4",style:{"font-size":"35pt","font-family":"'KB_C1'","font-weight":"600"}},v=i((()=>(0,n.Lk)("span",{class:"fs-4"},"상위",-1))),w={class:"addInfo"},k={class:"col-md mb-4"},C={class:"card h-100 shadow-sm fade-in"},M={class:"card-body card-ml"},S=i((()=>(0,n.Lk)("h5",{class:"text-primary text-start",style:{"font-size":"20pt"}}," AI 종합 분석 ",-1))),P=i((()=>(0,n.Lk)("p",{class:"text-start addInfo"}," * 마일이지 AI가 예측한 마일리지 추이와 점수를 토대로 앞으로의 마일리지 취득 전략을 제안해드립니다. ",-1))),A={class:"card-gray"},I={class:"row d-flex"},_={class:"col-md-5 mb-4"},j={class:"card shadow-sm fade-in"},D={key:0,class:"text-center"},T=i((()=>(0,n.Lk)("div",{class:"card-body"},[(0,n.Lk)("canvas",{id:"myChart1",style:{height:"35vh"}})],-1))),L=[T],Y={class:"col-md mb-4"},R={class:"card shadow-sm fade-in"},O={class:"card-body card-ml"},X=i((()=>(0,n.Lk)("h5",{class:"text-gray text-start"},"순위 분석",-1))),E={class:"card-gray"},W=i((()=>(0,n.Lk)("h5",{class:"text-gray text-start mt-4"},"1등 추격 전략 🎯",-1))),z={class:"card-gray",style:{"text-align":"start"}},B={class:"row d-flex"},H={class:"col-md mb-4"},$={class:"card shadow-sm fade-in"},N={class:"card-body card-ml"},V=i((()=>(0,n.Lk)("h5",{class:"text-gray text-start"},"마일리지별 분석",-1))),F=i((()=>(0,n.Lk)("p",{class:"text-start addInfo"}," * 마일이지가 사용자의 포지션에 따라 분석한 결과로, 마일리지 가중치 및 연간 최대 한도를 고려하여 전략과 개선 사항을 제안해드립니다. ",-1))),q={class:"card-gray"},J=i((()=>(0,n.Lk)("div",{class:"col-md-5 mb-4"},[(0,n.Lk)("div",{class:"card shadow-sm fade-in"},[(0,n.Lk)("div",{class:"card-body"},[(0,n.Lk)("canvas",{id:"myChart2",style:{height:"30vh"}})])])],-1))),Q=(0,n.Fv)('<div class="row" data-v-46617832><div class="col-md" data-v-46617832><div class="card shadow-sm mb-4 fade-in" style="background-color:#f5f5f5;border:#f5f5f5;" data-v-46617832><div class="card-body text-start card-ml" data-v-46617832><h5 class="text-emphasis text-start" data-v-46617832><i class="bi bi-info-circle-fill" data-v-46617832></i> 유의 사항 </h5><span class="ml-5" data-v-46617832> 본 리포트는 마일이지 플랫폼에 축척된 데이터를 학습한 AI 모델의 예측에 기반하고 있습니다. <br data-v-46617832></span><span class="ml-5" data-v-46617832> 본 리포트는 마일리지 관리를 위한 참고 목적으로 활용할 수 있도록 제공되며, 증빙 등의 다른 목적으로는 사용할 수 없습니다. </span></div></div></div></div>',1);function U(t,e,o,i,c,T){return(0,n.uX)(),(0,n.CE)("div",s,[(0,n.Lk)("h2",a,(0,r.v_)(this.loginInfo.user_name)+"님의 AI 리포트 ",1),(0,n.Lk)("div",l,[(0,n.Lk)("button",{class:"btn-analysis",onClick:e[0]||(e[0]=(...t)=>T.analysis&&T.analysis(...t))},"AI 맞춤형 분석하기")]),T.all?((0,n.uX)(),(0,n.CE)("div",u,[(0,n.Lk)("div",f,[(0,n.Lk)("div",y,[(0,n.Lk)("div",p,[(0,n.Lk)("div",g,[x,b,(0,n.Lk)("p",m,[v,(0,n.eW)(" "+(0,r.v_)(T.myRank)+"% ",1)]),(0,n.Lk)("span",w,"( 순위분석 기준일 : "+(0,r.v_)(T.dateAi)+" )",1)])])]),(0,n.Lk)("div",k,[(0,n.Lk)("div",C,[(0,n.Lk)("div",M,[S,P,(0,n.Lk)("div",A,[(0,n.Lk)("span",null,(0,r.v_)(T.all),1)])])])])]),(0,n.Lk)("div",I,[(0,n.Lk)("div",_,[(0,n.Lk)("div",j,[T.successYN?((0,n.uX)(),(0,n.CE)("div",D,L)):(0,n.Q3)("",!0)])]),(0,n.Lk)("div",Y,[(0,n.Lk)("div",R,[(0,n.Lk)("div",O,[X,(0,n.Lk)("div",E,[(0,n.Lk)("span",null,(0,r.v_)(T.rank),1)]),W,(0,n.Lk)("div",z,[(0,n.Lk)("span",null,(0,r.v_)(T.catchTop),1)])])])])]),(0,n.Lk)("div",B,[(0,n.Lk)("div",H,[(0,n.Lk)("div",$,[(0,n.Lk)("div",N,[V,F,(0,n.Lk)("div",q,[(0,n.Lk)("span",null,(0,r.v_)(T.mile),1)])])])]),J]),Q])):((0,n.uX)(),(0,n.CE)("div",d,h))])}var G=o(6278),K=o(7154),Z=o(6118),tt=o(1014);
/*!
* chartjs-plugin-annotation v3.0.1
* https://www.chartjs.org/chartjs-plugin-annotation/index
 * (c) 2023 chartjs-plugin-annotation Contributors
 * Released under the MIT License
 */
const et={modes:{point(t,e){return it(t,e,{intersect:!0})},nearest(t,e,o){return st(t,e,o)},x(t,e,o){return it(t,e,{intersect:o.intersect,axis:"x"})},y(t,e,o){return it(t,e,{intersect:o.intersect,axis:"y"})}}};function ot(t,e,o){const n=et.modes[o.mode]||et.modes.nearest;return n(t,e,o)}function nt(t,e,o){return"x"!==o&&"y"!==o?t.inRange(e.x,e.y,"x",!0)||t.inRange(e.x,e.y,"y",!0):t.inRange(e.x,e.y,o,!0)}function rt(t,e,o){return"x"===o?{x:t.x,y:e.y}:"y"===o?{x:e.x,y:t.y}:e}function it(t,e,o){return t.visibleElements.filter((t=>o.intersect?t.inRange(e.x,e.y):nt(t,e,o.axis)))}function st(t,e,o){let n=Number.POSITIVE_INFINITY;return it(t,e,o).reduce(((t,r)=>{const i=r.getCenterPoint(),s=rt(e,i,o.axis),a=(0,tt.aE)(e,s);return a<n?(t=[r],n=a):a===n&&t.push(r),t}),[]).sort(((t,e)=>t._index-e._index)).slice(0,1)}const at=(t,e)=>e>t||t.length>e.length&&t.slice(0,e.length)===e,lt=.001,dt=(t,e,o)=>Math.min(o,Math.max(e,t));function ct(t,e,o){for(const n of Object.keys(t))t[n]=dt(t[n],e,o);return t}function ht(t,e,o,n){if(!t||!e||o<=0)return!1;const r=n/2;return Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2)<=Math.pow(o+r,2)}function ut(t,{x:e,y:o,x2:n,y2:r},i,s){const a=s/2,l=t.x>=e-a-lt&&t.x<=n+a+lt,d=t.y>=o-a-lt&&t.y<=r+a+lt;return"x"===i?l:("y"===i||l)&&d}function ft(t,e){const{centerX:o,centerY:n}=t.getProps(["centerX","centerY"],e);return{x:o,y:n}}function yt(t,e,o,n=!0){const r=o.split(".");let i=0;for(const s of e.split(".")){const a=r[i++];if(parseInt(s,10)<parseInt(a,10))break;if(at(a,s)){if(n)throw new Error(`${t} v${o} is not supported. v${e} or newer is required.`);return!1}}return!0}const pt=t=>"string"===typeof t&&t.endsWith("%"),gt=t=>parseFloat(t)/100,xt=t=>dt(gt(t),0,1),bt=(t,e)=>({x:t,y:e,x2:t,y2:e,width:0,height:0}),mt={box:t=>bt(t.centerX,t.centerY),ellipse:t=>({centerX:t.centerX,centerY:t.centerX,radius:0,width:0,height:0}),label:t=>bt(t.centerX,t.centerY),line:t=>bt(t.x,t.y),point:t=>({centerX:t.centerX,centerY:t.centerY,radius:0,width:0,height:0}),polygon:t=>bt(t.centerX,t.centerY)};function vt(t,e){return"start"===e?0:"end"===e?t:pt(e)?xt(e)*t:t/2}function wt(t,e,o=!0){return"number"===typeof e?e:pt(e)?(o?xt(e):gt(e))*t:t}function kt(t,e){const{x:o,width:n}=t,r=e.textAlign;return"center"===r?o+n/2:"end"===r||"right"===r?o+n:o}function Ct(t,e="center"){return(0,tt.i)(t)?{x:(0,tt.v)(t.x,e),y:(0,tt.v)(t.y,e)}:(t=(0,tt.v)(t,e),{x:t,y:t})}function Mt(t){return t&&((0,tt.h)(t.xValue)||(0,tt.h)(t.yValue))}function St(t,e,o){const n=o.init;if(n)return!0===n?At(e,o):It(t,e,o)}function Pt(t,e,o){let n=!1;return e.forEach((e=>{(0,tt.a7)(t[e])?(n=!0,o[e]=t[e]):(0,tt.h)(o[e])&&delete o[e]})),n}function At(t,e){const o=e.type||"line";return mt[o](t)}function It(t,e,o){const n=(0,tt.Q)(o.init,[{chart:t,properties:e,options:o}]);return!0===n?At(e,o):(0,tt.i)(n)?n:void 0}const _t=new Map,jt=t=>isNaN(t)||t<=0,Dt=t=>t.reduce((function(t,e){return t+=e.string,t}),"");function Tt(t){if(t&&"object"===typeof t){const e=t.toString();return"[object HTMLImageElement]"===e||"[object HTMLCanvasElement]"===e}}function Lt(t,{x:e,y:o},n){n&&(t.translate(e,o),t.rotate((0,tt.t)(n)),t.translate(-e,-o))}function Yt(t,e){if(e&&e.borderWidth)return t.lineCap=e.borderCapStyle,t.setLineDash(e.borderDash),t.lineDashOffset=e.borderDashOffset,t.lineJoin=e.borderJoinStyle,t.lineWidth=e.borderWidth,t.strokeStyle=e.borderColor,!0}function Rt(t,e){t.shadowColor=e.backgroundShadowColor,t.shadowBlur=e.shadowBlur,t.shadowOffsetX=e.shadowOffsetX,t.shadowOffsetY=e.shadowOffsetY}function Ot(t,e){const o=e.content;if(Tt(o))return{width:wt(o.width,e.width),height:wt(o.height,e.height)};const n=e.font,r=(0,tt.b)(n)?n.map((t=>(0,tt.a0)(t))):[(0,tt.a0)(n)],i=e.textStrokeWidth,s=(0,tt.b)(o)?o:[o],a=s.join()+Dt(r)+i+(t._measureText?"-spriting":"");return _t.has(a)||_t.set(a,Ht(t,s,r,i)),_t.get(a)}function Xt(t,e,o){const{x:n,y:r,width:i,height:s}=e;t.save(),Rt(t,o);const a=Yt(t,o);t.fillStyle=o.backgroundColor,t.beginPath(),(0,tt.au)(t,{x:n,y:r,w:i,h:s,radius:ct((0,tt.aw)(o.borderRadius),0,Math.min(i,s)/2)}),t.closePath(),t.fill(),a&&(t.shadowColor=o.borderShadowColor,t.stroke()),t.restore()}function Et(t,e,o){const n=o.content;if(Tt(n))return t.save(),t.globalAlpha=Vt(o.opacity,n.style.opacity),t.drawImage(n,e.x,e.y,e.width,e.height),void t.restore();const r=(0,tt.b)(n)?n:[n],i=o.font,s=(0,tt.b)(i)?i.map((t=>(0,tt.a0)(t))):[(0,tt.a0)(i)],a=o.color,l=(0,tt.b)(a)?a:[a],d=kt(e,o),c=e.y+o.textStrokeWidth/2;t.save(),t.textBaseline="middle",t.textAlign=o.textAlign,Wt(t,o)&&$t(t,{x:d,y:c},r,s),Nt(t,{x:d,y:c},r,{fonts:s,colors:l}),t.restore()}function Wt(t,e){if(e.textStrokeWidth>0)return t.lineJoin="round",t.miterLimit=2,t.lineWidth=e.textStrokeWidth,t.strokeStyle=e.textStrokeColor,!0}function zt(t,e,o,n){const{radius:r,options:i}=e,s=i.pointStyle,a=i.rotation;let l=(a||0)*tt.b3;if(Tt(s))return t.save(),t.translate(o,n),t.rotate(l),t.drawImage(s,-s.width/2,-s.height/2,s.width,s.height),void t.restore();jt(r)||Bt(t,{x:o,y:n,radius:r,rotation:a,style:s,rad:l})}function Bt(t,{x:e,y:o,radius:n,rotation:r,style:i,rad:s}){let a,l,d,c;switch(t.beginPath(),i){default:t.arc(e,o,n,0,tt.T),t.closePath();break;case"triangle":t.moveTo(e+Math.sin(s)*n,o-Math.cos(s)*n),s+=tt.b5,t.lineTo(e+Math.sin(s)*n,o-Math.cos(s)*n),s+=tt.b5,t.lineTo(e+Math.sin(s)*n,o-Math.cos(s)*n),t.closePath();break;case"rectRounded":c=.516*n,d=n-c,a=Math.cos(s+tt.b4)*d,l=Math.sin(s+tt.b4)*d,t.arc(e-a,o-l,c,s-tt.P,s-tt.H),t.arc(e+l,o-a,c,s-tt.H,s),t.arc(e+a,o+l,c,s,s+tt.H),t.arc(e-l,o+a,c,s+tt.H,s+tt.P),t.closePath();break;case"rect":if(!r){d=Math.SQRT1_2*n,t.rect(e-d,o-d,2*d,2*d);break}s+=tt.b4;case"rectRot":a=Math.cos(s)*n,l=Math.sin(s)*n,t.moveTo(e-a,o-l),t.lineTo(e+l,o-a),t.lineTo(e+a,o+l),t.lineTo(e-l,o+a),t.closePath();break;case"crossRot":s+=tt.b4;case"cross":a=Math.cos(s)*n,l=Math.sin(s)*n,t.moveTo(e-a,o-l),t.lineTo(e+a,o+l),t.moveTo(e+l,o-a),t.lineTo(e-l,o+a);break;case"star":a=Math.cos(s)*n,l=Math.sin(s)*n,t.moveTo(e-a,o-l),t.lineTo(e+a,o+l),t.moveTo(e+l,o-a),t.lineTo(e-l,o+a),s+=tt.b4,a=Math.cos(s)*n,l=Math.sin(s)*n,t.moveTo(e-a,o-l),t.lineTo(e+a,o+l),t.moveTo(e+l,o-a),t.lineTo(e-l,o+a);break;case"line":a=Math.cos(s)*n,l=Math.sin(s)*n,t.moveTo(e-a,o-l),t.lineTo(e+a,o+l);break;case"dash":t.moveTo(e,o),t.lineTo(e+Math.cos(s)*n,o+Math.sin(s)*n);break}t.fill()}function Ht(t,e,o,n){t.save();const r=e.length;let i=0,s=n;for(let a=0;a<r;a++){const r=o[Math.min(a,o.length-1)];t.font=r.string;const l=e[a];i=Math.max(i,t.measureText(l).width+n),s+=r.lineHeight}return t.restore(),{width:i,height:s}}function $t(t,{x:e,y:o},n,r){t.beginPath();let i=0;n.forEach((function(n,s){const a=r[Math.min(s,r.length-1)],l=a.lineHeight;t.font=a.string,t.strokeText(n,e,o+l/2+i),i+=l})),t.stroke()}function Nt(t,{x:e,y:o},n,{fonts:r,colors:i}){let s=0;n.forEach((function(n,a){const l=i[Math.min(a,i.length-1)],d=r[Math.min(a,r.length-1)],c=d.lineHeight;t.beginPath(),t.font=d.string,t.fillStyle=l,t.fillText(n,e,o+c/2+s),s+=c,t.fill()}))}function Vt(t,e){const o=(0,tt.x)(t)?t:e;return(0,tt.x)(o)?dt(o,0,1):1}const Ft={xScaleID:{min:"xMin",max:"xMax",start:"left",end:"right",startProp:"x",endProp:"x2"},yScaleID:{min:"yMin",max:"yMax",start:"bottom",end:"top",startProp:"y",endProp:"y2"}};function qt(t,e,o){return e="number"===typeof e?e:t.parse(e),(0,tt.g)(e)?t.getPixelForValue(e):o}function Jt(t,e,o){const n=e[o];if(n||"scaleID"===o)return n;const r=o.charAt(0),i=Object.values(t).filter((t=>t.axis&&t.axis===r));return i.length?i[0].id:r}function Qt(t,e){if(t){const o=t.options.reverse,n=qt(t,e.min,o?e.end:e.start),r=qt(t,e.max,o?e.start:e.end);return{start:n,end:r}}}function Ut(t,e){const{chartArea:o,scales:n}=t,r=n[Jt(n,e,"xScaleID")],i=n[Jt(n,e,"yScaleID")];let s=o.width/2,a=o.height/2;return r&&(s=qt(r,e.xValue,r.left+r.width/2)),i&&(a=qt(i,e.yValue,i.top+i.height/2)),{x:s,y:a}}function Gt(t,e){const o=t.scales,n=o[Jt(o,e,"xScaleID")],r=o[Jt(o,e,"yScaleID")];if(!n&&!r)return{};let{left:i,right:s}=n||t.chartArea,{top:a,bottom:l}=r||t.chartArea;const d=oe(n,{min:e.xMin,max:e.xMax,start:i,end:s});i=d.start,s=d.end;const c=oe(r,{min:e.yMin,max:e.yMax,start:l,end:a});return a=c.start,l=c.end,{x:i,y:a,x2:s,y2:l,width:s-i,height:l-a,centerX:i+(s-i)/2,centerY:a+(l-a)/2}}function Kt(t,e){if(!Mt(e)){const o=Gt(t,e);let n=e.radius;n&&!isNaN(n)||(n=Math.min(o.width,o.height)/2,e.radius=n);const r=2*n,i=o.centerX+e.xAdjust,s=o.centerY+e.yAdjust;return{x:i-n,y:s-n,x2:i+n,y2:s+n,centerX:i,centerY:s,width:r,height:r,radius:n}}return ee(t,e)}function Zt(t,e){const{scales:o,chartArea:n}=t,r=o[e.scaleID],i={x:n.left,y:n.top,x2:n.right,y2:n.bottom};return r?ne(r,i,e):re(o,i,e),i}function te(t,e){const o=Gt(t,e);return o.initProperties=St(t,o,e),o.elements=[{type:"label",optionScope:"label",properties:le(t,o,e),initProperties:o.initProperties}],o}function ee(t,e){const o=Ut(t,e),n=2*e.radius;return{x:o.x-e.radius+e.xAdjust,y:o.y-e.radius+e.yAdjust,x2:o.x+e.radius+e.xAdjust,y2:o.y+e.radius+e.yAdjust,centerX:o.x+e.xAdjust,centerY:o.y+e.yAdjust,radius:e.radius,width:n,height:n}}function oe(t,e){const o=Qt(t,e)||e;return{start:Math.min(o.start,o.end),end:Math.max(o.start,o.end)}}function ne(t,e,o){const n=qt(t,o.value,NaN),r=qt(t,o.endValue,n);t.isHorizontal()?(e.x=n,e.x2=r):(e.y=n,e.y2=r)}function re(t,e,o){for(const n of Object.keys(Ft)){const r=t[Jt(t,o,n)];if(r){const{min:t,max:i,start:s,end:a,startProp:l,endProp:d}=Ft[n],c=Qt(r,{min:o[t],max:o[i],start:r[s],end:r[a]});e[l]=c.start,e[d]=c.end}}}function ie({properties:t,options:e},o,n,r){const{x:i,x2:s,width:a}=t;return ae({start:i,end:s,size:a,borderWidth:e.borderWidth},{position:n.x,padding:{start:r.left,end:r.right},adjust:e.label.xAdjust,size:o.width})}function se({properties:t,options:e},o,n,r){const{y:i,y2:s,height:a}=t;return ae({start:i,end:s,size:a,borderWidth:e.borderWidth},{position:n.y,padding:{start:r.top,end:r.bottom},adjust:e.label.yAdjust,size:o.height})}function ae(t,e){const{start:o,end:n,borderWidth:r}=t,{position:i,padding:{start:s,end:a},adjust:l}=e,d=n-r-o-s-a-e.size;return o+r/2+l+vt(d,i)}function le(t,e,o){const n=o.label;n.backgroundColor="transparent",n.callout.display=!1;const r=Ct(n.position),i=(0,tt.E)(n.padding),s=Ot(t.ctx,n),a=ie({properties:e,options:o},s,r,i),l=se({properties:e,options:o},s,r,i),d=s.width+i.width,c=s.height+i.height;return{x:a,y:l,x2:a+d,y2:l+c,width:d,height:c,centerX:a+d/2,centerY:l+c/2,rotation:n.rotation}}function de(t,e,o){const n=Math.cos(o),r=Math.sin(o),i=e.x,s=e.y;return{x:i+n*(t.x-i)-r*(t.y-s),y:s+r*(t.x-i)+n*(t.y-s)}}const ce=["enter","leave"],he=ce.concat("click");function ue(t,e,o){e.listened=Pt(o,he,e.listeners),e.moveListened=!1,e._getElements=ot,ce.forEach((t=>{(0,tt.a7)(o[t])&&(e.moveListened=!0)})),e.listened&&e.moveListened||e.annotations.forEach((t=>{!e.listened&&(0,tt.a7)(t.click)&&(e.listened=!0),e.moveListened||ce.forEach((o=>{(0,tt.a7)(t[o])&&(e.listened=!0,e.moveListened=!0)}))}))}function fe(t,e,o){if(t.listened)switch(e.type){case"mousemove":case"mouseout":return ye(t,e,o);case"click":return ge(t,e,o)}}function ye(t,e,o){if(!t.moveListened)return;let n;n="mousemove"===e.type?ot(t,e,o.interaction):[];const r=t.hovered;t.hovered=n;const i={state:t,event:e};let s=pe(i,"leave",r,n);return pe(i,"enter",n,r)||s}function pe({state:t,event:e},o,n,r){let i;for(const s of n)r.indexOf(s)<0&&(i=xe(s.options[o]||t.listeners[o],s,e)||i);return i}function ge(t,e,o){const n=t.listeners,r=ot(t,e,o.interaction);let i;for(const s of r)i=xe(s.options.click||n.click,s,e)||i;return i}function xe(t,e,o){return!0===(0,tt.Q)(t,[e.$context,o])}const be=["afterDraw","beforeDraw"];function me(t,e,o){const n=e.visibleElements;e.hooked=Pt(o,be,e.hooks),e.hooked||n.forEach((t=>{e.hooked||be.forEach((o=>{(0,tt.a7)(t.options[o])&&(e.hooked=!0)}))}))}function ve(t,e,o){if(t.hooked){const n=e.options[o]||t.hooks[o];return(0,tt.Q)(n,[e.$context])}}function we(t,e,o){const n=Ae(t.scales,e,o);let r=Ce(e,n,"min","suggestedMin");r=Ce(e,n,"max","suggestedMax")||r,r&&(0,tt.a7)(e.handleTickRangeOptions)&&e.handleTickRangeOptions()}function ke(t,e){for(const o of t)Se(o,e)}function Ce(t,e,o,n){if((0,tt.g)(e[o])&&!Me(t.options,o,n)){const n=t[o]!==e[o];return t[o]=e[o],n}}function Me(t,e,o){return(0,tt.h)(t[e])||(0,tt.h)(t[o])}function Se(t,e){for(const o of["scaleID","xScaleID","yScaleID"]){const n=Jt(e,t,o);n&&!e[n]&&Pe(t,o)&&console.warn(`No scale found with id '${n}' for annotation '${t.id}'`)}}function Pe(t,e){if("scaleID"===e)return!0;const o=e.charAt(0);for(const n of["Min","Max","Value"])if((0,tt.h)(t[o+n]))return!0;return!1}function Ae(t,e,o){const n=e.axis,r=e.id,i=n+"ScaleID",s={min:(0,tt.v)(e.min,Number.NEGATIVE_INFINITY),max:(0,tt.v)(e.max,Number.POSITIVE_INFINITY)};for(const a of o)a.scaleID===r?Ie(a,e,["value","endValue"],s):Jt(t,a,i)===r&&Ie(a,e,[n+"Min",n+"Max",n+"Value"],s);return s}function Ie(t,e,o,n){for(const r of o){const o=t[r];if((0,tt.h)(o)){const t=e.parse(o);n.min=Math.min(n.min,t),n.max=Math.max(n.max,t)}}}class _e extends Z.Hg{inRange(t,e,o,n){const{x:r,y:i}=de({x:t,y:e},this.getCenterPoint(n),(0,tt.t)(-this.options.rotation));return ut({x:r,y:i},this.getProps(["x","y","x2","y2"],n),o,this.options.borderWidth)}getCenterPoint(t){return ft(this,t)}draw(t){t.save(),Lt(t,this.getCenterPoint(),this.options.rotation),Xt(t,this,this.options),t.restore()}get label(){return this.elements&&this.elements[0]}resolveElementProperties(t,e){return te(t,e)}}_e.id="boxAnnotation",_e.defaults={adjustScaleRange:!0,backgroundShadowColor:"transparent",borderCapStyle:"butt",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",borderRadius:0,borderShadowColor:"transparent",borderWidth:1,display:!0,init:void 0,label:{backgroundColor:"transparent",borderWidth:0,callout:{display:!1},color:"black",content:null,display:!1,drawTime:void 0,font:{family:void 0,lineHeight:void 0,size:void 0,style:void 0,weight:"bold"},height:void 0,opacity:void 0,padding:6,position:"center",rotation:void 0,textAlign:"start",textStrokeColor:void 0,textStrokeWidth:0,width:void 0,xAdjust:0,yAdjust:0,z:void 0},rotation:0,shadowBlur:0,shadowOffsetX:0,shadowOffsetY:0,xMax:void 0,xMin:void 0,xScaleID:void 0,yMax:void 0,yMin:void 0,yScaleID:void 0,z:0},_e.defaultRoutes={borderColor:"color",backgroundColor:"color"},_e.descriptors={label:{_fallback:!0}};const je=["left","bottom","top","right"];class De extends Z.Hg{inRange(t,e,o,n){const{x:r,y:i}=de({x:t,y:e},this.getCenterPoint(n),(0,tt.t)(-this.rotation));return ut({x:r,y:i},this.getProps(["x","y","x2","y2"],n),o,this.options.borderWidth)}getCenterPoint(t){return ft(this,t)}draw(t){const e=this.options,o=!(0,tt.h)(this._visible)||this._visible;e.display&&e.content&&o&&(t.save(),Lt(t,this.getCenterPoint(),this.rotation),Ye(t,this),Xt(t,this,e),Et(t,Be(this),e),t.restore())}resolveElementProperties(t,e){let o;if(Mt(e))o=Ut(t,e);else{const{centerX:n,centerY:r}=Gt(t,e);o={x:n,y:r}}const n=(0,tt.E)(e.padding),r=Ot(t.ctx,e),i=Te(o,r,e,n);return{initProperties:St(t,i,e),pointX:o.x,pointY:o.y,...i,rotation:e.rotation}}}function Te(t,e,o,n){const r=e.width+n.width+o.borderWidth,i=e.height+n.height+o.borderWidth,s=Ct(o.position,"center"),a=Le(t.x,r,o.xAdjust,s.x),l=Le(t.y,i,o.yAdjust,s.y);return{x:a,y:l,x2:a+r,y2:l+i,width:r,height:i,centerX:a+r/2,centerY:l+i/2}}function Le(t,e,o=0,n){return t-vt(e,n)+o}function Ye(t,e){const{pointX:o,pointY:n,options:r}=e,i=r.callout,s=i&&i.display&&We(e,i);if(!s||He(e,i,s))return;t.save(),t.beginPath();const a=Yt(t,i);if(!a)return t.restore();const{separatorStart:l,separatorEnd:d}=Re(e,s),{sideStart:c,sideEnd:h}=Xe(e,s,l);(i.margin>0||0===r.borderWidth)&&(t.moveTo(l.x,l.y),t.lineTo(d.x,d.y)),t.moveTo(c.x,c.y),t.lineTo(h.x,h.y);const u=de({x:o,y:n},e.getCenterPoint(),(0,tt.t)(-e.rotation));t.lineTo(u.x,u.y),t.stroke(),t.restore()}function Re(t,e){const{x:o,y:n,x2:r,y2:i}=t,s=Oe(t,e);let a,l;return"left"===e||"right"===e?(a={x:o+s,y:n},l={x:a.x,y:i}):(a={x:o,y:n+s},l={x:r,y:a.y}),{separatorStart:a,separatorEnd:l}}function Oe(t,e){const{width:o,height:n,options:r}=t,i=r.callout.margin+r.borderWidth/2;return"right"===e?o+i:"bottom"===e?n+i:-i}function Xe(t,e,o){const{y:n,width:r,height:i,options:s}=t,a=s.callout.start,l=Ee(e,s.callout);let d,c;return"left"===e||"right"===e?(d={x:o.x,y:n+wt(i,a)},c={x:d.x+l,y:d.y}):(d={x:o.x+wt(r,a),y:o.y},c={x:d.x,y:d.y+l}),{sideStart:d,sideEnd:c}}function Ee(t,e){const o=e.side;return"left"===t||"top"===t?-o:o}function We(t,e){const o=e.position;return je.includes(o)?o:ze(t,e)}function ze(t,e){const{x:o,y:n,x2:r,y2:i,width:s,height:a,pointX:l,pointY:d,centerX:c,centerY:h,rotation:u}=t,f={x:c,y:h},y=e.start,p=wt(s,y),g=wt(a,y),x=[o,o+p,o+p,r],b=[n+g,i,n,i],m=[];for(let v=0;v<4;v++){const t=de({x:x[v],y:b[v]},f,(0,tt.t)(u));m.push({position:je[v],distance:(0,tt.aE)(t,{x:l,y:d})})}return m.sort(((t,e)=>t.distance-e.distance))[0].position}function Be({x:t,y:e,width:o,height:n,options:r}){const i=r.borderWidth/2,s=(0,tt.E)(r.padding);return{x:t+s.left+i,y:e+s.top+i,width:o-s.left-s.right-r.borderWidth,height:n-s.top-s.bottom-r.borderWidth}}function He(t,e,o){const{pointX:n,pointY:r}=t,i=e.margin;let s=n,a=r;return"left"===o?s+=i:"right"===o?s-=i:"top"===o?a+=i:"bottom"===o&&(a-=i),t.inRange(s,a)}De.id="labelAnnotation",De.defaults={adjustScaleRange:!0,backgroundColor:"transparent",backgroundShadowColor:"transparent",borderCapStyle:"butt",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",borderRadius:0,borderShadowColor:"transparent",borderWidth:0,callout:{borderCapStyle:"butt",borderColor:void 0,borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",borderWidth:1,display:!1,margin:5,position:"auto",side:5,start:"50%"},color:"black",content:null,display:!0,font:{family:void 0,lineHeight:void 0,size:void 0,style:void 0,weight:void 0},height:void 0,init:void 0,opacity:void 0,padding:6,position:"center",rotation:0,shadowBlur:0,shadowOffsetX:0,shadowOffsetY:0,textAlign:"center",textStrokeColor:void 0,textStrokeWidth:0,width:void 0,xAdjust:0,xMax:void 0,xMin:void 0,xScaleID:void 0,xValue:void 0,yAdjust:0,yMax:void 0,yMin:void 0,yScaleID:void 0,yValue:void 0,z:0},De.defaultRoutes={borderColor:"color"};const $e=(t,e,o)=>({x:t.x+o*(e.x-t.x),y:t.y+o*(e.y-t.y)}),Ne=(t,e,o)=>$e(e,o,Math.abs((t-e.y)/(o.y-e.y))).x,Ve=(t,e,o)=>$e(e,o,Math.abs((t-e.x)/(o.x-e.x))).y,Fe=t=>t*t,qe=(t,e,{x:o,y:n,x2:r,y2:i},s)=>"y"===s?{start:Math.min(n,i),end:Math.max(n,i),value:e}:{start:Math.min(o,r),end:Math.max(o,r),value:t},Je=(t,e,o,n)=>(1-n)*(1-n)*t+2*(1-n)*n*e+n*n*o,Qe=(t,e,o,n)=>({x:Je(t.x,e.x,o.x,n),y:Je(t.y,e.y,o.y,n)}),Ue=(t,e,o,n)=>2*(1-n)*(e-t)+2*n*(o-e),Ge=(t,e,o,n)=>-Math.atan2(Ue(t.x,e.x,o.x,n),Ue(t.y,e.y,o.y,n))+.5*tt.P;class Ke extends Z.Hg{inRange(t,e,o,n){const r=this.options.borderWidth/2;if("x"!==o&&"y"!==o){const o={mouseX:t,mouseY:e},{path:i,ctx:s}=this;if(i){Yt(s,this.options);const{chart:r}=this.$context,a=t*r.currentDevicePixelRatio,l=e*r.currentDevicePixelRatio,d=s.isPointInStroke(i,a,l)||io(this,o,n);return s.restore(),d}const a=Fe(r);return ro(this,o,a,n)||io(this,o,n)}return to(this,{mouseX:t,mouseY:e},o,{hBorderWidth:r,useFinalPosition:n})}getCenterPoint(t){return ft(this,t)}draw(t){const{x:e,y:o,x2:n,y2:r,cp:i,options:s}=this;if(t.save(),!Yt(t,s))return t.restore();Rt(t,s);const a=Math.sqrt(Math.pow(n-e,2)+Math.pow(r-o,2));if(s.curve&&i)return vo(t,this,i,a),t.restore();const{startOpts:l,endOpts:d,startAdjust:c,endAdjust:h}=po(this),u=Math.atan2(r-o,n-e);t.translate(e,o),t.rotate(u),t.beginPath(),t.moveTo(0+c,0),t.lineTo(a-h,0),t.shadowColor=s.borderShadowColor,t.stroke(),xo(t,0,c,l),xo(t,a,-h,d),t.restore()}get label(){return this.elements&&this.elements[0]}resolveElementProperties(t,e){const o=Zt(t,e),{x:n,y:r,x2:i,y2:s}=o,a=eo(o,t.chartArea),l=a?no({x:n,y:r},{x:i,y:s},t.chartArea):{x:n,y:r,x2:i,y2:s,width:Math.abs(i-n),height:Math.abs(s-r)};if(l.centerX=(i+n)/2,l.centerY=(s+r)/2,l.initProperties=St(t,l,e),e.curve){const t={x:l.x,y:l.y},o={x:l.x2,y:l.y2};l.cp=bo(l,e,(0,tt.aE)(t,o))}const d=so(t,l,e.label);return d._visible=a,l.elements=[{type:"label",optionScope:"label",properties:d,initProperties:l.initProperties}],l}}Ke.id="lineAnnotation";const Ze={backgroundColor:void 0,backgroundShadowColor:void 0,borderColor:void 0,borderDash:void 0,borderDashOffset:void 0,borderShadowColor:void 0,borderWidth:void 0,display:void 0,fill:void 0,length:void 0,shadowBlur:void 0,shadowOffsetX:void 0,shadowOffsetY:void 0,width:void 0};function to(t,{mouseX:e,mouseY:o},n,{hBorderWidth:r,useFinalPosition:i}){const s=qe(e,o,t.getProps(["x","y","x2","y2"],i),n);return s.value>=s.start-r&&s.value<=s.end+r||io(t,{mouseX:e,mouseY:o},i,n)}function eo({x:t,y:e,x2:o,y2:n},{top:r,right:i,bottom:s,left:a}){return!(t<a&&o<a||t>i&&o>i||e<r&&n<r||e>s&&n>s)}function oo({x:t,y:e},o,{top:n,right:r,bottom:i,left:s}){return t<s&&(e=Ve(s,{x:t,y:e},o),t=s),t>r&&(e=Ve(r,{x:t,y:e},o),t=r),e<n&&(t=Ne(n,{x:t,y:e},o),e=n),e>i&&(t=Ne(i,{x:t,y:e},o),e=i),{x:t,y:e}}function no(t,e,o){const{x:n,y:r}=oo(t,e,o),{x:i,y:s}=oo(e,t,o);return{x:n,y:r,x2:i,y2:s,width:Math.abs(i-n),height:Math.abs(s-r)}}function ro(t,{mouseX:e,mouseY:o},n=lt,r){const{x:i,y:s,x2:a,y2:l}=t.getProps(["x","y","x2","y2"],r),d=a-i,c=l-s,h=Fe(d)+Fe(c),u=0===h?-1:((e-i)*d+(o-s)*c)/h;let f,y;return u<0?(f=i,y=s):u>1?(f=a,y=l):(f=i+u*d,y=s+u*c),Fe(e-f)+Fe(o-y)<=n}function io(t,{mouseX:e,mouseY:o},n,r){const i=t.label;return i.options.display&&i.inRange(e,o,r,n)}function so(t,e,o){const n=o.borderWidth,r=(0,tt.E)(o.padding),i=Ot(t.ctx,o),s=i.width+r.width+n,a=i.height+r.height+n;return lo(e,o,{width:s,height:a,padding:r},t.chartArea)}function ao(t){const{x:e,y:o,x2:n,y2:r}=t,i=Math.atan2(r-o,n-e);return i>tt.P/2?i-tt.P:i<tt.P/-2?i+tt.P:i}function lo(t,e,o,n){const{width:r,height:i,padding:s}=o,{xAdjust:a,yAdjust:l}=e,d={x:t.x,y:t.y},c={x:t.x2,y:t.y2},h="auto"===e.rotation?ao(t):(0,tt.t)(e.rotation),u=co(r,i,h),f=ho(t,e,{labelSize:u,padding:s},n),y=t.cp?Qe(d,t.cp,c,f):$e(d,c,f),p={size:u.w,min:n.left,max:n.right,padding:s.left},g={size:u.h,min:n.top,max:n.bottom,padding:s.top},x=yo(y.x,p)+a,b=yo(y.y,g)+l;return{x:x-r/2,y:b-i/2,x2:x+r/2,y2:b+i/2,centerX:x,centerY:b,pointX:y.x,pointY:y.y,width:r,height:i,rotation:(0,tt.U)(h)}}function co(t,e,o){const n=Math.cos(o),r=Math.sin(o);return{w:Math.abs(t*n)+Math.abs(e*r),h:Math.abs(t*r)+Math.abs(e*n)}}function ho(t,e,o,n){let r;const i=fo(t,n);return r="start"===e.position?uo({w:t.x2-t.x,h:t.y2-t.y},o,e,i):"end"===e.position?1-uo({w:t.x-t.x2,h:t.y-t.y2},o,e,i):vt(1,e.position),r}function uo(t,e,o,n){const{labelSize:r,padding:i}=e,s=t.w*n.dx,a=t.h*n.dy,l=s>0&&(r.w/2+i.left-n.x)/s,d=a>0&&(r.h/2+i.top-n.y)/a;return dt(Math.max(l,d),0,.25)}function fo(t,e){const{x:o,x2:n,y:r,y2:i}=t,s=Math.min(r,i)-e.top,a=Math.min(o,n)-e.left,l=e.bottom-Math.max(r,i),d=e.right-Math.max(o,n);return{x:Math.min(a,d),y:Math.min(s,l),dx:a<=d?1:-1,dy:s<=l?1:-1}}function yo(t,e){const{size:o,min:n,max:r,padding:i}=e,s=o/2;return o>r-n?(r+n)/2:(n>=t-i-s&&(t=n+i+s),r<=t+i+s&&(t=r-i-s),t)}function po(t){const e=t.options,o=e.arrowHeads&&e.arrowHeads.start,n=e.arrowHeads&&e.arrowHeads.end;return{startOpts:o,endOpts:n,startAdjust:go(t,o),endAdjust:go(t,n)}}function go(t,e){if(!e||!e.display)return 0;const{length:o,width:n}=e,r=t.options.borderWidth/2,i={x:o,y:n+r},s={x:0,y:r};return Math.abs(Ne(0,i,s))}function xo(t,e,o,n){if(!n||!n.display)return;const{length:r,width:i,fill:s,backgroundColor:a,borderColor:l}=n,d=Math.abs(e-r)+o;t.beginPath(),Rt(t,n),Yt(t,n),t.moveTo(d,-i),t.lineTo(e+o,0),t.lineTo(d,i),!0===s?(t.fillStyle=a||l,t.closePath(),t.fill(),t.shadowColor="transparent"):t.shadowColor=n.borderShadowColor,t.stroke()}function bo(t,e,o){const{x:n,y:r,x2:i,y2:s,centerX:a,centerY:l}=t,d=Math.atan2(s-r,i-n),c=Ct(e.controlPoint,0),h={x:a+wt(o,c.x,!1),y:l+wt(o,c.y,!1)};return de(h,{x:a,y:l},d)}function mo(t,{x:e,y:o},{angle:n,adjust:r},i){i&&i.display&&(t.save(),t.translate(e,o),t.rotate(n),xo(t,0,-r,i),t.restore())}function vo(t,e,o,n){const{x:r,y:i,x2:s,y2:a,options:l}=e,{startOpts:d,endOpts:c,startAdjust:h,endAdjust:u}=po(e),f={x:r,y:i},y={x:s,y:a},p=Ge(f,o,y,0),g=Ge(f,o,y,1)-tt.P,x=Qe(f,o,y,h/n),b=Qe(f,o,y,1-u/n),m=new Path2D;t.beginPath(),m.moveTo(x.x,x.y),m.quadraticCurveTo(o.x,o.y,b.x,b.y),t.shadowColor=l.borderShadowColor,t.stroke(m),e.path=m,e.ctx=t,mo(t,x,{angle:p,adjust:h},d),mo(t,b,{angle:g,adjust:u},c)}Ke.defaults={adjustScaleRange:!0,arrowHeads:{display:!1,end:Object.assign({},Ze),fill:!1,length:12,start:Object.assign({},Ze),width:6},borderDash:[],borderDashOffset:0,borderShadowColor:"transparent",borderWidth:2,curve:!1,controlPoint:{y:"-50%"},display:!0,endValue:void 0,init:void 0,label:{backgroundColor:"rgba(0,0,0,0.8)",backgroundShadowColor:"transparent",borderCapStyle:"butt",borderColor:"black",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",borderRadius:6,borderShadowColor:"transparent",borderWidth:0,callout:Object.assign({},De.defaults.callout),color:"#fff",content:null,display:!1,drawTime:void 0,font:{family:void 0,lineHeight:void 0,size:void 0,style:void 0,weight:"bold"},height:void 0,opacity:void 0,padding:6,position:"center",rotation:0,shadowBlur:0,shadowOffsetX:0,shadowOffsetY:0,textAlign:"center",textStrokeColor:void 0,textStrokeWidth:0,width:void 0,xAdjust:0,yAdjust:0,z:void 0},scaleID:void 0,shadowBlur:0,shadowOffsetX:0,shadowOffsetY:0,value:void 0,xMax:void 0,xMin:void 0,xScaleID:void 0,yMax:void 0,yMin:void 0,yScaleID:void 0,z:0},Ke.descriptors={arrowHeads:{start:{_fallback:!0},end:{_fallback:!0},_fallback:!0}},Ke.defaultRoutes={borderColor:"color"};class wo extends Z.Hg{inRange(t,e,o,n){const r=this.options.rotation,i=this.options.borderWidth;if("x"!==o&&"y"!==o)return ko({x:t,y:e},this.getProps(["width","height","centerX","centerY"],n),r,i);const{x:s,y:a,x2:l,y2:d}=this.getProps(["x","y","x2","y2"],n),c=i/2,h="y"===o?{start:a,end:d}:{start:s,end:l},u=de({x:t,y:e},this.getCenterPoint(n),(0,tt.t)(-r));return u[o]>=h.start-c-lt&&u[o]<=h.end+c+lt}getCenterPoint(t){return ft(this,t)}draw(t){const{width:e,height:o,centerX:n,centerY:r,options:i}=this;t.save(),Lt(t,this.getCenterPoint(),i.rotation),Rt(t,this.options),t.beginPath(),t.fillStyle=i.backgroundColor;const s=Yt(t,i);t.ellipse(n,r,o/2,e/2,tt.P/2,0,2*tt.P),t.fill(),s&&(t.shadowColor=i.borderShadowColor,t.stroke()),t.restore()}get label(){return this.elements&&this.elements[0]}resolveElementProperties(t,e){return te(t,e)}}function ko(t,e,o,n){const{width:r,height:i,centerX:s,centerY:a}=e,l=r/2,d=i/2;if(l<=0||d<=0)return!1;const c=(0,tt.t)(o||0),h=n/2||0,u=Math.cos(c),f=Math.sin(c),y=Math.pow(u*(t.x-s)+f*(t.y-a),2),p=Math.pow(f*(t.x-s)-u*(t.y-a),2);return y/Math.pow(l+h,2)+p/Math.pow(d+h,2)<=1.0001}wo.id="ellipseAnnotation",wo.defaults={adjustScaleRange:!0,backgroundShadowColor:"transparent",borderDash:[],borderDashOffset:0,borderShadowColor:"transparent",borderWidth:1,display:!0,init:void 0,label:Object.assign({},_e.defaults.label),rotation:0,shadowBlur:0,shadowOffsetX:0,shadowOffsetY:0,xMax:void 0,xMin:void 0,xScaleID:void 0,yMax:void 0,yMin:void 0,yScaleID:void 0,z:0},wo.defaultRoutes={borderColor:"color",backgroundColor:"color"},wo.descriptors={label:{_fallback:!0}};class Co extends Z.Hg{inRange(t,e,o,n){const{x:r,y:i,x2:s,y2:a,width:l}=this.getProps(["x","y","x2","y2","width"],n),d=this.options.borderWidth;if("x"!==o&&"y"!==o)return ht({x:t,y:e},this.getCenterPoint(n),l/2,d);const c=d/2,h="y"===o?{start:i,end:a,value:e}:{start:r,end:s,value:t};return h.value>=h.start-c&&h.value<=h.end+c}getCenterPoint(t){return ft(this,t)}draw(t){const e=this.options,o=e.borderWidth;if(e.radius<.1)return;t.save(),t.fillStyle=e.backgroundColor,Rt(t,e);const n=Yt(t,e);zt(t,this,this.centerX,this.centerY),n&&!Tt(e.pointStyle)&&(t.shadowColor=e.borderShadowColor,t.stroke()),t.restore(),e.borderWidth=o}resolveElementProperties(t,e){const o=Kt(t,e);return o.initProperties=St(t,o,e),o}}Co.id="pointAnnotation",Co.defaults={adjustScaleRange:!0,backgroundShadowColor:"transparent",borderDash:[],borderDashOffset:0,borderShadowColor:"transparent",borderWidth:1,display:!0,init:void 0,pointStyle:"circle",radius:10,rotation:0,shadowBlur:0,shadowOffsetX:0,shadowOffsetY:0,xAdjust:0,xMax:void 0,xMin:void 0,xScaleID:void 0,xValue:void 0,yAdjust:0,yMax:void 0,yMin:void 0,yScaleID:void 0,yValue:void 0,z:0},Co.defaultRoutes={borderColor:"color",backgroundColor:"color"};class Mo extends Z.Hg{inRange(t,e,o,n){if("x"!==o&&"y"!==o)return this.options.radius>=.1&&this.elements.length>1&&Po(this.elements,t,e,n);const r=de({x:t,y:e},this.getCenterPoint(n),(0,tt.t)(-this.options.rotation)),i=this.elements.map((t=>"y"===o?t.bY:t.bX)),s=Math.min(...i),a=Math.max(...i);return r[o]>=s&&r[o]<=a}getCenterPoint(t){return ft(this,t)}draw(t){const{elements:e,options:o}=this;t.save(),t.beginPath(),t.fillStyle=o.backgroundColor,Rt(t,o);const n=Yt(t,o);let r=!0;for(const i of e)r?(t.moveTo(i.x,i.y),r=!1):t.lineTo(i.x,i.y);t.closePath(),t.fill(),n&&(t.shadowColor=o.borderShadowColor,t.stroke()),t.restore()}resolveElementProperties(t,e){const o=Kt(t,e),{sides:n,rotation:r}=e,i=[],s=2*tt.P/n;let a=r*tt.b3;for(let l=0;l<n;l++,a+=s){const n=So(o,e,a);n.initProperties=St(t,o,e),i.push(n)}return o.elements=i,o}}function So({centerX:t,centerY:e},{radius:o,borderWidth:n},r){const i=n/2,s=Math.sin(r),a=Math.cos(r),l={x:t+s*o,y:e-a*o};return{type:"point",optionScope:"point",properties:{x:l.x,y:l.y,centerX:l.x,centerY:l.y,bX:t+s*(o+i),bY:e-a*(o+i)}}}function Po(t,e,o,n){let r=!1,i=t[t.length-1].getProps(["bX","bY"],n);for(const s of t){const t=s.getProps(["bX","bY"],n);t.bY>o!==i.bY>o&&e<(i.bX-t.bX)*(o-t.bY)/(i.bY-t.bY)+t.bX&&(r=!r),i=t}return r}Mo.id="polygonAnnotation",Mo.defaults={adjustScaleRange:!0,backgroundShadowColor:"transparent",borderCapStyle:"butt",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",borderShadowColor:"transparent",borderWidth:1,display:!0,init:void 0,point:{radius:0},radius:10,rotation:0,shadowBlur:0,shadowOffsetX:0,shadowOffsetY:0,sides:3,xAdjust:0,xMax:void 0,xMin:void 0,xScaleID:void 0,xValue:void 0,yAdjust:0,yMax:void 0,yMin:void 0,yScaleID:void 0,yValue:void 0,z:0},Mo.defaultRoutes={borderColor:"color",backgroundColor:"color"};const Ao={box:_e,ellipse:wo,label:De,line:Ke,point:Co,polygon:Mo};Object.keys(Ao).forEach((t=>{tt.d.describe(`elements.${Ao[t].id}`,{_fallback:"plugins.annotation.common"})}));const Io={update:Object.assign},_o=he.concat(be),jo=(t,e)=>(0,tt.i)(e)?Wo(t,e):t,Do=t=>"color"===t||"font"===t;function To(t="line"){return Ao[t]?t:(console.warn(`Unknown annotation type: '${t}', defaulting to 'line'`),"line")}function Lo(t,e,o,n){const r=Ro(t,o.animations,n),i=e.annotations,s=Bo(e.elements,i);for(let a=0;a<i.length;a++){const e=i[a],o=Xo(s,a,e.type),n=e.setContext(zo(t,o,e)),l=o.resolveElementProperties(t,n);l.skip=Yo(l),"elements"in l&&(Oo(o,l.elements,n,r),delete l.elements),(0,tt.h)(o.x)||Object.assign(o,l),Object.assign(o,l.initProperties),l.options=Eo(n),r.update(o,l)}}function Yo(t){return isNaN(t.x)||isNaN(t.y)}function Ro(t,e,o){return"reset"===o||"none"===o||"resize"===o?Io:new Z.Qw(t,e)}function Oo(t,e,o,n){const r=t.elements||(t.elements=[]);r.length=e.length;for(let i=0;i<e.length;i++){const t=e[i],s=t.properties,a=Xo(r,i,t.type,t.initProperties),l=o[t.optionScope].override(t);s.options=Eo(l),n.update(a,s)}}function Xo(t,e,o,n){const r=Ao[To(o)];let i=t[e];return i&&i instanceof r||(i=t[e]=new r,Object.assign(i,n)),i}function Eo(t){const e=Ao[To(t.type)],o={};o.id=t.id,o.type=t.type,o.drawTime=t.drawTime,Object.assign(o,Wo(t,e.defaults),Wo(t,e.defaultRoutes));for(const n of _o)o[n]=t[n];return o}function Wo(t,e){const o={};for(const n of Object.keys(e)){const r=e[n],i=t[n];Do(n)&&(0,tt.b)(i)?o[n]=i.map((t=>jo(t,r))):o[n]=jo(i,r)}return o}function zo(t,e,o){return e.$context||(e.$context=Object.assign(Object.create(t.getContext()),{element:e,id:o.id,type:"annotation"}))}function Bo(t,e){const o=e.length,n=t.length;if(n<o){const e=o-n;t.splice(n,0,...new Array(e))}else n>o&&t.splice(o,n-o);return t}var Ho="3.0.1";const $o=new Map,No=he.concat(be);var Vo={id:"annotation",version:Ho,beforeRegister(){yt("chart.js","4.0",Z.t1.version)},afterRegister(){Z.t1.register(Ao)},afterUnregister(){Z.t1.unregister(Ao)},beforeInit(t){$o.set(t,{annotations:[],elements:[],visibleElements:[],listeners:{},listened:!1,moveListened:!1,hooks:{},hooked:!1,hovered:[]})},beforeUpdate(t,e,o){const n=$o.get(t),r=n.annotations=[];let i=o.annotations;(0,tt.i)(i)?Object.keys(i).forEach((t=>{const e=i[t];(0,tt.i)(e)&&(e.id=t,r.push(e))})):(0,tt.b)(i)&&r.push(...i),ke(r,t.scales)},afterDataLimits(t,e){const o=$o.get(t);we(t,e.scale,o.annotations.filter((t=>t.display&&t.adjustScaleRange)))},afterUpdate(t,e,o){const n=$o.get(t);ue(t,n,o),Lo(t,n,o,e.mode),n.visibleElements=n.elements.filter((t=>!t.skip&&t.options.display)),me(t,n,o)},beforeDatasetsDraw(t,e,o){Fo(t,"beforeDatasetsDraw",o.clip)},afterDatasetsDraw(t,e,o){Fo(t,"afterDatasetsDraw",o.clip)},beforeDraw(t,e,o){Fo(t,"beforeDraw",o.clip)},afterDraw(t,e,o){Fo(t,"afterDraw",o.clip)},beforeEvent(t,e,o){const n=$o.get(t);fe(n,e.event,o)&&(e.changed=!0)},afterDestroy(t){$o.delete(t)},_getState(t){return $o.get(t)},defaults:{animations:{numbers:{properties:["x","y","x2","y2","width","height","centerX","centerY","pointX","pointY","radius"],type:"number"}},clip:!0,interaction:{mode:void 0,axis:void 0,intersect:void 0},common:{drawTime:"afterDatasetsDraw",init:!1,label:{}}},descriptors:{_indexable:!1,_scriptable:t=>!No.includes(t)&&"init"!==t,annotations:{_allKeys:!1,_fallback:(t,e)=>`elements.${Ao[To(e.type)].id}`},interaction:{_fallback:!0},common:{label:{_indexable:Do,_fallback:!0},_indexable:Do}},additionalOptionScopes:[""]};function Fo(t,e,o){const{ctx:n,chartArea:r}=t,i=$o.get(t);o&&(0,tt.Y)(n,r);const s=qo(i.visibleElements,e).sort(((t,e)=>t.element.options.z-e.element.options.z));for(const a of s)Jo(n,r,i,a);o&&(0,tt.$)(n)}function qo(t,e){const o=[];for(const n of t)if(n.options.drawTime===e&&o.push({element:n,main:!0}),n.elements&&n.elements.length)for(const t of n.elements)t.options.display&&t.options.drawTime===e&&o.push({element:t});return o}function Jo(t,e,o,n){const r=n.element;n.main?(ve(o,r,"beforeDraw"),r.draw(t,e),ve(o,r,"afterDraw")):r.draw(t,e)}var Qo=o(7682),Uo=o(8465),Go=o.n(Uo);K.Ay.register(Vo);var Ko={name:"AI_ReportView",data(){return{hasReport:!0}},created(){this.checkLoginInfo()},methods:{checkLoginInfo(){(!this.getLoginInfo||this.getLoginInfo&&1==this.getIsChecked)&&(window.location.href="/noAccess")},async aitest(){try{const t=await Qo.A.post("bot/chat",null,{params:{prompt:`이름: ${this.loginInfo.user_name}, 사번: ${this.loginInfo.user_no}`,user_no:this.loginInfo.user_no}});console.log(t.data)}catch(t){console.error("Error during API request:",t)}},async airank(){try{const t=await Qo.A.post("bot/chatRank",null,{params:{prompt:`이름: ${this.loginInfo.user_name}, 사번: ${this.loginInfo.user_no}`,user_no:this.loginInfo.user_no}});console.log(t.data)}catch(t){console.error("Error during API request:",t)}},async aiCatch(){try{const t=await Qo.A.post("bot/chatCatchup",null,{params:{prompt:`이름: ${this.loginInfo.user_name}, 사번: ${this.loginInfo.user_no}`,user_no:this.loginInfo.user_no}});console.log(t.data)}catch(t){console.error("Error during API request:",t)}},async aiMile(){try{const t=await Qo.A.post("bot/chatMile",null,{params:{prompt:`이름: ${this.loginInfo.user_name}, 사번: ${this.loginInfo.user_no}`,user_no:this.loginInfo.user_no}});console.log(t.data)}catch(t){console.error("Error during API request:",t)}},async runAnalysis(){await this.aitest(),await this.delay(5e3),await this.airank(),await this.delay(5e3),await this.aiMile(),await this.delay(1e4),await this.aiCatch()},delay(t){return new Promise((e=>setTimeout(e,t)))},...(0,G.i0)("aireport",["getReport"]),getReport(){try{this.$store.dispatch("aireport/getReport",this.loginInfo.user_no),this.all&&this.createCharts()}catch(t){console.error("Failed to get report:",t)}},async createCharts(){this.createChart1(),this.createChart2()},async analysis(){const t=(new Date).toISOString().split("T")[0];if(this.dateAi!==t)try{const t=this.analysisAlert(),e=this.runAnalysis();await Promise.all([t,e]),Go().fire({title:"분석 완료",text:"마일리지 분석이 완료되었습니다.",icon:"success",scrollbarPadding:!1}),await this.getReport()}catch(e){console.error("분석 중 오류가 발생했습니다:",e),Go().fire({title:"오류",text:"분석 중 문제가 발생했습니다. 다시 시도해 주세요.",icon:"error",scrollbarPadding:!1})}else Go().fire({title:"알림",text:"하루에 한 번만 조회가 가능합니다.",icon:"info",scrollbarPadding:!1})},async analysisAlert(){return new Promise((t=>{Go().fire({timer:45e3,timerProgressBar:!0,imageUrl:o(1105),imageClass:"custom-image-class",scrollbarPadding:!1,title:"분석중..",html:`${this.getLoginInfo.user_name}님의 마일리지를 분석중입니다`,showCloseButton:!0,didOpen:()=>{const t=Go().getPopup(),e=Go().getImage(),o=t.querySelector(".swal2-title"),n=t.querySelector(".swal2-image");o.style.marginTop="0",o.style.paddingTop="0",t.style.height="400px",n.style.margin="15px auto 0px auto",e.style.width="200px",e.style.height="auto",e.style.padding="0px 0px 0px 30px",Go().showLoading()},willClose:()=>{t()}})}))},createChart1(){console.log("차트1",document.getElementById("myChart1"));let t=document.getElementById("myChart1");const e=t.getContext("2d");if(K.Ay.getChart(t)&&K.Ay.getChart(t)?.destroy(),!e)return;const o=parseInt(this.chartRank),n=t=>t>70?"rgba(146, 183, 255)":t>=30?"rgba(39, 234, 182)":"rgba(255, 206, 86)",r=(t,e,o,n,r)=>n+(t-e)*(r-n)/(o-e),i=t=>t<=30?r(t,0,30,0,1):t<=70?r(t,30,70,1,2):r(t,70,100,2,3),s=i(o);t=new K.Ay(e,{type:"line",data:{labels:["0%","30%","70%","100%"],datasets:[{data:[{x:0,y:0},{x:1,y:30},{x:2,y:70},{x:3,y:100}],borderColor:t=>{const e=t.chart,{ctx:o,chartArea:n}=e;if(!n)return null;const r=o.createLinearGradient(n.left,0,n.right,0);return r.addColorStop(0,"rgba(255, 206, 86, 1)"),r.addColorStop(.31,"rgba(255, 206, 86, 1)"),r.addColorStop(.35,"rgba(39, 234, 182, 1)"),r.addColorStop(.66,"rgba(39, 234, 182, 1)"),r.addColorStop(.69,"rgba(146, 183, 255, 1)"),r.addColorStop(1,"rgba(146, 183, 255, 1)"),r},borderWidth:2,fill:!0,backgroundColor:t=>{const e=t.chart,{ctx:o,chartArea:n}=e;if(!n)return null;const r=o.createLinearGradient(n.left,0,n.right,0);return r.addColorStop(0,"rgba(255, 206, 86, 0.5)"),r.addColorStop(.31,"rgba(255, 206, 86, 0.5)"),r.addColorStop(.35,"rgba(39, 234, 182, 0.5)"),r.addColorStop(.66,"rgba(39, 234, 182, 0.5)"),r.addColorStop(.69,"rgba(146, 183, 255, 0.5)"),r.addColorStop(1,"rgba(146, 183, 255, 0.5)"),r},pointRadius:0,order:2},{data:[{x:s,y:o}],pointBackgroundColor:n(o),pointBorderColor:n(o),pointRadius:6,pointHoverRadius:8,type:"scatter",order:1}]},options:{responsive:!0,maintainAspectRatio:!1,scales:{x:{type:"linear",min:0,max:3,ticks:{stepSize:1,callback:function(t,e){return["0%","30%","70%","100%"][e]}}},y:{beginAtZero:!0,max:100,grid:{display:!0},ticks:{}}},plugins:{legend:{display:!1},tooltip:{callbacks:{label:function(t){if(1===t.datasetIndex)return"Me: "+t.parsed.y+"%"}}}},elements:{point:{radius:0},line:{tension:.2}}},plugins:[{afterDraw:t=>{const e=t.ctx,r=t.scales.x,i=t.scales.y,a=r.getPixelForValue(s),l=i.getPixelForValue(o);e.save(),e.fillStyle=n(o),e.font="bold 14px Arial",e.textAlign="center",o<79?(e.strokeStyle=n(o),e.beginPath(),e.moveTo(a,l),e.lineTo(a,l-40),e.lineWidth=2,e.stroke(),e.beginPath(),e.moveTo(a,l-40),e.lineTo(a-6,l-34),e.lineTo(a+6,l-34),e.closePath(),e.fill(),e.fillText("Me!",a,l-50)):e.fillText("Me!",a,l-15),e.restore()}}]})},createChart2(){let t=document.getElementById("myChart2");const e=t.getContext("2d");if(K.Ay.getChart(t)&&K.Ay.getChart(t)?.destroy(),!e)return;this.label=this.avg_score_json.map((t=>t.mile_name)),this.avg_data=this.avg_score_json.map((t=>t.average_score)),this.my_data=this.my_score_json.map((t=>t.total_score)),console.log();let o={labels:this.label,datasets:[{label:"내 점수",data:this.my_data,backgroundColor:"rgba(255, 0, 46, 0.3)",borderColor:"rgba(255, 0, 46, 0.5)",pointBackgroundColor:"rgb(255, 99, 132)",pointBorderColor:"#fff",pointHoverBackgroundColor:"#fff",pointHoverBorderColor:"rgb(255, 99, 132)"},{label:"평균 점수",data:this.avg_data,backgroundColor:"rgba(0, 122, 255, 0.2)",borderColor:"rgba(0, 122, 255, 0.4)",pointBackgroundColor:"rgb(54, 162, 235)",pointBorderColor:"#fff",pointHoverBackgroundColor:"#fff",pointHoverBorderColor:"rgb(54, 162, 235)"}]};const n={type:"radar",data:o,options:{responsive:!0,maintainAspectRatio:!1,elements:{line:{borderWidth:3}},scales:{r:{angleLines:{display:!1},suggestedMin:0,suggestedMax:100,ticks:{stepSize:20,display:!1},pointLabels:{font:{size:12}},grid:{color:"rgba(0, 0, 0, 0.2)"}}}}};t=new K.Ay(e,n)}},mounted(){this.getReport()},computed:{...(0,G.L8)("login",["getLoginInfo","getIsChecked"]),...(0,G.L8)("aireport",["getAll","getRank","getCatchTops","getDateAi","getMyRank","getChartRank","getAvg_score_json","getMy_score_json","getSuccessYN","getMile"]),loginInfo(){return this.getLoginInfo},all(){return this.getAll},rank(){return this.getRank},catchTop(){return this.getCatchTops},mile(){return this.getMile},dateAi(){return this.getDateAi},myRank(){return this.getMyRank},chartRank(){return this.getChartRank},avg_score_json(){return this.getAvg_score_json},my_score_json(){return this.getMy_score_json},successYN(){return this.getSuccessYN}},watch:{loginInfo:{immediate:!0,handler(t){t&&this.getReport()}},all:{handler(t){t&&this.$nextTick((()=>{this.createCharts()}))},immediate:!0}}},Zo=o(6262);const tn=(0,Zo.A)(Ko,[["render",U],["__scopeId","data-v-46617832"]]);var en=tn},1105:function(t,e,o){t.exports=o.p+"img/analysis.82294207.gif"},7154:function(t,e,o){var n=o(6118);n.t1.register(...n.$L),e.Ay=n.t1}}]);
//# sourceMappingURL=6343.f0c529c1.js.map
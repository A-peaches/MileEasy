"use strict";(self["webpackChunkmile"]=self["webpackChunkmile"]||[]).push([[6812],{6812:function(t,e,n){n.r(e),n.d(e,{default:function(){return V}});var r=n(641),o=n(33),i=n(3751);const a=t=>((0,r.Qi)("data-v-1590359e"),t=t(),(0,r.jt)(),t),s=a((()=>(0,r.Lk)("h2",{class:"bold-x-lg mt-5 mb-4",style:{"font-family":"KB_C3"}},[(0,r.eW)("문서모아 "),(0,r.Lk)("hr",{style:{width:"13%",border:"0",height:"2px",background:"black"},class:"mx-auto"})],-1))),l={class:"category-button list-wrapper",style:{width:"10vw"}},c={key:0,class:"dropdown-menu",ref:"dropdownMenu"},u={class:"menu-items"},h=["onClick"],g={class:"d-flex justify-content-between align-items-center"},f={class:"lg2",style:{padding:"3em"}},d={class:"input-search input-base",style:{"margin-right":"2em",width:"17vw",height:"6vh"}},m={class:"d-flex justify-content-between align-items-center",style:{"font-size":"14pt",height:"100%","margin-left":"1em"}},p=a((()=>(0,r.Lk)("button",null,[(0,r.Lk)("i",{class:"bi bi-search mr-2",style:{"font-size":"25px",color:"#4b4a4a"}})],-1))),y={key:0,class:"pr-5 pl-5 pb-5 pt-2",style:{"margin-top":"8vh"}},v={class:"d-flex align-items-center justify-content-between"},w={style:{width:"90%","text-align":"left"}},b={class:"d-flex align-items-center justify-content-start"},k={key:0,style:{width:"5%","padding-left":"3%"}},C=a((()=>(0,r.Lk)("span",{class:"md",style:{color:"#edbb00","font-family":"'KB_C2'"}},"NEW",-1))),x=[C],P={class:"d-flex align-items-center justify-content-between",style:{width:"100%"}},D={class:"pl-4",style:{width:"20%","margin-left":"3%","text-align":"left","font-family":"'KB_C2'","font-size":"14pt",color:"#9c8480"}},L={class:"lg2",style:{width:"65%","margin-left":"3%","text-align":"center","font-family":"'KB_C2'"}},_={class:"md pl-3",style:{width:"15%","margin-right":"3%","text-align":"right","font-family":"'KB_C3'"}},E=["onClick"],M=a((()=>(0,r.Lk)("span",{class:"md",style:{"text-align":"right"}},"파일 다운로드 〉",-1))),O=[M],I={key:1,style:{"padding-top":"10vh"}},B=a((()=>(0,r.Lk)("p",{class:"lg2",style:{"text-align":"center",color:"#aeaeb2","font-family":"KB_C2"}},"검색 결과가 없습니다.",-1))),j=[B],S={class:"pagination"},T=["disabled"],A=["onClick"],X=["disabled"];function K(t,e,n,a,C,M){return(0,r.uX)(),(0,r.CE)("div",{class:"cards page-back mx-auto",style:(0,o.Tr)({height:M.computedHeight})},[s,(0,r.Lk)("div",{onClick:e[1]||(e[1]=(0,i.D$)(((...t)=>M.toggleCategory&&M.toggleCategory(...t)),["stop"])),class:"QnA",ref:"categoryButton"},[(0,r.Lk)("div",l,(0,o.v_)(C.selectedCategory?C.selectedCategory:"카테고리"),1),C.showCategory?((0,r.uX)(),(0,r.CE)("div",c,[(0,r.Lk)("div",u,[(0,r.Lk)("a",{class:"dropdown-item",onClick:e[0]||(e[0]=t=>M.filterByCategory(null))},"전체"),((0,r.uX)(!0),(0,r.CE)(r.FK,null,(0,r.pI)(C.mileages,(t=>((0,r.uX)(),(0,r.CE)("a",{class:"dropdown-item",key:t.mile_no,onClick:e=>M.filterByCategory(t.mile_name)},(0,o.v_)(t.mile_name)+" 마일리지 ",9,h)))),128))])],512)):(0,r.Q3)("",!0)],512),(0,r.Lk)("div",g,[(0,r.Lk)("div",f,"총 "+(0,o.v_)(C.countList)+"건",1),(0,r.Lk)("div",d,[(0,r.Lk)("div",m,[(0,r.bo)((0,r.Lk)("input",{type:"text","onUpdate:modelValue":e[2]||(e[2]=t=>C.searchQuery=t),onInput:e[3]||(e[3]=(...t)=>M.onSearch&&M.onSearch(...t)),placeholder:"검색어를 입력하세요",class:"w-100 h-100 d-inline-block",style:{"text-align":"left"}},null,544),[[i.Jo,C.searchQuery]]),p])])]),M.filteredDocuments.length>0?((0,r.uX)(),(0,r.CE)("div",y,[((0,r.uX)(!0),(0,r.CE)(r.FK,null,(0,r.pI)(M.paginatedDocuments,(t=>((0,r.uX)(),(0,r.CE)("div",{key:t.documnet_mile_no,class:"mx-auto mb-4 border-bottom p-4 input-base input-white list-wrapper",style:{width:"95%",height:"5em","box-shadow":"0 4px 8px rgba(0, 0, 0, 0.2)","background-color":"#FBFBFB"}},[(0,r.Lk)("div",v,[(0,r.Lk)("button",w,[(0,r.Lk)("div",b,[M.isNew(t.document_date)?((0,r.uX)(),(0,r.CE)("div",k,x)):(0,r.Q3)("",!0),(0,r.Lk)("div",P,[(0,r.Lk)("span",D,(0,o.v_)(t.mile_name),1),(0,r.Lk)("span",L,(0,o.v_)(t.document_file),1),(0,r.Lk)("span",_,(0,o.v_)(M.formatDate(t.document_date)),1)])])]),(0,r.Lk)("button",{onClick:(0,i.D$)((e=>M.downloadDocu(t.document_file)),["stop"])},O,8,E)])])))),128))])):((0,r.uX)(),(0,r.CE)("div",I,j)),(0,r.Lk)("div",S,[(0,r.Lk)("button",{onClick:e[4]||(e[4]=(...t)=>M.prevPage&&M.prevPage(...t)),disabled:1===C.currentPage},"〈",8,T),((0,r.uX)(!0),(0,r.CE)(r.FK,null,(0,r.pI)(C.totalPages,(t=>((0,r.uX)(),(0,r.CE)("button",{key:t,onClick:e=>M.goToPage(t),class:(0,o.C4)({active:C.currentPage===t})},(0,o.v_)(t),11,A)))),128)),(0,r.Lk)("button",{onClick:e[5]||(e[5]=(...t)=>M.nextPage&&M.nextPage(...t)),disabled:C.currentPage===C.totalPages},"〉",8,X)])],4)}n(4114);var Q=n(6278),$=n(7682),F=n(5093),H=n.n(F),N={name:"DocumentsView",data(){return{mileages:[],baseHeight:90,increment:10,buttonHeight:10,searchQuery:"",currentPage:1,itemsPerPage:7,allDocuments:[],countList:0,lastInputTime:0,selectedCategory:"",showCategory:!1,totalPages:0}},computed:{...(0,Q.L8)("login",["getLoginInfo"]),...(0,Q.L8)("mileExcel",["getArrayMileDocument","getDocumentSum"]),computedHeight(){let t=this.baseHeight+this.paginatedDocuments.length*this.increment;return this.paginatedDocuments.length%this.itemsPerPage===0&&this.paginatedDocuments.length,t+=this.buttonHeight/2,`${t}vh`},documentSum(){return this.getDocumentSum},filteredDocuments(){let t=this.allDocuments;return this.selectedCategory&&"null"!==this.selectedCategory&&(t=t.filter((t=>t.mile_name===this.selectedCategory))),t.filter((t=>t.document_file.includes(this.searchQuery)))},paginatedDocuments(){return this.filteredDocuments.slice((this.currentPage-1)*this.itemsPerPage,this.currentPage*this.itemsPerPage)}},methods:{...(0,Q.i0)("mile",["fetchMileInfo","getMileDetail"]),...(0,Q.i0)("mileExcel",["downloadDocument"]),...(0,Q.i0)("mileDocument",["fetchMileDocument"]),formatDate(t){return H()(t).format("YYYY-MM-DD")},isNew(t){const e=H()(t),n=H()(),r=H()().subtract(7,"days");return e.isBetween(r,n,null,"[]")},showAlert(t,e,n){this.$swal({title:t,icon:e,scrollbarPadding:!1}).then((t=>{t.isConfirmed&&("#"==n?location.reload():this.$router.push(n))}))},downloadDocu(t){this.downloadDocument({document_file:t})},async loadDocuments(){const t=await this.fetchMileDocument();this.allDocuments=t.data;const e=await $.A.get("/myMile/countListDocuments");this.countList=e.data,this.totalPages=Math.ceil(this.countList/this.itemsPerPage)},onSearch(){const t=Date.now(),e=t-this.lastInputTime;e>500&&(this.lastInputTime=t,this.loadDocuments())},async fetchMileages(){try{const t=await $.A.get("/notice/mileage");console.log("Fetched mileages:",t.data),this.mileages=t.data}catch(t){console.error("Error fetching mileages:",t.response?t.response.data:t.message)}},toggleCategory(){this.showCategory=!this.showCategory},closeDropdown(){this.showCategory=!1},handleClickOutside(t){this.$refs.dropdownMenu&&!this.$refs.dropdownMenu.contains(t.target)&&this.$refs.categoryButton&&!this.$refs.categoryButton.contains(t.target)&&this.closeDropdown()},filterByCategory(t){this.selectedCategory=null!==t?t:"",this.currentPage=1,this.loadDocuments()},prevPage(){this.currentPage>1&&(this.currentPage--,this.loadDocuments())},nextPage(){this.currentPage<this.totalPages&&(this.currentPage++,this.loadDocuments())},goToPage(t){this.currentPage=t,this.loadDocuments()}},created(){const t=this.getLoginInfo?this.getLoginInfo.user_no:null;t?this.fetchMileInfo(t):console.error("user_no이 유효하지 않습니다."),this.loadDocuments(),this.fetchMileages()},watch:{searchQuery(){this.lastInputTime=Date.now(),this.onSearch()}}},z=n(6262);const Y=(0,z.A)(N,[["render",K],["__scopeId","data-v-1590359e"]]);var V=Y},9617:function(t,e,n){var r=n(5397),o=n(5610),i=n(6198),a=function(t){return function(e,n,a){var s=r(e),l=i(s);if(0===l)return!t&&-1;var c,u=o(a,l);if(t&&n!==n){while(l>u)if(c=s[u++],c!==c)return!0}else for(;l>u;u++)if((t||u in s)&&s[u]===n)return t||u||0;return!t&&-1}};t.exports={includes:a(!0),indexOf:a(!1)}},4527:function(t,e,n){var r=n(3724),o=n(4376),i=TypeError,a=Object.getOwnPropertyDescriptor,s=r&&!function(){if(void 0!==this)return!0;try{Object.defineProperty([],"length",{writable:!1}).length=1}catch(t){return t instanceof TypeError}}();t.exports=s?function(t,e){if(o(t)&&!a(t,"length").writable)throw new i("Cannot set read only .length");return t.length=e}:function(t,e){return t.length=e}},7740:function(t,e,n){var r=n(9297),o=n(5031),i=n(7347),a=n(4913);t.exports=function(t,e,n){for(var s=o(e),l=a.f,c=i.f,u=0;u<s.length;u++){var h=s[u];r(t,h)||n&&r(n,h)||l(t,h,c(e,h))}}},6837:function(t){var e=TypeError,n=9007199254740991;t.exports=function(t){if(t>n)throw e("Maximum allowed index exceeded");return t}},8727:function(t){t.exports=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"]},6518:function(t,e,n){var r=n(4475),o=n(7347).f,i=n(6699),a=n(6840),s=n(9433),l=n(7740),c=n(2796);t.exports=function(t,e){var n,u,h,g,f,d,m=t.target,p=t.global,y=t.stat;if(u=p?r:y?r[m]||s(m,{}):r[m]&&r[m].prototype,u)for(h in e){if(f=e[h],t.dontCallGetSet?(d=o(u,h),g=d&&d.value):g=u[h],n=c(p?h:m+(y?".":"#")+h,t.forced),!n&&void 0!==g){if(typeof f==typeof g)continue;l(f,g)}(t.sham||g&&g.sham)&&i(f,"sham",!0),a(u,h,f,t)}}},7055:function(t,e,n){var r=n(9504),o=n(9039),i=n(4576),a=Object,s=r("".split);t.exports=o((function(){return!a("z").propertyIsEnumerable(0)}))?function(t){return"String"===i(t)?s(t,""):a(t)}:a},4376:function(t,e,n){var r=n(4576);t.exports=Array.isArray||function(t){return"Array"===r(t)}},2796:function(t,e,n){var r=n(9039),o=n(4901),i=/#|\.prototype\./,a=function(t,e){var n=l[s(t)];return n===u||n!==c&&(o(e)?r(e):!!e)},s=a.normalize=function(t){return String(t).replace(i,".").toLowerCase()},l=a.data={},c=a.NATIVE="N",u=a.POLYFILL="P";t.exports=a},6198:function(t,e,n){var r=n(8014);t.exports=function(t){return r(t.length)}},741:function(t){var e=Math.ceil,n=Math.floor;t.exports=Math.trunc||function(t){var r=+t;return(r>0?n:e)(r)}},7347:function(t,e,n){var r=n(3724),o=n(9565),i=n(8773),a=n(6980),s=n(5397),l=n(6969),c=n(9297),u=n(5917),h=Object.getOwnPropertyDescriptor;e.f=r?h:function(t,e){if(t=s(t),e=l(e),u)try{return h(t,e)}catch(n){}if(c(t,e))return a(!o(i.f,t,e),t[e])}},8480:function(t,e,n){var r=n(1828),o=n(8727),i=o.concat("length","prototype");e.f=Object.getOwnPropertyNames||function(t){return r(t,i)}},3717:function(t,e){e.f=Object.getOwnPropertySymbols},1828:function(t,e,n){var r=n(9504),o=n(9297),i=n(5397),a=n(9617).indexOf,s=n(421),l=r([].push);t.exports=function(t,e){var n,r=i(t),c=0,u=[];for(n in r)!o(s,n)&&o(r,n)&&l(u,n);while(e.length>c)o(r,n=e[c++])&&(~a(u,n)||l(u,n));return u}},8773:function(t,e){var n={}.propertyIsEnumerable,r=Object.getOwnPropertyDescriptor,o=r&&!n.call({1:2},1);e.f=o?function(t){var e=r(this,t);return!!e&&e.enumerable}:n},5031:function(t,e,n){var r=n(7751),o=n(9504),i=n(8480),a=n(3717),s=n(8551),l=o([].concat);t.exports=r("Reflect","ownKeys")||function(t){var e=i.f(s(t)),n=a.f;return n?l(e,n(t)):e}},5610:function(t,e,n){var r=n(1291),o=Math.max,i=Math.min;t.exports=function(t,e){var n=r(t);return n<0?o(n+e,0):i(n,e)}},5397:function(t,e,n){var r=n(7055),o=n(7750);t.exports=function(t){return r(o(t))}},1291:function(t,e,n){var r=n(741);t.exports=function(t){var e=+t;return e!==e||0===e?0:r(e)}},8014:function(t,e,n){var r=n(1291),o=Math.min;t.exports=function(t){var e=r(t);return e>0?o(e,9007199254740991):0}},4114:function(t,e,n){var r=n(6518),o=n(8981),i=n(6198),a=n(4527),s=n(6837),l=n(9039),c=l((function(){return 4294967297!==[].push.call({length:4294967296},1)})),u=function(){try{Object.defineProperty([],"length",{writable:!1}).push()}catch(t){return t instanceof TypeError}},h=c||!u();r({target:"Array",proto:!0,arity:1,forced:h},{push:function(t){var e=o(this),n=i(e),r=arguments.length;s(n+r);for(var l=0;l<r;l++)e[n]=arguments[l],n++;return a(e,n),n}})}}]);
//# sourceMappingURL=6812.123fdc53.js.map
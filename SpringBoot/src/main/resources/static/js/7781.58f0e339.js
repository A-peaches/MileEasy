"use strict";(self["webpackChunkmile"]=self["webpackChunkmile"]||[]).push([[7781],{7479:function(t,e,a){a.r(e),a.d(e,{default:function(){return Kt}});var i=a(641),s=a(33);const n=t=>((0,i.Qi)("data-v-4b4eda89"),t=t(),(0,i.jt)(),t),l={class:"flex",style:{"margin-left":"10%","margin-right":"10%"}},r={class:"cards",style:{width:"24%",height:"400px"}},o=["src"],d={class:"lg KB_S5 my-3"},c={class:"md",style:{"margin-bottom":"0px"}},h={class:"md",style:{"margin-bottom":"10px"}},g=n((()=>(0,i.Lk)("button",{class:"btn-yellow KB_C2",disabled:""},"운영 관리자",-1))),u=n((()=>(0,i.Lk)("br",null,null,-1))),p={class:"flex",style:{"margin-left":"10%","margin-right":"10%"}},f=(0,i.Fv)('<div class="cards" style="width:24%;height:400px;padding:3% 3% 4% 3%;" data-v-4b4eda89><div style="padding:3% 0%;" data-v-4b4eda89><a href="/kingTopAdminView" class="mileage-link" data-v-4b4eda89><p class="lg2 link-text" style="text-align:left;" data-v-4b4eda89> 마왕관리 <i class="bi bi-chevron-compact-right icon-right" style="margin-left:auto;" data-v-4b4eda89></i></p></a><a href="/mileageAddAdminView" class="mileage-link" data-v-4b4eda89><p class="lg2 link-text" style="text-align:left;" data-v-4b4eda89> 마일리지 관리 <i class="bi bi-chevron-compact-right icon-right" style="margin-left:auto;" data-v-4b4eda89></i></p></a><a href="/m_TipMainAdminView" class="mileage-link" data-v-4b4eda89><p class="lg2 link-text" style="text-align:left;" data-v-4b4eda89> M-TIP <i class="bi bi-chevron-compact-right icon-right" style="margin-left:auto;" data-v-4b4eda89></i></p></a><a href="/noticeListView" class="mileage-link" data-v-4b4eda89><p class="lg2 link-text" style="text-align:left;" data-v-4b4eda89> 공지사항 <i class="bi bi-chevron-compact-right icon-right" style="margin-left:auto;" data-v-4b4eda89></i></p></a><a href="/qnaListView" class="mileage-link" data-v-4b4eda89><p class="lg2 link-text" style="text-align:left;" data-v-4b4eda89> QnA <i class="bi bi-chevron-compact-right icon-right" style="margin-left:auto;" data-v-4b4eda89></i></p></a><a href="/mileEasyContactView" class="mileage-link" data-v-4b4eda89><p class="lg2 link-text" style="text-align:left;" data-v-4b4eda89> 업무별 연락처 <i class="bi bi-chevron-compact-right icon-right" style="margin-left:auto;" data-v-4b4eda89></i></p></a></div></div>',1),m=n((()=>(0,i.Lk)("br",null,null,-1))),y={class:"flex",style:{"margin-left":"10%","margin-right":"10%"}},v=n((()=>(0,i.Lk)("div",{class:"hiddencards",style:{width:"24%",height:"400px",padding:"3% 3% 4% 3%"}},null,-1)));function b(t,e,a,n,b,k){const C=(0,i.g2)("PageCount"),L=(0,i.g2)("MileagePageCount"),D=(0,i.g2)("PositionChart");return(0,i.uX)(),(0,i.CE)(i.FK,null,[(0,i.Lk)("div",l,[(0,i.Lk)("div",r,[k.loginInfo&&k.loginInfo.user_no?((0,i.uX)(),(0,i.CE)("img",{key:0,src:k.profileImageUrl,class:"profile-large my-3",alt:"Profile Picture",onError:e[0]||(e[0]=(...t)=>k.setDefaultImage&&k.setDefaultImage(...t))},null,40,o)):(0,i.Q3)("",!0),(0,i.Lk)("h2",d,(0,s.v_)(k.loginInfo?k.loginInfo.user_name:""),1),(0,i.Lk)("p",c,(0,s.v_)(k.loginInfo?`${k.loginInfo.level_no} ${k.loginInfo.position_no} | ${k.loginInfo.job_no} 직무`:""),1),(0,i.Lk)("p",h,(0,s.v_)(k.loginInfo?k.loginInfo.dp_no:""),1),g]),(0,i.bF)(C,{style:{width:"70%","margin-left":"3%"}})]),u,(0,i.Lk)("div",p,[f,(0,i.bF)(L,{style:{width:"70%","margin-left":"3%"}})]),m,(0,i.Lk)("div",y,[v,(0,i.bF)(D,{style:{width:"70%","margin-left":"3%"}})])],64)}var k=a(6278),C=a(5093),L=a.n(C),D=a(8465),x=a.n(D),w=a(3751);const I=t=>((0,i.Qi)("data-v-586af82c"),t=t(),(0,i.jt)(),t),A={class:"cards",style:{"background-color":"#f9f9f9",height:"400px"}},_=I((()=>(0,i.Lk)("p",{class:"text-left lg2 KB_C2"},"페이지 방문자 수",-1))),E={class:"flex"},B={class:"cards favorite-card",style:{display:"flex","flex-direction":"column",width:"100%"}},S={class:"subBox",style:{width:"100%",padding:"0 20px","text-align":"right"}},M={class:"dateround"},T={class:"chartWithTotalVisitors",style:{display:"flex"}},F={class:"chartBox",style:{flex:"1",padding:"20px"}},P=["id"],$={class:"boxs",style:{flex:"0.5",display:"contents","flex-direction":"column","justify-content":"center",padding:"20px","margin-top":"50px","margin-left":"20px"}},K={class:"bu"},V=I((()=>(0,i.Lk)("div",{style:{display:"flex","justify-content":"center"}},[(0,i.Lk)("i",{class:"bi bi-display",style:{color:"#868686","font-size":"2.3rem"}})],-1))),j=I((()=>(0,i.Lk)("span",null,"총 방문자 수",-1))),O={class:"KB_C1",style:{"font-size":"23pt","font-weight":"bold"}},W={class:"bu"},X=I((()=>(0,i.Lk)("div",{style:{display:"flex","justify-content":"center"}},[(0,i.Lk)("i",{class:"bi bi-reception-4",style:{color:"#868686","font-size":"2.3rem"}})],-1))),z={class:"KB_C1",style:{"font-size":"23pt","font-weight":"bold"}},Q={class:"bu"},U=I((()=>(0,i.Lk)("div",{style:{display:"flex","justify-content":"center"}},[(0,i.Lk)("i",{class:"bi bi-reception-2",style:{color:"#868686","font-size":"2.3rem"}})],-1))),R={class:"KB_C1",style:{"font-size":"23pt","font-weight":"bold"}};function J(t,e,a,n,l,r){return(0,i.uX)(),(0,i.CE)("div",A,[_,(0,i.Lk)("div",E,[(0,i.Lk)("div",B,[(0,i.Lk)("div",S,[(0,i.Lk)("div",M,[(0,i.bo)((0,i.Lk)("input",{type:"date",class:"date",id:"startDate","onUpdate:modelValue":e[0]||(e[0]=t=>l.startDate=t),onChange:e[1]||(e[1]=(...t)=>r.updateCharts&&r.updateCharts(...t))},null,544),[[w.Jo,l.startDate]]),(0,i.eW)(" - "),(0,i.bo)((0,i.Lk)("input",{type:"date",class:"date",id:"endDate","onUpdate:modelValue":e[2]||(e[2]=t=>l.endDate=t),onChange:e[3]||(e[3]=(...t)=>r.updateCharts&&r.updateCharts(...t))},null,544),[[w.Jo,l.endDate]])])]),(0,i.Lk)("div",T,[(0,i.Lk)("div",F,[(0,i.Lk)("canvas",{id:l.chartIds[0],width:"400",height:"235"},null,8,P)]),(0,i.Lk)("div",$,[(0,i.Lk)("div",K,[(0,i.Lk)("div",null,[V,j,(0,i.Lk)("div",O,(0,s.v_)(l.total),1)])]),(0,i.Lk)("div",W,[X,(0,i.Lk)("div",null,[(0,i.eW)(" 최고 방문자 수 "),(0,i.Lk)("div",z,(0,s.v_)(l.maxcount),1)])]),(0,i.Lk)("div",Q,[U,(0,i.Lk)("div",null,[(0,i.eW)(" 최소 방문자 수 "),(0,i.Lk)("div",R,(0,s.v_)(l.mincount),1)])])])])])])])}a(4114);var H=a(2022),N=a(7682);H.t1.register(...H.$L);var q={name:"PageCount",data(){return{startDate:"",endDate:"",total:0,maxcount:0,mincount:0,charts:{},chartIds:["Chart1"]}},mounted(){this.setDefaultDates(),this.updateCharts()},computed:{...(0,k.L8)("login",["getLoginInfo"]),...(0,k.i0)("loginHistory",["loginHistoryCountArray"]),loginInfo(){return this.getLoginInfo}},methods:{setDefaultDates(){const t=new Date,e=new Date(t);e.setDate(t.getDate()-1);const a=e.toISOString().split("T")[0];t.setDate(t.getDate()-7);const i=t.toISOString().split("T")[0];this.startDate=i,this.endDate=a;const s=document.getElementById("endDate");s.setAttribute("max",a)},async updateCharts(){if(new Date(this.startDate)>new Date(this.endDate))x().fire({icon:"error",title:"Error",text:"시작 날짜는 종료 날짜보다 이전이어야 합니다."});else try{const t=await this.chartDataCount();this.total=t.reduce(((t,e)=>t+e),0),this.maxcount=Math.max(...t),this.mincount=Math.min(...t),this.renderCharts(t)}catch(t){console.error("Error fetching login history:",t)}},async chartDataCount(){const t=this.startDate.trim(),e=this.endDate.trim();try{const a=await N.A.post("/user/loginHistoryCountArray",null,{params:{startDate:t,endDate:e}});console.log("Response data:",a.data);const i=a.data.map((t=>t.count));return console.log("결과:",i),i}catch(a){return console.error("Error fetching login history:",a),[]}},renderCharts(t){this.chartIds.forEach(((e,a)=>{const i=document.getElementById(e)?.getContext("2d");i?(this.charts[e]&&this.charts[e].destroy(),this.charts[e]=new H.t1(i,{type:"line",data:{labels:this.weekDays(),datasets:[{label:`Dataset ${a+1}`,borderColor:"#FFCC00",backgroundColor:"#FFCC00",data:t,fill:!0,tension:.4,borderRadius:5}]},options:{responsive:!0,plugins:{legend:{display:!1},title:{display:!1}},scales:{y:{ticks:{display:!1},grid:{display:!1}},x:{grid:{display:!1}}}}})):console.error(`Canvas element with id '${e}' not found.`)}))},weekDays(){const t=[],e=new Date(this.startDate),a=new Date(this.endDate);for(let i=new Date(e);i<=a;i.setDate(i.getDate()+1)){const e=i.getMonth()+1,a=i.getDate();t.push(`${e}-${a}`)}return t}}},G=a(6262);const Z=(0,G.A)(q,[["render",J],["__scopeId","data-v-586af82c"]]);var Y=Z,tt=a.p+"img/콜리얼굴최고.fdc2b2b5.png";const et=t=>((0,i.Qi)("data-v-4c70d479"),t=t(),(0,i.jt)(),t),at={class:"cards",style:{"background-color":"#f9f9f9",height:"400px"}},it=et((()=>(0,i.Lk)("p",{class:"text-left lg2 KB_C2"},"마일리지 방문자 수",-1))),st={class:"cards favorite-card"},nt={class:"text-right"},lt=["max"],rt=et((()=>(0,i.Lk)("br",null,null,-1))),ot={class:"sub"},dt={class:"chart-container"},ct=["id"],ht={class:"best"},gt=et((()=>(0,i.Lk)("img",{src:tt,style:{width:"100px",height:"100px"}},null,-1))),ut=et((()=>(0,i.Lk)("div",{class:"lg2 KB_C2",style:{"font-weight":"bold"}},[(0,i.Lk)("i",{class:"bi bi-trophy-fill"}),(0,i.eW)(" 1위 ")],-1))),pt={class:"lg2 KB_C2",style:{"font-weight":"bold"}};function ft(t,e,a,n,l,r){return(0,i.uX)(),(0,i.CE)("div",at,[(0,i.Lk)("div",null,[it,(0,i.Lk)("div",st,[(0,i.Lk)("div",nt,[(0,i.bo)((0,i.Lk)("input",{type:"date",class:"date",id:"date","onUpdate:modelValue":e[0]||(e[0]=t=>l.date=t),max:r.maxDate,onChange:e[1]||(e[1]=(...t)=>r.updateCharts2&&r.updateCharts2(...t))},null,40,lt),[[w.Jo,l.date]])]),rt,(0,i.Lk)("div",ot,[(0,i.Lk)("div",dt,[(0,i.Lk)("canvas",{id:l.mileChartId[0],class:"chartMile"},null,8,ct)]),(0,i.Lk)("div",ht,[gt,ut,(0,i.Lk)("p",pt,[(0,i.Lk)("mark",null,(0,s.v_)(l.best),1)])])])])])])}H.t1.register(...H.$L);var mt={name:"MileagePageCount",data(){return{mileChart:{},date:"",mileChartId:["MileChart"],todayDate:(new Date).toISOString().split("T")[0],best:"-"}},computed:{maxDate(){const t=new Date,e=new Date(t);return e.setDate(t.getDate()-1),e.toISOString().split("T")[0]},...(0,k.L8)("login",["getLoginInfo"]),loginInfo(){return this.getLoginInfo}},methods:{async updateCharts2(){try{const{hitCounts:t}=await this.realChartData(),e=await this.label();this.findMaxAndSetBest(t,e),this.renderChart2(t,e)}catch(t){console.error("Error fetching chart data:",t)}},async label(){try{const t=await N.A.get("/mileage/getMileage"),e=t.data.map((t=>t.mile_name));return e}catch(t){return console.error("Error fetching mileage labels:",t),[]}},async realChartData(){try{const t=await N.A.post("/mileage/hit_mileChartDATE",{date:this.date});if(!t.data||!Array.isArray(t.data))throw new Error("Invalid response data format");const e=t.data.map((t=>t.hit_count));return console.log("마일리지 결과",e),{hitCounts:e}}catch(t){return console.error("Error fetching chart data:",t),{hitCounts:[]}}},findMaxAndSetBest(t,e){const a=this.findMaxIndex(t);-1!==a&&e.length>a?this.best=0===t[a]?"-":e[a]:this.best="-"},findMaxIndex(t){if(0===t.length)return-1;let e=-1,a=Number.MIN_SAFE_INTEGER;for(let i=0;i<t.length;i++)t[i]>a&&(a=t[i],e=i);return e},renderChart2(t,e){const a=this.mileChartId[0],i=document.getElementById(a);if(i){this.mileChart[a]&&this.mileChart[a].destroy();try{this.mileChart[a]=new H.t1(i,{type:"bar",data:{labels:e,datasets:[{label:"방문자 수",data:t,backgroundColor:["#ADE98A","#36A2EB","#ADE98A","#36A2EB","#ADE98A","#36A2EB","#ADE98A","#36A2EB"],borderWidth:1,barThickness:55}]},options:{plugins:{legend:{display:!1}},scales:{y:{beginAtZero:!0,ticks:{display:!1},grid:{drawBorder:!1,display:!1}},x:{grid:{drawBorder:!1,display:!1}}},layout:{padding:{left:0,right:0,top:0,bottom:0}},maintainAspectRatio:!1,responsive:!0}})}catch(s){console.error("Error rendering chart:",s)}}else console.error(`Canvas element with id '${a}' not found.`)},setInitialDate(){const t=new Date,e=new Date(t);e.setDate(t.getDate()-1);const a=e.toISOString().split("T")[0];this.date=a}},mounted(){this.setInitialDate(),this.updateCharts2()}};const yt=(0,G.A)(mt,[["render",ft],["__scopeId","data-v-4c70d479"]]);var vt=yt;const bt=t=>((0,i.Qi)("data-v-b5b0fa24"),t=t(),(0,i.jt)(),t),kt={class:"cards",style:{"background-color":"#f9f9f9",height:"400px"}},Ct=bt((()=>(0,i.Lk)("p",{class:"text-left lg2 KB_C2"},"직급별 방문자 수",-1))),Lt={class:"cards favorite-card"},Dt={class:"sub"},xt={class:"container2"},wt={class:"table table-sm custom-table"},It=bt((()=>(0,i.Lk)("thead",null,[(0,i.Lk)("tr",null,[(0,i.Lk)("th",null,"직급"),(0,i.Lk)("th",null,"방문자 수")])],-1))),At={class:"chart-container"},_t={class:"text-right"},Et=["max"],Bt=["id"];function St(t,e,a,n,l,r){return(0,i.uX)(),(0,i.CE)("div",kt,[(0,i.Lk)("div",null,[Ct,(0,i.Lk)("div",Lt,[(0,i.Lk)("div",Dt,[(0,i.Lk)("div",xt,[(0,i.Lk)("table",wt,[It,(0,i.Lk)("tbody",null,[((0,i.uX)(!0),(0,i.CE)(i.FK,null,(0,i.pI)(l.data,((t,e)=>((0,i.uX)(),(0,i.CE)("tr",{key:e},[(0,i.Lk)("td",null,(0,s.v_)("L"+e),1),(0,i.Lk)("td",null,(0,s.v_)(t),1)])))),128))])])]),(0,i.Lk)("div",At,[(0,i.Lk)("div",_t,[(0,i.bo)((0,i.Lk)("input",{type:"date",class:"date",id:"date","onUpdate:modelValue":e[0]||(e[0]=t=>l.date=t),max:r.maxDate,onChange:e[1]||(e[1]=(...t)=>r.updateCharts3&&r.updateCharts3(...t))},null,40,Et),[[w.Jo,l.date]])]),(0,i.Lk)("canvas",{id:l.positionChartId[0],class:"positionchart"},null,8,Bt)])])])])])}H.t1.register(...H.$L);var Mt={name:"PositionChart",data(){return{positionChart:{},date:"",positionChartId:["PositionChart"],todayDate:(new Date).toISOString().split("T")[0],data:Array.from({length:5},(()=>"-"))}},computed:{maxDate(){const t=new Date,e=new Date(t);return e.setDate(t.getDate()-1),e.toISOString().split("T")[0]},...(0,k.L8)("login",["getLoginInfo"]),loginInfo(){return this.getLoginInfo}},methods:{async updateCharts3(){try{const t=await this.realChartData();this.data=t,this.renderChart3(t)}catch(t){console.error("Error fetching chart data:",t)}},async realChartData(){try{const t=await N.A.post("/user/levelChartData",{date:this.date});if(!t.data||!Array.isArray(t.data))throw new Error("Invalid response data format");const e=t.data.map((t=>t.visitorCount));return console.log("원형차트 결과",e),e}catch(t){return console.error("Error fetching chart data:",t),[]}},renderChart3(t){const e=this.positionChartId[0],a=document.getElementById(e);if(a){this.positionChart[e]&&this.positionChart[e].destroy();try{this.positionChart[e]=new H.t1(a,{type:"pie",data:{labels:["L0","L1","L2","L3","L4"],datasets:[{data:t,backgroundColor:["#20C997","#0CC68F","#16BA89","#198754","#177147"],borderWidth:1}]},options:{plugins:{legend:{display:!0,position:"right"}},maintainAspectRatio:!1}})}catch(i){console.error("Error rendering chart:",i)}}else console.error(`Canvas element with id '${e}' not found.`)},setInitialDate(){const t=new Date,e=new Date(t);e.setDate(t.getDate()-1);const a=e.toISOString().split("T")[0];this.date=a}},mounted(){this.setInitialDate(),this.updateCharts3()}};const Tt=(0,G.A)(Mt,[["render",St],["__scopeId","data-v-b5b0fa24"]]);var Ft=Tt,Pt={name:"AdminMainView",components:{PageCount:Y,MileagePageCount:vt,PositionChart:Ft},computed:{...(0,k.L8)("login",["getLoginInfo"]),profileImageUrl(){return this.loginInfo&&this.loginInfo.user_no?`/profile/${this.loginInfo.user_no}.jpg`:""},loginInfo(){return this.getLoginInfo}},mounted(){this.checkFirstBusinessDay()},methods:{setDefaultImage(t){t.target.src=a(6468)},checkFirstBusinessDay(){const t=L()();let e=t.clone();while(e.month()===t.month()){if(0!==e.day()&&6!==e.day()&&1===e.date()){x().fire({icon:"info",title:"알림",text:"마왕 채택일입니다. 채택을 진행해주세요."}).then((t=>{t.isConfirmed&&(window.location.href="/kingMain")}));break}e.add(1,"day")}}}};const $t=(0,G.A)(Pt,[["render",b],["__scopeId","data-v-4b4eda89"]]);var Kt=$t}}]);
//# sourceMappingURL=7781.58f0e339.js.map
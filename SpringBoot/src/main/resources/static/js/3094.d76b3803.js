"use strict";(self["webpackChunkmile"]=self["webpackChunkmile"]||[]).push([[3094],{43094:function(e,t,i){i.r(t),i.d(t,{default:function(){return te}});var n=i(20641),o=i(53751),s=i(90033);const r=e=>((0,n.Qi)("data-v-932c97ac"),e=e(),(0,n.jt)(),e),a={class:"app-container"},c={class:"back-container"},l=r((()=>(0,n.Lk)("span",{class:"arrow"},"❮",-1))),u=r((()=>(0,n.Lk)("div",null,[(0,n.Lk)("h2",{class:"bold--x-lg"},"내가 좋아요한 M-Tip")],-1))),d=r((()=>(0,n.Lk)("div",{class:"category-button list-wrapper"},"카테고리",-1))),h={key:0,class:"dropdown-menu",ref:"dropdownMenu"},g={class:"menu-items"},f=["onClick"],p=r((()=>(0,n.Lk)("span",{class:"mileage-text"},"마일리지",-1))),m={class:"notice-count-container"},k={class:"notice-count"},_={class:"checkbox-container"},v=r((()=>(0,n.Lk)("span",{class:"custom-checkbox"},null,-1))),y=r((()=>(0,n.Lk)("span",{class:"checkbox-label"},"조회수",-1))),b={class:"checkbox-container"},w=r((()=>(0,n.Lk)("span",{class:"custom-checkbox"},null,-1))),C=r((()=>(0,n.Lk)("span",{class:"checkbox-label"},"최신순",-1))),L={key:0},P=r((()=>(0,n.Lk)("i",{class:"bi bi-pencil",style:{"margin-right":"10px"}},null,-1))),x={class:"search-container"},I=r((()=>(0,n.Lk)("i",{class:"bi bi-search"},null,-1))),D=[I],B={class:"notice-list"},E={key:0},S=["onClick"],N={class:"notice-details"},M={key:0,class:"notice-new"},z={key:1,class:"notice-num"},A={class:"notice-mile"},V={class:"notice-title"},X={class:"notice-date"},Q=r((()=>(0,n.Lk)("i",{class:"bi bi-eye"},null,-1))),T={class:"notice-views"},O=r((()=>(0,n.Lk)("i",{class:"fa fa-eye"},null,-1))),$={class:"notice-like"},F={key:1},W=r((()=>(0,n.Lk)("p",null,"게시글이 없습니다.",-1))),j=[W],K={class:"pagination"},U=["disabled"],H=["onClick"],R=["disabled"];function q(e,t,i,r,I,W){return(0,n.uX)(),(0,n.CE)("div",a,[(0,n.Lk)("div",{class:"content cards",onClick:t[13]||(t[13]=(...t)=>e.handleClick&&e.handleClick(...t))},[(0,n.Lk)("div",c,[(0,n.Lk)("button",{class:"back-button",onClick:t[0]||(t[0]=(...e)=>W.goBack&&W.goBack(...e))},[l,(0,n.eW)(" 이전 ")])]),u,(0,n.Lk)("div",{onClick:t[3]||(t[3]=(0,o.D$)(((...e)=>W.toggleCategory&&W.toggleCategory(...e)),["stop"])),class:"QnA",ref:"categoryButton"},[d,I.showCategory?((0,n.uX)(),(0,n.CE)("div",h,[(0,n.Lk)("div",g,[(0,n.Lk)("a",{class:"dropdown-item",onClick:t[1]||(t[1]=e=>W.filterByCategory(null))},"전체"),((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(I.mileages,(e=>((0,n.uX)(),(0,n.CE)("a",{class:"dropdown-item",key:e.mile_no,onClick:t=>W.filterByCategory(e.mile_name)},[(0,n.eW)((0,s.v_)(e.mile_name)+"   ",1),p],8,f)))),128)),(0,n.Lk)("a",{class:"dropdown-item",onClick:t[2]||(t[2]=e=>W.filterByCategory("기타"))},"기타")])],512)):(0,n.Q3)("",!0)],512),(0,n.Lk)("div",m,[(0,n.Lk)("div",k,"총 "+(0,s.v_)(W.filteredNotices.length)+"건",1),(0,n.Lk)("label",_,[(0,n.bo)((0,n.Lk)("input",{type:"checkbox","onUpdate:modelValue":t[4]||(t[4]=e=>I.sortByViews=e),onChange:t[5]||(t[5]=e=>W.handleCheckboxChange("views"))},null,544),[[o.lH,I.sortByViews]]),v,y]),(0,n.Lk)("label",b,[(0,n.bo)((0,n.Lk)("input",{type:"checkbox","onUpdate:modelValue":t[6]||(t[6]=e=>I.sortByDateAsc=e),onChange:t[7]||(t[7]=e=>W.handleCheckboxChange("date"))},null,544),[[o.lH,I.sortByDateAsc]]),w,C])]),(0,n.Lk)("div",null,[W.isLoggedIn&&W.loginInfo.user_is_admin&&!W.loginInfo.user_is_manager&&W.isChecked?((0,n.uX)(),(0,n.CE)("div",L,[(0,n.Lk)("button",{class:"write-button",onClick:t[8]||(t[8]=(...t)=>e.goToWritePage&&e.goToWritePage(...t))},[P,(0,n.eW)(" 글작성 ")])])):(0,n.Q3)("",!0)]),(0,n.Lk)("div",x,[(0,n.bo)((0,n.Lk)("input",{type:"text","onUpdate:modelValue":t[9]||(t[9]=e=>I.searchQuery=e),placeholder:"검색어를 입력하세요",class:"input-search"},null,512),[[o.Jo,I.searchQuery]]),(0,n.Lk)("button",{class:"search-button",onClick:t[10]||(t[10]=(...e)=>W.searchNotices&&W.searchNotices(...e))},D)]),(0,n.Lk)("div",B,[W.paginatedNotices.length?((0,n.uX)(),(0,n.CE)("div",E,[((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(W.paginatedNotices,(t=>((0,n.uX)(),(0,n.CE)("div",{class:"input-base list-wrapper",key:t.notice_board_no,onClick:e=>W.handleNoticeClick(t)},[(0,n.Lk)("div",N,[t.is_new?((0,n.uX)(),(0,n.CE)("div",M,(0,s.v_)(t.display_num),1)):((0,n.uX)(),(0,n.CE)("div",z,(0,s.v_)(t.display_num),1)),(0,n.Lk)("div",A,(0,s.v_)(t.mile_name&&"기타"!==t.mile_name?t.mile_name+"마일리지":"기타"),1),(0,n.Lk)("div",V,(0,s.v_)(t.mtip_board_title.length>30?t.mtip_board_title.substring(0,30)+" ...":t.mtip_board_title),1),(0,n.Lk)("pre",X,(0,s.v_)(W.formatDate(t.mtip_board_date)),1),Q,(0,n.Lk)("div",T,[(0,n.eW)((0,s.v_)(t.mtip_board_hit)+" ",1),O]),(0,n.Lk)("i",{class:(0,s.C4)(["bi",e.isPostLiked(W.loginInfo.user_no,t.mtip_board_no)?"bi-heart-fill":"bi-heart"]),style:(0,s.Tr)({color:e.isPostLiked(W.loginInfo.user_no,t.mtip_board_no)?"#dc3545":"inherit"})},null,6),(0,n.Lk)("div",$,(0,s.v_)(t.mtip_board_like),1)])],8,S)))),128))])):((0,n.uX)(),(0,n.CE)("div",F,j))]),(0,n.Lk)("div",K,[(0,n.Lk)("button",{onClick:t[11]||(t[11]=(...e)=>W.prevPage&&W.prevPage(...e)),disabled:1===I.currentPage},"〈",8,U),((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(W.totalPages,(e=>((0,n.uX)(),(0,n.CE)("button",{onClick:t=>W.goToPage(e),class:(0,s.C4)({active:I.currentPage===e}),key:e},(0,s.v_)(e),11,H)))),128)),(0,n.Lk)("button",{onClick:t[12]||(t[12]=(...e)=>W.nextPage&&W.nextPage(...e)),disabled:I.currentPage===W.totalPages}," 〉 ",8,R)])])])}i(44114),i(43375),i(39225),i(13972),i(99209),i(25714),i(17561),i(66197);var J=i(66278),G=i(37682),Y={data(){return{notices:[],mileages:[],showCategory:!1,currentPage:1,itemsPerPage:10,searchQuery:"",selectedCategory:null,isProcessing:!1,sortByDateAsc:!0,sortByViews:!1}},created(){this.checkLoginInfo()},computed:{...(0,J.L8)("login",["getLoginInfo","getIsChecked"]),...(0,J.aH)("login",["loginInfo"]),...(0,J.L8)("mtipBoard",["isPostLiked"]),uniqueMileages(){return[...new Set(this.notices.filter((e=>e.mile_name)).map((e=>e.mile_name)))]},filteredNotices(){let e=this.notices;if(this.searchQuery){const t=this.searchQuery.toLowerCase();e=e.filter((e=>e.mtip_board_title&&e.mtip_board_title.toLowerCase().includes(t)||e.mtip_board_content&&e.mtip_board_content.toLowerCase().includes(t)))}null!==this.selectedCategory&&(e="기타"===this.selectedCategory?e.filter((e=>!e.mile_name)):e.filter((e=>e.mile_name===this.selectedCategory))),this.sortByViews?e.sort(((e,t)=>t.mtip_board_hit-e.mtip_board_hit||new Date(t.mtip_board_date)-new Date(e.mtip_board_date))):this.sortByDateAsc?e.sort(((e,t)=>new Date(t.mtip_board_date)-new Date(e.mtip_board_date))):e.sort(((e,t)=>new Date(e.mtip_board_date)-new Date(t.mtip_board_date)));let t=1;return e.map((e=>({...e,is_new:this.isNew(e.mtip_board_date),display_num:this.isNew(e.mtip_board_date)?"NEW":t++})))},loginInfo(){return this.getLoginInfo},isChecked(){return this.getIsChecked},isLoggedIn(){return!!this.loginInfo},totalPages(){return Math.ceil(this.filteredNotices.length/this.itemsPerPage)},paginatedNotices(){const e=(this.currentPage-1)*this.itemsPerPage,t=e+this.itemsPerPage;return this.filteredNotices.slice(e,t)}},methods:{...(0,J.i0)("mtipBoard",["fetchNotices","fetchLikedPosts"]),...(0,J.i0)("mileage",["fetchMileages"]),checkLoginInfo(){(!this.getLoginInfo||this.getLoginInfo&&1==this.getIsChecked)&&(window.location.href="/noAccess")},goBack(){this.$router.go(-1)},isNew(e){const t=new Date,i=new Date(e),n=t.getTime()-i.getTime(),o=n/864e5;return o<=7},handleCheckboxChange(e){"views"===e&&this.sortByViews?this.sortByDateAsc=!1:"date"===e&&this.sortByDateAsc&&(this.sortByViews=!1)},toggleCategory(){this.showCategory=!this.showCategory},closeDropdown(){this.showCategory=!1},handleClickOutside(e){this.$refs.dropdownMenu&&!this.$refs.dropdownMenu.contains(e.target)&&this.$refs.categoryButton&&!this.$refs.categoryButton.contains(e.target)&&this.closeDropdown()},goToPage(e){this.currentPage=e},nextPage(){this.currentPage<this.totalPages&&this.currentPage++},prevPage(){this.currentPage>1&&this.currentPage--},async fetchNotices(){console.log("게시글 list 서버 메소드로 이동 ~ ");try{const e=await G.A.get("/mtip/MyBestmtiplist",{params:{user_no:this.loginInfo?this.loginInfo.user_no:null,user_name:this.loginInfo?this.loginInfo.user_name:null}});this.notices=e.data,console.log("list 서버에서 가지고 온 값 :",this.notices)}catch(e){console.error("Error fetching notices:",e.response?e.response.data:e.message)}},async fetchMileages(){try{const e=await G.A.get("/mtip/Mtipmileage");console.log("Fetched mileages:",e.data),this.mileages=e.data}catch(e){console.error("Error fetching mileages:",e.response?e.response.data:e.message)}},async handleNoticeClick(e){if(console.log("notice:",e),!this.isProcessing){this.isProcessing=!0;try{console.log("게시글 상세보기+조회수 메소드 도달",e),await G.A.get(`/mtip/MtipViews/${e.mtip_board_no}`);const t=await G.A.get(`/mtip/details/${e.mtip_board_no}`);console.log("게시글 상세보기 서버에서 가지고 온 데이터:",t);const i=t.data;console.log("Fetched notice details:",i),e.mtip_board_hit+=1;const n={...i,mile_no:i.mile_no,mile_name:i.mile_name,file:i.mtip_board_file||null,mtip_board_hit:e.mtip_board_hit};console.log("Navigating to noticeDetailView with notice:",{id:e.mtip_board_no,notice:n}),console.log("MtipListView에서 넘기는 notice:",e),this.$router.push({name:"m_TipDetailView",params:{mtip_board_no:e.mtip_board_no}})}catch(t){console.error("Error fetching notice details:",t.response?t.response.data:t.message)}finally{this.isProcessing=!1}}},formatDate(e){const t={year:"numeric",month:"2-digit",day:"2-digit"};return new Date(e).toLocaleDateString("ko-KR",t)},searchNotices(){this.currentPage=1},filterByCategory(e){this.selectedCategory=e,this.currentPage=1},refreshPage(){this.selectedCategory=null,this.searchQuery="",this.currentPage=1},async initializeData(){try{await this.fetchNotices(),await this.fetchMileages(),this.loginInfo&&await this.fetchLikedPosts(this.loginInfo.user_no)}catch(e){console.error("Error initializing data:",e)}}},mounted(){console.log("loginInfo:",this.loginInfo),console.log("isLoggedIn:",this.isLoggedIn),console.log("isChecked:",this.isChecked),document.addEventListener("click",this.handleClickOutside),this.fetchNotices(),this.fetchMileages(),this.initializeData()},beforeUnmount(){document.removeEventListener("click",this.handleClickOutside)}},Z=i(66262);const ee=(0,Z.A)(Y,[["render",q],["__scopeId","data-v-932c97ac"]]);var te=ee},97080:function(e,t,i){var n=i(94402).has;e.exports=function(e){return n(e),e}},46706:function(e,t,i){var n=i(79504),o=i(79306);e.exports=function(e,t,i){try{return n(o(Object.getOwnPropertyDescriptor(e,t)[i]))}catch(s){}}},1767:function(e){e.exports=function(e){return{iterator:e,next:e.next,done:!1}}},83789:function(e,t,i){var n=i(79306),o=i(28551),s=i(69565),r=i(91291),a=i(1767),c="Invalid size",l=RangeError,u=TypeError,d=Math.max,h=function(e,t){this.set=e,this.size=d(t,0),this.has=n(e.has),this.keys=n(e.keys)};h.prototype={getIterator:function(){return a(o(s(this.keys,this.set)))},includes:function(e){return s(this.has,this.set,e)}},e.exports=function(e){o(e);var t=+e.size;if(t!==t)throw new u(c);var i=r(t);if(i<0)throw new l(c);return new h(e,i)}},40507:function(e,t,i){var n=i(69565);e.exports=function(e,t,i){var o,s,r=i?e:e.iterator,a=e.next;while(!(o=n(a,r)).done)if(s=t(o.value),void 0!==s)return s}},9539:function(e,t,i){var n=i(69565),o=i(28551),s=i(55966);e.exports=function(e,t,i){var r,a;o(e);try{if(r=s(e,"return"),!r){if("throw"===t)throw i;return i}r=n(r,e)}catch(c){a=!0,r=c}if("throw"===t)throw i;if(a)throw r;return o(r),i}},89286:function(e,t,i){var n=i(94402),o=i(38469),s=n.Set,r=n.add;e.exports=function(e){var t=new s;return o(e,(function(e){r(t,e)})),t}},83440:function(e,t,i){var n=i(97080),o=i(94402),s=i(89286),r=i(25170),a=i(83789),c=i(38469),l=i(40507),u=o.has,d=o.remove;e.exports=function(e){var t=n(this),i=a(e),o=s(t);return r(t)<=i.size?c(t,(function(e){i.includes(e)&&d(o,e)})):l(i.getIterator(),(function(e){u(t,e)&&d(o,e)})),o}},94402:function(e,t,i){var n=i(79504),o=Set.prototype;e.exports={Set:Set,add:n(o.add),has:n(o.has),remove:n(o["delete"]),proto:o}},68750:function(e,t,i){var n=i(97080),o=i(94402),s=i(25170),r=i(83789),a=i(38469),c=i(40507),l=o.Set,u=o.add,d=o.has;e.exports=function(e){var t=n(this),i=r(e),o=new l;return s(t)>i.size?c(i.getIterator(),(function(e){d(t,e)&&u(o,e)})):a(t,(function(e){i.includes(e)&&u(o,e)})),o}},64449:function(e,t,i){var n=i(97080),o=i(94402).has,s=i(25170),r=i(83789),a=i(38469),c=i(40507),l=i(9539);e.exports=function(e){var t=n(this),i=r(e);if(s(t)<=i.size)return!1!==a(t,(function(e){if(i.includes(e))return!1}),!0);var u=i.getIterator();return!1!==c(u,(function(e){if(o(t,e))return l(u,"normal",!1)}))}},53838:function(e,t,i){var n=i(97080),o=i(25170),s=i(38469),r=i(83789);e.exports=function(e){var t=n(this),i=r(e);return!(o(t)>i.size)&&!1!==s(t,(function(e){if(!i.includes(e))return!1}),!0)}},28527:function(e,t,i){var n=i(97080),o=i(94402).has,s=i(25170),r=i(83789),a=i(40507),c=i(9539);e.exports=function(e){var t=n(this),i=r(e);if(s(t)<i.size)return!1;var l=i.getIterator();return!1!==a(l,(function(e){if(!o(t,e))return c(l,"normal",!1)}))}},38469:function(e,t,i){var n=i(79504),o=i(40507),s=i(94402),r=s.Set,a=s.proto,c=n(a.forEach),l=n(a.keys),u=l(new r).next;e.exports=function(e,t,i){return i?o({iterator:l(e),next:u},t):c(e,t)}},84916:function(e,t,i){var n=i(97751),o=function(e){return{size:e,has:function(){return!1},keys:function(){return{next:function(){return{done:!0}}}}}};e.exports=function(e){var t=n("Set");try{(new t)[e](o(0));try{return(new t)[e](o(-1)),!1}catch(i){return!0}}catch(s){return!1}}},25170:function(e,t,i){var n=i(46706),o=i(94402);e.exports=n(o.proto,"size","get")||function(e){return e.size}},83650:function(e,t,i){var n=i(97080),o=i(94402),s=i(89286),r=i(83789),a=i(40507),c=o.add,l=o.has,u=o.remove;e.exports=function(e){var t=n(this),i=r(e).getIterator(),o=s(t);return a(i,(function(e){l(t,e)?u(o,e):c(o,e)})),o}},44204:function(e,t,i){var n=i(97080),o=i(94402).add,s=i(89286),r=i(83789),a=i(40507);e.exports=function(e){var t=n(this),i=r(e).getIterator(),c=s(t);return a(i,(function(e){o(c,e)})),c}},17642:function(e,t,i){var n=i(46518),o=i(83440),s=i(84916);n({target:"Set",proto:!0,real:!0,forced:!s("difference")},{difference:o})},58004:function(e,t,i){var n=i(46518),o=i(79039),s=i(68750),r=i(84916),a=!r("intersection")||o((function(){return"3,2"!==String(Array.from(new Set([1,2,3]).intersection(new Set([3,2]))))}));n({target:"Set",proto:!0,real:!0,forced:a},{intersection:s})},33853:function(e,t,i){var n=i(46518),o=i(64449),s=i(84916);n({target:"Set",proto:!0,real:!0,forced:!s("isDisjointFrom")},{isDisjointFrom:o})},45876:function(e,t,i){var n=i(46518),o=i(53838),s=i(84916);n({target:"Set",proto:!0,real:!0,forced:!s("isSubsetOf")},{isSubsetOf:o})},32475:function(e,t,i){var n=i(46518),o=i(28527),s=i(84916);n({target:"Set",proto:!0,real:!0,forced:!s("isSupersetOf")},{isSupersetOf:o})},15024:function(e,t,i){var n=i(46518),o=i(83650),s=i(84916);n({target:"Set",proto:!0,real:!0,forced:!s("symmetricDifference")},{symmetricDifference:o})},31698:function(e,t,i){var n=i(46518),o=i(44204),s=i(84916);n({target:"Set",proto:!0,real:!0,forced:!s("union")},{union:o})},43375:function(e,t,i){i(17642)},39225:function(e,t,i){i(58004)},13972:function(e,t,i){i(33853)},99209:function(e,t,i){i(45876)},25714:function(e,t,i){i(32475)},17561:function(e,t,i){i(15024)},66197:function(e,t,i){i(31698)}}]);
//# sourceMappingURL=3094.d76b3803.js.map
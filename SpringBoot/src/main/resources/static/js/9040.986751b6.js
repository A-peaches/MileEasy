"use strict";(self["webpackChunkmile"]=self["webpackChunkmile"]||[]).push([[9040],{29040:function(e,i,t){t.r(i),t.d(i,{default:function(){return Ce}});var o=t(20641);const s={class:"mtip-container"},n={class:"row banner-profile-row"},a={class:"col-md-9 col-12"},l={class:"col-md-3 col-12"},c={class:"mtip-container"},r={class:"mtip-container"},d={class:"row"},m={class:"col-md-6 col-12"},p={class:"col-md-6 col-12"};function h(e,i,t,h,g,f){const _=(0,o.g2)("Banner"),u=(0,o.g2)("Profile"),b=(0,o.g2)("Guide"),v=(0,o.g2)("MTip"),w=(0,o.g2)("BestMTip");return(0,o.uX)(),(0,o.CE)(o.FK,null,[(0,o.Lk)("div",s,[(0,o.Lk)("div",n,[(0,o.Lk)("div",a,[(0,o.bF)(_)]),(0,o.Lk)("div",l,[(0,o.bF)(u)])])]),(0,o.Lk)("div",c,[(0,o.bF)(b)]),(0,o.Lk)("div",r,[(0,o.Lk)("div",d,[(0,o.Lk)("div",m,[(0,o.bF)(v)]),(0,o.Lk)("div",p,[(0,o.bF)(w)])])])],64)}var g=t(90033);const f={key:"profile",class:"cards profile-card"},_={class:"profile-content"},u={class:"profile-remark"},b={class:"text-start brown mt-2 md"},v=(0,o.Fv)('<div class="button-container" data-v-613bffd2><a class="btn-mtip" href="/m_TipWriteView" data-v-613bffd2><i class="bi bi-pencil mr-2" data-v-613bffd2></i><span class="btn-text" data-v-613bffd2>글작성</span><span class="right-arrow" data-v-613bffd2>&gt;</span></a><a class="btn-mtip" href="/myM_TipView" data-v-613bffd2><i class="bi bi-file-earmark-text mr-2" data-v-613bffd2></i><span class="btn-text" data-v-613bffd2>나의 M-Tip</span><span class="right-arrow" data-v-613bffd2>&gt;</span></a><a class="btn-mtip" href="/MyM_TipBestView" data-v-613bffd2><i class="bi bi-heart mr-2" data-v-613bffd2></i><span class="btn-text" data-v-613bffd2>내가 좋아요한 M-Tip</span><span class="right-arrow" data-v-613bffd2>&gt;</span></a></div>',1);function w(e,i,t,s,n,a){return(0,o.uX)(),(0,o.CE)("div",f,[(0,o.Lk)("div",_,[(0,o.Lk)("div",u,(0,g.v_)(a.loginInfo?a.loginInfo.user_name:"")+"님, 오늘도 좋은하루 되세요! ",1),(0,o.Lk)("div",b,"나의 M-Tip 작성 건수 : "+(0,g.v_)(e.userTotalNotices)+" 건",1),v])])}var k=t(66278),L={name:"ProfileCom",data(){return{remark:[""]}},computed:{...(0,k.L8)("login",["getLoginInfo"]),...(0,k.L8)("mtipBoard",["notices","userTotalNotices"]),loginInfo(){const e=this.getLoginInfo;return e?{...e,position_no:e.position_no||"",level_no:e.level_no||"",job_no:e.job_no||"",dp_no:e.dp_no||""}:null}},methods:{...(0,k.i0)("mtipBoard",["fetchNotices","fetchUserTotalNotices"]),setDefaultImage(e){e.target.src=t(16468)},goToMyMileageView(){window.location.href="/myMileageView"}},async mounted(){await this.fetchNotices(),this.loginInfo&&await this.fetchUserTotalNotices(this.loginInfo.user_no)}},M=t(66262);const C=(0,M.A)(L,[["render",w],["__scopeId","data-v-613bffd2"]]);var y=C;const N={class:"cards banner-back"},T={autoplay:"",muted:"",loop:"",playsInline:"","webkit-playsinline":"",class:"video-background"},E=["src"];function I(e,i,t,s,n,a){return(0,o.uX)(),(0,o.CE)("div",N,[(0,o.Lk)("video",T,[(0,o.Lk)("source",{src:a.currentVideoSrc,type:"video/mp4"},null,8,E),(0,o.eW)(" Your browser does not support the video tag. ")]),(0,o.Lk)("div",{class:"video-overlay",onClick:i[0]||(i[0]=(...e)=>a.navigate&&a.navigate(...e))})])}var V={name:"BannerCom",data(){return{desktopVideo:t(32667),mobileVideo:t(84178),windowWidth:window.innerWidth}},methods:{navigate(){window.location.href="/m_TipWriteView"},handleResize(){this.windowWidth=window.innerWidth}},computed:{currentVideoSrc(){return this.windowWidth<=768?this.mobileVideo:this.desktopVideo}},mounted(){window.addEventListener("resize",this.handleResize)},beforeUnmount(){window.removeEventListener("resize",this.handleResize)}};const B=(0,M.A)(V,[["render",I],["__scopeId","data-v-658ec33a"]]);var D=B,F=t(53751);const X=e=>((0,o.Qi)("data-v-12f47c30"),e=e(),(0,o.jt)(),e),A={key:"profile",class:"cards guide-card"},W={class:"guide-container"},U={class:"guide-header"},$=X((()=>(0,o.Lk)("div",{class:"guide-title"},"M-Tip 가이드",-1))),j={key:0,class:"file-download-wrapper-mobile"},x={key:0,class:"no-notices"},z={class:"notice-details"},P={class:"notice-content-wrapper"},R={class:"notice-content"},S={key:0,class:"file-download-wrapper-desktop"},G=["onClick"];function Q(e,i,t,s,n,a){return(0,o.uX)(),(0,o.CE)("div",A,[(0,o.Lk)("div",W,[(0,o.Lk)("div",U,[$,n.notices.length>0?((0,o.uX)(),(0,o.CE)("div",j,[(0,o.Lk)("a",{onClick:i[0]||(i[0]=(0,F.D$)((e=>a.downloadFile(n.notices[0])),["prevent"])),href:"#",class:"file-download-link"}," 상세보기 ")])):(0,o.Q3)("",!0)]),0===n.notices.length?((0,o.uX)(),(0,o.CE)("div",x," 등재된 게시글이 없습니다. ")):((0,o.uX)(!0),(0,o.CE)(o.FK,{key:1},(0,o.pI)(n.notices,(e=>((0,o.uX)(),(0,o.CE)("div",{class:"notice-item",key:e?.mtip_guide_no},[(0,o.Lk)("div",z,[(0,o.Lk)("div",P,[(0,o.Lk)("div",R,(0,g.v_)(e?.mtip_guide_content),1),e.mtip_guide_file?((0,o.uX)(),(0,o.CE)("div",S,[(0,o.Lk)("a",{onClick:(0,F.D$)((i=>a.downloadFile(e)),["prevent"]),href:"#",class:"file-download-link"}," 상세보기 ",8,G)])):(0,o.Q3)("",!0)])])])))),128))])])}t(14603),t(47566),t(98721);var K=t(37682),O={name:"GuideCom",data(){return{notices:[]}},computed:{...(0,k.L8)("login",["getLoginInfo"]),loginInfo(){const e=this.getLoginInfo;return e?{...e,position_no:e.position_no||"",level_no:e.level_no||"",job_no:e.job_no||"",dp_no:e.dp_no||""}:null}},methods:{handleMouseDown(e){e.target.style.color="#f4ada4"},handleMouseUp(e){e.target.style.color="#f4ada4"},async fetchNotices(){try{console.log("m-tip 게시글 db 접근");const e=await K.A.get("/mtip/list");console.log("m-tip 게시글 db에서 가지고 온 데이터:",e.data),this.notices=e.data.filter((e=>e&&e.mtip_guide_no)),console.log("Filtered notices:",this.notices)}catch(e){console.error("Error fetching notices:",e)}},async downloadFile(e){console.log("downloadFile 함수가 호출되었습니다.");try{console.log("다운로드 요청 URL:",`/notice/downloadGuide/${e.mtip_guide_file}`);const i=await K.A.get(`/notice/downloadGuide/${e.mtip_guide_file}`,{responseType:"blob"});console.log("서버 응답:",i);const t=new Blob([i.data],{type:i.headers["content-type"]}),o=URL.createObjectURL(t),s=document.createElement("a");s.href=o,s.download=this.getDisplayFileName(e.mtip_guide_file),s.click(),URL.revokeObjectURL(o)}catch(i){console.error("파일 다운로드 중 오류가 발생했습니다.",i.response?i.response.data:i.message),i.response&&(console.error("서버 응답 상태 코드:",i.response.status),console.error("서버 응답 데이터:",i.response.data))}},getDisplayFileName(e){return e.split("/").pop()}},created(){this.fetchNotices()}};const Y=(0,M.A)(O,[["render",Q],["__scopeId","data-v-12f47c30"]]);var H=Y;const q=e=>((0,o.Qi)("data-v-55397f28"),e=e(),(0,o.jt)(),e),J={class:"cards m-tip-container"},Z=q((()=>(0,o.Lk)("div",{class:"m-tip-header"},[(0,o.Lk)("h2",{class:"m-tip-title fw-bold"},"M-Tip"),(0,o.Lk)("a",{href:"/M_TipListView",class:"view-all"},"전체보기")],-1))),ee={class:"notice-mile"},ie=["onClick"],te={class:"notice-title"},oe=q((()=>(0,o.Lk)("span",{class:"title-icon"},"new",-1))),se={class:"notice-date"},ne={key:1,class:"no-notice"};function ae(e,i,t,s,n,a){return(0,o.uX)(),(0,o.CE)("div",J,[Z,(0,o.Lk)("div",{class:(0,g.C4)(["notice-list",{"mobile-scroll":n.isMobile}])},[((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(n.mileageCategories,(e=>((0,o.uX)(),(0,o.CE)("div",{key:e.mile_no,class:"notice-item"},[(0,o.Lk)("span",ee,(0,g.v_)(e.mile_name||"기타"),1),a.latestNotices[e.mile_name]||"기타"===e.mile_name&&a.latestNotices["기타"]?((0,o.uX)(),(0,o.CE)("div",{key:0,class:"notice-content",onClick:i=>a.handleNoticeClick(a.latestNotices[e.mile_name]||a.latestNotices["기타"])},[(0,o.Lk)("span",te,[(0,o.eW)((0,g.v_)(a.truncateTitle((a.latestNotices[e.mile_name]||a.latestNotices["기타"]).mtip_board_title))+" ",1),oe]),(0,o.Lk)("span",se,(0,g.v_)(a.formatDate(a.latestNotices[e.mile_name].mtip_board_date)),1)],8,ie)):((0,o.uX)(),(0,o.CE)("span",ne,"게시글이 없습니다."))])))),128))],2)])}t(44114);var le={name:"M-TipCom",data(){return{notices:[],mileageCategories:[],paginatedNotices:[],isMobile:!1}},computed:{...(0,k.L8)("mtipBoard",["getNewNotices"]),latestNotices(){const e={},i=this.getNewNotices||[];return this.mileageCategories.forEach((t=>{const o=i.find((e=>e.mile_name===t.mile_name||"기타"===t.mile_name&&(null===e.mile_name||"기타"===e.mile_name)));o&&(e[t.mile_name]=o)})),e},displayedCategories(){return this.isMobile?this.mileageCategories.slice(0,3):this.mileageCategories},mobileScrollStyle(){return this.isMobile?{maxHeight:"300px",overflowY:"auto"}:{}}},methods:{...(0,k.i0)("mtipBoard",["fetchNewNotices"]),truncateTitle(e){return e.length>25?e.slice(0,25)+"....":e},formatDate(e){const i=new Date(e);return i.toLocaleDateString()},checkMobile(){this.isMobile=window.innerWidth<=480,console.log("Is Mobile:",this.isMobile)},async fetchMileages(){try{const e=await K.A.get("/mtip/Mtipmileage");this.mileageCategories=e.data,this.mileageCategories.some((e=>"기타"===e.mile_name))||this.mileageCategories.push({mile_name:"기타",mile_no:null}),console.log("m-tip 카테고리 :",this.mileageCategories)}catch(e){console.error("Error fetching mileages:",e.response?e.response.data:e.message)}},async handleNoticeClick(e){if(!this.isProcessing){this.isProcessing=!0;try{await K.A.get(`/mtip/MtipViews/${e.mtip_board_no}`),await K.A.get(`/mtip/details/${e.mtip_board_no}`),e.mtip_board_hit+=1,this.$router.push({name:"m_TipDetailView",params:{mtip_board_no:e.mtip_board_no}})}catch(i){console.error("Error fetching notice details:",i.response?i.response.data:i.message)}finally{this.isProcessing=!1}}}},mounted(){this.fetchNewNotices(),this.fetchMileages(),this.checkMobile(),window.addEventListener("resize",this.checkMobile)},beforeUnmount(){window.removeEventListener("resize",this.checkMobile)}};const ce=(0,M.A)(le,[["render",ae],["__scopeId","data-v-55397f28"]]);var re=ce;const de=e=>((0,o.Qi)("data-v-7b11de70"),e=e(),(0,o.jt)(),e),me={class:"cards m-tip-container"},pe=de((()=>(0,o.Lk)("div",{class:"m-tip-header"},[(0,o.Lk)("h2",{class:"m-tip-title fw-bold"},"Best M-Tip"),(0,o.Lk)("a",{href:"/M_TipBestView",class:"view-all"},"전체보기")],-1))),he={class:"notice-mile"},ge=["onClick"],fe={class:"notice-title"},_e=de((()=>(0,o.Lk)("i",{class:"bi bi-heart-fill title-icon"},null,-1))),ue={class:"notice-date"};function be(e,i,t,s,n,a){return(0,o.uX)(),(0,o.CE)("div",me,[pe,(0,o.Lk)("div",{class:(0,g.C4)(["notice-list",{"mobile-scroll":n.isMobile}])},[((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(n.bestNotices,(e=>((0,o.uX)(),(0,o.CE)("div",{key:e.mtip_board_no,class:"notice-item"},[(0,o.Lk)("span",he,(0,g.v_)(e.mile_name||"기타"),1),(0,o.Lk)("div",{class:"notice-content",onClick:i=>a.handleNoticeClick(e)},[(0,o.Lk)("span",fe,[(0,o.eW)((0,g.v_)(a.truncateTitle(e.mtip_board_title))+" ",1),_e]),(0,o.Lk)("span",ue,(0,g.v_)(a.formatDate(e.mtip_board_date)),1)],8,ge)])))),128))],2)])}var ve={name:"BestM-TipCom",data(){return{bestNotices:[],isMobile:!1}},methods:{truncateTitle(e){return e.length>25?e.slice(0,25)+"....":e},formatDate(e){const i=new Date(e);return i.toLocaleDateString()},async fetchBestNotices(){console.log("Best Mtiplist DB 메소드로 이동 ~ ");try{const e=await K.A.get("/mtip/bestMtiplist");console.log("bestNotices:",e.data),this.bestNotices=e.data.sort(((e,i)=>e.mile_name&&"기타"!==e.mile_name?i.mile_name&&"기타"!==i.mile_name?e.mile_no-i.mile_no:-1:1)).slice(0,9),console.log("Best Mtiplist 서버에서 가지고 온 값 :",this.bestNotices)}catch(e){console.error("Error fetching best notices:",e.response?e.response.data:e.message)}},checkMobile(){this.isMobile=window.innerWidth<=480,console.log("Is Mobile:",this.isMobile)},async handleNoticeClick(e){if(console.log("notice:",e),!this.isProcessing){this.isProcessing=!0;try{console.log("게시글 상세보기+조회수 메소드 도달",e),await K.A.get(`/mtip/MtipViews/${e.mtip_board_no}`);const i=await K.A.get(`/mtip/details/${e.mtip_board_no}`);console.log("게시글 상세보기 서버에서 가지고 온 데이터:",i);const t=i.data;e.mtip_board_hit+=1;const o={...t,mile_no:t.mile_no,mile_name:t.mile_name,file:t.mtip_board_file||null,mtip_board_hit:e.mtip_board_hit};console.log("Navigating to noticeDetailView with notice:",{id:e.mtip_board_no,notice:o}),this.$router.push({name:"m_TipDetailView",params:{mtip_board_no:e.mtip_board_no}})}catch(i){console.error("Error fetching notice details:",i.response?i.response.data:i.message)}finally{this.isProcessing=!1}}}},mounted(){this.fetchBestNotices(),this.checkMobile(),window.addEventListener("resize",this.checkMobile)},beforeUnmount(){window.removeEventListener("resize",this.checkMobile)}};const we=(0,M.A)(ve,[["render",be],["__scopeId","data-v-7b11de70"]]);var ke=we,Le={name:"M_TipMainView",components:{Profile:y,Banner:D,Guide:H,MTip:re,BestMTip:ke},computed:{...(0,k.L8)("login",["getLoginInfo","getIsChecked"])},methods:{checkLoginInfo(){(!this.getLoginInfo||this.getLoginInfo&&1==this.getIsChecked)&&(window.location.href="/noAccess")}},created(){this.checkLoginInfo()}};const Me=(0,M.A)(Le,[["render",h],["__scopeId","data-v-b982da0a"]]);var Ce=Me},32667:function(e,i,t){e.exports=t.p+"media/M-Tip.a7626c21.mp4"},84178:function(e,i,t){e.exports=t.p+"media/M-Tip_mobile.29c1fac7.mp4"}}]);
//# sourceMappingURL=9040.986751b6.js.map
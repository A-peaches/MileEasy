"use strict";(self["webpackChunkmile"]=self["webpackChunkmile"]||[]).push([[4645],{4645:function(e,t,s){s.r(t),s.d(t,{default:function(){return de}});var l=s(641),a=s(33),i=s(3751);const n=e=>((0,l.Qi)("data-v-e86e7bb4"),e=e(),(0,l.jt)(),e),r={class:"app-container"},c={class:"content cards"},o=n((()=>(0,l.Lk)("div",null,[(0,l.Lk)("h2",{class:"lg"},"마일리지 요청")],-1))),u={class:"topbuton",style:{display:"flex"}},d={class:"notice-count"},p={class:"notice-count-container"},g={class:"radio-container"},k=n((()=>(0,l.Lk)("span",{class:"custom-radio"},null,-1))),h=n((()=>(0,l.Lk)("span",{class:"lg2 radio-label"},"전체",-1))),L={class:"radio-container"},m=n((()=>(0,l.Lk)("span",{class:"custom-radio"},null,-1))),y=n((()=>(0,l.Lk)("span",{class:"radio-label"},"접수요청",-1))),v={class:"radio-container"},b=n((()=>(0,l.Lk)("span",{class:"custom-radio"},null,-1))),_=n((()=>(0,l.Lk)("span",{class:"radio-label"},"접수완료",-1))),f={class:"radio-container"},C=n((()=>(0,l.Lk)("span",{class:"custom-radio"},null,-1))),P=n((()=>(0,l.Lk)("span",{class:"radio-label"},"승인완료",-1))),F={class:"radio-container"},q=n((()=>(0,l.Lk)("span",{class:"custom-radio"},null,-1))),x=n((()=>(0,l.Lk)("span",{class:"radio-label"},"승인거절",-1))),X=n((()=>(0,l.Lk)("i",{class:"bi bi-pencil",style:{"margin-right":"10px"}},null,-1))),N={class:"search-container"},w=n((()=>(0,l.Lk)("i",{class:"bi bi-search"},null,-1))),E=[w],Q={style:{"text-align":"center","justify-content":"center"}},I={key:0,class:"no-results"},R={key:1},T={class:"notice-list",style:{"text-align":"center"}},B=["onClick"],G={class:"notice-details"},U={class:"notice-new"},V={class:"notice-num"},W={class:"notice-title"},j={class:"notice-mile"},z={class:"notice-date"},A={key:1,class:"notice-details-expanded"},D=n((()=>(0,l.Lk)("p",{style:{"text-align":"left","font-size":"15pt"},class:"KB_S3 mt-3 ml-3"}," 요청사항 ",-1))),K=n((()=>(0,l.Lk)("hr",null,null,-1))),S={style:{"text-align":"left"},class:"ml-3"},J={style:{"text-align":"left"},class:"ml-3"},M={style:{"text-align":"left"},class:"ml-3"},$={style:{"text-align":"left"},class:"ml-3"},H={key:0,style:{"text-align":"right","margin-right":"10px"}},O=n((()=>(0,l.Lk)("i",{class:"bi bi-trash-fill",style:{color:"gray","font-size":"larger"}},null,-1))),Y=["onClick"],Z={class:"pagination"},ee=["disabled"],te=["onClick"],se=["disabled"];function le(e,t,s,n,w,le){return(0,l.uX)(),(0,l.CE)("div",r,[(0,l.Lk)("div",c,[o,(0,l.Lk)("div",u,[(0,l.Lk)("div",d,"총 "+(0,a.v_)(le.filteredNotices.length)+"건",1),(0,l.Lk)("div",p,[(0,l.Lk)("label",g,[(0,l.bo)((0,l.Lk)("input",{type:"radio",name:"status",value:"all","onUpdate:modelValue":t[0]||(t[0]=e=>w.selectedFilter=e),onChange:t[1]||(t[1]=(...e)=>le.applyFilters&&le.applyFilters(...e))},null,544),[[i.XL,w.selectedFilter]]),k,h]),(0,l.Lk)("label",L,[(0,l.bo)((0,l.Lk)("input",{type:"radio",name:"status",value:"processing","onUpdate:modelValue":t[2]||(t[2]=e=>w.selectedFilter=e),onChange:t[3]||(t[3]=(...e)=>le.applyFilters&&le.applyFilters(...e))},null,544),[[i.XL,w.selectedFilter]]),m,y]),(0,l.Lk)("label",v,[(0,l.bo)((0,l.Lk)("input",{type:"radio",name:"status",value:"completed","onUpdate:modelValue":t[4]||(t[4]=e=>w.selectedFilter=e),onChange:t[5]||(t[5]=(...e)=>le.applyFilters&&le.applyFilters(...e))},null,544),[[i.XL,w.selectedFilter]]),b,_]),(0,l.Lk)("label",f,[(0,l.bo)((0,l.Lk)("input",{type:"radio",name:"status",value:"rejected","onUpdate:modelValue":t[6]||(t[6]=e=>w.selectedFilter=e),onChange:t[7]||(t[7]=(...e)=>le.applyFilters&&le.applyFilters(...e))},null,544),[[i.XL,w.selectedFilter]]),C,P]),(0,l.Lk)("label",F,[(0,l.bo)((0,l.Lk)("input",{type:"radio",name:"status",value:"false","onUpdate:modelValue":t[8]||(t[8]=e=>w.selectedFilter=e),onChange:t[9]||(t[9]=(...e)=>le.applyFilters&&le.applyFilters(...e))},null,544),[[i.XL,w.selectedFilter]]),q,x])])]),(0,l.Lk)("div",null,[(0,l.Lk)("div",null,[(0,l.Lk)("button",{class:"write-button",onClick:t[10]||(t[10]=(...e)=>le.goToWritePage&&le.goToWritePage(...e))},[X,(0,l.eW)(" 글작성 ")])])]),(0,l.Lk)("div",N,[(0,l.bo)((0,l.Lk)("input",{type:"text","onUpdate:modelValue":t[11]||(t[11]=e=>w.searchQuery=e),placeholder:"검색어를 입력하세요",class:"input-search"},null,512),[[i.Jo,w.searchQuery]]),(0,l.Lk)("button",{class:"search-button",onClick:t[12]||(t[12]=(...e)=>le.applyFilters&&le.applyFilters(...e))},E)]),(0,l.Lk)("div",Q,[0===le.filteredNotices.length?((0,l.uX)(),(0,l.CE)("div",I," 접수된 내역이 없습니다. ")):((0,l.uX)(),(0,l.CE)("div",R,[(0,l.Lk)("div",T,[((0,l.uX)(!0),(0,l.CE)(l.FK,null,(0,l.pI)(le.paginatedNotices,((e,t)=>((0,l.uX)(),(0,l.CE)("div",{key:t,class:"con"},[e?((0,l.uX)(),(0,l.CE)("div",{key:0,class:"input-base list-wrapper",onClick:e=>le.toggleDetails(t)},[(0,l.Lk)("div",G,[(0,l.Lk)("div",U,(0,a.v_)(t+1),1),(0,l.Lk)("div",V,(0,a.v_)(le.getRequestType(e.request)),1),(0,l.Lk)("div",W,(0,a.v_)(e.request_mile_name||e.mile_name),1),(0,l.Lk)("div",j,(0,a.v_)(le.getStatus(e.request_status)),1),(0,l.Lk)("div",z,(0,a.v_)(e.mileage_request_date),1)])],8,B)):(0,l.Q3)("",!0),w.selectedNotice===t&&e?((0,l.uX)(),(0,l.CE)("div",A,[D,K,(0,l.Lk)("p",S," 마일리지 이름 : "+(0,a.v_)(e.request_mile_name||e.mile_name),1),(0,l.Lk)("p",J," 연간 최고 한도 : "+(0,a.v_)(e.request_mil_max),1),(0,l.Lk)("p",M," 담당자 : "+(0,a.v_)(e.request_admin),1),(0,l.Lk)("p",$," 기타요청: "+(0,a.v_)(e.request_etc),1),0===e.request_status?((0,l.uX)(),(0,l.CE)("div",H,[O,(0,l.Lk)("span",{style:{color:"gray","font-size":"larger"},onClick:t=>le.deleteRequest(e.mileage_request_no)},"삭제",8,Y)])):(0,l.Q3)("",!0)])):(0,l.Q3)("",!0)])))),128))])]))]),(0,l.Lk)("div",Z,[(0,l.Lk)("button",{onClick:t[13]||(t[13]=(...e)=>le.prevPage&&le.prevPage(...e)),disabled:!le.canGoPrev},"<",8,ee),((0,l.uX)(!0),(0,l.CE)(l.FK,null,(0,l.pI)(le.totalPages,(e=>((0,l.uX)(),(0,l.CE)("button",{key:e,onClick:t=>w.currentPage=e,class:(0,a.C4)({active:w.currentPage===e})},(0,a.v_)(e),11,te)))),128)),(0,l.Lk)("button",{onClick:t[14]||(t[14]=(...e)=>le.nextPage&&le.nextPage(...e)),disabled:!le.canGoNext},">",8,se)])])])}s(4114);var ae=s(6278),ie=s(7682),ne=s(8465),re=s.n(ne),ce={data(){return{requestList:[],searchQuery:"",currentPage:1,itemsPerPage:10,selectedFilter:"all",selectedNotice:null}},computed:{...(0,ae.L8)("login",["getLoginInfo","getIsChecked"]),loginInfo(){return this.getLoginInfo},isChecked(){return this.getIsChecked},filteredNotices(){let e=this.requestList||[];return this.searchQuery&&(e=e.filter((e=>e.mile_name&&e.mile_name.includes(this.searchQuery)||e.request_mile_name&&e.request_mile_name.includes(this.searchQuery)))),"all"===this.selectedFilter?e:e.filter((e=>{const t=e.request_status??-1;return"processing"===this.selectedFilter&&0===t||"completed"===this.selectedFilter&&1===t||"rejected"===this.selectedFilter&&2===t||"false"===this.selectedFilter&&3===t}))},paginatedNotices(){const e=(this.currentPage-1)*this.itemsPerPage,t=e+this.itemsPerPage;return this.filteredNotices.slice(e,t)},totalPages(){return Math.ceil(this.filteredNotices.length/this.itemsPerPage)},canGoNext(){return this.currentPage<this.totalPages},canGoPrev(){return this.currentPage>1}},methods:{nextPage(){this.canGoNext&&this.currentPage++},prevPage(){this.canGoPrev&&this.currentPage--},goToWritePage(){this.$router.push("/mileageRequestWrite")},async fetchRequestList(){try{const e=await ie.A.post("/user/requestList",null,{params:{user_no:this.getLoginInfo.user_no}});this.requestList=e.data||[]}catch(e){console.error("문제",e),this.requestList=[]}},async deleteRequest(e){const t=await re().fire({title:"삭제 확인",text:"정말로 요청을 삭제하시겠습니까?",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"삭제",cancelButtonText:"취소"});if(t.isConfirmed)try{const t=await ie.A.post("/user/requestListDelete",null,{params:{mileage_request_no:e}});console.log(t.data),re().fire("삭제 완료","요청이 삭제되었습니다.","success").then((()=>{this.fetchRequestList()}))}catch(s){console.error("문제",s),re().fire("오류","요청 삭제에 실패했습니다.","error")}},getRequestType(e){return 1===e?"요청":2===e?"수정":3===e?"삭제":"기타"},getStatus(e){return 0===e?"접수요청":1===e?"접수완료":2===e?"승인완료":3===e?"승인거절":"미확인"},toggleDetails(e){this.selectedNotice=this.selectedNotice===e?null:e},applyFilters(){this.currentPage=1}},created(){this.fetchRequestList()}},oe=s(6262);const ue=(0,oe.A)(ce,[["render",le],["__scopeId","data-v-e86e7bb4"]]);var de=ue}}]);
//# sourceMappingURL=4645.31e4c963.js.map
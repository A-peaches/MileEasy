{"version":3,"file":"js/9279.b97ce353.js","mappings":"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","sources":["webpack://mile/./src/views/adminMileEasy/king/KingPickView.vue","webpack://mile/./src/views/adminMileEasy/king/KingPickView.vue?469f"],"sourcesContent":["<template>\r\n  <div class=\"cards page-back mx-auto\" :style=\"{ height: computedHeight }\">\r\n    <div class=\"button-container mt-3\">\r\n      <button class=\"back-button\" @click=\"goBack\">\r\n        <span class=\"arrow\">❮</span> 이전\r\n      </button>\r\n    </div>\r\n\r\n    <h2 class=\"bold-x-lg my-5\" style=\"font-family: KB_C3\">채택하기</h2>\r\n    <div style=\"padding: 0 5%\">\r\n      <div class=\"p-4 mt-5\">\r\n        <div class=\"d-flex justify-content-between align-items-center\">\r\n          <h3 class=\"lg p-3\" style=\"text-align: left; font-family: KB_C2\">\r\n            TOP 상위 리스트\r\n            <span style=\"font-size: 10pt\">\r\n              (최근 업데이트 : {{ baseDate }})\r\n            </span>\r\n          </h3>\r\n        </div>\r\n        <div\r\n          class=\"p-2\"\r\n          style=\"\r\n            justify-content: space-between;\r\n            align-items: flex-start;\r\n            background-color: #f6f6f6;\r\n          \"\r\n        >\r\n          <div style=\"display: flex; justify-content: space-between\">\r\n            <div class=\"king\" style=\"width: 48%\">\r\n              <div\r\n                class=\"KB_C1 title\"\r\n                style=\"font-size: 20pt; margin-top: 30px\"\r\n              >\r\n                마왕 TOP 5\r\n              </div>\r\n              <br />\r\n              <div class=\"text-center mx-auto\" style=\"width: 80%\">\r\n                <div class=\"KB_S1 text-center\">\r\n                  <template v-for=\"(item, index) in kingTop5\" :key=\"index\">\r\n                    <div :class=\"{ top1: index === 0 }\" class=\"top-item\">\r\n                      <div class=\"item-rank\">{{ item.ranking }}등</div>\r\n                      <div class=\"item-name\">{{ item.user_name }}</div>\r\n                      <div class=\"item-score\">{{ item.total_score }}</div>\r\n                    </div>\r\n                  </template>\r\n                </div>\r\n              </div>\r\n            </div>\r\n            <div class=\"jump\" style=\"width: 48%\">\r\n              <div\r\n                class=\"KB_C1 title\"\r\n                style=\"font-size: 20pt; margin-top: 30px\"\r\n              >\r\n                Jump UP TOP 5\r\n              </div>\r\n              <br />\r\n              <div class=\"text-center mx-auto\" style=\"width: 80%\">\r\n                <div class=\"KB_S1 text-center\">\r\n                  <template v-for=\"(item, index) in jumpTop5\" :key=\"index\">\r\n                    <div :class=\"{ top1: index === 0 }\" class=\"top-item\">\r\n                      <div class=\"item-rank\">{{ item.ranking }}등</div>\r\n                      <div class=\"item-name\">{{ item.user_name }}</div>\r\n                      <div class=\"item-score\">{{ item.score_increase }}</div>\r\n                    </div>\r\n                  </template>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n\r\n    <div style=\"padding: 0 5%\">\r\n      <div class=\"p-4 mt-5\">\r\n        <div class=\"d-flex justify-content-between align-items-center\">\r\n          <h3 class=\"lg p-3\" style=\"text-align: left; font-family: KB_C2\">\r\n            문서 업데이트 현황\r\n          </h3>\r\n        </div>\r\n        <div\r\n          class=\"p-2\"\r\n          style=\"justify-content: space-between; align-items: flex-start\"\r\n        >\r\n          <table class=\"styled-table\">\r\n            <thead>\r\n              <tr>\r\n                <th>마일리지</th>\r\n                <th>최종 업데이트</th>\r\n              </tr>\r\n            </thead>\r\n            <tbody>\r\n              <tr v-for=\"(label, index) in mileageLabels\" :key=\"index\">\r\n                <td>{{ label }}</td>\r\n                <td>{{ dates[index] || '-' }}</td>\r\n              </tr>\r\n            </tbody>\r\n          </table>\r\n        </div>\r\n      </div>\r\n    </div>\r\n\r\n    <div class=\"btn-container\" style=\"margin-right: 75px\">\r\n      <button class=\"btn-yellow KB_S4\" @click=\"checkValidDates\">\r\n        채택하기\r\n      </button>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport api from '@/api/axios';\r\nimport Swal from 'sweetalert2';\r\nimport { mapGetters } from 'vuex';\r\n\r\nexport default {\r\n  name: 'KingPickView',\r\n\r\n  data() {\r\n    return {\r\n      kingTop5: [],\r\n      jumpTop5: [],\r\n      baseDate: '',\r\n      mileageLabels: [],\r\n      dates: [],\r\n      kingUserList: [],\r\n      jumpUserList: [],\r\n    };\r\n  },\r\n\r\n  async mounted() {\r\n    await this.kingData();\r\n    await this.jumpData();\r\n    await this.fetchMileageLabels();\r\n    await this.lastUpdate();\r\n  },\r\n\r\n  methods: {\r\n    checkLoginInfo() {\r\n      if (\r\n        !this.getLoginInfo ||\r\n        this.getIsChecked === false ||\r\n        this.getLoginInfo.user_is_admin === false\r\n      ) {\r\n        window.location.href = '/noAccess';\r\n      }\r\n    },\r\n\r\n    async kingData() {\r\n      try {\r\n        const response = await api.get('/mileage/kingDataSelect');\r\n        console.log('kingDataSelect top5:', response.data);\r\n        this.baseDate = response.data.length ? response.data[0].base_date : '';\r\n        this.kingTop5 = response.data.slice(0, 5);\r\n        // 사용자 점수별로 정렬\r\n        const sortedData = response.data.sort((a, b) => b.score - a.score);\r\n\r\n        // 공동 3등까지 포함한 사용자 목록 추출\r\n        let rank = 1;\r\n        let lastScore = sortedData[0].score;\r\n        const kingUserList = [];\r\n\r\n        for (const item of sortedData) {\r\n          if (item.score !== lastScore) {\r\n            rank++;\r\n            lastScore = item.score;\r\n          }\r\n          if (rank > 3) break;\r\n          kingUserList.push(item.user_no);\r\n        }\r\n\r\n        this.kingUserList = kingUserList;\r\n      } catch (error) {\r\n        console.error('kingDataSelect top5:', error);\r\n        this.kingTop5 = [];\r\n        this.kingUserList = [];\r\n      }\r\n    },\r\n\r\n    async jumpData() {\r\n      try {\r\n        const response = await api.get('/mileage/jumpDataSelect');\r\n        console.log('점프업 top5:', response.data);\r\n        this.jumpTop5 = response.data.slice(0, 5);\r\n        // 사용자 점수별로 정렬\r\n        const sortedData = response.data.sort((a, b) => b.score - a.score);\r\n\r\n        // 공동 3등까지 포함한 사용자 목록 추출\r\n        let rank = 1;\r\n        let lastScore = sortedData[0].score;\r\n        const jumpUserList = [];\r\n\r\n        for (const item of sortedData) {\r\n          if (item.score !== lastScore) {\r\n            rank++;\r\n            lastScore = item.score;\r\n          }\r\n          if (rank > 3) break;\r\n          jumpUserList.push(item.user_no);\r\n        }\r\n\r\n        this.jumpUserList = jumpUserList;\r\n      } catch (error) {\r\n        console.error('점프업 top5:', error);\r\n        this.jumpTop5 = [];\r\n        this.jumpUserList = [];\r\n      }\r\n    },\r\n\r\n    async fetchMileageLabels() {\r\n      try {\r\n        const response = await api.get('/mileage/getMileage');\r\n        this.mileageLabels = response.data.map((item) => item.mile_name);\r\n        this.dates = new Array(this.mileageLabels.length).fill('-');\r\n      } catch (error) {\r\n        console.error('Error fetching mileage labels:', error);\r\n        this.mileageLabels = [];\r\n        this.dates = [];\r\n      }\r\n    },\r\n\r\n    async lastUpdate() {\r\n      try {\r\n        const response = await api.get('/admin/lastUpdate');\r\n        console.log('날짜 데이터', response.data);\r\n        this.dates = response.data.map((item) => item.date || '-');\r\n      } catch (error) {\r\n        console.error('Error fetching last update dates:', error);\r\n        this.dates = new Array(this.mileageLabels.length).fill('-');\r\n      }\r\n    },\r\n\r\n    isLastDayOfPreviousMonth(dateString) {\r\n      if (!dateString || dateString === '-') return false;\r\n\r\n      const date = new Date(dateString);\r\n      const today = new Date();\r\n\r\n      // 오늘 날짜의 전달 마지막 날 계산\r\n      const firstDayOfCurrentMonth = new Date(\r\n        today.getFullYear(),\r\n        today.getMonth(),\r\n        1\r\n      );\r\n      const lastDayOfPreviousMonth = new Date(firstDayOfCurrentMonth - 1);\r\n\r\n      // 전달의 마지막 날과 비교\r\n      return (\r\n        date.getFullYear() === lastDayOfPreviousMonth.getFullYear() &&\r\n        date.getMonth() === lastDayOfPreviousMonth.getMonth() &&\r\n        date.getDate() === lastDayOfPreviousMonth.getDate()\r\n      );\r\n    },\r\n\r\n    checkValidDates() {\r\n      if (this.isFirstBusinessDayOfCurrentMonth) {\r\n        Swal.fire('오류', '해당일은 채택일이 아닙니다.', 'error');\r\n        return;\r\n      }\r\n\r\n      // 유효하지 않은 날짜가 있는지 검사\r\n      const invalidDates = this.dates\r\n        .map((date, index) => ({ date, index }))\r\n        .filter(\r\n          ({ date }) => date === '-' || !this.isLastDayOfPreviousMonth(date)\r\n        );\r\n\r\n      if (invalidDates.length > 0) {\r\n        const invalidDatesList = invalidDates\r\n          .map(\r\n            ({ index }) =>\r\n              `${this.mileageLabels[index]} (${\r\n                this.dates[index] === '-' ? '날짜 없음' : this.dates[index]\r\n              })`\r\n          )\r\n          .join('<br>');\r\n\r\n        Swal.fire({\r\n          icon: 'warning',\r\n          title: '업데이트 날짜 오류',\r\n          html: `\r\n    <div id=\"swal-content\">\r\n      <div>최종 업데이트 날짜가 말일이 아닌 것이 있습니다.</div>\r\n      <div class=\"swal-dates-list\" style=\"color: red;\">${invalidDatesList}</div>\r\n    </div>\r\n  `,\r\n          confirmButtonText: '확인',\r\n          heightAuto: false,\r\n          scrollbarPadding: false,\r\n          customClass: {\r\n            container: 'my-swal-container',\r\n            content: 'my-swal-content',\r\n            popup: 'swal2-popup',\r\n          },\r\n          width: 'auto',\r\n          didOpen: (popup) => {\r\n            const content = popup.querySelector('#swal-content');\r\n            const maxHeight = window.innerHeight * 0.7; // 화면 높이의 70%로 제한\r\n\r\n            if (content.offsetHeight > maxHeight) {\r\n              content.style.height = `${maxHeight}px`;\r\n              content.style.overflowY = 'auto';\r\n            } else {\r\n              popup.style.height = 'auto';\r\n            }\r\n          },\r\n        });\r\n      } else {\r\n        this.pickBadge();\r\n      }\r\n    },\r\n\r\n    //첫영업일 확인 함수\r\n    isFirstBusinessDayOfCurrentMonth() {\r\n      // 현재 날짜와 월을 가져옵니다.\r\n      const today = new Date();\r\n      const year = today.getFullYear();\r\n      const month = today.getMonth();\r\n\r\n      // 이번 달의 첫 날을 가져옵니다.\r\n      const firstDayOfMonth = new Date(year, month, 1);\r\n\r\n      // 첫 영업일을 찾기 위해 첫 날부터 시작하여 토요일이나 일요일이 아닌 날을 찾습니다.\r\n      let firstBusinessDay = firstDayOfMonth;\r\n      while (\r\n        firstBusinessDay.getDay() === 0 ||\r\n        firstBusinessDay.getDay() === 6\r\n      ) {\r\n        firstBusinessDay.setDate(firstBusinessDay.getDate() + 1);\r\n      }\r\n\r\n      // 오늘 날짜가 첫 영업일과 일치하는지 확인합니다.\r\n      return (\r\n        today.getFullYear() === firstBusinessDay.getFullYear() &&\r\n        today.getMonth() === firstBusinessDay.getMonth() &&\r\n        today.getDate() === firstBusinessDay.getDate()\r\n      );\r\n    },\r\n    async pickBadge() {\r\n      try {\r\n        const params = new URLSearchParams();\r\n        this.kingUserList.forEach((user) => params.append('king', user));\r\n        this.jumpUserList.forEach((user) => params.append('jump', user));\r\n\r\n        const response = await api.post(\r\n          `/admin/pickBadge?${params.toString()}`\r\n        );\r\n        console.log('Response:', response.data);\r\n        Swal.fire({\r\n          icon: 'success',\r\n          title: '채택완료',\r\n          text: '성공적으로 완료되었습니다',\r\n          scrollbarPadding: false,\r\n        });\r\n      } catch (error) {\r\n        console.error('Error picking badge:', error);\r\n      }\r\n    },\r\n    goBack() {\r\n      this.$router.go(-1);\r\n    },\r\n  },\r\n\r\n  created() {\r\n    this.checkLoginInfo();\r\n  },\r\n  computed: {\r\n    ...mapGetters('login', ['getLoginInfo', 'getIsChecked']),\r\n  },\r\n};\r\n</script>\r\n\r\n<style scoped>\r\n.btn-yellow {\r\n  width: 120px;\r\n  height: 40px;\r\n  text-align: center;\r\n  cursor: pointer;\r\n}\r\n\r\n.top1 {\r\n  font-weight: bold;\r\n  font-size: 16pt;\r\n  background-color: #66c52f;\r\n  border-radius: 16px;\r\n}\r\n\r\n.styled-table {\r\n  background-color: #fff;\r\n  width: 100%;\r\n  border-collapse: collapse;\r\n  margin: 25px 0;\r\n  font-size: 16px;\r\n}\r\n.back-button {\r\n  display: flex;\r\n  align-items: center;\r\n  background: none;\r\n  border-radius: 8px;\r\n  padding: 5px 10px;\r\n  color: #5b5b5b;\r\n  font-size: 18px;\r\n  cursor: pointer;\r\n  margin-top: 0;\r\n  font-family: 'KB_S5', sans-serif;\r\n}\r\n\r\n.back-button .arrow {\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n  width: 50px;\r\n  height: 40px;\r\n  border: 1px solid #ccc;\r\n  border-radius: 5px;\r\n  margin-right: 8px;\r\n  font-size: 17px;\r\n  font-family: 'KB_S5', sans-serif;\r\n}\r\n\r\n.styled-table thead tr {\r\n  background-color: #5fc9ad;\r\n  color: #ffffff;\r\n  text-align: left;\r\n}\r\n\r\n.styled-table th,\r\n.styled-table td {\r\n  padding: 12px 15px;\r\n}\r\n\r\n.styled-table tbody tr {\r\n  border-bottom: 1px solid #dddddd;\r\n}\r\n\r\n.styled-table tbody tr:last-of-type {\r\n  border-bottom: 2px solid #5fc9ad;\r\n}\r\n\r\n.btn-container {\r\n  text-align: right;\r\n  padding: 10px;\r\n}\r\n\r\n.top-item {\r\n  display: flex;\r\n  justify-content: space-between;\r\n  align-items: center;\r\n  text-align: center;\r\n  margin-bottom: 20px;\r\n  padding: 10px;\r\n  background-color: #ffffff;\r\n  border-radius: 8px;\r\n  box-shadow: 0px 0px 10px rgba(0, 0, 0, 0.1);\r\n}\r\n\r\n.item-rank,\r\n.item-name,\r\n.item-score {\r\n  flex: 1;\r\n}\r\n\r\n.button-container {\r\n  display: flex;\r\n  align-items: center;\r\n  padding-left: 10px;\r\n  flex: 1;\r\n}\r\n\r\n.my-swal-container .swal2-title {\r\n  margin-bottom: 15px; /* 제목과 본문 사이의 여백 */\r\n  overflow: visible;\r\n  height: auto;\r\n}\r\n\r\n.swal-dates-list {\r\n  white-space: pre-wrap; /* 줄바꿈 유지 */\r\n  word-break: break-word; /* 긴 단어 줄바꿈 */\r\n  color: red; /* 텍스트 색상 빨간색으로 설정 */\r\n  overflow: visible;\r\n}\r\n\r\n.my-swal-container {\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n}\r\n\r\n.my-swal-content {\r\n  max-height: 80vh; /* Adjust as needed */\r\n  overflow: visible;\r\n}\r\n\r\n.swal2-popup {\r\n  overflow: visible;\r\n}\r\n</style>\r\n","import { render } from \"./KingPickView.vue?vue&type=template&id=627fcf8d&scoped=true\"\nimport script from \"./KingPickView.vue?vue&type=script&lang=js\"\nexport * from \"./KingPickView.vue?vue&type=script&lang=js\"\n\nimport \"./KingPickView.vue?vue&type=style&index=0&id=627fcf8d&scoped=true&lang=css\"\n\nimport exportComponent from \"../../../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-627fcf8d\"]])\n\nexport default __exports__"],"names":["class","_createElementVNode","style","_createElementBlock","_normalizeStyle","height","_ctx","computedHeight","_hoisted_1","onClick","_cache","args","$options","goBack","_hoisted_2","_createTextVNode","_hoisted_3","_hoisted_4","_hoisted_5","_hoisted_6","_hoisted_7","_hoisted_8","_toDisplayString","$data","baseDate","_hoisted_9","_hoisted_10","_hoisted_11","_hoisted_12","_hoisted_13","_hoisted_14","_hoisted_15","_Fragment","_renderList","kingTop5","item","index","key","_normalizeClass","top1","_hoisted_16","ranking","_hoisted_17","user_name","_hoisted_18","total_score","_hoisted_19","_hoisted_20","_hoisted_21","_hoisted_22","_hoisted_23","jumpTop5","_hoisted_24","_hoisted_25","_hoisted_26","score_increase","_hoisted_27","_hoisted_28","_hoisted_29","_hoisted_30","_hoisted_31","_hoisted_32","mileageLabels","label","dates","_hoisted_33","checkValidDates","name","data","kingUserList","jumpUserList","mounted","this","kingData","jumpData","fetchMileageLabels","lastUpdate","methods","checkLoginInfo","getLoginInfo","getIsChecked","user_is_admin","window","location","href","response","api","get","console","log","length","base_date","slice","sortedData","sort","a","b","score","rank","lastScore","push","user_no","error","map","mile_name","Array","fill","date","isLastDayOfPreviousMonth","dateString","Date","today","firstDayOfCurrentMonth","getFullYear","getMonth","lastDayOfPreviousMonth","getDate","isFirstBusinessDayOfCurrentMonth","Swal","invalidDates","filter","invalidDatesList","join","icon","title","html","confirmButtonText","heightAuto","scrollbarPadding","customClass","container","content","popup","width","didOpen","querySelector","maxHeight","innerHeight","offsetHeight","overflowY","pickBadge","year","month","firstDayOfMonth","firstBusinessDay","getDay","setDate","params","URLSearchParams","forEach","user","append","post","toString","text","$router","go","created","computed","mapGetters","__exports__","render"],"sourceRoot":""}
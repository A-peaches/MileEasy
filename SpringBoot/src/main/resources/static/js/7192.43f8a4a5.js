"use strict";(self["webpackChunkmile"]=self["webpackChunkmile"]||[]).push([[7192],{47192:function(e,t,s){s.r(t),s.d(t,{default:function(){return ge}});var l=s(20641),a=s(90033),i=s(53751);const n=e=>((0,l.Qi)("data-v-32efbd84"),e=e(),(0,l.jt)(),e),r={class:"app-container"},c={class:"content cards"},o=n((()=>(0,l.Lk)("div",null,[(0,l.Lk)("h2",{class:"lg"},"마일리지 요청")],-1))),u={class:"topbuton",style:{display:"flex"}},d={class:"notice-count"},p={class:"notice-count-container"},g={class:"radio-container"},k=n((()=>(0,l.Lk)("span",{class:"custom-radio"},null,-1))),h=n((()=>(0,l.Lk)("span",{class:"lg2 radio-label"},"전체",-1))),L={class:"radio-container"},m=n((()=>(0,l.Lk)("span",{class:"custom-radio"},null,-1))),y=n((()=>(0,l.Lk)("span",{class:"radio-label"},"접수요청",-1))),v={class:"radio-container"},_=n((()=>(0,l.Lk)("span",{class:"custom-radio"},null,-1))),f=n((()=>(0,l.Lk)("span",{class:"radio-label"},"접수완료",-1))),b={class:"radio-container"},C=n((()=>(0,l.Lk)("span",{class:"custom-radio"},null,-1))),P=n((()=>(0,l.Lk)("span",{class:"radio-label"},"승인완료",-1))),F={class:"radio-container"},q=n((()=>(0,l.Lk)("span",{class:"custom-radio"},null,-1))),x=n((()=>(0,l.Lk)("span",{class:"radio-label"},"승인거절",-1))),X={class:"writeBtn"},N=n((()=>(0,l.Lk)("i",{class:"bi bi-pencil",style:{"margin-right":"10px"}},null,-1))),w={class:"search-container"},E=n((()=>(0,l.Lk)("i",{class:"bi bi-search"},null,-1))),Q=[E],I={style:{"text-align":"center","justify-content":"center"}},R={key:0,class:"no-results"},G={key:1},U={class:"notice-list",style:{"text-align":"center"}},V=["onClick"],T={class:"notice-details"},W={class:"notice-new"},j={class:"notice-num"},z={class:"notice-title"},A={class:"notice-mile"},D={class:"notice-date"},K={key:1,class:"notice-details-expanded"},S=n((()=>(0,l.Lk)("p",{style:{"text-align":"left","font-size":"15pt"},class:"KB_S3 mt-3 ml-3"}," 요청사항 ",-1))),B=n((()=>(0,l.Lk)("hr",null,null,-1))),J={style:{"text-align":"left"},class:"ml-3"},M={style:{"text-align":"left"},class:"ml-3"},$={style:{"text-align":"left"},class:"ml-3"},H={style:{"text-align":"left"},class:"ml-3"},O={key:0,style:{"text-align":"right","margin-right":"10px"}},Y={style:{cursor:"pointer","text-align":"right"}},Z=n((()=>(0,l.Lk)("i",{class:"bi bi-trash-fill",style:{color:"gray","font-size":"larger"}},null,-1))),ee=["onClick"],te={class:"pagination"},se=["disabled"],le=["onClick"],ae=["disabled"];function ie(e,t,s,n,E,ie){return(0,l.uX)(),(0,l.CE)("div",r,[(0,l.Lk)("div",c,[o,(0,l.Lk)("div",u,[(0,l.Lk)("div",d,"총 "+(0,a.v_)(ie.filteredNotices.length)+"건",1),(0,l.Lk)("div",p,[(0,l.Lk)("label",g,[(0,l.bo)((0,l.Lk)("input",{type:"radio",name:"status",value:"all","onUpdate:modelValue":t[0]||(t[0]=e=>E.selectedFilter=e),onChange:t[1]||(t[1]=(...e)=>ie.applyFilters&&ie.applyFilters(...e))},null,544),[[i.XL,E.selectedFilter]]),k,h]),(0,l.Lk)("label",L,[(0,l.bo)((0,l.Lk)("input",{type:"radio",name:"status",value:"processing","onUpdate:modelValue":t[2]||(t[2]=e=>E.selectedFilter=e),onChange:t[3]||(t[3]=(...e)=>ie.applyFilters&&ie.applyFilters(...e))},null,544),[[i.XL,E.selectedFilter]]),m,y]),(0,l.Lk)("label",v,[(0,l.bo)((0,l.Lk)("input",{type:"radio",name:"status",value:"completed","onUpdate:modelValue":t[4]||(t[4]=e=>E.selectedFilter=e),onChange:t[5]||(t[5]=(...e)=>ie.applyFilters&&ie.applyFilters(...e))},null,544),[[i.XL,E.selectedFilter]]),_,f]),(0,l.Lk)("label",b,[(0,l.bo)((0,l.Lk)("input",{type:"radio",name:"status",value:"rejected","onUpdate:modelValue":t[6]||(t[6]=e=>E.selectedFilter=e),onChange:t[7]||(t[7]=(...e)=>ie.applyFilters&&ie.applyFilters(...e))},null,544),[[i.XL,E.selectedFilter]]),C,P]),(0,l.Lk)("label",F,[(0,l.bo)((0,l.Lk)("input",{type:"radio",name:"status",value:"false","onUpdate:modelValue":t[8]||(t[8]=e=>E.selectedFilter=e),onChange:t[9]||(t[9]=(...e)=>ie.applyFilters&&ie.applyFilters(...e))},null,544),[[i.XL,E.selectedFilter]]),q,x])])]),(0,l.Lk)("div",null,[(0,l.Lk)("div",X,[(0,l.Lk)("button",{class:"write-button",onClick:t[10]||(t[10]=(...e)=>ie.goToWritePage&&ie.goToWritePage(...e))},[N,(0,l.eW)(" 글작성 ")])])]),(0,l.Lk)("div",w,[(0,l.bo)((0,l.Lk)("input",{type:"text","onUpdate:modelValue":t[11]||(t[11]=e=>E.searchQuery=e),placeholder:"검색어를 입력하세요",class:"input-search"},null,512),[[i.Jo,E.searchQuery]]),(0,l.Lk)("button",{class:"search-button",onClick:t[12]||(t[12]=(...e)=>ie.applyFilters&&ie.applyFilters(...e))},Q)]),(0,l.Lk)("div",I,[0===ie.filteredNotices.length?((0,l.uX)(),(0,l.CE)("div",R," 접수된 내역이 없습니다. ")):((0,l.uX)(),(0,l.CE)("div",G,[(0,l.Lk)("div",U,[((0,l.uX)(!0),(0,l.CE)(l.FK,null,(0,l.pI)(ie.paginatedNotices,((e,t)=>((0,l.uX)(),(0,l.CE)("div",{key:t,class:"con"},[e?((0,l.uX)(),(0,l.CE)("div",{key:0,class:"input-base list-wrapper",onClick:e=>ie.toggleDetails(t)},[(0,l.Lk)("div",T,[(0,l.Lk)("div",W,(0,a.v_)(t+1),1),(0,l.Lk)("div",j,(0,a.v_)(ie.getRequestType(e.request)),1),(0,l.Lk)("div",z,(0,a.v_)(e.request_mile_name||e.mile_name),1),(0,l.Lk)("div",A,(0,a.v_)(ie.getStatus(e.request_status)),1),(0,l.Lk)("div",D,(0,a.v_)(e.mileage_request_date),1)])],8,V)):(0,l.Q3)("",!0),E.selectedNotice===t&&e?((0,l.uX)(),(0,l.CE)("div",K,[S,B,(0,l.Lk)("p",J," 마일리지 이름 : "+(0,a.v_)(e.request_mile_name||e.mile_name),1),(0,l.Lk)("p",M," 연간 최고 한도 : "+(0,a.v_)(e.request_mil_max),1),(0,l.Lk)("p",$," 담당자 : "+(0,a.v_)(e.request_admin),1),(0,l.Lk)("p",H," 기타요청: "+(0,a.v_)(e.request_etc),1),0===e.request_status?((0,l.uX)(),(0,l.CE)("div",O,[(0,l.Lk)("div",Y,[Z,(0,l.Lk)("span",{style:{color:"gray","font-size":"larger"},onClick:t=>ie.deleteRequest(e.mileage_request_no)},"삭제",8,ee)])])):(0,l.Q3)("",!0)])):(0,l.Q3)("",!0)])))),128))])]))]),(0,l.Lk)("div",te,[(0,l.Lk)("button",{onClick:t[13]||(t[13]=(...e)=>ie.prevPage&&ie.prevPage(...e)),disabled:!ie.canGoPrev},"<",8,se),((0,l.uX)(!0),(0,l.CE)(l.FK,null,(0,l.pI)(ie.totalPages,(e=>((0,l.uX)(),(0,l.CE)("button",{key:e,onClick:t=>E.currentPage=e,class:(0,a.C4)({active:E.currentPage===e})},(0,a.v_)(e),11,le)))),128)),(0,l.Lk)("button",{onClick:t[14]||(t[14]=(...e)=>ie.nextPage&&ie.nextPage(...e)),disabled:!ie.canGoNext},">",8,ae)])])])}s(44114);var ne=s(66278),re=s(37682),ce=s(78465),oe=s.n(ce),ue={data(){return{requestList:[],searchQuery:"",currentPage:1,itemsPerPage:10,selectedFilter:"all",selectedNotice:null}},computed:{...(0,ne.L8)("login",["getLoginInfo","getIsChecked"]),loginInfo(){return this.getLoginInfo},isChecked(){return this.getIsChecked},filteredNotices(){let e=this.requestList||[];return this.searchQuery&&(e=e.filter((e=>e.mile_name&&e.mile_name.includes(this.searchQuery)||e.request_mile_name&&e.request_mile_name.includes(this.searchQuery)))),"all"===this.selectedFilter?e:e.filter((e=>{const t=e.request_status??-1;return"processing"===this.selectedFilter&&0===t||"completed"===this.selectedFilter&&1===t||"rejected"===this.selectedFilter&&2===t||"false"===this.selectedFilter&&3===t}))},paginatedNotices(){const e=(this.currentPage-1)*this.itemsPerPage,t=e+this.itemsPerPage;return this.filteredNotices.slice(e,t)},totalPages(){return Math.ceil(this.filteredNotices.length/this.itemsPerPage)},canGoNext(){return this.currentPage<this.totalPages},canGoPrev(){return this.currentPage>1}},methods:{nextPage(){this.canGoNext&&this.currentPage++},prevPage(){this.canGoPrev&&this.currentPage--},goToWritePage(){this.$router.push("/mileageRequestWrite")},async fetchRequestList(){try{const e=await re.A.post("/user/requestList",null,{params:{user_no:this.getLoginInfo.user_no}});this.requestList=e.data||[]}catch(e){console.error("문제",e),this.requestList=[]}},async deleteRequest(e){const t=await oe().fire({title:"삭제 확인",text:"정말로 요청을 삭제하시겠습니까?",icon:"warning"});if(t.isConfirmed)try{await re.A.post("/user/requestListDelete",null,{params:{mileage_request_no:e}}),oe().fire("삭제 완료","요청이 삭제되었습니다.","success").then((()=>{this.fetchRequestList()}))}catch(s){console.error("문제",s),oe().fire("오류","요청 삭제에 실패했습니다.","error")}},getRequestType(e){return 1===e?"요청":2===e?"수정":3===e?"삭제":"기타"},getStatus(e){return 0===e?"접수요청":1===e?"접수완료":2===e?"승인완료":3===e?"승인거절":"미확인"},toggleDetails(e){this.selectedNotice=this.selectedNotice===e?null:e},applyFilters(){this.currentPage=1}},created(){this.fetchRequestList()}},de=s(66262);const pe=(0,de.A)(ue,[["render",ie],["__scopeId","data-v-32efbd84"]]);var ge=pe}}]);
//# sourceMappingURL=7192.43f8a4a5.js.map
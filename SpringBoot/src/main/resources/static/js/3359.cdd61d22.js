"use strict";(self["webpackChunkmile"]=self["webpackChunkmile"]||[]).push([[3359],{3359:function(e,l,t){t.r(l),t.d(l,{default:function(){return He}});var a=t(641),i=t(33),n=t(3751);const o=e=>((0,a.Qi)("data-v-23300728"),e=e(),(0,a.jt)(),e),s={class:"button-container"},r=o((()=>(0,a.Lk)("span",{class:"arrow"},"❮",-1))),d=o((()=>(0,a.Lk)("h2",{class:"bold-x-lg my-5",style:{"font-family":"KB_C3"}},"마일리지 요청",-1))),u={style:{padding:"0 5%"}},c={key:0,style:{"text-align":"left","margin-left":"25px",display:"flex"}},m={class:"checkbox-container"},p=o((()=>(0,a.Lk)("span",{class:"custom-checkbox"},null,-1))),g=o((()=>(0,a.Lk)("span",{class:"checkbox-label"},"추가",-1))),k={class:"checkbox-container"},v=o((()=>(0,a.Lk)("span",{class:"custom-checkbox"},null,-1))),h=o((()=>(0,a.Lk)("span",{class:"checkbox-label"},"수정",-1))),L={class:"checkbox-container"},f=o((()=>(0,a.Lk)("span",{class:"custom-checkbox"},null,-1))),b=o((()=>(0,a.Lk)("span",{class:"checkbox-label"},"삭제",-1))),x={key:1,class:"p-4"},y={key:2,class:"p-4"};function _(e,l,t,o,_,w){const R=(0,a.g2)("WriteAdd"),C=(0,a.g2)("WriteModify"),M=(0,a.g2)("WriteDelete");return(0,a.uX)(),(0,a.CE)("div",{class:"cards page-back mx-auto",style:(0,i.Tr)({height:e.computedHeight})},[(0,a.Lk)("div",s,[(0,a.Lk)("button",{class:"back-button",onClick:l[0]||(l[0]=(...e)=>w.goBack&&w.goBack(...e))},[r,(0,a.eW)(" 이전 ")])]),d,(0,a.Lk)("div",u,[w.hasMileageNumber?((0,a.uX)(),(0,a.CE)("div",c,[(0,a.Lk)("label",m,[(0,a.bo)((0,a.Lk)("input",{type:"radio",name:"action",value:"add","onUpdate:modelValue":l[1]||(l[1]=e=>_.selectedAction=e)},null,512),[[n.XL,_.selectedAction]]),p,g]),(0,a.Lk)("label",k,[(0,a.bo)((0,a.Lk)("input",{type:"radio",name:"action",value:"modify","onUpdate:modelValue":l[2]||(l[2]=e=>_.selectedAction=e)},null,512),[[n.XL,_.selectedAction]]),v,h]),(0,a.Lk)("label",L,[(0,a.bo)((0,a.Lk)("input",{type:"radio",name:"action",value:"delete","onUpdate:modelValue":l[3]||(l[3]=e=>_.selectedAction=e)},null,512),[[n.XL,_.selectedAction]]),f,b])])):(0,a.Q3)("",!0),w.hasMileageNumber?(0,a.Q3)("",!0):((0,a.uX)(),(0,a.CE)("div",x,[(0,a.bF)(R,{style:{width:"70%","margin-left":"3%"}})])),w.hasMileageNumber?((0,a.uX)(),(0,a.CE)("div",y,["add"===_.selectedAction?((0,a.uX)(),(0,a.Wv)(R,{key:0,style:{width:"70%","margin-left":"3%"}})):(0,a.Q3)("",!0),"modify"===_.selectedAction?((0,a.uX)(),(0,a.Wv)(C,{key:1,style:{width:"70%","margin-left":"3%"}})):(0,a.Q3)("",!0),"delete"===_.selectedAction?((0,a.uX)(),(0,a.Wv)(M,{key:2,style:{width:"70%","margin-left":"3%"}})):(0,a.Q3)("",!0)])):(0,a.Q3)("",!0)])],4)}var w=t(6278);const R=e=>((0,a.Qi)("data-v-50c1c6aa"),e=e(),(0,a.jt)(),e),C=R((()=>(0,a.Lk)("h3",{class:"lg p-3",style:{"text-align":"left","font-family":"KB_C2"}}," 마일리지 추가 ",-1))),M={class:"p-2",style:{"text-align":"left","background-color":"#f6f6f6",padding:"10px 140px 60px 140px !important"}},N={class:"mt-5",style:{"text-align":"left"}},E={key:0,class:"error-text"},W={class:"form-check form-check-inline mt-1"},K=R((()=>(0,a.Lk)("label",{class:"form-check-label",for:"inlineRadio1"},"공통",-1))),A={class:"form-check form-check-inline"},U=R((()=>(0,a.Lk)("label",{class:"form-check-label",for:"inlineRadio2"},"영업점",-1))),X={class:"mt-3",style:{"text-align":"left"}},V={key:0,class:"error-text"},q=R((()=>(0,a.Lk)("br",null,null,-1))),I={class:"mt-3",style:{"text-align":"left"}},Q={key:0,class:"error-text"},S={class:"mt-3",style:{"text-align":"left"}},P={key:0,class:"error-text"},O={class:"table table-bordered input-base",style:{width:"800px","border-radius":"10px","background-color":"white"}},F=R((()=>(0,a.Lk)("tr",null,[(0,a.Lk)("td",null,"번호"),(0,a.Lk)("td",null,"사번"),(0,a.Lk)("td",null,"이름"),(0,a.Lk)("td",null,"부서"),(0,a.Lk)("td",null,"직급"),(0,a.Lk)("td",null,"삭제")],-1))),B=["onClick"],J=["onClick"],$=R((()=>(0,a.Lk)("div",{class:"mt-3",style:{"text-align":"left"}},"기타사항",-1))),j={style:{"text-align":"right"}};function T(e,l,t,o,s,r){const d=(0,a.g2)("SearchModal");return(0,a.uX)(),(0,a.CE)(a.FK,null,[C,(0,a.Lk)("div",M,[(0,a.Lk)("div",N,[(0,a.eW)(" 마일리지 공통여부 "),o.isCommonMileageValid?(0,a.Q3)("",!0):((0,a.uX)(),(0,a.CE)("span",E," 필수 선택 항목입니다. "))]),(0,a.Lk)("div",W,[(0,a.bo)((0,a.Lk)("input",{class:"form-check-input",type:"radio",name:"inlineRadioOptions",id:"inlineRadio1",value:"0","onUpdate:modelValue":l[0]||(l[0]=e=>o.commonMileage=e)},null,512),[[n.XL,o.commonMileage]]),K]),(0,a.Lk)("div",A,[(0,a.bo)((0,a.Lk)("input",{class:"form-check-input",type:"radio",name:"inlineRadioOptions",id:"inlineRadio2",value:"1","onUpdate:modelValue":l[1]||(l[1]=e=>o.commonMileage=e)},null,512),[[n.XL,o.commonMileage]]),U]),(0,a.Lk)("div",X,[(0,a.eW)(" 마일리지 이름 "),o.isMileageNameValid?(0,a.Q3)("",!0):((0,a.uX)(),(0,a.CE)("span",V," 필수 입력 항목입니다. "))]),(0,a.bo)((0,a.Lk)("input",{"onUpdate:modelValue":l[2]||(l[2]=e=>o.mileageName=e),type:"text",class:"input-base input-white",style:{width:"800px","text-align":"left"},placeholder:"추가 마일리지 이름을 입력하세요."},null,512),[[n.Jo,o.mileageName]]),q,(0,a.Lk)("div",I,[(0,a.eW)(" 마일리지 연간 최고 한도 "),o.isAnnualLimitValid?(0,a.Q3)("",!0):((0,a.uX)(),(0,a.CE)("span",Q," 필수 입력 항목입니다. "))]),(0,a.bo)((0,a.Lk)("input",{"onUpdate:modelValue":l[3]||(l[3]=e=>o.annualLimit=e),type:"text",class:"input-base input-white",style:{width:"800px","text-align":"left"},placeholder:"마일리지 연간 최고 한도를 입력하세요."},null,512),[[n.Jo,o.annualLimit]]),(0,a.Lk)("div",S,[(0,a.eW)(" 담당자 설정 "),(0,a.Lk)("i",{class:"bi bi-plus-lg",onClick:l[4]||(l[4]=(...e)=>o.addRow&&o.addRow(...e))}),o.isRowsValid?(0,a.Q3)("",!0):((0,a.uX)(),(0,a.CE)("span",P," 최소 한 명의 담당자를 설정해야 합니다. "))]),(0,a.Lk)("table",O,[F,((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(o.rows,((e,l)=>((0,a.uX)(),(0,a.CE)("tr",{key:l,onClick:l=>o.openModal(e),style:{cursor:"pointer"}},[(0,a.Lk)("td",null,(0,i.v_)(l+1),1),(0,a.Lk)("td",null,(0,i.v_)(e.id),1),(0,a.Lk)("td",null,(0,i.v_)(e.name),1),(0,a.Lk)("td",null,(0,i.v_)(e.department),1),(0,a.Lk)("td",null,(0,i.v_)(e.position),1),(0,a.Lk)("td",null,[o.rows.length>1?((0,a.uX)(),(0,a.CE)("i",{key:0,class:"bi bi-dash-lg remove-icon",onClick:(0,n.D$)((e=>o.removeRow(l)),["stop"])},null,8,J)):(0,a.Q3)("",!0)])],8,B)))),128))]),$,(0,a.bo)((0,a.Lk)("textarea",{"onUpdate:modelValue":l[5]||(l[5]=e=>o.additionalNotes=e),class:"input-base input-white",style:{width:"800px",height:"200px","text-align":"left"},placeholder:"기타 요청사항을 입력하세요."},null,512),[[n.Jo,o.additionalNotes]]),o.isModalOpen?((0,a.uX)(),(0,a.Wv)(d,{key:0,isOpen:o.isModalOpen,mileName:o.selectedRow?.name,mileNo:o.selectedRow?.id,onUserSelected:o.updateRow,onClose:o.closeModal},null,8,["isOpen","mileName","mileNo","onUserSelected","onClose"])):(0,a.Q3)("",!0)]),(0,a.Lk)("div",j,[(0,a.Lk)("button",{class:"btn-yellow mt-5 KB_S4",onClick:l[6]||(l[6]=(...e)=>o.submitForm&&o.submitForm(...e))},"요청하기")])],64)}t(4114);var D=t(953),z=t(8465),H=t.n(z);const G=e=>((0,a.Qi)("data-v-61f00794"),e=e(),(0,a.jt)(),e),Y={key:0,class:"modals"},Z={class:"modals-content",style:{width:"700px",height:"auto"}},ee=G((()=>(0,a.Lk)("span",{class:"KB_S4",style:{"font-size":"19pt"}},"직원 검색",-1))),le=G((()=>(0,a.Lk)("br",null,null,-1))),te=G((()=>(0,a.Lk)("br",null,null,-1))),ae={style:{"text-align":"left"}},ie=G((()=>(0,a.Lk)("span",{style:{"text-align":"left","margin-left":"15px","font-size":"13pt"}}," 담당자 설정 ",-1))),ne={style:{"text-align":"left","margin-left":"5px"}},oe={class:"user-list"},se=["onClick"];function re(e,l,t,o,s,r){return t.isOpen?((0,a.uX)(),(0,a.CE)("div",Y,[(0,a.Lk)("div",Z,[(0,a.Lk)("span",{class:"close",onClick:l[0]||(l[0]=l=>e.$emit("close"))},"×"),ee,le,te,(0,a.Lk)("div",ae,[ie,(0,a.Lk)("div",ne,[(0,a.bo)((0,a.Lk)("input",{"onUpdate:modelValue":l[1]||(l[1]=e=>s.searchTerm=e),onInput:l[2]||(l[2]=(...e)=>r.searchUser&&r.searchUser(...e)),type:"text",placeholder:"이름이나 사번을 입력하세요",style:{width:"100%",padding:"8px","margin-bottom":"10px"}},null,544),[[n.Jo,s.searchTerm]]),(0,a.Lk)("div",oe,[(0,a.Lk)("ul",null,[((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(s.filteredUserList,(e=>((0,a.uX)(),(0,a.CE)("li",{key:e.user_no,onClick:l=>r.selectUser(e)},(0,i.v_)(e.user_name)+" ("+(0,i.v_)(e.user_no)+") "+(0,i.v_)(e.dp_no)+" - "+(0,i.v_)(e.position_no),9,se)))),128))])])])])])])):(0,a.Q3)("",!0)}var de=t(7682),ue={props:{mileName:String,mileNo:Number,isOpen:Boolean},data(){return{searchTerm:"",userList:[],filteredUserList:[]}},methods:{async searchUser(){try{const e=await de.A.post("/admin/searchUser",null,{params:{}});this.userList=e.data,this.filterUserList()}catch(e){console.error("유저 리스트를 가져오는 중 오류 발생:",e),this.userList=[],this.filteredUserList=[]}},filterUserList(){if(this.searchTerm){const e=this.searchTerm.toLowerCase();this.filteredUserList=this.userList.filter((l=>l.user_name.toLowerCase().includes(e)||l.user_no.toLowerCase().includes(e)))}else this.filteredUserList=this.userList},selectUser(e){this.$emit("user-selected",e),this.$emit("close")},newAdminList(){console.log("등록하기 버튼 클릭됨")}},watch:{searchTerm(){this.filterUserList()}}},ce=t(6262);const me=(0,ce.A)(ue,[["render",re],["__scopeId","data-v-61f00794"]]);var pe=me,ge={name:"MileageRequestWriteAdd",components:{SearchModal:pe},setup(){const e=(0,w.Pj)(),l=(0,D.KR)(1),t=(0,D.KR)(""),i=(0,D.KR)(""),n=(0,D.KR)(""),o=(0,D.KR)(""),s=(0,D.KR)([{id:"",name:"",department:"",position:""}]),r=(0,D.KR)(!1),d=(0,D.KR)(null),u=(0,D.KR)(null),c=(0,a.EW)((()=>e.getters["login/getLoginInfo"])),m=(0,a.EW)((()=>""!==t.value.trim())),p=(0,a.EW)((()=>""!==i.value.trim())),g=(0,a.EW)((()=>""!==n.value)),k=(0,a.EW)((()=>x())),v=()=>{s.value.push({id:"",name:"",department:"",position:""})},h=e=>{s.value.length>1&&s.value.splice(e,1)},L=e=>{d.value=e,u.value=s.value.indexOf(e),r.value=!0},f=()=>{r.value=!1,d.value=null,u.value=null},b=e=>{null!==u.value?s.value[u.value]={id:e.user_no||"",name:e.user_name||"",department:e.dp_no||"부서 정보 없음",position:e.position_no||"직급 정보 없음"}:console.error("선택된 행이 없습니다.")},x=()=>s.value.some((e=>""!==e.id.trim()&&""!==e.name.trim())),y=async()=>{let e=!1;if(g.value||(H().fire({icon:"error",title:"입력 오류",text:"마일리지 공통여부는 필수 선택 항목입니다.",scrollbarPadding:!1}),e=!0),m.value||(H().fire({icon:"error",title:"입력 오류",text:"마일리지 이름은 필수 입력 항목입니다.",scrollbarPadding:!1}),e=!0),p.value||(H().fire({icon:"error",title:"입력 오류",text:"마일리지 연간 최고 한도는 필수 입력 항목입니다.",scrollbarPadding:!1}),e=!0),k.value||(H().fire({icon:"error",title:"입력 오류",text:"최소 한 명의 담당자를 설정해 주세요.",scrollbarPadding:!1}),e=!0),e)return;const a={request_is_branch:"1"===n.value,request_mile_name:t.value,request_mil_max:parseInt(i.value,10),request_admin:JSON.stringify(s.value.map((e=>e.id))),request_etc:o.value,request_no:l.value,mile_no:c.value.mile_no||0,user_no:c.value.user_no};try{const e=await de.A.post("/user/requestAdd",a);H().fire({icon:"success",title:"성공",text:"요청이 성공적으로 제출되었습니다.",scrollbarPadding:!1}).then((e=>{e.isConfirmed&&(document.location="/mileageRequesList")})),console.log(e.data)}catch(r){console.error("Error submitting form:",r),H().fire({icon:"error",title:"서버 오류",text:"요청을 제출하는 동안 오류가 발생했습니다. 나중에 다시 시도해 주세요.",scrollbarPadding:!1})}};return{request:l,mileageName:t,annualLimit:i,commonMileage:n,additionalNotes:o,rows:s,isModalOpen:r,selectedRow:d,selectedRowIndex:u,addRow:v,removeRow:h,openModal:L,closeModal:f,updateRow:b,submitForm:y,isMileageNameValid:m,isAnnualLimitValid:p,isCommonMileageValid:g,isRowsValid:k,validateRows:x,loginInfo:c}}};const ke=(0,ce.A)(ge,[["render",T],["__scopeId","data-v-50c1c6aa"]]);var ve=ke;const he=e=>((0,a.Qi)("data-v-4b7c2344"),e=e(),(0,a.jt)(),e),Le=he((()=>(0,a.Lk)("h3",{class:"lg p-3",style:{"text-align":"left","font-family":"KB_C2"}}," 마일리지 수정 ",-1))),fe={class:"p-2",style:{"text-align":"left","background-color":"#f6f6f6",padding:"10px 140px 60px 140px !important"}},be=he((()=>(0,a.Lk)("div",{class:"mt-5",style:{"text-align":"left"}},"마일리지 이름",-1))),xe=["placeholder"],ye=he((()=>(0,a.Lk)("br",null,null,-1))),_e=he((()=>(0,a.Lk)("div",{class:"mt-3",style:{"text-align":"left"}},"마일리지 연간 최고 한도",-1))),we=["placeholder"],Re={class:"mt-3",style:{"text-align":"left"}},Ce={key:0,class:"error-text"},Me={class:"table table-bordered input-base",style:{width:"800px","border-radius":"10px","background-color":"white"}},Ne=he((()=>(0,a.Lk)("tr",null,[(0,a.Lk)("td",null,"번호"),(0,a.Lk)("td",null,"사번"),(0,a.Lk)("td",null,"이름"),(0,a.Lk)("td",null,"부서"),(0,a.Lk)("td",null,"직급"),(0,a.Lk)("td",null,"삭제")],-1))),Ee=["onClick"],We=["onClick"],Ke=he((()=>(0,a.Lk)("div",{class:"mt-3",style:{"text-align":"left"}},"기타사항",-1))),Ae={style:{"text-align":"right"}};function Ue(e,l,t,o,s,r){const d=(0,a.g2)("SearchModal");return(0,a.uX)(),(0,a.CE)(a.FK,null,[Le,(0,a.Lk)("div",fe,[be,(0,a.bo)((0,a.Lk)("input",{"onUpdate:modelValue":l[0]||(l[0]=e=>o.mileageName=e),type:"text",class:"input-base input-white",style:{width:"800px","text-align":"left"},placeholder:o.getMileageNamePlaceholder},null,8,xe),[[n.Jo,o.mileageName]]),ye,_e,(0,a.bo)((0,a.Lk)("input",{"onUpdate:modelValue":l[1]||(l[1]=e=>o.mileMax=e),type:"text",class:"input-base input-white",style:{width:"800px","text-align":"left"},placeholder:o.getMileMaxPlaceholder},null,8,we),[[n.Jo,o.mileMax]]),(0,a.Lk)("div",Re,[(0,a.eW)(" 담당자 설정 "),(0,a.Lk)("i",{class:"bi bi-plus-lg",onClick:l[2]||(l[2]=(...e)=>o.addRow&&o.addRow(...e))}),o.isRowsValid?(0,a.Q3)("",!0):((0,a.uX)(),(0,a.CE)("span",Ce,"최소 한 명의 담당자를 설정해야 합니다."))]),(0,a.Lk)("table",Me,[Ne,((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(o.rows,((e,l)=>((0,a.uX)(),(0,a.CE)("tr",{key:l,onClick:l=>o.openModal(e),style:{cursor:"pointer"}},[(0,a.Lk)("td",null,(0,i.v_)(l+1),1),(0,a.Lk)("td",null,(0,i.v_)(e.id),1),(0,a.Lk)("td",null,(0,i.v_)(e.name),1),(0,a.Lk)("td",null,(0,i.v_)(e.department),1),(0,a.Lk)("td",null,(0,i.v_)(e.position),1),(0,a.Lk)("td",null,[o.rows.length>1?((0,a.uX)(),(0,a.CE)("i",{key:0,class:"bi bi-dash-lg remove-icon",onClick:(0,n.D$)((e=>o.removeRow(l)),["stop"])},null,8,We)):(0,a.Q3)("",!0)])],8,Ee)))),128))]),Ke,(0,a.bo)((0,a.Lk)("textarea",{"onUpdate:modelValue":l[3]||(l[3]=e=>o.additionalNotes=e),class:"input-base input-white",style:{width:"800px",height:"200px","text-align":"left"},placeholder:"기타 요청사항을 입력하세요."},null,512),[[n.Jo,o.additionalNotes]]),o.isModalOpen?((0,a.uX)(),(0,a.Wv)(d,{key:0,isOpen:o.isModalOpen,mileName:o.selectedRow?.name,mileNo:o.selectedRow?.id,onUserSelected:o.updateRow,onClose:o.closeModal},null,8,["isOpen","mileName","mileNo","onUserSelected","onClose"])):(0,a.Q3)("",!0)]),(0,a.Lk)("div",Ae,[(0,a.Lk)("button",{class:"btn-yellow mt-5 KB_S4",onClick:l[4]||(l[4]=(...e)=>o.submitForm&&o.submitForm(...e))},"요청하기")])],64)}var Xe={name:"MileageRequestWriteAdd",components:{SearchModal:pe},setup(){const e=(0,w.Pj)(),l=(0,a.EW)((()=>e.getters["login/getLoginInfo"])),t=(0,a.EW)((()=>e.getters["mileage/getArrayMileage"])),i=(0,D.KR)(2),n=(0,D.KR)(""),o=(0,D.KR)(""),s=(0,D.KR)(""),r=(0,D.KR)(""),d=(0,D.KR)([{id:"",name:"",department:"",position:""}]),u=(0,D.KR)(!1),c=(0,D.KR)(null),m=(0,D.KR)(null),p=(0,a.EW)((()=>""!==n.value.trim())),g=(0,a.EW)((()=>""!==o.value.trim())),k=(0,a.EW)((()=>""!==s.value)),v=(0,a.EW)((()=>R())),h=(0,a.EW)((()=>{const e=l.value.mile_no,a=t.value.find((l=>l.mile_no.toString()===e.toString()));return a?`현재 마일리지 이름: ${a.mile_name}`:"추가 마일리지 이름을 입력하세요."})),L=(0,a.EW)((()=>{const e=l.value.mile_no,a=t.value.find((l=>l.mile_no.toString()===e.toString()));return console.log("mileNo:",e),console.log("mileageLabel:",t.value),console.log("mileage:",a),a?`현재 연간 최고 한도: ${a.mile_max||"0"}`:"마일리지 연간 최고 한도를 입력하세요."})),f=()=>{d.value.push({id:"",name:"",department:"",position:""})},b=e=>{d.value.length>1&&d.value.splice(e,1)},x=e=>{c.value=e,m.value=d.value.indexOf(e),u.value=!0},y=()=>{u.value=!1,c.value=null,m.value=null},_=e=>{null!==m.value?d.value[m.value]={id:e.user_no||"",name:e.user_name||"",department:e.dp_no||"부서 정보 없음",position:e.position_no||"직급 정보 없음"}:console.error("선택된 행이 없습니다.")},R=()=>d.value.some((e=>""!==e.id.trim()&&""!==e.name.trim())),C=async()=>{let e=!1;if(v.value||(H().fire({icon:"error",title:"입력 오류",text:"최소 한 명의 담당자를 설정해 주세요.",scrollbarPadding:!1}),e=!0),e)return;const t={request_is_branch:"1"===s.value,request_mile_name:n.value,request_mil_max:parseInt(o.value,10),request_admin:JSON.stringify(d.value.map((e=>e.id))),request_etc:r.value,request_no:i.value,user_no:l.value.user_no,mile_no:l.value.mile_no};try{const e=await de.A.post("/user/requestAdd",t);H().fire({icon:"success",title:"성공",text:"요청이 성공적으로 제출되었습니다.",scrollbarPadding:!1}).then((e=>{e.isConfirmed&&(document.location="/mileageRequesList")})),console.log(e.data)}catch(a){console.error("Error submitting form:",a),H().fire({icon:"error",title:"서버 오류",text:"요청을 제출하는 동안 오류가 발생했습니다. 나중에 다시 시도해 주세요.",scrollbarPadding:!1})}};(0,a.sV)((()=>{M()}));const M=async()=>{try{const e=await de.A.post("/admin/getMileageAdminList",null,{params:{mile_no:l.value.mile_no}});console.log("담당자 리스트:",e.data),e.data.length>0&&(d.value=e.data.map((e=>({id:e.user_no,name:e.user_name,department:e.dp_no||"부서 정보 없음",position:e.position_no||"직급 정보 없음"}))))}catch(e){console.error("Error fetching admin list:",e)}};return{mileageName:n,mileMax:o,commonMileage:s,additionalNotes:r,rows:d,isModalOpen:u,selectedRow:c,selectedRowIndex:m,addRow:f,removeRow:b,openModal:x,closeModal:y,updateRow:_,submitForm:C,isMileageNameValid:p,isMileMaxValid:g,isCommonMileageValid:k,isRowsValid:v,validateRows:R,loginInfo:l,mileageLabel:t,getMileageNamePlaceholder:h,getMileMaxPlaceholder:L,getMileageAdminList:M}}};const Ve=(0,ce.A)(Xe,[["render",Ue],["__scopeId","data-v-4b7c2344"]]);var qe=Ve;const Ie=e=>((0,a.Qi)("data-v-fc6decd8"),e=e(),(0,a.jt)(),e),Qe=Ie((()=>(0,a.Lk)("h3",{class:"lg p-3",style:{"text-align":"left","font-family":"KB_C2"}}," 마일리지 삭제 ",-1))),Se={class:"p-2",style:{"text-align":"left","background-color":"#f6f6f6",padding:"10px 140px 60px 140px !important"}},Pe=Ie((()=>(0,a.Lk)("div",{class:"mt-5",style:{"text-align":"left"}},"마일리지 이름",-1))),Oe=Ie((()=>(0,a.Lk)("br",null,null,-1))),Fe=Ie((()=>(0,a.Lk)("div",{class:"mt-3",style:{"text-align":"left"}},"기타사항",-1))),Be={style:{"text-align":"right"}};function Je(e,l,t,i,o,s){return(0,a.uX)(),(0,a.CE)(a.FK,null,[Qe,(0,a.Lk)("div",Se,[Pe,(0,a.bo)((0,a.Lk)("input",{"onUpdate:modelValue":l[0]||(l[0]=e=>i.mileageName=e),type:"text",class:"input-base input-white",style:{width:"800px","text-align":"left"},readonly:""},null,512),[[n.Jo,i.mileageName]]),Oe,Fe,(0,a.bo)((0,a.Lk)("textarea",{"onUpdate:modelValue":l[1]||(l[1]=e=>i.additionalNotes=e),class:"input-base input-white",style:{width:"800px",height:"200px","text-align":"left"},placeholder:"기타 요청사항을 입력하세요."},null,512),[[n.Jo,i.additionalNotes]])]),(0,a.Lk)("div",Be,[(0,a.Lk)("button",{class:"btn-yellow mt-5 KB_S4",onClick:l[2]||(l[2]=(...e)=>i.submitForm&&i.submitForm(...e))},"요청하기")])],64)}var $e={name:"MileageRequestWriteDelete",setup(){const e=(0,w.Pj)(),l=(0,a.EW)((()=>e.getters["login/getLoginInfo"])),t=(0,a.EW)((()=>e.getters["mileage/getArrayMileage"])),i=(0,D.KR)(3),n=(0,D.KR)(""),o=(0,D.KR)(""),s=(0,a.EW)((()=>{const e=l.value.mile_no,a=t.value.find((l=>l.mile_no.toString()===e.toString()));return a?`${a.mile_name}`:"추가 마일리지 이름을 입력하세요."})),r=async()=>{const e={request_mile_name:n.value,request_mil_max:0,request_admin:" ",request_etc:o.value,request_no:i.value,user_no:l.value.user_no,mile_no:l.value.mile_no};try{const l=await de.A.post("/user/requestAdd",e);H().fire({icon:"success",title:"성공",text:"요청이 성공적으로 제출되었습니다.",scrollbarPadding:!1}).then((e=>{e.isConfirmed&&(document.location="/mileageRequesList")})),console.log(l.data)}catch(t){console.error("Error submitting form:",t),H().fire({icon:"error",title:"서버 오류",text:"요청을 제출하는 동안 오류가 발생했습니다. 나중에 다시 시도해 주세요.",scrollbarPadding:!1})}};return(0,a.sV)((()=>{n.value=s.value})),{mileageName:n,additionalNotes:o,getMileageNamePlaceholder:s,submitForm:r}}};const je=(0,ce.A)($e,[["render",Je],["__scopeId","data-v-fc6decd8"]]);var Te=je,De={name:"MileageRequestWrite",components:{WriteAdd:ve,WriteModify:qe,WriteDelete:Te},data(){return{selectedAction:"add"}},computed:{...(0,w.L8)("login",["getLoginInfo"]),loginInfo(){return this.getLoginInfo},hasMileageNumber(){return this.loginInfo&&this.loginInfo.mile_no}},methods:{handleCheckboxChange(){},goBack(){this.$router.go(-1)}},mounted(){}};const ze=(0,ce.A)(De,[["render",_],["__scopeId","data-v-23300728"]]);var He=ze}}]);
//# sourceMappingURL=3359.cdd61d22.js.map
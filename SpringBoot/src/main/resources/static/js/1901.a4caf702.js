"use strict";(self["webpackChunkmile"]=self["webpackChunkmile"]||[]).push([[1901],{1901:function(e,t,l){l.r(t),l.d(t,{default:function(){return ke}});var s=l(641),a=l(33),i=l(3751);const n=e=>((0,s.Qi)("data-v-e96a6fbe"),e=e(),(0,s.jt)(),e),r={class:"app-container"},c={class:"content cards"},o=n((()=>(0,s.Lk)("div",null,[(0,s.Lk)("h2",null,"마일리지 요청")],-1))),u=n((()=>(0,s.Lk)("br",null,null,-1))),d=n((()=>(0,s.Lk)("br",null,null,-1))),p=n((()=>(0,s.Lk)("br",null,null,-1))),k=n((()=>(0,s.Lk)("br",null,null,-1))),L=n((()=>(0,s.Lk)("br",null,null,-1))),g={class:"notice-count-container"},h={class:"notice-count"},m={class:"radio-container"},y=n((()=>(0,s.Lk)("span",{class:"custom-radio"},null,-1))),v=n((()=>(0,s.Lk)("span",{class:"radio-label"},"전체",-1))),f={class:"radio-container"},_=n((()=>(0,s.Lk)("span",{class:"custom-radio"},null,-1))),b=n((()=>(0,s.Lk)("span",{class:"radio-label"},"접수요청",-1))),C={class:"radio-container"},F=n((()=>(0,s.Lk)("span",{class:"custom-radio"},null,-1))),q=n((()=>(0,s.Lk)("span",{class:"radio-label"},"접수완료",-1))),P={class:"radio-container"},x=n((()=>(0,s.Lk)("span",{class:"custom-radio"},null,-1))),X=n((()=>(0,s.Lk)("span",{class:"radio-label"},"승인완료",-1))),N={class:"radio-container"},w=n((()=>(0,s.Lk)("span",{class:"custom-radio"},null,-1))),E=n((()=>(0,s.Lk)("span",{class:"radio-label"},"승인거절",-1))),Q=n((()=>(0,s.Lk)("i",{class:"bi bi-pencil",style:{"margin-right":"10px"}},null,-1))),I={class:"search-container"},R=n((()=>(0,s.Lk)("i",{class:"bi bi-search"},null,-1))),T=[R],B={style:{"text-align":"center","justify-content":"center"}},U={key:0,class:"no-results"},V={key:1},W={class:"notice-list",style:{"text-align":"center"}},j=["onClick"],z={class:"notice-details"},A={class:"notice-new"},D={class:"notice-num"},K={class:"notice-title"},S={class:"notice-mile"},J={class:"notice-date"},M={key:1,class:"notice-details-expanded"},$=n((()=>(0,s.Lk)("p",{style:{"text-align":"left","font-size":"15pt"},class:"KB_S3 mt-3 ml-3"}," 요청사항 ",-1))),G=n((()=>(0,s.Lk)("hr",null,null,-1))),H={style:{"text-align":"left"},class:"ml-3"},O={style:{"text-align":"left"},class:"ml-3"},Y={style:{"text-align":"left"},class:"ml-3"},Z={style:{"text-align":"left"},class:"ml-3"},ee={key:0,style:{"text-align":"right","margin-right":"10px"}},te=n((()=>(0,s.Lk)("i",{class:"bi bi-trash-fill",style:{color:"gray","font-size":"larger"}},null,-1))),le=["onClick"],se={class:"pagination"},ae=["onClick"];function ie(e,t,l,n,R,ie){return(0,s.uX)(),(0,s.CE)("div",r,[(0,s.Lk)("div",c,[o,u,d,p,k,L,(0,s.Lk)("div",g,[(0,s.Lk)("div",h,"총 "+(0,a.v_)(ie.filteredNotices.length)+"건",1),(0,s.Lk)("label",m,[(0,s.bo)((0,s.Lk)("input",{type:"radio",name:"status",value:"all","onUpdate:modelValue":t[0]||(t[0]=e=>R.selectedFilter=e),onChange:t[1]||(t[1]=(...e)=>ie.applyFilters&&ie.applyFilters(...e))},null,544),[[i.XL,R.selectedFilter]]),y,v]),(0,s.Lk)("label",f,[(0,s.bo)((0,s.Lk)("input",{type:"radio",name:"status",value:"processing","onUpdate:modelValue":t[2]||(t[2]=e=>R.selectedFilter=e),onChange:t[3]||(t[3]=(...e)=>ie.applyFilters&&ie.applyFilters(...e))},null,544),[[i.XL,R.selectedFilter]]),_,b]),(0,s.Lk)("label",C,[(0,s.bo)((0,s.Lk)("input",{type:"radio",name:"status",value:"completed","onUpdate:modelValue":t[4]||(t[4]=e=>R.selectedFilter=e),onChange:t[5]||(t[5]=(...e)=>ie.applyFilters&&ie.applyFilters(...e))},null,544),[[i.XL,R.selectedFilter]]),F,q]),(0,s.Lk)("label",P,[(0,s.bo)((0,s.Lk)("input",{type:"radio",name:"status",value:"rejected","onUpdate:modelValue":t[6]||(t[6]=e=>R.selectedFilter=e),onChange:t[7]||(t[7]=(...e)=>ie.applyFilters&&ie.applyFilters(...e))},null,544),[[i.XL,R.selectedFilter]]),x,X]),(0,s.Lk)("label",N,[(0,s.bo)((0,s.Lk)("input",{type:"radio",name:"status",value:"false","onUpdate:modelValue":t[8]||(t[8]=e=>R.selectedFilter=e),onChange:t[9]||(t[9]=(...e)=>ie.applyFilters&&ie.applyFilters(...e))},null,544),[[i.XL,R.selectedFilter]]),w,E])]),(0,s.Lk)("div",null,[(0,s.Lk)("div",null,[(0,s.Lk)("button",{class:"write-button",onClick:t[10]||(t[10]=(...e)=>ie.goToWritePage&&ie.goToWritePage(...e))},[Q,(0,s.eW)(" 글작성 ")])])]),(0,s.Lk)("div",I,[(0,s.bo)((0,s.Lk)("input",{type:"text","onUpdate:modelValue":t[11]||(t[11]=e=>R.searchQuery=e),placeholder:"제목 및 내용을 검색하세요",class:"input-search"},null,512),[[i.Jo,R.searchQuery]]),(0,s.Lk)("button",{class:"search-button",onClick:t[12]||(t[12]=(...e)=>ie.applyFilters&&ie.applyFilters(...e))},T)]),(0,s.Lk)("div",B,[0===ie.filteredNotices.length?((0,s.uX)(),(0,s.CE)("div",U," 접수된 내역이 없습니다. ")):((0,s.uX)(),(0,s.CE)("div",V,[(0,s.Lk)("div",W,[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(ie.paginatedNotices,((e,t)=>((0,s.uX)(),(0,s.CE)("div",{key:t},[e?((0,s.uX)(),(0,s.CE)("div",{key:0,class:"input-base list-wrapper",onClick:e=>ie.toggleDetails(t)},[(0,s.Lk)("div",z,[(0,s.Lk)("div",A,(0,a.v_)(t+1),1),(0,s.Lk)("div",D,(0,a.v_)(ie.getRequestType(e.request)),1),(0,s.Lk)("div",K,(0,a.v_)(e.request_mile_name||e.mile_name),1),(0,s.Lk)("div",S,(0,a.v_)(ie.getStatus(e.request_status)),1),(0,s.Lk)("div",J,(0,a.v_)(e.mileage_request_date),1)])],8,j)):(0,s.Q3)("",!0),R.selectedNotice===t&&e?((0,s.uX)(),(0,s.CE)("div",M,[$,G,(0,s.Lk)("p",H," 마일리지 이름 : "+(0,a.v_)(e.request_mile_name||e.mile_name),1),(0,s.Lk)("p",O," 연간 최고 한도 : "+(0,a.v_)(e.request_mil_max),1),(0,s.Lk)("p",Y," 담당자 : "+(0,a.v_)(e.request_admin),1),(0,s.Lk)("p",Z," 기타요청: "+(0,a.v_)(e.request_etc),1),0===e.request_status?((0,s.uX)(),(0,s.CE)("div",ee,[te,(0,s.Lk)("span",{style:{color:"gray","font-size":"larger"},onClick:t=>ie.deleteRequest(e.mileage_request_no)},"삭제",8,le)])):(0,s.Q3)("",!0)])):(0,s.Q3)("",!0)])))),128))])]))]),(0,s.Lk)("div",se,[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(ie.totalPages,(e=>((0,s.uX)(),(0,s.CE)("button",{key:e,onClick:t=>R.currentPage=e,class:(0,a.C4)({active:R.currentPage===e})},(0,a.v_)(e),11,ae)))),128))])])])}l(4114);var ne=l(6278),re=l(7682),ce=l(8465),oe=l.n(ce),ue={data(){return{requestList:[],searchQuery:"",currentPage:1,itemsPerPage:10,selectedFilter:"all",selectedNotice:null}},computed:{...(0,ne.L8)("login",["getLoginInfo","getIsChecked"]),loginInfo(){return this.getLoginInfo},isChecked(){return this.getIsChecked},filteredNotices(){let e=this.requestList||[];return this.searchQuery&&(e=e.filter((e=>e.mile_name&&e.mile_name.includes(this.searchQuery)||e.request_mile_name&&e.request_mile_name.includes(this.searchQuery)))),"all"===this.selectedFilter?e:e.filter((e=>{const t=e.request_status??-1;return"processing"===this.selectedFilter&&0===t||"completed"===this.selectedFilter&&1===t||"rejected"===this.selectedFilter&&2===t||"false"===this.selectedFilter&&3===t}))},paginatedNotices(){const e=(this.currentPage-1)*this.itemsPerPage,t=e+this.itemsPerPage;return this.filteredNotices.slice(e,t)},totalPages(){return Math.ceil(this.filteredNotices.length/this.itemsPerPage)}},methods:{goToWritePage(){this.$router.push("/mileageRequestWrite")},async fetchRequestList(){try{const e=await re.A.post("/user/requestList",null,{params:{user_no:this.getLoginInfo.user_no}});this.requestList=e.data||[]}catch(e){console.error("문제",e),this.requestList=[]}},async deleteRequest(e){const t=await oe().fire({title:"삭제 확인",text:"정말로 요청을 삭제하시겠습니까?",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"삭제",cancelButtonText:"취소"});if(t.isConfirmed)try{const t=await re.A.post("/user/requestListDelete",null,{params:{mileage_request_no:e}});console.log(t.data),oe().fire("삭제 완료","요청이 삭제되었습니다.","success").then((()=>{this.fetchRequestList()}))}catch(l){console.error("문제",l),oe().fire("오류","요청 삭제에 실패했습니다.","error")}},getRequestType(e){return 1===e?"추가":2===e?"수정":3===e?"삭제":"기타"},getStatus(e){return 0===e?"접수요청":1===e?"접수완료":2===e?"승인완료":3===e?"승인거절":"미확인"},toggleDetails(e){this.selectedNotice=this.selectedNotice===e?null:e},applyFilters(){this.currentPage=1}},created(){this.fetchRequestList()}},de=l(6262);const pe=(0,de.A)(ue,[["render",ie],["__scopeId","data-v-e96a6fbe"]]);var ke=pe}}]);
//# sourceMappingURL=1901.a4caf702.js.map
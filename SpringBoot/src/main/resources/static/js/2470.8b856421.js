"use strict";(self["webpackChunkmile"]=self["webpackChunkmile"]||[]).push([[2470],{2470:function(e,t,o){o.r(t),o.d(t,{default:function(){return I}});var l=o(641),i=o(3751);const n=e=>((0,l.Qi)("data-v-6b332754"),e=e(),(0,l.jt)(),e),a={class:"app-container"},s={class:"content cards"},r={class:"header"},c={class:"button-container"},d=n((()=>(0,l.Lk)("span",{class:"arrow"},"❮",-1))),m=n((()=>(0,l.Lk)("div",{class:"actions"},[(0,l.Lk)("h1",{class:"title"},"M-Tip 가이드 작성")],-1))),u={class:"form-group"},p=n((()=>(0,l.Lk)("label",{for:"title"},"제목",-1))),h={class:"form-group content"},f=n((()=>(0,l.Lk)("label",{for:"content"},"내용",-1))),g={class:"form-group file-upload"},k=n((()=>(0,l.Lk)("label",{for:"file"},"첨부파일",-1))),w={class:"p-4"},b=n((()=>(0,l.Lk)("div",{class:"btn-yellow-container"},[(0,l.Lk)("button",{type:"submit",class:"btn-yellow"},"등록")],-1)));function L(e,t,o,n,L,y){return(0,l.uX)(),(0,l.CE)("div",a,[(0,l.Lk)("div",s,[(0,l.Lk)("div",r,[(0,l.Lk)("div",c,[(0,l.Lk)("button",{class:"back-button",onClick:t[0]||(t[0]=(...e)=>y.goBack&&y.goBack(...e))},[d,(0,l.eW)(" 이전 ")])])]),m,(0,l.Lk)("form",{onSubmit:t[4]||(t[4]=(0,i.D$)(((...e)=>y.submitForm&&y.submitForm(...e)),["prevent"]))},[(0,l.Lk)("div",u,[p,(0,l.bo)((0,l.Lk)("input",{type:"text",id:"title","onUpdate:modelValue":t[1]||(t[1]=e=>L.form.title=e),placeholder:"제목을 입력해주세요",class:"title-input"},null,512),[[i.Jo,L.form.title]])]),(0,l.Lk)("div",h,[f,(0,l.bo)((0,l.Lk)("textarea",{id:"content","onUpdate:modelValue":t[2]||(t[2]=e=>L.form.content=e),placeholder:"내용을 입력해주세요"},null,512),[[i.Jo,L.form.content]])]),(0,l.Lk)("div",g,[k,(0,l.Lk)("div",w,[(0,l.Lk)("div",null,[(0,l.Lk)("input",{type:"file",onChange:t[3]||(t[3]=(...e)=>y.handleFileUpload&&y.handleFileUpload(...e)),class:"md",style:{width:"100%","text-align":"right","padding-right":"70px"}},null,32)])])]),b],32)])])}o(4114);var y=o(7682),v=o(6278),F={name:"NoticeWriteAdminView",data(){return{form:{title:"",mile_no:"",kind:"",file:null,content:"",category:"",selectedKind:""},mileages:[],showCategory:!1,showKind:!1,uploadedFileName:null}},computed:{...(0,v.L8)("login",["getLoginInfo"])},mounted(){this.fetchMileages(),document.addEventListener("click",this.handleClickOutside)},beforeUnmount(){document.removeEventListener("click",this.handleClickOutside)},methods:{async handleFileUpload(e){const t=e.target.files[0];if(!t)return;const o=new FormData;o.append("files",t);try{const e=await y.A.post("/notice/mTipGuideUpload",o,{headers:{"Content-Type":"multipart/form-data"}}),[t,l]=e.data.split(",");console.log("Saved file name with UUID:",t),console.log("Original file name:",l),this.uploadedFileName=t+","+l,console.log("글쓰기 fileInfo:",this.uploadedFileName),this.displayFileName=l,this.form.file=this.uploadedFileName}catch(l){console.error("파일 업로드 중 오류 발생:",l),this.showAlert("파일 업로드 중 오류가 발생했습니다.","error")}},getDisplayFileName(e){const t=37;return!e||e.length<=t?e:"_"===e.charAt(t-1)?e.substring(t):e},async submitForm(){const e=new FormData;e.append("title",this.form.title),e.append("content",this.form.content),e.append("user_no",this.getLoginInfo.user_no),e.append("user_name",this.getLoginInfo.user_name),this.form.file&&(e.append("file",this.form.file),console.log("Form fileInfo:",this.form.file)),this.uploadedFileName&&e.append("file",this.uploadedFileName);try{const t=await y.A.post("/notice/mTipGuideWrite",e,{headers:{"Content-Type":"multipart/form-data"}});200===t.status?(this.showAlert("M-tIP 가이드가 등록되었습니다.","success"),this.$router.push("/mTipMainAdminView")):this.showAlert("M-tIP 가이드 등록 중 오류가 발생했습니다.","error")}catch(t){console.error("Error submitting form:",t),this.showAlert("M-tIP 가이드 등록 중 오류가 발생했습니다.","error")}},goBack(){this.$router.go(-1)},async fetchMileages(){try{const e=await y.A.get("/notice/mileage");this.mileages=e.data}catch(e){console.error("Error fetching mileages:",e.response?e.response.data:e.message)}},showAlert(e,t){this.$swal({title:e,icon:t,confirmButtonText:"확인",confirmButtonColor:"#4b4a4a",allowOutsideClick:!1,allowEscapeKey:!1,allowEnterKey:!1,stopKeydownPropagation:!1,scrollbarPadding:!1,backdrop:!0,didOpen:()=>{document.body.classList.add("no-scroll"),document.documentElement.style.overflow="hidden"},willClose:()=>{document.body.classList.remove("no-scroll"),document.documentElement.style.overflow="",window.scrollTo(0,scrollY)}})},handleClick(e){this.handleClickOutside(e)}},watch:{}},C=o(6262);const A=(0,C.A)(F,[["render",L],["__scopeId","data-v-6b332754"]]);var I=A}}]);
//# sourceMappingURL=2470.8b856421.js.map
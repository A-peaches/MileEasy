"use strict";(self["webpackChunkmile"]=self["webpackChunkmile"]||[]).push([[9159],{9159:function(a,e,t){t.r(e),t.d(e,{default:function(){return T}});var s=t(641),i=t(33);const n=a=>((0,s.Qi)("data-v-315bd881"),a=a(),(0,s.jt)(),a),o={class:"cards page-back mx-auto",style:{color:"#4b4a4a","padding-bottom":"90px"}},g={class:"button-container"},d=n((()=>(0,s.Lk)("span",{class:"arrow"},"❮",-1))),r=n((()=>(0,s.Lk)("h2",{class:"mt-3 main-title"},"배지 취득 현황",-1))),c={class:"badge-container"},l={class:"badge-image-container"},m=["src"],h={class:"badge-info"},u=n((()=>(0,s.Lk)("span",{class:"badge-title"},"마왕 배지",-1))),b=n((()=>(0,s.Lk)("p",{class:"badge-description"},"전월 기준 마일리지 취득 점수가 높은 상위 3명이 채택됩니다.",-1))),k={key:0,class:"badge-date"},p={key:1,class:"badge-date"},L={class:"badge-image-container"},_=["src"],I={class:"badge-info"},v=n((()=>(0,s.Lk)("span",{class:"badge-title"},"Jump UP 배지",-1))),f=n((()=>(0,s.Lk)("p",{class:"badge-description"},"최근 2개월간 마일리지 증가 폭이 큰 상위 3명이 채택됩니다.",-1))),D={key:0,class:"badge-date"},y={key:1,class:"badge-date"},C={class:"history-container"},w=n((()=>(0,s.Lk)("h3",{class:"sub-title"},"취득 이력",-1))),E=n((()=>(0,s.Lk)("hr",null,null,-1))),B={class:"history-date"},j={class:"history-badge"},A={class:"history-status"};function J(a,e,t,n,J,X){return(0,s.uX)(),(0,s.CE)("div",o,[(0,s.Lk)("div",g,[(0,s.Lk)("button",{class:"back-button",onClick:e[0]||(e[0]=(...a)=>X.goBack&&X.goBack(...a))},[d,(0,s.eW)(" 이전 ")])]),r,(0,s.Lk)("div",c,[(0,s.Lk)("div",{class:(0,i.C4)(["badge-card",{"cards-active":J.badgeData[0]?.current_month&&J.badgeData[0]?.mile_is_king}])},[(0,s.Lk)("div",l,[(0,s.Lk)("img",{src:X.kingImage,class:(0,i.C4)({"darken-image":!J.badgeData[0]?.current_month||!J.badgeData[0]?.mile_is_king}),onError:e[1]||(e[1]=(...a)=>X.handleImageError&&X.handleImageError(...a)),alt:"마왕 배지"},null,42,m)]),(0,s.Lk)("div",h,[u,b,J.badgeData[0]?.mile_is_king?((0,s.uX)(),(0,s.CE)("p",k,"취득일 : "+(0,i.v_)(J.badgeData[0]?.start_date),1)):((0,s.uX)(),(0,s.CE)("p",p,"기준 미달성"))])],2),(0,s.Lk)("div",{class:(0,i.C4)(["badge-card",{"cards-active":J.badgeData[0]?.current_month&&J.badgeData[0]?.mile_is_jump}])},[(0,s.Lk)("div",L,[(0,s.Lk)("img",{src:X.jumpImage,class:(0,i.C4)({"darken-image":!J.badgeData[0]?.current_month||!J.badgeData[0]?.mile_is_jump}),onError:e[2]||(e[2]=(...a)=>X.handleImageError&&X.handleImageError(...a)),alt:"Jump UP 배지"},null,42,_)]),(0,s.Lk)("div",I,[v,f,J.badgeData[0]?.mile_is_jump?((0,s.uX)(),(0,s.CE)("p",D,"취득일 : "+(0,i.v_)(J.badgeData[0]?.start_date),1)):((0,s.uX)(),(0,s.CE)("p",y,"기준 미달성"))])],2)]),(0,s.Lk)("div",C,[w,E,((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(J.badgeData,((a,e)=>((0,s.uX)(),(0,s.CE)("div",{key:e,class:"history-item"},[(0,s.Lk)("div",B,(0,i.v_)(a.start_date)+" ~ "+(0,i.v_)(a.end_date),1),(0,s.Lk)("div",j,(0,i.v_)(a.mile_is_king?"마왕 배지":"Jump-Up 배지"),1),(0,s.Lk)("div",A,(0,i.v_)(a.current_month?"유효":"기간경과"),1)])))),128))])])}var X=t(6278),x=t(7682),K={name:"BadgeStatusView",data(){return{msg:"",badgeData:[],loginInfoLoaded:!1}},computed:{...(0,X.L8)("login",["getLoginInfo","getIsChecked"]),...(0,X.L8)("badge",["getKingBadge","getJumpBadge"]),kingImage(){return this.getKingBadge},jumpImage(){return this.getJumpBadge},loginInfo(){return this.getLoginInfo}},methods:{...(0,X.i0)("badge",["badgeKingImage","badgeJumpImage"]),handleImageError(){console.error("이미지 로드 실패")},checkLoginInfo(){(!this.getLoginInfo||this.getLoginInfo&&1==this.getIsChecked)&&(window.location.href="/noAccess")},async kingData(){try{const a=await x.A.get("/mileage/kingData");console.log("마왕 top3:",a.data),this.kingTop3=a.data.slice(0,5)}catch(a){console.error("마왕 top3:",a),this.kingTop3=[]}},async jumpData(){try{const a=await x.A.get("/mileage/jumpData");console.log("점프업 top3:",a.data),this.baseDate=a.data.length?a.data[0].base_date:"",this.jumpTop3=a.data.slice(0,5)}catch(a){console.error("점프업 top3:",a),this.jumpTop3=[]}},goBack(){this.$router.back(-1)},warningAlert(){this.$swal({title:"경고",text:this.msg,icon:"warning",scrollbarPadding:!1})},errorAlert(){this.$swal({title:"에러",text:this.msg,icon:"error",scrollbarPadding:!1})},successAlert(){this.$swal({title:"성공",text:this.msg,icon:"success",scrollbarPadding:!1})},async loadBadgeData(){if(this.getLoginInfo&&this.getLoginInfo.user_no)try{const a=await x.A.get(`/myMile/loadBadgeData/${this.getLoginInfo.user_no}`);this.badgeData=a.data,console.log(this.badgeData)}catch(a){console.error("배지 데이터 로드 실패:",a)}},watch:{getLoginInfo:{immediate:!0,handler(a){a&&a.user_no&&(this.loginInfoLoaded=!0,this.loadBadgeData())}}}},mounted(){this.badgeKingImage(),this.badgeJumpImage(),this.getLoginInfo&&this.getLoginInfo.user_no&&this.loadBadgeData()},created(){this.checkLoginInfo()}},P=t(6262);const $=(0,P.A)(K,[["render",J],["__scopeId","data-v-315bd881"]]);var T=$}}]);
//# sourceMappingURL=9159.0b5d22a1.js.map
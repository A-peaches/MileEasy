"use strict";(self["webpackChunkmile"]=self["webpackChunkmile"]||[]).push([[634],{50634:function(t,e,i){i.r(e),i.d(e,{default:function(){return K}});var n=i(20641),o=i(53751),r=i(90033);const s=t=>((0,n.Qi)("data-v-4164cf78"),t=t(),(0,n.jt)(),t),a={class:"app-container"},c={class:"back-container"},l=s((()=>(0,n.Lk)("span",{class:"arrow"},"❮",-1))),u=s((()=>(0,n.Lk)("div",null,[(0,n.Lk)("h2",{class:"bold-x-lg"},"Best M-Tip")],-1))),d={class:"category-button list-wrapper"},h={key:0,class:"dropdown-menu",ref:"dropdownMenu"},f={class:"menu-items"},g=["onClick"],p=s((()=>(0,n.Lk)("span",{class:"mileage-text"},"마일리지",-1))),m={class:"notice-count-container"},_={class:"notice-count"},k={key:0},v=s((()=>(0,n.Lk)("i",{class:"bi bi-pencil",style:{"margin-right":"10px"}},null,-1))),y={class:"search-container"},w=s((()=>(0,n.Lk)("i",{class:"bi bi-search"},null,-1))),b=[w],C={class:"notice-list"},L={key:0},I=["onClick"],x={class:"notice-details"},B={key:0,class:"notice-new"},D={key:1,class:"notice-num"},N={class:"notice-mile"},P={class:"notice-title"},S={class:"notice-date"},E=s((()=>(0,n.Lk)("i",{class:"bi bi-eye"},null,-1))),M={class:"notice-views"},z=s((()=>(0,n.Lk)("i",{class:"fa fa-eye"},null,-1))),A={class:"notice-like"},X={key:1},$=s((()=>(0,n.Lk)("p",null,"게시글이 없습니다.",-1))),O=[$];function Q(t,e,i,s,w,$){return(0,n.uX)(),(0,n.CE)("div",a,[(0,n.Lk)("div",{class:"content cards",onClick:e[7]||(e[7]=(...e)=>t.handleClick&&t.handleClick(...e))},[(0,n.Lk)("div",c,[(0,n.Lk)("button",{class:"back-button",onClick:e[0]||(e[0]=(...t)=>$.goBack&&$.goBack(...t))},[l,(0,n.eW)(" 이전 ")])]),u,(0,n.Lk)("div",{onClick:e[3]||(e[3]=(0,o.D$)(((...t)=>$.toggleCategory&&$.toggleCategory(...t)),["stop"])),class:"QnA",ref:"categoryButton"},[(0,n.Lk)("div",d,(0,r.v_)(null===w.selectedCategory?"카테고리":w.selectedCategory),1),w.showCategory?((0,n.uX)(),(0,n.CE)("div",h,[(0,n.Lk)("div",f,[(0,n.Lk)("a",{class:"dropdown-item",onClick:e[1]||(e[1]=t=>$.filterByCategory(null))},"전체"),((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(w.mileages,(t=>((0,n.uX)(),(0,n.CE)("a",{class:"dropdown-item",key:t.mile_no,onClick:e=>$.filterByCategory(t?.mile_name)},[(0,n.eW)((0,r.v_)(t?.mile_name)+"   ",1),p],8,g)))),128)),(0,n.Lk)("a",{class:"dropdown-item",onClick:e[2]||(e[2]=t=>$.filterByCategory("기타"))},"기타")])],512)):(0,n.Q3)("",!0)],512),(0,n.Lk)("div",m,[(0,n.Lk)("div",_,"총 "+(0,r.v_)($.filteredNotices?.length)+"건",1)]),(0,n.Lk)("div",null,[$.isLoggedIn&&$.loginInfo.user_is_admin&&!$.loginInfo.user_is_manager&&$.isChecked?((0,n.uX)(),(0,n.CE)("div",k,[(0,n.Lk)("button",{class:"write-button",onClick:e[4]||(e[4]=(...e)=>t.goToWritePage&&t.goToWritePage(...e))},[v,(0,n.eW)(" 글작성 ")])])):(0,n.Q3)("",!0)]),(0,n.Lk)("div",y,[(0,n.bo)((0,n.Lk)("input",{type:"text","onUpdate:modelValue":e[5]||(e[5]=t=>w.searchQuery=t),placeholder:"검색어를 입력하세요",class:"input-search"},null,512),[[o.Jo,w.searchQuery]]),(0,n.Lk)("button",{class:"search-button",onClick:e[6]||(e[6]=(...e)=>t.searchNotices&&t.searchNotices(...e))},b)]),(0,n.Lk)("div",C,[$.paginatedNotices.length?((0,n.uX)(),(0,n.CE)("div",L,[((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)($.paginatedNotices,(e=>((0,n.uX)(),(0,n.CE)("div",{class:"input-base list-wrapper",key:e.notice_board_no,onClick:t=>$.handleNoticeClick(e)},[(0,n.Lk)("div",x,[e.is_new?((0,n.uX)(),(0,n.CE)("div",B,(0,r.v_)(e?.display_num),1)):((0,n.uX)(),(0,n.CE)("div",D,(0,r.v_)(e?.display_num),1)),(0,n.Lk)("div",N,(0,r.v_)(e?.mile_name&&"기타"!==e?.mile_name?e.mile_name+" 마일리지":"기타"),1),(0,n.Lk)("div",P,(0,r.v_)(e?.mtip_board_title.length>30?e?.mtip_board_title.substring(0,30)+" ...":e?.mtip_board_title),1),(0,n.Lk)("pre",S,(0,r.v_)($.formatDate(e.mtip_board_date)),1),E,(0,n.Lk)("div",M,[(0,n.eW)((0,r.v_)(e?.mtip_board_hit)+" ",1),z]),(0,n.Lk)("i",{class:(0,r.C4)(["bi",t.isPostLiked($.loginInfo?.user_no,e.mtip_board_no)?"bi-heart-fill":"bi-heart"]),style:(0,r.Tr)({color:t.isPostLiked($.loginInfo?.user_no,e.mtip_board_no)?"#DC3545":"inherit"})},null,6),(0,n.Lk)("div",A,(0,r.v_)(e?.mtip_board_like),1)])],8,I)))),128))])):((0,n.uX)(),(0,n.CE)("div",X,O))])])])}i(44114),i(43375),i(39225),i(13972),i(99209),i(25714),i(17561),i(66197);var T=i(66278),V=i(37682),W={data(){return{notices:[],mileages:[],showCategory:!1,currentPage:1,itemsPerPage:10,searchQuery:"",selectedCategory:null,isProcessing:!1,sortByLikes:!0,sortByViews:!1,sortByDateAsc:!1}},computed:{...(0,T.L8)("login",["getLoginInfo","getIsChecked"]),...(0,T.aH)("login",["loginInfo"]),...(0,T.L8)("mtipBoard",["isPostLiked"],["getBestNotices"]),uniqueMileages(){return[...new Set(this.notices.filter((t=>t.mile_name)).map((t=>t.mile_name)))]},filteredNotices(){let t=this.notices;if(this.searchQuery){const e=this.searchQuery.toLowerCase();t=t.filter((t=>t.mtip_board_title&&t.mtip_board_title.toLowerCase().includes(e)||t.mtip_board_content&&t.mtip_board_content.toLowerCase().includes(e)))}null!==this.selectedCategory&&(t="기타"===this.selectedCategory?t.filter((t=>!t.mile_name)):t.filter((t=>t.mile_name===this.selectedCategory))),this.sortByLikes?t.sort(((t,e)=>e.mtip_board_like-t.mtip_board_like)):this.sortByViews?t.sort(((t,e)=>e.mtip_board_hit-t.mtip_board_hit)):this.sortByDateAsc?t.sort(((t,e)=>new Date(t.mtip_board_date)-new Date(e.mtip_board_date))):t.sort(((t,e)=>new Date(e.mtip_board_date)-new Date(t.mtip_board_date)));let e=1;return t.map((t=>({...t,is_new:this.isNew(t.mtip_board_date),display_num:this.isNew(t.mtip_board_date)?"NEW":e++})))},loginInfo(){return this.getLoginInfo},isChecked(){return this.getIsChecked},isLoggedIn(){return!!this.loginInfo},paginatedNotices(){const t=(this.currentPage-1)*this.itemsPerPage,e=t+this.itemsPerPage;return this.filteredNotices.slice(t,e)}},methods:{...(0,T.i0)("mtipBoard",["fetchNotices","fetchLikedPosts"],["fetchBestNotices"]),...(0,T.i0)("mileage",["fetchMileages"]),checkLoginInfo(){(!this.getLoginInfo||this.getLoginInfo&&1==this.getIsChecked)&&(window.location.href="/noAccess")},goBack(){this.$router.go(-1)},sortByLikesMethod(){this.sortByLikes=!0,this.sortByViews=!1,this.sortByDateAsc=!1,this.$forceUpdate()},isNew(t){const e=new Date,i=new Date(t),n=e.getTime()-i.getTime(),o=n/864e5;return o<=7},toggleCategory(){this.showCategory=!this.showCategory},closeDropdown(){this.showCategory=!1},handleClickOutside(t){this.$refs.dropdownMenu&&!this.$refs.dropdownMenu.contains(t.target)&&this.$refs.categoryButton&&!this.$refs.categoryButton.contains(t.target)&&this.closeDropdown()},filterByCategory(t){this.selectedCategory=t,this.currentPage=1},async fetchNotices(){try{const t=await V.A.get("/mtip/PlusbestMtiplist");this.notices=t.data}catch(t){console.error("Error fetching notices:",t.response?t.response.data:t.message)}},async fetchMileages(){try{const t=await V.A.get("/mtip/Mtipmileage");this.mileages=t.data}catch(t){console.error("Error fetching mileages:",t.response?t.response.data:t.message)}},async handleNoticeClick(t){if(!this.isProcessing){this.isProcessing=!0;try{await V.A.get(`/mtip/MtipViews/${t.mtip_board_no}`);const e=await V.A.get(`/mtip/details/${t.mtip_board_no}`),i=e.data;t.mtip_board_hit+=1;const n={...i,mile_no:i.mile_no,mile_name:i.mile_name,file:i.mtip_board_file||null,mtip_board_hit:t.mtip_board_hit};console.log("Navigating to noticeDetailView with notice:",{id:t.mtip_board_no,notice:n}),this.$router.push({name:"m_TipDetailView",params:{mtip_board_no:t.mtip_board_no}})}catch(e){console.error("Error fetching notice details:",e.response?e.response.data:e.message)}finally{this.isProcessing=!1}}},formatDate(t){const e={year:"numeric",month:"2-digit",day:"2-digit"};return new Date(t).toLocaleDateString("ko-KR",e)},async fetchBestNotices(){try{const t=await V.A.get("/mtip/PlusbestMtiplist");this.bestNotices=t.data}catch(t){console.error("Error fetching best notices:",t.response?t.response.data:t.message)}},async initializeData(){try{await this.fetchNotices(),await this.fetchMileages(),this.loginInfo&&await this.fetchLikedPosts(this.loginInfo.user_no)}catch(t){console.error("Error initializing data:",t)}}},mounted(){document.addEventListener("click",this.handleClickOutside),this.fetchNotices().then((()=>{this.sortByLikesMethod()})),this.fetchMileages(),this.initializeData(),this.fetchBestNotices()},beforeUnmount(){document.removeEventListener("click",this.handleClickOutside)},created(){this.checkLoginInfo()}},j=i(66262);const F=(0,j.A)(W,[["render",Q],["__scopeId","data-v-4164cf78"]]);var K=F},97080:function(t,e,i){var n=i(94402).has;t.exports=function(t){return n(t),t}},46706:function(t,e,i){var n=i(79504),o=i(79306);t.exports=function(t,e,i){try{return n(o(Object.getOwnPropertyDescriptor(t,e)[i]))}catch(r){}}},1767:function(t){t.exports=function(t){return{iterator:t,next:t.next,done:!1}}},83789:function(t,e,i){var n=i(79306),o=i(28551),r=i(69565),s=i(91291),a=i(1767),c="Invalid size",l=RangeError,u=TypeError,d=Math.max,h=function(t,e){this.set=t,this.size=d(e,0),this.has=n(t.has),this.keys=n(t.keys)};h.prototype={getIterator:function(){return a(o(r(this.keys,this.set)))},includes:function(t){return r(this.has,this.set,t)}},t.exports=function(t){o(t);var e=+t.size;if(e!==e)throw new u(c);var i=s(e);if(i<0)throw new l(c);return new h(t,i)}},40507:function(t,e,i){var n=i(69565);t.exports=function(t,e,i){var o,r,s=i?t:t.iterator,a=t.next;while(!(o=n(a,s)).done)if(r=e(o.value),void 0!==r)return r}},9539:function(t,e,i){var n=i(69565),o=i(28551),r=i(55966);t.exports=function(t,e,i){var s,a;o(t);try{if(s=r(t,"return"),!s){if("throw"===e)throw i;return i}s=n(s,t)}catch(c){a=!0,s=c}if("throw"===e)throw i;if(a)throw s;return o(s),i}},89286:function(t,e,i){var n=i(94402),o=i(38469),r=n.Set,s=n.add;t.exports=function(t){var e=new r;return o(t,(function(t){s(e,t)})),e}},83440:function(t,e,i){var n=i(97080),o=i(94402),r=i(89286),s=i(25170),a=i(83789),c=i(38469),l=i(40507),u=o.has,d=o.remove;t.exports=function(t){var e=n(this),i=a(t),o=r(e);return s(e)<=i.size?c(e,(function(t){i.includes(t)&&d(o,t)})):l(i.getIterator(),(function(t){u(e,t)&&d(o,t)})),o}},94402:function(t,e,i){var n=i(79504),o=Set.prototype;t.exports={Set:Set,add:n(o.add),has:n(o.has),remove:n(o["delete"]),proto:o}},68750:function(t,e,i){var n=i(97080),o=i(94402),r=i(25170),s=i(83789),a=i(38469),c=i(40507),l=o.Set,u=o.add,d=o.has;t.exports=function(t){var e=n(this),i=s(t),o=new l;return r(e)>i.size?c(i.getIterator(),(function(t){d(e,t)&&u(o,t)})):a(e,(function(t){i.includes(t)&&u(o,t)})),o}},64449:function(t,e,i){var n=i(97080),o=i(94402).has,r=i(25170),s=i(83789),a=i(38469),c=i(40507),l=i(9539);t.exports=function(t){var e=n(this),i=s(t);if(r(e)<=i.size)return!1!==a(e,(function(t){if(i.includes(t))return!1}),!0);var u=i.getIterator();return!1!==c(u,(function(t){if(o(e,t))return l(u,"normal",!1)}))}},53838:function(t,e,i){var n=i(97080),o=i(25170),r=i(38469),s=i(83789);t.exports=function(t){var e=n(this),i=s(t);return!(o(e)>i.size)&&!1!==r(e,(function(t){if(!i.includes(t))return!1}),!0)}},28527:function(t,e,i){var n=i(97080),o=i(94402).has,r=i(25170),s=i(83789),a=i(40507),c=i(9539);t.exports=function(t){var e=n(this),i=s(t);if(r(e)<i.size)return!1;var l=i.getIterator();return!1!==a(l,(function(t){if(!o(e,t))return c(l,"normal",!1)}))}},38469:function(t,e,i){var n=i(79504),o=i(40507),r=i(94402),s=r.Set,a=r.proto,c=n(a.forEach),l=n(a.keys),u=l(new s).next;t.exports=function(t,e,i){return i?o({iterator:l(t),next:u},e):c(t,e)}},84916:function(t,e,i){var n=i(97751),o=function(t){return{size:t,has:function(){return!1},keys:function(){return{next:function(){return{done:!0}}}}}};t.exports=function(t){var e=n("Set");try{(new e)[t](o(0));try{return(new e)[t](o(-1)),!1}catch(i){return!0}}catch(r){return!1}}},25170:function(t,e,i){var n=i(46706),o=i(94402);t.exports=n(o.proto,"size","get")||function(t){return t.size}},83650:function(t,e,i){var n=i(97080),o=i(94402),r=i(89286),s=i(83789),a=i(40507),c=o.add,l=o.has,u=o.remove;t.exports=function(t){var e=n(this),i=s(t).getIterator(),o=r(e);return a(i,(function(t){l(e,t)?u(o,t):c(o,t)})),o}},44204:function(t,e,i){var n=i(97080),o=i(94402).add,r=i(89286),s=i(83789),a=i(40507);t.exports=function(t){var e=n(this),i=s(t).getIterator(),c=r(e);return a(i,(function(t){o(c,t)})),c}},17642:function(t,e,i){var n=i(46518),o=i(83440),r=i(84916);n({target:"Set",proto:!0,real:!0,forced:!r("difference")},{difference:o})},58004:function(t,e,i){var n=i(46518),o=i(79039),r=i(68750),s=i(84916),a=!s("intersection")||o((function(){return"3,2"!==String(Array.from(new Set([1,2,3]).intersection(new Set([3,2]))))}));n({target:"Set",proto:!0,real:!0,forced:a},{intersection:r})},33853:function(t,e,i){var n=i(46518),o=i(64449),r=i(84916);n({target:"Set",proto:!0,real:!0,forced:!r("isDisjointFrom")},{isDisjointFrom:o})},45876:function(t,e,i){var n=i(46518),o=i(53838),r=i(84916);n({target:"Set",proto:!0,real:!0,forced:!r("isSubsetOf")},{isSubsetOf:o})},32475:function(t,e,i){var n=i(46518),o=i(28527),r=i(84916);n({target:"Set",proto:!0,real:!0,forced:!r("isSupersetOf")},{isSupersetOf:o})},15024:function(t,e,i){var n=i(46518),o=i(83650),r=i(84916);n({target:"Set",proto:!0,real:!0,forced:!r("symmetricDifference")},{symmetricDifference:o})},31698:function(t,e,i){var n=i(46518),o=i(44204),r=i(84916);n({target:"Set",proto:!0,real:!0,forced:!r("union")},{union:o})},43375:function(t,e,i){i(17642)},39225:function(t,e,i){i(58004)},13972:function(t,e,i){i(33853)},99209:function(t,e,i){i(45876)},25714:function(t,e,i){i(32475)},17561:function(t,e,i){i(15024)},66197:function(t,e,i){i(31698)}}]);
//# sourceMappingURL=634.a06e6214.js.map
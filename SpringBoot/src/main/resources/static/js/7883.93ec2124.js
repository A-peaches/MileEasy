"use strict";(self["webpackChunkmile"]=self["webpackChunkmile"]||[]).push([[7883],{7883:function(e,t,o){o.r(t),o.d(t,{default:function(){return O}});var i=o(641),n=o(33),c=o(3751);const s=e=>((0,i.Qi)("data-v-25b15db2"),e=e(),(0,i.jt)(),e),a={class:"app-container"},l={key:0,class:"content cards"},r={class:"header"},d={class:"button-container"},u=s((()=>(0,i.Lk)("span",{class:"arrow"},"❮",-1))),h={key:0},k={class:"actions"},f={class:"content"},m={key:0,class:"new-label"},b={class:"title"},_={class:"meta"},g={class:"author"},w={class:"date"},p={class:"main-content"},L={class:"body"},y={class:"file cards"},v={style:{display:"flex","align-items":"center"}},C=s((()=>(0,i.Lk)("h2",{style:{"margin-right":"10px"}},"첨부파일",-1))),E={key:0,style:{color:"#4b4a4a","font-family":"'KB_S5',sans-serif","margin-left":"2%","white-space":"nowrap"}},N={key:0,style:{"margin-top":"10px"}},I={class:"icon-container"},D=s((()=>(0,i.Lk)("div",{class:"views-icon"},[(0,i.Lk)("i",{class:"bi bi-eye"})],-1))),B={class:"views-text"},x={key:1},A=s((()=>(0,i.Lk)("p",null,"Loading...",-1))),T=[A];function X(e,t,o,s,A,X){return(0,i.uX)(),(0,i.CE)("div",a,[X.notice?((0,i.uX)(),(0,i.CE)("div",l,[(0,i.Lk)("div",r,[(0,i.Lk)("div",d,[(0,i.Lk)("button",{class:"back-button",onClick:t[0]||(t[0]=(...e)=>X.goBack&&X.goBack(...e))},[u,(0,i.eW)(" 이전 ")])]),X.isLoggedIn&&X.isChecked&&(X.loginInfo.user_is_admin||X.loginInfo.user_is_manager)&&X.loginInfo.user_no===X.notice.user_no?((0,i.uX)(),(0,i.CE)("div",h,[(0,i.Lk)("div",k,[(0,i.Lk)("button",{class:"edit-button",onClick:t[1]||(t[1]=(...e)=>X.goToModifyView&&X.goToModifyView(...e))},"수정"),(0,i.Lk)("button",{class:"delete-button",onClick:t[2]||(t[2]=(...e)=>X.deleteNotice&&X.deleteNotice(...e))},"삭제")])])):(0,i.Q3)("",!0)]),(0,i.Lk)("div",f,[X.isNew(X.notice.notice_board_date)?((0,i.uX)(),(0,i.CE)("span",m,"NEW")):(0,i.Q3)("",!0),(0,i.Lk)("h1",b,(0,n.v_)(X.notice.notice_board_title),1),(0,i.Lk)("div",_,[(0,i.Lk)("span",g,(0,n.v_)(X.notice.user_name),1),(0,i.Lk)("span",w,(0,n.v_)(X.formatDate(X.notice.notice_board_date)),1)]),(0,i.Lk)("div",p,[(0,i.Lk)("div",L,[(0,i.Lk)("pre",null,[(0,i.Lk)("p",null,(0,n.v_)(X.notice.notice_board_content),1)])]),(0,i.Lk)("div",y,[(0,i.Lk)("div",v,[C,X.notice.notice_board_file?(0,i.Q3)("",!0):((0,i.uX)(),(0,i.CE)("span",E,"파일이 존재하지 않습니다."))]),X.notice.notice_board_file?((0,i.uX)(),(0,i.CE)("div",N,[(0,i.Lk)("a",{onClick:t[3]||(t[3]=(0,c.D$)(((...e)=>X.downloadFile&&X.downloadFile(...e)),["prevent"])),href:"#",class:"file-download-link"},(0,n.v_)(X.getDisplayFileName(X.notice.notice_board_file)),1)])):(0,i.Q3)("",!0)])]),(0,i.Lk)("div",I,[D,(0,i.Lk)("div",B,(0,n.v_)(X.notice.notice_board_hit),1)])])])):((0,i.uX)(),(0,i.CE)("div",x,T))])}o(4114),o(4603),o(7566),o(8721);var $=o(7682),M=o(6278),V=o(8465),F=o.n(V),K={props:["id"],methods:{...(0,M.i0)("notice",["fetchNoticeDetail","incrementViews"]),async deleteNotice(){F().fire({title:"경고",text:"정말로 삭제하시겠습니까?",icon:"warning",showCancelButton:!0,confirmButtonText:"확인",cancelButtonText:"취소",reverseButtons:!1}).then((async e=>{if(e.isConfirmed)try{await $.A.delete(`/notice/delete/${this.notice.notice_board_no}`),F().fire("게시글 삭제 완료","게시글이 삭제 되었습니다.","success").then((()=>{this.$router.push("/noticeListView")}))}catch(t){console.error("게시글 삭제 중 오류가 발생했습니다.",t),F().fire("게시글 삭제 중 오류가 발생했습니다.","","error")}}))},showAlert(e,t){this.$swal({title:e,icon:t,confirmButtonText:"확인",confirmButtonColor:"#4b4a4a",allowOutsideClick:!1,allowEscapeKey:!1,allowEnterKey:!1,stopKeydownPropagation:!1,scrollbarPadding:!1,backdrop:!0,didOpen:()=>{document.body.classList.add("no-scroll"),document.documentElement.style.overflow="hidden"},willClose:()=>{document.body.classList.remove("no-scroll"),document.documentElement.style.overflow=""}})},getDisplayFileName(e){const t=37;return!e||e.length<=t?e:"_"===e.charAt(t-1)?e.substring(t):e},goBack(){this.$router.go(-1)},goToModifyView(){console.log("id ;",this.notice.notice_board_no),this.$router.push({name:"noticeModifyAdminView",params:{id:this.notice.notice_board_no}})},isNew(e){const t=new Date,o=new Date(e),i=Math.abs(t-o),n=Math.ceil(i/864e5);return n<=7},formatDate(e){const t={year:"numeric",month:"2-digit",day:"2-digit"};return new Date(e).toLocaleDateString("ko-KR",t)},async downloadFile(){try{console.log("글쓰기 상세보기 fileName :",this.notice.notice_board_file);const e=encodeURIComponent(this.notice.notice_board_file),t=await(0,$.A)({url:`/notice/download/${e}`,method:"GET",responseType:"blob"}),o=window.URL.createObjectURL(new Blob([t.data])),i=document.createElement("a");i.href=o,i.setAttribute("download",this.notice.notice_board_file),document.body.appendChild(i),i.click(),document.body.removeChild(i)}catch(e){console.error("파일 다운로드 중 오류 발생:",e),this.showAlert("파일 다운로드 중 오류가 발생했습니다.","error")}}},computed:{...(0,M.L8)("login",["getLoginInfo","getIsChecked"]),...(0,M.L8)("notice",["getNotice"]),notice(){return this.getNotice},loginInfo(){return this.getLoginInfo},isChecked(){return this.getIsChecked},isLoggedIn(){return!!this.loginInfo}},watch:{id:{immediate:!0,handler(e){this.fetchNoticeDetail(e)}}},mounted(){this.fetchNoticeDetail(this.id)}},Q=o(6262);const R=(0,Q.A)(K,[["render",X],["__scopeId","data-v-25b15db2"]]);var O=R}}]);
//# sourceMappingURL=7883.93ec2124.js.map
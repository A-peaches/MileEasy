"use strict";(self["webpackChunkmile"]=self["webpackChunkmile"]||[]).push([[5328],{5328:function(e,t,n){n.r(t),n.d(t,{default:function(){return we}});var i=n(641),r=n(33);const s=e=>((0,i.Qi)("data-v-94e5eee6"),e=e(),(0,i.jt)(),e),a={class:"cards page-back mx-auto"},l=s((()=>(0,i.Lk)("h2",{class:"bold-x-lg my-5",style:{"font-family":"KB_C3"}},"마일리지 관리",-1))),o={class:"input-base input-search d-flex justify-content-center mx-auto my-3",style:{width:"500px",background:"#ebebeb"}};function u(e,t,n,s,u,c){const d=(0,i.g2)("requestList"),f=(0,i.g2)("coding");return(0,i.uX)(),(0,i.CE)("div",a,[l,(0,i.Lk)("div",null,[(0,i.Lk)("div",o,[(0,i.Lk)("button",{class:(0,r.C4)(["tab-container lg2 fw-bold",{active:u.isModifyActive}]),onClick:t[0]||(t[0]=(...e)=>c.showModify&&c.showModify(...e))}," 접수내역 ",2),(0,i.Lk)("button",{class:(0,r.C4)(["tab-container lg2 fw-bold",{active:!u.isModifyActive}]),onClick:t[1]||(t[1]=(...e)=>c.showCoding&&c.showCoding(...e))}," 과거내역 ",2)]),u.isModifyActive?((0,i.uX)(),(0,i.Wv)(d,{key:0})):(0,i.Q3)("",!0),u.isModifyActive?(0,i.Q3)("",!0):((0,i.uX)(),(0,i.Wv)(f,{key:1}))])])}var c=n(6278),d=n(7682),f=n(8465),g=n.n(f),p=n(3751);const h=e=>((0,i.Qi)("data-v-1ff72232"),e=e(),(0,i.jt)(),e),v={class:"mt-5 mx-auto"},L={class:"notice-count-container"},m={class:"notice-count"},y={class:"radio-container"},k=h((()=>(0,i.Lk)("span",{class:"custom-radio"},null,-1))),b=h((()=>(0,i.Lk)("span",{class:"radio-label"},"접수요청",-1))),q={class:"radio-container"},_=h((()=>(0,i.Lk)("span",{class:"custom-radio"},null,-1))),C=h((()=>(0,i.Lk)("span",{class:"radio-label"},"접수완료",-1))),w=h((()=>(0,i.Lk)("div",null,null,-1))),x={class:"search-container"},P=h((()=>(0,i.Lk)("i",{class:"bi bi-search"},null,-1))),F=[P],M={style:{"text-align":"center","justify-content":"center"}},R={class:"notice-list",style:{"text-align":"center"}},A=["onClick"],E={class:"notice-details"},I={class:"notice-new"},O={class:"notice-num"},X={class:"notice-title"},Q={class:"notice-mile"},j={class:"notice-date"},S={class:"pagination"},T=["onClick"];function D(e,t,n,s,a,l){return(0,i.uX)(),(0,i.CE)("div",null,[(0,i.Lk)("div",v,[(0,i.Lk)("div",{class:"cards-container mx-auto",style:(0,r.Tr)({height:e.computedHeight})},[(0,i.Lk)("div",L,[(0,i.Lk)("div",m,"총 "+(0,r.v_)(l.filteredRequestList.length)+" 건",1),(0,i.Lk)("label",y,[(0,i.bo)((0,i.Lk)("input",{type:"radio",name:"status",value:"접수요청","onUpdate:modelValue":t[0]||(t[0]=e=>a.selectedFilter=e),onChange:t[1]||(t[1]=(...e)=>l.applyFilters&&l.applyFilters(...e))},null,544),[[p.XL,a.selectedFilter]]),k,b]),(0,i.Lk)("label",q,[(0,i.bo)((0,i.Lk)("input",{type:"radio",name:"status",value:"접수완료","onUpdate:modelValue":t[2]||(t[2]=e=>a.selectedFilter=e),onChange:t[3]||(t[3]=(...e)=>l.applyFilters&&l.applyFilters(...e))},null,544),[[p.XL,a.selectedFilter]]),_,C])]),w,(0,i.Lk)("div",x,[(0,i.bo)((0,i.Lk)("input",{type:"text","onUpdate:modelValue":t[4]||(t[4]=e=>a.searchQuery=e),placeholder:"제목 및 내용을 검색하세요",class:"input-search"},null,512),[[p.Jo,a.searchQuery]]),(0,i.Lk)("button",{class:"search-button",onClick:t[5]||(t[5]=(...e)=>l.applyFilters&&l.applyFilters(...e))},F)]),(0,i.Lk)("div",M,[(0,i.Lk)("div",R,[((0,i.uX)(!0),(0,i.CE)(i.FK,null,(0,i.pI)(l.paginatedRequestList,((e,t)=>((0,i.uX)(),(0,i.CE)("div",{key:e.mileage_request_no},[(0,i.Lk)("div",{class:"input-base list-wrapper",onClick:t=>l.toggleDetails(e.mileage_request_no)},[(0,i.Lk)("div",E,[(0,i.Lk)("div",I,(0,r.v_)(t+1),1),(0,i.Lk)("div",O,(0,r.v_)(l.getRequestAction(e.request)),1),(0,i.Lk)("div",X,(0,r.v_)(e.request_mile_name||e.mile_name),1),(0,i.Lk)("div",Q,(0,r.v_)(l.getRequestStatus(e.request_status)),1),(0,i.Lk)("div",j,(0,r.v_)(e.mileage_request_date||"날짜 없음"),1)])],8,A)])))),128))])])],4),(0,i.Lk)("div",S,[((0,i.uX)(!0),(0,i.CE)(i.FK,null,(0,i.pI)(l.totalPages,(e=>((0,i.uX)(),(0,i.CE)("button",{key:e,onClick:t=>a.currentPage=e,class:(0,r.C4)({active:a.currentPage===e})},(0,r.v_)(e),11,T)))),128))])])])}n(4114);var K={name:"MileageRequestListAdmin",data(){return{selectedFilter:"접수요청",searchQuery:"",currentPage:1,noticesPerPage:10,list:null}},computed:{...(0,c.L8)("login",["getLoginInfo"]),...(0,c.L8)("request",["getRequestList"]),totalPages(){return Math.ceil(this.filteredRequestList.length/this.noticesPerPage)},loginInfo(){return this.getLoginInfo},filteredRequestList(){if(!this.getRequestList)return[];let e=[...this.getRequestList];return console.log("여기",e),e=e.filter((e=>"접수요청"===this.selectedFilter&&0===e.request_status||"접수완료"===this.selectedFilter&&1===e.request_status)),this.searchQuery&&(e=e.filter((e=>e.request_mile_name&&e.request_mile_name.toLowerCase().includes(this.searchQuery.toLowerCase())||e.mile_name&&e.mile_name.toLowerCase().includes(this.searchQuery.toLowerCase())))),console.log(e),e},paginatedRequestList(){const e=(this.currentPage-1)*this.noticesPerPage,t=e+this.noticesPerPage;return this.filteredRequestList.slice(e,t)}},methods:{...(0,c.i0)("mileage",["getMileage"]),...(0,c.i0)("request",["requestList"]),applyFilters(){this.currentPage=1},getRequestAction(e){switch(e){case 1:return"추가";case 2:return"수정";case 3:return"삭제";default:return""}},getRequestStatus(e){switch(e){case 0:return"접수요청";case 1:return"접수완료";case 2:return"승인완료";case 3:return"승인거절";default:return""}},toggleDetails(e){this.$router.push(`/mileageRequesDetail/${e}`)}},mounted(){this.requestList()}},V=n(6262);const B=(0,V.A)(K,[["render",D],["__scopeId","data-v-1ff72232"]]);var U=B;const N=e=>((0,i.Qi)("data-v-44392b22"),e=e(),(0,i.jt)(),e),z={class:"mt-5 mx-auto"},H={class:"notice-count-container"},J={class:"notice-count"},W={class:"radio-container"},$=N((()=>(0,i.Lk)("span",{class:"custom-radio"},null,-1))),G=N((()=>(0,i.Lk)("span",{class:"radio-label"},"승인완료",-1))),Y={class:"radio-container"},Z=N((()=>(0,i.Lk)("span",{class:"custom-radio"},null,-1))),ee=N((()=>(0,i.Lk)("span",{class:"radio-label"},"승인거절",-1))),te={class:"search-container"},ne=N((()=>(0,i.Lk)("i",{class:"bi bi-search"},null,-1))),ie=[ne],re={style:{"text-align":"center","justify-content":"center"}},se={class:"notice-list",style:{"text-align":"center"}},ae={key:0},le=N((()=>(0,i.Lk)("p",null,"해당 내용이 없습니다.",-1))),oe=[le],ue={key:1},ce=["onClick"],de={class:"notice-details"},fe={class:"notice-new"},ge={class:"notice-num"},pe={class:"notice-title"},he={class:"notice-mile"},ve={class:"notice-date"},Le={class:"pagination"},me=["onClick"];function ye(e,t,n,s,a,l){return(0,i.uX)(),(0,i.CE)("div",null,[(0,i.Lk)("div",z,[(0,i.Lk)("div",{class:"cards-container mx-auto",style:(0,r.Tr)({height:e.computedHeight})},[(0,i.Lk)("div",H,[(0,i.Lk)("div",J,"총 "+(0,r.v_)(l.filteredRequestList.length)+" 건",1),(0,i.Lk)("label",W,[(0,i.bo)((0,i.Lk)("input",{type:"radio",name:"status",value:"승인완료","onUpdate:modelValue":t[0]||(t[0]=e=>a.selectedFilter=e),onChange:t[1]||(t[1]=(...e)=>l.applyFilters&&l.applyFilters(...e))},null,544),[[p.XL,a.selectedFilter]]),$,G]),(0,i.Lk)("label",Y,[(0,i.bo)((0,i.Lk)("input",{type:"radio",name:"status",value:"승인거절","onUpdate:modelValue":t[2]||(t[2]=e=>a.selectedFilter=e),onChange:t[3]||(t[3]=(...e)=>l.applyFilters&&l.applyFilters(...e))},null,544),[[p.XL,a.selectedFilter]]),Z,ee])]),(0,i.Lk)("div",te,[(0,i.bo)((0,i.Lk)("input",{type:"text","onUpdate:modelValue":t[4]||(t[4]=e=>a.searchQuery=e),placeholder:"제목 및 내용을 검색하세요",class:"input-search"},null,512),[[p.Jo,a.searchQuery]]),(0,i.Lk)("button",{class:"search-button",onClick:t[5]||(t[5]=(...e)=>l.applyFilters&&l.applyFilters(...e))},ie)]),(0,i.Lk)("div",re,[(0,i.Lk)("div",se,[0===l.filteredRequestList.length?((0,i.uX)(),(0,i.CE)("div",ae,oe)):((0,i.uX)(),(0,i.CE)("div",ue,[((0,i.uX)(!0),(0,i.CE)(i.FK,null,(0,i.pI)(l.paginatedRequestList,((t,n)=>((0,i.uX)(),(0,i.CE)("div",{key:t.mileage_request_no},[(0,i.Lk)("div",{class:"input-base list-wrapper",onClick:t=>e.toggleDetails(n)},[(0,i.Lk)("div",de,[(0,i.Lk)("div",fe,(0,r.v_)(n+1),1),(0,i.Lk)("div",ge,(0,r.v_)(l.getRequestAction(t.request)),1),(0,i.Lk)("div",pe,(0,r.v_)(t.request_mile_name||t.mile_name),1),(0,i.Lk)("div",he,(0,r.v_)(l.getRequestStatus(t.request_status)),1),(0,i.Lk)("div",ve,(0,r.v_)(t.mileage_request_date||"날짜 없음"),1)])],8,ce)])))),128))]))])])],4),(0,i.Lk)("div",Le,[((0,i.uX)(!0),(0,i.CE)(i.FK,null,(0,i.pI)(l.totalPages,(e=>((0,i.uX)(),(0,i.CE)("button",{key:e,onClick:t=>a.currentPage=e,class:(0,r.C4)({active:a.currentPage===e})},(0,r.v_)(e),11,me)))),128))])])])}var ke={name:"MileageRequestListAdmin",data(){return{selectedFilter:"승인완료",searchQuery:"",currentPage:1,noticesPerPage:10,list:null}},computed:{...(0,c.L8)("login",["getLoginInfo"]),...(0,c.L8)("request",["getRequestList"]),totalPages(){return Math.ceil(this.filteredRequestList.length/this.noticesPerPage)},loginInfo(){return this.getLoginInfo},filteredRequestList(){if(!this.getRequestList)return[];let e=[...this.getRequestList];return e=e.filter((e=>"승인완료"===this.selectedFilter&&2===e.request_status||"승인거절"===this.selectedFilter&&3===e.request_status)),this.searchQuery&&(e=e.filter((e=>e.request_mile_name&&e.request_mile_name.toLowerCase().includes(this.searchQuery.toLowerCase())||e.mile_name&&e.mile_name.toLowerCase().includes(this.searchQuery.toLowerCase())))),e},paginatedRequestList(){const e=(this.currentPage-1)*this.noticesPerPage,t=e+this.noticesPerPage;return this.filteredRequestList.slice(e,t)}},methods:{...(0,c.i0)("mileage",["getMileage"]),...(0,c.i0)("request",["requestList"]),applyFilters(){this.currentPage=1},getRequestAction(e){switch(e){case 1:return"추가";case 2:return"수정";case 3:return"삭제";default:return""}},getRequestStatus(e){switch(e){case 0:return"접수요청";case 1:return"접수완료";case 2:return"승인완료";case 3:return"승인거절";default:return""}}},mounted(){this.requestList()}};const be=(0,V.A)(ke,[["render",ye],["__scopeId","data-v-44392b22"]]);var qe=be,_e={name:"KingMain",components:{requestList:U,coding:qe},data(){return{isModifyActive:!0}},computed:{...(0,c.L8)("login",["getLoginInfo"]),...(0,c.L8)("mileage",["getArrayMileage"]),...(0,c.L8)(""),loginInfo(){return this.getLoginInfo},mileageLabel(){return this.getArrayMileage}},methods:{...(0,c.i0)("mileage",["getMileage"]),async deleteMile(e){const{value:t}=await g().fire({title:"삭제 확인",text:"정말로 이 마일리지를 삭제하시겠습니까?",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"삭제",cancelButtonText:"취소"});if(t)try{const t=await d.A.post("/admin/deleteMile",null,{params:{mile_no:e},headers:{"Content-Type":"application/x-www-form-urlencoded"}});this.getMileage(),g().fire("삭제 완료!","마일리지가 삭제되었습니다.","success"),console.log("삭제",t.data)}catch(n){g().fire("삭제 오류!","마일리지 삭제 중 오류가 발생했습니다.","error"),console.error("삭제 오류:",n)}else console.log("삭제 취소됨")},showModify(){this.isModifyActive=!0},showCoding(){this.isModifyActive=!1}},mounted(){this.getMileage()}};const Ce=(0,V.A)(_e,[["render",u],["__scopeId","data-v-94e5eee6"]]);var we=Ce},9617:function(e,t,n){var i=n(5397),r=n(5610),s=n(6198),a=function(e){return function(t,n,a){var l=i(t),o=s(l);if(0===o)return!e&&-1;var u,c=r(a,o);if(e&&n!==n){while(o>c)if(u=l[c++],u!==u)return!0}else for(;o>c;c++)if((e||c in l)&&l[c]===n)return e||c||0;return!e&&-1}};e.exports={includes:a(!0),indexOf:a(!1)}},4527:function(e,t,n){var i=n(3724),r=n(4376),s=TypeError,a=Object.getOwnPropertyDescriptor,l=i&&!function(){if(void 0!==this)return!0;try{Object.defineProperty([],"length",{writable:!1}).length=1}catch(e){return e instanceof TypeError}}();e.exports=l?function(e,t){if(r(e)&&!a(e,"length").writable)throw new s("Cannot set read only .length");return e.length=t}:function(e,t){return e.length=t}},7740:function(e,t,n){var i=n(9297),r=n(5031),s=n(7347),a=n(4913);e.exports=function(e,t,n){for(var l=r(t),o=a.f,u=s.f,c=0;c<l.length;c++){var d=l[c];i(e,d)||n&&i(n,d)||o(e,d,u(t,d))}}},6837:function(e){var t=TypeError,n=9007199254740991;e.exports=function(e){if(e>n)throw t("Maximum allowed index exceeded");return e}},8727:function(e){e.exports=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"]},6518:function(e,t,n){var i=n(4475),r=n(7347).f,s=n(6699),a=n(6840),l=n(9433),o=n(7740),u=n(2796);e.exports=function(e,t){var n,c,d,f,g,p,h=e.target,v=e.global,L=e.stat;if(c=v?i:L?i[h]||l(h,{}):i[h]&&i[h].prototype,c)for(d in t){if(g=t[d],e.dontCallGetSet?(p=r(c,d),f=p&&p.value):f=c[d],n=u(v?d:h+(L?".":"#")+d,e.forced),!n&&void 0!==f){if(typeof g==typeof f)continue;o(g,f)}(e.sham||f&&f.sham)&&s(g,"sham",!0),a(c,d,g,e)}}},7055:function(e,t,n){var i=n(9504),r=n(9039),s=n(4576),a=Object,l=i("".split);e.exports=r((function(){return!a("z").propertyIsEnumerable(0)}))?function(e){return"String"===s(e)?l(e,""):a(e)}:a},4376:function(e,t,n){var i=n(4576);e.exports=Array.isArray||function(e){return"Array"===i(e)}},2796:function(e,t,n){var i=n(9039),r=n(4901),s=/#|\.prototype\./,a=function(e,t){var n=o[l(e)];return n===c||n!==u&&(r(t)?i(t):!!t)},l=a.normalize=function(e){return String(e).replace(s,".").toLowerCase()},o=a.data={},u=a.NATIVE="N",c=a.POLYFILL="P";e.exports=a},6198:function(e,t,n){var i=n(8014);e.exports=function(e){return i(e.length)}},741:function(e){var t=Math.ceil,n=Math.floor;e.exports=Math.trunc||function(e){var i=+e;return(i>0?n:t)(i)}},7347:function(e,t,n){var i=n(3724),r=n(9565),s=n(8773),a=n(6980),l=n(5397),o=n(6969),u=n(9297),c=n(5917),d=Object.getOwnPropertyDescriptor;t.f=i?d:function(e,t){if(e=l(e),t=o(t),c)try{return d(e,t)}catch(n){}if(u(e,t))return a(!r(s.f,e,t),e[t])}},8480:function(e,t,n){var i=n(1828),r=n(8727),s=r.concat("length","prototype");t.f=Object.getOwnPropertyNames||function(e){return i(e,s)}},3717:function(e,t){t.f=Object.getOwnPropertySymbols},1828:function(e,t,n){var i=n(9504),r=n(9297),s=n(5397),a=n(9617).indexOf,l=n(421),o=i([].push);e.exports=function(e,t){var n,i=s(e),u=0,c=[];for(n in i)!r(l,n)&&r(i,n)&&o(c,n);while(t.length>u)r(i,n=t[u++])&&(~a(c,n)||o(c,n));return c}},8773:function(e,t){var n={}.propertyIsEnumerable,i=Object.getOwnPropertyDescriptor,r=i&&!n.call({1:2},1);t.f=r?function(e){var t=i(this,e);return!!t&&t.enumerable}:n},5031:function(e,t,n){var i=n(7751),r=n(9504),s=n(8480),a=n(3717),l=n(8551),o=r([].concat);e.exports=i("Reflect","ownKeys")||function(e){var t=s.f(l(e)),n=a.f;return n?o(t,n(e)):t}},5610:function(e,t,n){var i=n(1291),r=Math.max,s=Math.min;e.exports=function(e,t){var n=i(e);return n<0?r(n+t,0):s(n,t)}},5397:function(e,t,n){var i=n(7055),r=n(7750);e.exports=function(e){return i(r(e))}},1291:function(e,t,n){var i=n(741);e.exports=function(e){var t=+e;return t!==t||0===t?0:i(t)}},8014:function(e,t,n){var i=n(1291),r=Math.min;e.exports=function(e){var t=i(e);return t>0?r(t,9007199254740991):0}},4114:function(e,t,n){var i=n(6518),r=n(8981),s=n(6198),a=n(4527),l=n(6837),o=n(9039),u=o((function(){return 4294967297!==[].push.call({length:4294967296},1)})),c=function(){try{Object.defineProperty([],"length",{writable:!1}).push()}catch(e){return e instanceof TypeError}},d=u||!c();i({target:"Array",proto:!0,arity:1,forced:d},{push:function(e){var t=r(this),n=s(t),i=arguments.length;l(n+i);for(var o=0;o<i;o++)t[n]=arguments[o],n++;return a(t,n),n}})}}]);
//# sourceMappingURL=5328.524cc7b0.js.map
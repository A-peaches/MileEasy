"use strict";(self["webpackChunkmile"]=self["webpackChunkmile"]||[]).push([[1015],{11015:function(e,l,t){t.r(l),t.d(l,{default:function(){return Ge}});var a=t(20641),i=t(90033),n=t(53751);const o=e=>((0,a.Qi)("data-v-5862bd55"),e=e(),(0,a.jt)(),e),s={class:"back-container"},r=o((()=>(0,a.Lk)("span",{class:"arrow"},"❮",-1))),d=o((()=>(0,a.Lk)("h2",{class:"bold-x-lg my-5",style:{"font-family":"KB_C3"}},"마일리지 요청",-1))),u={class:"button_user"},c={key:0,style:{"text-align":"left","margin-left":"25px",display:"flex"}},m={class:"checkbox-container"},p=o((()=>(0,a.Lk)("span",{class:"custom-checkbox"},null,-1))),g=o((()=>(0,a.Lk)("span",{class:"checkbox-label"},"요청",-1))),k={class:"checkbox-container"},v=o((()=>(0,a.Lk)("span",{class:"custom-checkbox"},null,-1))),h=o((()=>(0,a.Lk)("span",{class:"checkbox-label"},"수정",-1))),L={class:"checkbox-container"},f=o((()=>(0,a.Lk)("span",{class:"custom-checkbox"},null,-1))),b=o((()=>(0,a.Lk)("span",{class:"checkbox-label"},"삭제",-1))),y={key:1,class:"p-4"},_={key:2,class:"p-4"};function x(e,l,t,o,x,w){const R=(0,a.g2)("WriteAdd"),C=(0,a.g2)("WriteModify"),M=(0,a.g2)("WriteDelete");return(0,a.uX)(),(0,a.CE)("div",{class:"cards page-back mx-auto",style:(0,i.Tr)({height:e.computedHeight})},[(0,a.Lk)("div",s,[(0,a.Lk)("button",{class:"back-button",onClick:l[0]||(l[0]=(...e)=>w.goBack&&w.goBack(...e))},[r,(0,a.eW)(" 이전 ")])]),d,(0,a.Lk)("div",u,[w.hasMileageNumber?((0,a.uX)(),(0,a.CE)("div",c,[(0,a.Lk)("label",m,[(0,a.bo)((0,a.Lk)("input",{type:"radio",name:"action",value:"add","onUpdate:modelValue":l[1]||(l[1]=e=>x.selectedAction=e)},null,512),[[n.XL,x.selectedAction]]),p,g]),(0,a.Lk)("label",k,[(0,a.bo)((0,a.Lk)("input",{type:"radio",name:"action",value:"modify","onUpdate:modelValue":l[2]||(l[2]=e=>x.selectedAction=e)},null,512),[[n.XL,x.selectedAction]]),v,h]),(0,a.Lk)("label",L,[(0,a.bo)((0,a.Lk)("input",{type:"radio",name:"action",value:"delete","onUpdate:modelValue":l[3]||(l[3]=e=>x.selectedAction=e)},null,512),[[n.XL,x.selectedAction]]),f,b])])):(0,a.Q3)("",!0),w.hasMileageNumber?(0,a.Q3)("",!0):((0,a.uX)(),(0,a.CE)("div",y,[(0,a.bF)(R,{style:{width:"70%","margin-left":"3%"}})])),w.hasMileageNumber?((0,a.uX)(),(0,a.CE)("div",_,["add"===x.selectedAction?((0,a.uX)(),(0,a.Wv)(R,{key:0,style:{width:"70%","margin-left":"3%"}})):(0,a.Q3)("",!0),"modify"===x.selectedAction?((0,a.uX)(),(0,a.Wv)(C,{key:1,style:{width:"70%","margin-left":"3%"}})):(0,a.Q3)("",!0),"delete"===x.selectedAction?((0,a.uX)(),(0,a.Wv)(M,{key:2,style:{width:"70%","margin-left":"3%"}})):(0,a.Q3)("",!0)])):(0,a.Q3)("",!0)])],4)}var w=t(66278);const R=e=>((0,a.Qi)("data-v-22d55ac8"),e=e(),(0,a.jt)(),e),C=R((()=>(0,a.Lk)("h3",{class:"lg p-3",style:{"text-align":"left","font-family":"KB_C2"}}," 마일리지 요청 ",-1))),M={class:"p-2"},N={class:"yn",style:{"text-align":"left"}},E={key:0,class:"error-text"},W={class:"form-check form-check-inline mt-1"},A=R((()=>(0,a.Lk)("label",{class:"form-check-label",for:"inlineRadio1"},"공통",-1))),K={class:"form-check form-check-inline"},U=R((()=>(0,a.Lk)("label",{class:"form-check-label",for:"inlineRadio2"},"영업점",-1))),X={class:"mt-3",style:{"text-align":"left"}},V={key:0,class:"error-text"},q=R((()=>(0,a.Lk)("br",null,null,-1))),I={class:"mt-3",style:{"text-align":"left"}},S={key:0,class:"error-text"},Q={class:"mt-3",style:{"text-align":"left"}},P={key:0,class:"error-text"},O={class:"table table-bordered input-base",style:{"border-radius":"10px","background-color":"white"}},F=R((()=>(0,a.Lk)("tr",null,[(0,a.Lk)("td",null,"번호"),(0,a.Lk)("td",null,"사번"),(0,a.Lk)("td",null,"이름"),(0,a.Lk)("td",null,"부서"),(0,a.Lk)("td",null,"직급"),(0,a.Lk)("td",null,"삭제")],-1))),B=["onClick"],J=["onClick"],j=R((()=>(0,a.Lk)("div",{class:"mt-3",style:{"text-align":"left"}},"기타사항",-1))),$=R((()=>(0,a.Lk)("div",{class:"mt-3",style:{"text-align":"left",color:"gray"}}," * 마일리지 요청 페이지는 마일리지 추가 및 가중치 변경 등 마일리지에 관한 내용을 요청하는 페이지입니다. ",-1))),T={style:{"text-align":"right"}};function D(e,l,t,o,s,r){const d=(0,a.g2)("SearchModal");return(0,a.uX)(),(0,a.CE)(a.FK,null,[C,(0,a.Lk)("div",M,[(0,a.Lk)("div",N,[(0,a.eW)(" 마일리지 공통여부 "),o.isCommonMileageValid?(0,a.Q3)("",!0):((0,a.uX)(),(0,a.CE)("span",E," 필수 선택 항목입니다. "))]),(0,a.Lk)("div",W,[(0,a.bo)((0,a.Lk)("input",{class:"form-check-input",type:"radio",name:"inlineRadioOptions",id:"inlineRadio1",value:"0","onUpdate:modelValue":l[0]||(l[0]=e=>o.commonMileage=e)},null,512),[[n.XL,o.commonMileage]]),A]),(0,a.Lk)("div",K,[(0,a.bo)((0,a.Lk)("input",{class:"form-check-input",type:"radio",name:"inlineRadioOptions",id:"inlineRadio2",value:"1","onUpdate:modelValue":l[1]||(l[1]=e=>o.commonMileage=e)},null,512),[[n.XL,o.commonMileage]]),U]),(0,a.Lk)("div",X,[(0,a.eW)(" 마일리지 이름 "),o.isMileageNameValid?(0,a.Q3)("",!0):((0,a.uX)(),(0,a.CE)("span",V," 필수 입력 항목입니다. "))]),(0,a.bo)((0,a.Lk)("input",{"onUpdate:modelValue":l[2]||(l[2]=e=>o.mileageName=e),type:"text",class:"input-base input-white",style:{"text-align":"left"},placeholder:"추가 마일리지 이름을 입력하세요."},null,512),[[n.Jo,o.mileageName]]),q,(0,a.Lk)("div",I,[(0,a.eW)(" 마일리지 연간 최고 한도 "),o.isAnnualLimitValid?(0,a.Q3)("",!0):((0,a.uX)(),(0,a.CE)("span",S," 필수 입력 항목입니다. "))]),(0,a.bo)((0,a.Lk)("input",{"onUpdate:modelValue":l[3]||(l[3]=e=>o.annualLimit=e),type:"text",class:"input-base input-white",style:{"text-align":"left"},placeholder:"마일리지 연간 최고 한도를 입력하세요."},null,512),[[n.Jo,o.annualLimit]]),(0,a.Lk)("div",Q,[(0,a.eW)(" 담당자 설정 "),(0,a.Lk)("i",{class:"bi bi-plus-lg",onClick:l[4]||(l[4]=(...e)=>o.addRow&&o.addRow(...e))}),o.isRowsValid?(0,a.Q3)("",!0):((0,a.uX)(),(0,a.CE)("span",P," 최소 한 명의 담당자를 설정해야 합니다. "))]),(0,a.Lk)("table",O,[F,((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(o.rows,((e,l)=>((0,a.uX)(),(0,a.CE)("tr",{key:l,onClick:l=>o.openModal(e),style:{cursor:"pointer"}},[(0,a.Lk)("td",null,(0,i.v_)(l+1),1),(0,a.Lk)("td",null,(0,i.v_)(e.id),1),(0,a.Lk)("td",null,(0,i.v_)(e.name),1),(0,a.Lk)("td",null,(0,i.v_)(e.department),1),(0,a.Lk)("td",null,(0,i.v_)(e.position),1),(0,a.Lk)("td",null,[o.rows.length>1?((0,a.uX)(),(0,a.CE)("i",{key:0,class:"bi bi-dash-lg remove-icon",onClick:(0,n.D$)((e=>o.removeRow(l)),["stop"])},null,8,J)):(0,a.Q3)("",!0)])],8,B)))),128))]),j,(0,a.bo)((0,a.Lk)("textarea",{"onUpdate:modelValue":l[5]||(l[5]=e=>o.additionalNotes=e),class:"input-base input-white",style:{"text-align":"left"},placeholder:"기타 요청사항을 입력하세요."},null,512),[[n.Jo,o.additionalNotes]]),$,o.isModalOpen?((0,a.uX)(),(0,a.Wv)(d,{key:0,isOpen:o.isModalOpen,mileName:o.selectedRow?.name,mileNo:o.selectedRow?.id,onUserSelected:o.updateRow,onClose:o.closeModal},null,8,["isOpen","mileName","mileNo","onUserSelected","onClose"])):(0,a.Q3)("",!0)]),(0,a.Lk)("div",T,[(0,a.Lk)("button",{class:"btn-yellow mt-5 KB_S4",onClick:l[6]||(l[6]=(...e)=>o.submitForm&&o.submitForm(...e))},"요청하기")])],64)}t(44114);var z=t(50953),H=t(78465),G=t.n(H);const Y=e=>((0,a.Qi)("data-v-9222f982"),e=e(),(0,a.jt)(),e),Z={key:0,class:"modals"},ee={class:"modals-content",style:{width:"700px",height:"auto"}},le=Y((()=>(0,a.Lk)("span",{class:"KB_S4",style:{"font-size":"19pt"}},"직원 검색",-1))),te=Y((()=>(0,a.Lk)("br",null,null,-1))),ae=Y((()=>(0,a.Lk)("br",null,null,-1))),ie={style:{"text-align":"left"}},ne=Y((()=>(0,a.Lk)("span",{style:{"text-align":"left","margin-left":"15px","font-size":"13pt"}}," 담당자 설정 ",-1))),oe={style:{"text-align":"left","margin-left":"5px"}},se={class:"user-list"},re=["onClick"];function de(e,l,t,o,s,r){return t.isOpen?((0,a.uX)(),(0,a.CE)("div",Z,[(0,a.Lk)("div",ee,[(0,a.Lk)("span",{class:"close",onClick:l[0]||(l[0]=l=>e.$emit("close"))},"×"),le,te,ae,(0,a.Lk)("div",ie,[ne,(0,a.Lk)("div",oe,[(0,a.bo)((0,a.Lk)("input",{"onUpdate:modelValue":l[1]||(l[1]=e=>s.searchTerm=e),onInput:l[2]||(l[2]=(...e)=>r.searchUser&&r.searchUser(...e)),type:"text",placeholder:"이름이나 사번을 입력하세요",style:{width:"100%",padding:"8px","margin-bottom":"10px"}},null,544),[[n.Jo,s.searchTerm]]),(0,a.Lk)("div",se,[(0,a.Lk)("ul",null,[((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(s.filteredUserList,(e=>((0,a.uX)(),(0,a.CE)("li",{key:e.user_no,onClick:l=>r.selectUser(e)},(0,i.v_)(e.user_name)+" ("+(0,i.v_)(e.user_no)+") "+(0,i.v_)(e.dp_no)+" - "+(0,i.v_)(e.position_no),9,re)))),128))])])])])])])):(0,a.Q3)("",!0)}var ue=t(37682),ce={props:{mileName:String,mileNo:Number,isOpen:Boolean},data(){return{searchTerm:"",userList:[],filteredUserList:[]}},methods:{async searchUser(){try{const e=await ue.A.post("/admin/searchUser",null,{params:{}});this.userList=e.data,this.filterUserList()}catch(e){this.userList=[],this.filteredUserList=[]}},filterUserList(){if(this.searchTerm){const e=this.searchTerm.toLowerCase();this.filteredUserList=this.userList.filter((l=>l.user_name.toLowerCase().includes(e)||l.user_no.toLowerCase().includes(e)))}else this.filteredUserList=this.userList},selectUser(e){this.$emit("user-selected",e),this.$emit("close")},newAdminList(){console.log("등록하기 버튼 클릭됨")}},watch:{searchTerm(){this.filterUserList()}}},me=t(66262);const pe=(0,me.A)(ce,[["render",de],["__scopeId","data-v-9222f982"]]);var ge=pe,ke={name:"MileageRequestWriteAdd",components:{SearchModal:ge},setup(){const e=(0,w.Pj)(),l=(0,z.KR)(1),t=(0,z.KR)(""),i=(0,z.KR)(""),n=(0,z.KR)(""),o=(0,z.KR)(""),s=(0,z.KR)([{id:"",name:"",department:"",position:""}]),r=(0,z.KR)(!1),d=(0,z.KR)(null),u=(0,z.KR)(null),c=(0,a.EW)((()=>e.getters["login/getLoginInfo"])),m=(0,a.EW)((()=>""!==t.value.trim())),p=(0,a.EW)((()=>""!==i.value.trim())),g=(0,a.EW)((()=>""!==n.value)),k=(0,a.EW)((()=>y())),v=()=>{s.value.push({id:"",name:"",department:"",position:""})},h=e=>{s.value.length>1&&s.value.splice(e,1)},L=e=>{d.value=e,u.value=s.value.indexOf(e),r.value=!0},f=()=>{r.value=!1,d.value=null,u.value=null},b=e=>{null!==u.value?s.value[u.value]={id:e.user_no||"",name:e.user_name||"",department:e.dp_no||"부서 정보 없음",position:e.position_no||"직급 정보 없음"}:console.error("선택된 행이 없습니다.")},y=()=>s.value.some((e=>""!==e.id.trim()&&""!==e.name.trim())),_=async()=>{let e=!1;if(g.value||(G().fire({icon:"error",title:"입력 오류",text:"마일리지 공통여부는 필수 선택 항목입니다.",scrollbarPadding:!1}),e=!0),m.value||(G().fire({icon:"error",title:"입력 오류",text:"마일리지 이름은 필수 입력 항목입니다.",scrollbarPadding:!1}),e=!0),p.value||(G().fire({icon:"error",title:"입력 오류",text:"마일리지 연간 최고 한도는 필수 입력 항목입니다.",scrollbarPadding:!1}),e=!0),k.value||(G().fire({icon:"error",title:"입력 오류",text:"최소 한 명의 담당자를 설정해 주세요.",scrollbarPadding:!1}),e=!0),e)return;const a={request_is_branch:"1"===n.value?"1":"0",request_mile_name:t.value,request_mil_max:i.value,request_admin:JSON.stringify(s.value.map((e=>e.id))),request_etc:o.value,request_no:l.value.toString(),mile_no:(c.value.mile_no||0).toString(),user_no:c.value.user_no};try{const e=await ue.A.post("/user/requestAdd",a,{headers:{"Content-Type":"application/json"}});G().fire({icon:"success",title:"성공",text:"요청이 성공적으로 제출되었습니다.",scrollbarPadding:!1}).then((e=>{e.isConfirmed&&(document.location="/mileageRequesList")})),console.log(e.data)}catch(r){console.error("Error submitting form:",r),G().fire({icon:"error",title:"서버 오류",text:"요청을 제출하는 동안 오류가 발생했습니다. 나중에 다시 시도해 주세요.",scrollbarPadding:!1})}};return{request:l,mileageName:t,annualLimit:i,commonMileage:n,additionalNotes:o,rows:s,isModalOpen:r,selectedRow:d,selectedRowIndex:u,addRow:v,removeRow:h,openModal:L,closeModal:f,updateRow:b,submitForm:_,isMileageNameValid:m,isAnnualLimitValid:p,isCommonMileageValid:g,isRowsValid:k,validateRows:y,loginInfo:c}}};const ve=(0,me.A)(ke,[["render",D],["__scopeId","data-v-22d55ac8"]]);var he=ve;const Le=e=>((0,a.Qi)("data-v-572b24b4"),e=e(),(0,a.jt)(),e),fe=Le((()=>(0,a.Lk)("h3",{class:"lg p-3",style:{"text-align":"left","font-family":"KB_C2"}}," 마일리지 수정 ",-1))),be={class:"p-2"},ye=Le((()=>(0,a.Lk)("div",{class:"yn",style:{"text-align":"left"}},"마일리지 이름",-1))),_e=["placeholder"],xe=Le((()=>(0,a.Lk)("br",null,null,-1))),we=Le((()=>(0,a.Lk)("div",{class:"mt-3",style:{"text-align":"left"}},"마일리지 연간 최고 한도",-1))),Re=["placeholder"],Ce={class:"mt-3",style:{"text-align":"left"}},Me={key:0,class:"error-text"},Ne={class:"table table-bordered input-base",style:{width:"100%","border-radius":"10px","background-color":"white"}},Ee=Le((()=>(0,a.Lk)("tr",null,[(0,a.Lk)("td",null,"번호"),(0,a.Lk)("td",null,"사번"),(0,a.Lk)("td",null,"이름"),(0,a.Lk)("td",null,"부서"),(0,a.Lk)("td",null,"직급"),(0,a.Lk)("td",null,"삭제")],-1))),We=["onClick"],Ae=["onClick"],Ke=Le((()=>(0,a.Lk)("div",{class:"mt-3",style:{"text-align":"left"}},"기타사항",-1))),Ue={style:{"text-align":"right"}};function Xe(e,l,t,o,s,r){const d=(0,a.g2)("SearchModal");return(0,a.uX)(),(0,a.CE)(a.FK,null,[fe,(0,a.Lk)("div",be,[ye,(0,a.bo)((0,a.Lk)("input",{"onUpdate:modelValue":l[0]||(l[0]=e=>o.mileageName=e),type:"text",class:"input-base input-white",style:{width:"100%","text-align":"left"},placeholder:o.getMileageNamePlaceholder},null,8,_e),[[n.Jo,o.mileageName]]),xe,we,(0,a.bo)((0,a.Lk)("input",{"onUpdate:modelValue":l[1]||(l[1]=e=>o.mileMax=e),type:"text",class:"input-base input-white",style:{width:"100%","text-align":"left"},placeholder:o.getMileMaxPlaceholder},null,8,Re),[[n.Jo,o.mileMax]]),(0,a.Lk)("div",Ce,[(0,a.eW)(" 담당자 설정 "),(0,a.Lk)("i",{class:"bi bi-plus-lg",onClick:l[2]||(l[2]=(...e)=>o.addRow&&o.addRow(...e))}),o.isRowsValid?(0,a.Q3)("",!0):((0,a.uX)(),(0,a.CE)("span",Me,"최소 한 명의 담당자를 설정해야 합니다."))]),(0,a.Lk)("table",Ne,[Ee,((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(o.rows,((e,l)=>((0,a.uX)(),(0,a.CE)("tr",{key:l,onClick:l=>o.openModal(e),style:{cursor:"pointer"}},[(0,a.Lk)("td",null,(0,i.v_)(l+1),1),(0,a.Lk)("td",null,(0,i.v_)(e.id),1),(0,a.Lk)("td",null,(0,i.v_)(e.name),1),(0,a.Lk)("td",null,(0,i.v_)(e.department),1),(0,a.Lk)("td",null,(0,i.v_)(e.position),1),(0,a.Lk)("td",null,[o.rows.length>1?((0,a.uX)(),(0,a.CE)("i",{key:0,class:"bi bi-dash-lg remove-icon",onClick:(0,n.D$)((e=>o.removeRow(l)),["stop"])},null,8,Ae)):(0,a.Q3)("",!0)])],8,We)))),128))]),Ke,(0,a.bo)((0,a.Lk)("textarea",{"onUpdate:modelValue":l[3]||(l[3]=e=>o.additionalNotes=e),class:"input-base input-white",style:{width:"100%",height:"200px","text-align":"left"},placeholder:"기타 요청사항을 입력하세요."},null,512),[[n.Jo,o.additionalNotes]]),o.isModalOpen?((0,a.uX)(),(0,a.Wv)(d,{key:0,isOpen:o.isModalOpen,mileName:o.selectedRow?.name,mileNo:o.selectedRow?.id,onUserSelected:o.updateRow,onClose:o.closeModal},null,8,["isOpen","mileName","mileNo","onUserSelected","onClose"])):(0,a.Q3)("",!0)]),(0,a.Lk)("div",Ue,[(0,a.Lk)("button",{class:"btn-yellow mt-5 KB_S4",onClick:l[4]||(l[4]=(...e)=>o.submitForm&&o.submitForm(...e))},"요청하기")])],64)}var Ve={name:"MileageRequestWriteAdd",components:{SearchModal:ge},setup(){const e=(0,w.Pj)(),l=(0,a.EW)((()=>e.getters["login/getLoginInfo"])),t=(0,a.EW)((()=>e.getters["mileage/getArrayMileage"])),i=(0,z.KR)(2),n=(0,z.KR)(""),o=(0,z.KR)(""),s=(0,z.KR)(""),r=(0,z.KR)(""),d=(0,z.KR)([{id:"",name:"",department:"",position:""}]),u=(0,z.KR)(!1),c=(0,z.KR)(null),m=(0,z.KR)(null),p=(0,a.EW)((()=>""!==n.value.trim())),g=(0,a.EW)((()=>""!==o.value.trim())),k=(0,a.EW)((()=>""!==s.value)),v=(0,a.EW)((()=>R())),h=(0,a.EW)((()=>{const e=l.value.mile_no,a=t.value.find((l=>l.mile_no.toString()===e.toString()));return a?`현재 마일리지 이름: ${a.mile_name}`:"추가 마일리지 이름을 입력하세요."})),L=(0,a.EW)((()=>{const e=l.value.mile_no,a=t.value.find((l=>l.mile_no.toString()===e.toString()));return a?`현재 연간 최고 한도: ${a.mile_max||"0"}`:"마일리지 연간 최고 한도를 입력하세요."})),f=()=>{d.value.push({id:"",name:"",department:"",position:""})},b=e=>{d.value.length>1&&d.value.splice(e,1)},y=e=>{c.value=e,m.value=d.value.indexOf(e),u.value=!0},_=()=>{u.value=!1,c.value=null,m.value=null},x=e=>{null!==m.value?d.value[m.value]={id:e.user_no||"",name:e.user_name||"",department:e.dp_no||"부서 정보 없음",position:e.position_no||"직급 정보 없음"}:console.error("선택된 행이 없습니다.")},R=()=>d.value.some((e=>""!==e.id.trim()&&""!==e.name.trim())),C=async()=>{let e=!1;if(v.value||(G().fire({icon:"error",title:"입력 오류",text:"최소 한 명의 담당자를 설정해 주세요.",scrollbarPadding:!1}),e=!0),e)return;const t={request_is_branch:"1"===s.value?"1":"0",request_mile_name:n.value,request_admin:JSON.stringify(d.value.map((e=>e.id))),request_etc:r.value,request_no:i.value.toString(),user_no:l.value.user_no,mile_no:(l.value.mile_no||0).toString(),request_mil_max:o.value&&!isNaN(parseInt(o.value,10)||null===o.value)?parseInt(o.value,10).toString():"0"};try{const e=await ue.A.post("/user/requestAdd",t);G().fire({icon:"success",title:"성공",text:"요청이 성공적으로 제출되었습니다.",scrollbarPadding:!1}).then((e=>{e.isConfirmed&&(document.location="/mileageRequesList")})),console.log(e.data)}catch(a){console.error("Error submitting form:",a),G().fire({icon:"error",title:"서버 오류",text:"요청을 제출하는 동안 오류가 발생했습니다. 나중에 다시 시도해 주세요.",scrollbarPadding:!1})}};(0,a.sV)((()=>{M()}));const M=async()=>{try{const e=await ue.A.post("/admin/getMileageAdminList",null,{params:{mile_no:l.value.mile_no}});e.data.length>0&&(d.value=e.data.map((e=>({id:e.user_no,name:e.user_name,department:e.dp_no||"부서 정보 없음",position:e.position_no||"직급 정보 없음"}))))}catch(e){console.error("Error fetching admin list:",e)}};return{mileageName:n,mileMax:o,commonMileage:s,additionalNotes:r,rows:d,isModalOpen:u,selectedRow:c,selectedRowIndex:m,addRow:f,removeRow:b,openModal:y,closeModal:_,updateRow:x,submitForm:C,isMileageNameValid:p,isMileMaxValid:g,isCommonMileageValid:k,isRowsValid:v,validateRows:R,loginInfo:l,mileageLabel:t,getMileageNamePlaceholder:h,getMileMaxPlaceholder:L,getMileageAdminList:M}}};const qe=(0,me.A)(Ve,[["render",Xe],["__scopeId","data-v-572b24b4"]]);var Ie=qe;const Se=e=>((0,a.Qi)("data-v-f7983d74"),e=e(),(0,a.jt)(),e),Qe=Se((()=>(0,a.Lk)("h3",{class:"lg p-3",style:{"text-align":"left","font-family":"KB_C2"}}," 마일리지 삭제 ",-1))),Pe={class:"p-2"},Oe=Se((()=>(0,a.Lk)("div",{class:"yn",style:{"text-align":"left"}},"마일리지 이름",-1))),Fe=Se((()=>(0,a.Lk)("br",null,null,-1))),Be=Se((()=>(0,a.Lk)("div",{class:"mt-3",style:{"text-align":"left"}},"기타사항",-1))),Je={style:{"text-align":"right"}};function je(e,l,t,i,o,s){return(0,a.uX)(),(0,a.CE)(a.FK,null,[Qe,(0,a.Lk)("div",Pe,[Oe,(0,a.bo)((0,a.Lk)("input",{"onUpdate:modelValue":l[0]||(l[0]=e=>i.mileageName=e),type:"text",class:"input-base input-white",style:{width:"100%","text-align":"left"},readonly:""},null,512),[[n.Jo,i.mileageName]]),Fe,Be,(0,a.bo)((0,a.Lk)("textarea",{"onUpdate:modelValue":l[1]||(l[1]=e=>i.additionalNotes=e),class:"input-base input-white",style:{width:"100%",height:"200px","text-align":"left"},placeholder:"기타 요청사항을 입력하세요."},null,512),[[n.Jo,i.additionalNotes]])]),(0,a.Lk)("div",Je,[(0,a.Lk)("button",{class:"btn-yellow mt-5 KB_S4",onClick:l[2]||(l[2]=(...e)=>i.submitForm&&i.submitForm(...e))},"요청하기")])],64)}var $e={name:"MileageRequestWriteDelete",setup(){const e=(0,w.Pj)(),l=(0,a.EW)((()=>e.getters["login/getLoginInfo"])),t=(0,a.EW)((()=>e.getters["mileage/getArrayMileage"])),i=(0,z.KR)(3),n=(0,z.KR)(""),o=(0,z.KR)(""),s=(0,a.EW)((()=>{const e=l.value.mile_no,a=t.value.find((l=>l.mile_no.toString()===e.toString()));return a?`${a.mile_name}`:"추가 마일리지 이름을 입력하세요."})),r=async()=>{const e={request_mile_name:n.value,request_mil_max:"0",request_admin:" ",request_etc:o.value,request_no:i.value.toString(),user_no:l.value.user_no,mile_no:(l.value.mile_no||0).toString()};try{const l=await ue.A.post("/user/requestAdd",e);G().fire({icon:"success",title:"성공",text:"요청이 성공적으로 제출되었습니다.",scrollbarPadding:!1}).then((e=>{e.isConfirmed&&(document.location="/mileageRequesList")})),console.log(l.data)}catch(t){console.error("Error submitting form:",t),G().fire({icon:"error",title:"서버 오류",text:"요청을 제출하는 동안 오류가 발생했습니다. 나중에 다시 시도해 주세요.",scrollbarPadding:!1})}};return(0,a.sV)((()=>{n.value=s.value})),{mileageName:n,additionalNotes:o,getMileageNamePlaceholder:s,submitForm:r}}};const Te=(0,me.A)($e,[["render",je],["__scopeId","data-v-f7983d74"]]);var De=Te,ze={name:"MileageRequestWrite",components:{WriteAdd:he,WriteModify:Ie,WriteDelete:De},data(){return{selectedAction:"add"}},computed:{...(0,w.L8)("login",["getLoginInfo","getIsChecked"]),loginInfo(){return this.getLoginInfo},hasMileageNumber(){return this.loginInfo&&this.loginInfo.mile_no}},methods:{checkLoginInfo(){this.getLoginInfo&&!0!==this.getLoginInfo.user_is_admin||(window.location.href="/noAccess")},handleCheckboxChange(){},goBack(){this.$router.go(-1)}},mounted(){},created(){this.checkLoginInfo()}};const He=(0,me.A)(ze,[["render",x],["__scopeId","data-v-5862bd55"]]);var Ge=He}}]);
//# sourceMappingURL=1015.f9bf53b4.js.map
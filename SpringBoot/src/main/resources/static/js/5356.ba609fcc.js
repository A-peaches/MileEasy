"use strict";(self["webpackChunkmile"]=self["webpackChunkmile"]||[]).push([[5356],{5356:function(e,t,n){n.r(t),n.d(t,{default:function(){return A}});var o=n(641),i=n(33),r=n(3751);const l=e=>((0,o.Qi)("data-v-0569e373"),e=e(),(0,o.jt)(),e),a=l((()=>(0,o.Lk)("h2",{class:"bold-x-lg my-5",style:{"font-family":"KB_C3"}},"마일리지 멘트",-1))),s={style:{padding:"0 5%"}},c={class:"p-4 mt-5"},m=l((()=>(0,o.Lk)("h3",{class:"lg p-3",style:{"text-align":"left","font-family":"KB_C2"}},"마일리지 항목",-1))),u={class:"p-2"},f={class:"input-gray p-3",style:{"text-align":"left"}},d={class:"lg2",style:{width:"100%","text-align":"left"}},h={class:"p-4"},p={class:"d-flex justify-content-between align-items-center"},g=l((()=>(0,o.Lk)("h3",{class:"lg p-3",style:{"text-align":"left","font-family":"KB_C2"}},"추천 멘트",-1))),v=l((()=>(0,o.Lk)("span",{class:"lg2 mr-5 brown",style:{"text-align":"right"}},[(0,o.Lk)("i",{class:"bi bi-plus-lg"}),(0,o.eW)(" 추가하기")],-1))),y=[v],w={class:"input-gray p-3",style:{width:"95%","text-align":"left"}},b=["onUpdate:modelValue"],x=["onClick"],k=l((()=>(0,o.Lk)("span",{class:"lg brown"},[(0,o.Lk)("i",{class:"bi bi-dash-lg"})],-1))),L=[k],R={style:{"padding-top":"10%"}};function _(e,t,n,l,v,k){return(0,o.uX)(),(0,o.CE)("div",{class:"cards page-back mx-auto",style:(0,i.Tr)({height:k.computedHeight})},[a,(0,o.Lk)("div",s,[(0,o.Lk)("div",c,[m,(0,o.Lk)("div",u,[(0,o.Lk)("div",f,[(0,o.Lk)("span",d,(0,i.v_)(v.mile_name)+" 마일리지",1)])])]),(0,o.Lk)("div",h,[(0,o.Lk)("div",p,[g,(0,o.Lk)("button",{onClick:t[0]||(t[0]=(...e)=>k.addComment&&k.addComment(...e))},y)]),((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(v.mileRecommands,((e,t)=>((0,o.uX)(),(0,o.CE)("div",{key:t,class:"p-2 d-flex justify-content-between align-items-center"},[(0,o.Lk)("div",w,[(0,o.bo)((0,o.Lk)("input",{"onUpdate:modelValue":t=>e.mile_mention=t,class:"lg2",placeholder:"추천 멘트를 입력하세요",style:{"text-align":"left",width:"100%"}},null,8,b),[[r.Jo,e.mile_mention]])]),(0,o.Lk)("button",{onClick:e=>k.deleteComment(t)},L,8,x)])))),128))])]),(0,o.Lk)("div",R,[(0,o.Lk)("button",{onClick:t[1]||(t[1]=(...e)=>k.addCommentAction&&k.addCommentAction(...e)),class:"btn-green",style:{width:"8vw",height:"3vw","font-size":"1.2vw","font-family":"KB_C2"}},"등록")])],4)}n(4114);var C=n(6278),I={name:"CommentMieageeAdminView",data(){return{mile_no:"",mile_name:"",baseHeight:80,increment:10,mileRecommands:[]}},computed:{...(0,C.L8)("mile",["getMileInfo"]),...(0,C.L8)("login",["getLoginInfo"]),...(0,C.L8)("mileRecommand",["getMileRecommandInfo"]),loginInfo(){return this.getLoginInfo},mileInfo(){return this.getMileInfo},computedHeight(){return`${this.baseHeight+this.mileRecommands.length*this.increment}vh`},mileRecommandInfo(){return this.getMileRecommandInfo}},methods:{...(0,C.i0)("mile",["fetchMileInfo"]),...(0,C.i0)("mileRecommand",["getMileRecommand","updateRecommands","addRecommands","deleteRecommands"]),addComment(){const e={mile_mention:"",mile_no:this.mileRecommands.length>0?this.mileRecommands[0].mile_no:null,mile_link:this.mileRecommands.length>0?this.mileRecommands[0].mile_link:null,mile_recommand_no:null};this.mileRecommands.push(e)},async deleteComment(e){const t=this.mileRecommands[e];if(t.mile_recommand_no){const n=await this.deleteRecommands(t);n&&n.data.success?(this.mileRecommands.splice(e,1),console.log("삭제 완료")):console.log("삭제 실패")}else this.mileRecommands.splice(e,1)},async addCommentAction(){if(null!=this.mileRecommands){for(const e of this.mileRecommands)e.mile_recommand_no?await this.updateRecommands(e):await this.addRecommands(e);this.showAlert("추천 멘트가 등록되었습니다","success","#")}else this.showAlert("추천 멘트 등록이 실패했습니다","error","#")},showAlert(e,t,n){this.$swal({title:e,icon:t,scrollbarPadding:!1}).then((e=>{e.isConfirmed&&("#"==n?location.reload():this.$router.push(n))}))}},async created(){const e=this.loginInfo?this.loginInfo.user_no:null;if(e){await this.fetchMileInfo(e);const t=this.getMileInfo;t?this.mile_name=t.mile_no:console.error("마일리지 이름을 가져올 수 없습니다.")}else console.error("user_no이 유효하지 않습니다.");const t=this.loginInfo?this.loginInfo.mile_no:null;if(this.mile_no=t,t){await this.getMileRecommand(t);const e=this.getMileRecommandInfo;e?this.mileRecommands=e:console.error("추천멘트를 가져올 수 없습니다.")}}},O=n(6262);const M=(0,O.A)(I,[["render",_],["__scopeId","data-v-0569e373"]]);var A=M},9617:function(e,t,n){var o=n(5397),i=n(5610),r=n(6198),l=function(e){return function(t,n,l){var a=o(t),s=r(a);if(0===s)return!e&&-1;var c,m=i(l,s);if(e&&n!==n){while(s>m)if(c=a[m++],c!==c)return!0}else for(;s>m;m++)if((e||m in a)&&a[m]===n)return e||m||0;return!e&&-1}};e.exports={includes:l(!0),indexOf:l(!1)}},4527:function(e,t,n){var o=n(3724),i=n(4376),r=TypeError,l=Object.getOwnPropertyDescriptor,a=o&&!function(){if(void 0!==this)return!0;try{Object.defineProperty([],"length",{writable:!1}).length=1}catch(e){return e instanceof TypeError}}();e.exports=a?function(e,t){if(i(e)&&!l(e,"length").writable)throw new r("Cannot set read only .length");return e.length=t}:function(e,t){return e.length=t}},7740:function(e,t,n){var o=n(9297),i=n(5031),r=n(7347),l=n(4913);e.exports=function(e,t,n){for(var a=i(t),s=l.f,c=r.f,m=0;m<a.length;m++){var u=a[m];o(e,u)||n&&o(n,u)||s(e,u,c(t,u))}}},6837:function(e){var t=TypeError,n=9007199254740991;e.exports=function(e){if(e>n)throw t("Maximum allowed index exceeded");return e}},8727:function(e){e.exports=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"]},6518:function(e,t,n){var o=n(4475),i=n(7347).f,r=n(6699),l=n(6840),a=n(9433),s=n(7740),c=n(2796);e.exports=function(e,t){var n,m,u,f,d,h,p=e.target,g=e.global,v=e.stat;if(m=g?o:v?o[p]||a(p,{}):o[p]&&o[p].prototype,m)for(u in t){if(d=t[u],e.dontCallGetSet?(h=i(m,u),f=h&&h.value):f=m[u],n=c(g?u:p+(v?".":"#")+u,e.forced),!n&&void 0!==f){if(typeof d==typeof f)continue;s(d,f)}(e.sham||f&&f.sham)&&r(d,"sham",!0),l(m,u,d,e)}}},7055:function(e,t,n){var o=n(9504),i=n(9039),r=n(4576),l=Object,a=o("".split);e.exports=i((function(){return!l("z").propertyIsEnumerable(0)}))?function(e){return"String"===r(e)?a(e,""):l(e)}:l},4376:function(e,t,n){var o=n(4576);e.exports=Array.isArray||function(e){return"Array"===o(e)}},2796:function(e,t,n){var o=n(9039),i=n(4901),r=/#|\.prototype\./,l=function(e,t){var n=s[a(e)];return n===m||n!==c&&(i(t)?o(t):!!t)},a=l.normalize=function(e){return String(e).replace(r,".").toLowerCase()},s=l.data={},c=l.NATIVE="N",m=l.POLYFILL="P";e.exports=l},6198:function(e,t,n){var o=n(8014);e.exports=function(e){return o(e.length)}},741:function(e){var t=Math.ceil,n=Math.floor;e.exports=Math.trunc||function(e){var o=+e;return(o>0?n:t)(o)}},7347:function(e,t,n){var o=n(3724),i=n(9565),r=n(8773),l=n(6980),a=n(5397),s=n(6969),c=n(9297),m=n(5917),u=Object.getOwnPropertyDescriptor;t.f=o?u:function(e,t){if(e=a(e),t=s(t),m)try{return u(e,t)}catch(n){}if(c(e,t))return l(!i(r.f,e,t),e[t])}},8480:function(e,t,n){var o=n(1828),i=n(8727),r=i.concat("length","prototype");t.f=Object.getOwnPropertyNames||function(e){return o(e,r)}},3717:function(e,t){t.f=Object.getOwnPropertySymbols},1828:function(e,t,n){var o=n(9504),i=n(9297),r=n(5397),l=n(9617).indexOf,a=n(421),s=o([].push);e.exports=function(e,t){var n,o=r(e),c=0,m=[];for(n in o)!i(a,n)&&i(o,n)&&s(m,n);while(t.length>c)i(o,n=t[c++])&&(~l(m,n)||s(m,n));return m}},8773:function(e,t){var n={}.propertyIsEnumerable,o=Object.getOwnPropertyDescriptor,i=o&&!n.call({1:2},1);t.f=i?function(e){var t=o(this,e);return!!t&&t.enumerable}:n},5031:function(e,t,n){var o=n(7751),i=n(9504),r=n(8480),l=n(3717),a=n(8551),s=i([].concat);e.exports=o("Reflect","ownKeys")||function(e){var t=r.f(a(e)),n=l.f;return n?s(t,n(e)):t}},5610:function(e,t,n){var o=n(1291),i=Math.max,r=Math.min;e.exports=function(e,t){var n=o(e);return n<0?i(n+t,0):r(n,t)}},5397:function(e,t,n){var o=n(7055),i=n(7750);e.exports=function(e){return o(i(e))}},1291:function(e,t,n){var o=n(741);e.exports=function(e){var t=+e;return t!==t||0===t?0:o(t)}},8014:function(e,t,n){var o=n(1291),i=Math.min;e.exports=function(e){var t=o(e);return t>0?i(t,9007199254740991):0}},4114:function(e,t,n){var o=n(6518),i=n(8981),r=n(6198),l=n(4527),a=n(6837),s=n(9039),c=s((function(){return 4294967297!==[].push.call({length:4294967296},1)})),m=function(){try{Object.defineProperty([],"length",{writable:!1}).push()}catch(e){return e instanceof TypeError}},u=c||!m();o({target:"Array",proto:!0,arity:1,forced:u},{push:function(e){var t=i(this),n=r(t),o=arguments.length;a(n+o);for(var s=0;s<o;s++)t[n]=arguments[s],n++;return l(t,n),n}})}}]);
//# sourceMappingURL=5356.ba609fcc.js.map
"use strict";(self["webpackChunkmile"]=self["webpackChunkmile"]||[]).push([[7676],{7676:function(e,t,a){a.r(t),a.d(t,{default:function(){return We}});var i=a(641),s=a(33);const n=e=>((0,i.Qi)("data-v-597ab61c"),e=e(),(0,i.jt)(),e),l={class:"cards page-back mx-auto",style:{color:"#4b4a4a"}},o={class:"d-flex"},c={class:"back-container"},r=n((()=>(0,i.Lk)("span",{class:"arrow"},"❮",-1))),u={class:"input-base input-search d-flex justify-content-center mx-auto my-3",style:{width:"600px",background:"#ebebeb"}};function d(e,t,a,n,d,m){return(0,i.uX)(),(0,i.CE)("div",l,[(0,i.Lk)("div",o,[(0,i.Lk)("div",c,[(0,i.Lk)("button",{class:"back-button",onClick:t[0]||(t[0]=(...e)=>m.goBack&&m.goBack(...e))},[r,(0,i.eW)(" 이전 ")])])]),(0,i.Lk)("h2",{class:"bold-x-lg mb-5 ml-5 help-icon",ref:"helpIcon",style:{"font-family":"KB_C3"}},(0,s.v_)(d.mile_name)+" 마일리지 ",513),(0,i.Lk)("div",u,[(0,i.Lk)("button",{class:(0,s.C4)(["tab-container lg3 fw-bold",{active:"status"===d.activeTab}]),onClick:t[1]||(t[1]=e=>m.setActiveTab("status"))}," 취득현황 ",2),(0,i.Lk)("button",{class:(0,s.C4)(["tab-container lg3 fw-bold",{active:"intro"===d.activeTab}]),onClick:t[2]||(t[2]=e=>m.setActiveTab("intro"))}," 마일리지 소개 ",2),(0,i.Lk)("button",{class:(0,s.C4)(["tab-container lg3 fw-bold",{active:"documents"===d.activeTab}]),onClick:t[3]||(t[3]=e=>m.setActiveTab("documents"))}," 마일리지 문서 ",2)]),((0,i.uX)(),(0,i.Wv)((0,i.$y)(m.currentComponent),{mile_no:a.mile_no,onDataLoaded:m.handleDataLoaded,class:"my-5"},null,40,["mile_no","onDataLoaded"]))])}var m=a(6278),h=a(3751);const g=e=>((0,i.Qi)("data-v-53deb674"),e=e(),(0,i.jt)(),e),p={class:"d-flex justify-content-between align-items-center"},b={class:"lg2 document-count"},f={class:"input-search input-base search-mobile"},v={class:"d-flex justify-content-between align-items-center search-wrapper"},y=g((()=>(0,i.Lk)("button",null,[(0,i.Lk)("i",{class:"bi bi-search mr-2"})],-1))),k={key:0,class:"pr-5 pl-5 pb-5 pt-4 document-container"},_={class:"d-flex align-items-center justify-content-between list-container"},L={class:"left-wrapper"},w={class:"d-flex align-items-center justify-content-start"},C={key:0,style:{width:"5%","padding-left":"3%"}},P=g((()=>(0,i.Lk)("span",{class:"",style:{color:"#edbb00","font-family":"'KB_C2'","font-size":"11pt"}},"NEW",-1))),D=[P],M={class:"d-flex align-items-center justify-content-between",style:{width:"100%"}},x={class:"lg2 document-title"},S={class:"md mr-5 document-date"},E=["onClick"],X={key:0},I=g((()=>(0,i.Lk)("span",{class:"md download-font",style:{"text-align":"right"}},"파일 다운로드 〉",-1))),T=[I],A={key:1},Q=g((()=>(0,i.Lk)("span",{class:"md download-font",style:{"text-align":"right"}},[(0,i.Lk)("i",{class:"bi bi-download"})],-1))),j=[Q],F={key:1,style:{"padding-top":"10vh"}},$=g((()=>(0,i.Lk)("p",{class:"lg2",style:{"text-align":"center",color:"#aeaeb2","font-family":"KB_C2"}},"검색 결과가 없습니다.",-1))),z=[$],B={class:"pagination"},K=["disabled"],W=["onClick"],H=["disabled"];function N(e,t,a,n,l,o){return(0,i.uX)(),(0,i.CE)("div",{style:(0,s.Tr)({height:o.computedHeight})},[(0,i.Lk)("div",p,[(0,i.Lk)("div",b,"총 "+(0,s.v_)(o.documentSum)+"건",1),(0,i.Lk)("div",f,[(0,i.Lk)("div",v,[(0,i.bo)((0,i.Lk)("input",{type:"text","onUpdate:modelValue":t[0]||(t[0]=e=>l.searchQuery=e),onInput:t[1]||(t[1]=(...e)=>o.onSearch&&o.onSearch(...e)),placeholder:"검색어를 입력하세요",class:"w-100 h-100 d-inline-block",style:{"text-align":"left"}},null,544),[[h.Jo,l.searchQuery]]),y])])]),o.filteredDocuments.length>0?((0,i.uX)(),(0,i.CE)("div",k,[((0,i.uX)(!0),(0,i.CE)(i.FK,null,(0,i.pI)(o.paginatedDocuments,(e=>((0,i.uX)(),(0,i.CE)("div",{key:e.document_mile_no,class:"mx-auto mb-4 border-bottom p-4 input-base input-white list-wrapper"},[(0,i.Lk)("div",_,[(0,i.Lk)("button",L,[(0,i.Lk)("div",w,[o.isNew(e.document_date)&&!l.isMobile?((0,i.uX)(),(0,i.CE)("div",C,D)):(0,i.Q3)("",!0),(0,i.Lk)("div",M,[(0,i.Lk)("span",x,(0,s.v_)(e.document_file),1),(0,i.Lk)("span",S,(0,s.v_)(o.formatDate(e.document_date)),1)])])]),(0,i.Lk)("button",{onClick:(0,h.D$)((t=>o.downloadDocu(e.document_file)),["stop"])},[l.isMobile?((0,i.uX)(),(0,i.CE)("div",A,j)):((0,i.uX)(),(0,i.CE)("div",X,T))],8,E)])])))),128))])):((0,i.uX)(),(0,i.CE)("div",F,z)),(0,i.Lk)("div",B,[(0,i.Lk)("button",{onClick:t[2]||(t[2]=(...e)=>o.prevPage&&o.prevPage(...e)),disabled:1===l.currentPage},"〈",8,K),((0,i.uX)(!0),(0,i.CE)(i.FK,null,(0,i.pI)(l.searchPages,(e=>((0,i.uX)(),(0,i.CE)("button",{key:e,onClick:t=>o.goToPage(e),class:(0,s.C4)({active:l.currentPage===e})},(0,s.v_)(e),11,W)))),128)),(0,i.Lk)("button",{onClick:t[3]||(t[3]=(...e)=>o.nextPage&&o.nextPage(...e)),disabled:l.currentPage===l.searchPages}," 〉 ",8,H)])],4)}var U=a(5093),Y=a.n(U),V=a(1179),q=a.n(V),J={name:"AttendanceCom",props:["mile_no"],data(){return{file:null,baseHeight:60,increment:5,buttonHeight:10,searchQuery:"",currentPage:1,itemsPerPage:7,allDocuments:[],countList:0,lastInputTime:0,isMobile:!1,totalPages:0,searchPages:0,lastSearchQuery:""}},computed:{...(0,m.L8)("login",["getLoginInfo"]),...(0,m.L8)("mileExcel",["getArrayMileDocument","getDocumentSum"]),arrayMileDocument(){return this.getArrayMileDocument},computedHeight(){let e=this.baseHeight+this.paginatedDocuments.length*this.increment;return this.paginatedDocuments.length%this.itemsPerPage===0&&this.paginatedDocuments.length,e+=this.buttonHeight/2,`${e}vh`},documentSum(){return this.getDocumentSum},filteredDocuments(){let e=this.allDocuments;const t=this.searchQuery.toLowerCase();return e.filter((e=>e.document_file.toLowerCase().includes(t)))},paginatedDocuments(){return this.filteredDocuments.slice((this.currentPage-1)*this.itemsPerPage,this.currentPage*this.itemsPerPage)},totalFilteredPages(){return Math.ceil(this.filteredDocuments.length/this.itemsPerPage)}},watch:{searchQuery(){this.lastInputTime=Date.now(),this.onSearch()},filteredDocuments(){this.updateSearchPages()}},methods:{...(0,m.i0)("mileExcel",["mileDocumentLists","getMileDocumentSum","downloadDocument"]),downloadDocu(e){this.downloadDocument({document_file:e})},formatDate(e){return Y()(e).format("YYYY-MM-DD")},isNew(e){const t=Y()(e),a=Y()(),i=Y()().subtract(7,"days");return t.isBetween(i,a,null,"[]")},async loadDocuments(){const e=await this.mileDocumentLists({mile_no:this.mile_no,page:this.currentPage,itemsPerPage:this.itemsPerPage});0!=e.data.length&&null!=e.data||console.error("불러올 문서가 존재하지 않습니다."),this.allDocuments=e.data,this.getMileDocumentSum(this.mile_no),this.totalPages=Math.ceil(this.getDocumentSum/this.itemsPerPage),this.updateSearchPages()},updateSearchPages(){this.searchPages=Math.ceil(this.filteredDocuments.length/this.itemsPerPage)},onSearch(){const e=Date.now(),t=e-this.lastInputTime;t>500&&(this.lastInputTime=e,this.searchQuery!==this.lastSearchQuery&&(this.currentPage=1,this.lastSearchQuery=this.searchQuery),this.updateSearchPages())},prevPage(){this.currentPage>1&&(this.currentPage--,this.loadDocuments())},nextPage(){this.currentPage<this.totalPages&&(this.currentPage++,this.loadDocuments())},goToPage(e){this.currentPage=e,this.loadDocuments()}},created(){this.mile_no?this.loadDocuments():console.error("mile_no이 유효하지 않습니다.")},mounted(){const e=new(q())(window.navigator.userAgent);this.isMobile=null!==e.mobile()}},G=a(6262);const O=(0,G.A)(J,[["render",N],["__scopeId","data-v-53deb674"]]);var R=O;const Z=e=>((0,i.Qi)("data-v-9928a768"),e=e(),(0,i.jt)(),e),ee={class:"mile-card-content"},te={class:"mile-title"},ae={class:"mile-content-container"},ie={class:"mile-content"},se={class:"mile-content-text"},ne={class:"mile-detail-button"},le=["onClick"],oe=Z((()=>(0,i.Lk)("p",null,"상세보기 〉",-1))),ce=[oe];function re(e,t,a,n,l,o){return(0,i.uX)(),(0,i.CE)("div",null,[((0,i.uX)(!0),(0,i.CE)(i.FK,null,(0,i.pI)(o.arrayMiles,(e=>((0,i.uX)(),(0,i.CE)("div",{key:e.mile_introduce_no,class:"mile-card"},[(0,i.Lk)("div",ee,[(0,i.Lk)("h3",te,(0,s.v_)(e.mile_title)+" 마일리지",1),(0,i.Lk)("div",ae,[(0,i.Lk)("div",ie,[(0,i.Lk)("pre",se,(0,s.v_)(e.mile_content),1)]),(0,i.Lk)("div",ne,[e.mile_route?((0,i.uX)(),(0,i.CE)("button",{key:0,onClick:t=>o.download(e.mile_route),class:"detail-button text-brown"},ce,8,le)):(0,i.Q3)("",!0)])])])])))),128))])}a(4114);var ue={name:"MileDocument",props:["mile_no"],data(){return{}},methods:{...(0,m.i0)("mile",["getMileDetail","downloadFile"]),showAlert(e,t,a){this.$swal({title:e,icon:t,scrollbarPadding:!1}).then((e=>{e.isConfirmed&&("#"==a?location.reload():this.$router.push(a))}))},download(e){this.downloadFile({mile_route:e})}},async created(){this.mile_no?(this.arrayMiles=await this.getMileDetail(this.mile_no),console.log("이건 가져온 마일리지 소개글",this.arrayMiles),0==this.arrayMiles.length&&this.showAlert("등록된 마일리지 소개 글이 없습니다","warning","/myMileageView")):console.error("mile_no이 유효하지 않습니다.")},mounted(){console.log("Mile No:",this.mile_no)},computed:{...(0,m.L8)("login",["getLoginInfo"]),...(0,m.L8)("mile",["getArrayMiles"]),arrayMiles(){return this.getArrayMiles}},watch:{}};const de=(0,G.A)(ue,[["render",re],["__scopeId","data-v-9928a768"]]);var me=de;const he=e=>((0,i.Qi)("data-v-0a8daa00"),e=e(),(0,i.jt)(),e),ge={class:"mx-auto",style:{color:"#4b4a4a"}},pe={key:0,class:"row",style:{"margin-left":"7%","margin-right":"7%","margin-top":"7%"}},be={class:"cards fade-up-item mx-3",style:{"background-color":"#f9f9f9",height:"200px",position:"relative"}},fe={class:"flex-between"},ve={class:"flex mb-2"},ye={class:"text-start KB_C3 fw-bolder",style:{"font-size":"16pt",margin:"0"}},ke={class:"justify-content-between align-items-center mt-3"},_e={class:"w-100"},Le={key:0,class:"mb-5"},we=he((()=>(0,i.Lk)("i",{class:"bi bi-caret-up-fill",style:{color:"#ff5c5c","font-size":"25pt"}},null,-1))),Ce=[we],Pe={key:1},De=he((()=>(0,i.Lk)("span",{class:"fw-bold",style:{color:"#ffa15c","font-size":"25pt"}}," - ",-1))),Me=[De],xe={key:2},Se=he((()=>(0,i.Lk)("i",{class:"bi bi-caret-down-fill",style:{color:"#4d7eff","font-size":"25pt"}},null,-1))),Ee=[Se],Xe={class:"KB_C2",style:{"font-size":"32pt"}},Ie={class:"",style:{color:"gray"}},Te={key:0,class:"text-star",style:{"font-size":"10pt",color:"gray","margin-top":"35px"}},Ae={key:1,class:"text-star",style:{"font-size":"9pt",color:"gray","margin-top":"20px"}},Qe=he((()=>(0,i.Lk)("br",null,null,-1)));function je(e,t,a,n,l,o){return(0,i.uX)(),(0,i.CE)("div",null,[(0,i.Lk)("div",ge,[l.dataLoaded&&o.filteredMileStatus.length>0?((0,i.uX)(),(0,i.CE)("div",pe,[((0,i.uX)(!0),(0,i.CE)(i.FK,null,(0,i.pI)(o.filteredMileStatus,((e,t)=>((0,i.uX)(),(0,i.CE)("div",{key:t,class:"col-6 mb-3"},[(0,i.Lk)("div",be,[(0,i.Lk)("div",fe,[(0,i.Lk)("div",ve,[(0,i.Lk)("div",ye,(0,s.v_)(e.score_name),1)])]),(0,i.Lk)("div",ke,[(0,i.Lk)("div",_e,[e.user_point-e.prev_point>0?((0,i.uX)(),(0,i.CE)("span",Le,Ce)):e.user_point-e.prev_point==0?((0,i.uX)(),(0,i.CE)("span",Pe,Me)):e.user_point-e.prev_point<0?((0,i.uX)(),(0,i.CE)("span",xe,Ee)):(0,i.Q3)("",!0),(0,i.Lk)("span",Xe,(0,s.v_)(e.user_point)+"pt",1),(0,i.eW)("   "),(0,i.Lk)("span",Ie,"("+(0,s.v_)(e.user_point-e.prev_point)+"pt 증가)",1)])]),o.isMobile?((0,i.uX)(),(0,i.CE)("div",Ae,[(0,i.eW)(" 과거 업데이트 : "+(0,s.v_)(e.prev_date)+" ",1),Qe,(0,i.eW)(" 최신 업데이트 : "+(0,s.v_)(e.mile_date),1)])):((0,i.uX)(),(0,i.CE)("div",Te," ( 과거 업데이트 일자 : "+(0,s.v_)(e.prev_date)+" / 최신 업데이트 일자 : "+(0,s.v_)(e.mile_date)+" ) ",1))])])))),128))])):(0,i.Q3)("",!0)])])}var Fe={name:"AttendanceCom",props:["mile_no"],data(){return{dataLoaded:!1}},methods:{...(0,m.i0)("mileScore",["getMyMileStatus"]),setTransitionDelay(e,t){e.style.setProperty("--index",t)},applyFadeUpEffect(){console.log("Applying fade-up effect");const e=this.$el.querySelectorAll(".fade-up-item");console.log(`Found ${e.length} items to animate`),e.forEach(((t,a)=>{t.style.setProperty("--index",a),t.style.setProperty("z-index",e.length-a);const i=50,s=i+50*a;setTimeout((()=>{t.classList.add("fade-up-active")}),s)}))},async loadData(){try{const e=this.getLoginInfo;e&&e.user_no&&(await this.getMyMileStatus({user_no:e.user_no,mile_no:this.mile_no}),console.log("상속:",this.getMileStatus[0].mile_name),this.$emit("data-loaded",this.getMileStatus[0].mile_name),this.dataLoaded=!0,this.$nextTick((()=>{this.applyFadeUpEffect()})))}catch(e){console.error("Error loading data:",e)}}},mounted(){this.loadData().then((()=>{this.$nextTick((()=>{this.applyFadeUpEffect()}))}))},computed:{...(0,m.L8)("login",["getLoginInfo"]),...(0,m.L8)("mileScore",["getMileStatus"]),isMobile(){return window.innerWidth<=768},filteredMileStatus(){const e=this.getLoginInfo?this.getLoginInfo.job_no:null;return e?this.getMileStatus.filter((t=>"개인"===e?"공통"===t.job_name||"개인"===t.job_name:"기업"!==e||("공통"===t.job_name||"기업"===t.job_name))):[]}}};const $e=(0,G.A)(Fe,[["render",je],["__scopeId","data-v-0a8daa00"]]);var ze=$e,Be={name:"MileageDetailView",components:{MileDocument:R,MileIntro:me,MileStatusCom:ze},props:["mile_no"],data(){return{activeTab:"status",mile_name:null}},methods:{...(0,m.i0)("hitMile",["hit_mile"]),setActiveTab(e){this.activeTab=e},goBack(){this.$router.go(-1)},handleDataLoaded(e){this.mile_name=e,console.log("Loaded data from child:",e)}},mounted(){console.log("Mile No:",this.mile_no)},computed:{...(0,m.L8)("login",["getLoginInfo"]),currentComponent(){switch(this.activeTab){case"status":return"MileStatusCom";case"intro":return"MileIntro";case"documents":return"MileDocument";default:return"MileStatusCom"}},watch:{}},created(){this.hit_mile(this.mile_no)}};const Ke=(0,G.A)(Be,[["render",d],["__scopeId","data-v-597ab61c"]]);var We=Ke}}]);
//# sourceMappingURL=7676.5d08de41.js.map
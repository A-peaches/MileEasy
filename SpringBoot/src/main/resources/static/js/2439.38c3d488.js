"use strict";(self["webpackChunkmile"]=self["webpackChunkmile"]||[]).push([[2439],{2439:function(e,t,n){n.r(t),n.d(t,{default:function(){return de}});var r=n(641),l=n(33),s=n(3751);const i=e=>((0,r.Qi)("data-v-f1c4c5f2"),e=e(),(0,r.jt)(),e),a={class:"app-container"},o={class:"content cards"},c=i((()=>(0,r.Lk)("div",null,[(0,r.Lk)("h2",null,"마일리지 요청")],-1))),u=i((()=>(0,r.Lk)("br",null,null,-1))),p=i((()=>(0,r.Lk)("br",null,null,-1))),d=i((()=>(0,r.Lk)("br",null,null,-1))),f=i((()=>(0,r.Lk)("br",null,null,-1))),h=i((()=>(0,r.Lk)("br",null,null,-1))),g={class:"notice-count-container"},v={class:"notice-count"},y={class:"radio-container"},m=i((()=>(0,r.Lk)("span",{class:"custom-radio"},null,-1))),L=i((()=>(0,r.Lk)("span",{class:"radio-label"},"전체",-1))),k={class:"radio-container"},b=i((()=>(0,r.Lk)("span",{class:"custom-radio"},null,-1))),_=i((()=>(0,r.Lk)("span",{class:"radio-label"},"승인요청",-1))),x={class:"radio-container"},C=i((()=>(0,r.Lk)("span",{class:"custom-radio"},null,-1))),F=i((()=>(0,r.Lk)("span",{class:"radio-label"},"승인중",-1))),w={class:"radio-container"},P=i((()=>(0,r.Lk)("span",{class:"custom-radio"},null,-1))),q=i((()=>(0,r.Lk)("span",{class:"radio-label"},"승인완료",-1))),O={class:"radio-container"},E=i((()=>(0,r.Lk)("span",{class:"custom-radio"},null,-1))),N=i((()=>(0,r.Lk)("span",{class:"radio-label"},"미승인",-1))),I=i((()=>(0,r.Lk)("i",{class:"bi bi-pencil",style:{"margin-right":"10px"}},null,-1))),X={class:"search-container"},j=i((()=>(0,r.Lk)("i",{class:"bi bi-search"},null,-1))),T=[j],Q={style:{"text-align":"center","justify-content":"center"}},S={class:"notice-list",style:{"text-align":"center"}},A={key:0,class:"no-results"},M=["onClick"],R={class:"notice-details"},V={class:"notice-new"},B={class:"notice-num"},D={class:"notice-title"},U={class:"notice-mile"},z={class:"notice-date"},W={key:0,class:"notice-details-expanded"},K=i((()=>(0,r.Lk)("p",{style:{"text-align":"left","font-size":"15pt"},class:"KB_S3 mt-3 ml-3"}," 요청사항 ",-1))),G=i((()=>(0,r.Lk)("hr",null,null,-1))),J={style:{"text-align":"left"},class:"ml-3"},Y={style:{"text-align":"left"},class:"ml-3"},$={style:{"text-align":"left"},class:"ml-3"},H={style:{"text-align":"left"},class:"ml-3"},Z={key:0,style:{"text-align":"right","margin-right":"10px"}},ee=i((()=>(0,r.Lk)("i",{class:"bi bi-trash-fill",style:{color:"gray","font-size":"larger"}},null,-1))),te=["onClick"],ne={class:"pagination"},re=["onClick"];function le(e,t,n,i,j,le){return(0,r.uX)(),(0,r.CE)("div",a,[(0,r.Lk)("div",o,[c,u,p,d,f,h,(0,r.Lk)("div",g,[(0,r.Lk)("div",v,"총 "+(0,l.v_)(le.filteredNotices.length)+"건",1),(0,r.Lk)("label",y,[(0,r.bo)((0,r.Lk)("input",{type:"radio",name:"status",value:"all","onUpdate:modelValue":t[0]||(t[0]=e=>j.selectedFilter=e),onChange:t[1]||(t[1]=(...e)=>le.applyFilters&&le.applyFilters(...e))},null,544),[[s.XL,j.selectedFilter]]),m,L]),(0,r.Lk)("label",k,[(0,r.bo)((0,r.Lk)("input",{type:"radio",name:"status",value:"processing","onUpdate:modelValue":t[2]||(t[2]=e=>j.selectedFilter=e),onChange:t[3]||(t[3]=(...e)=>le.applyFilters&&le.applyFilters(...e))},null,544),[[s.XL,j.selectedFilter]]),b,_]),(0,r.Lk)("label",x,[(0,r.bo)((0,r.Lk)("input",{type:"radio",name:"status",value:"completed","onUpdate:modelValue":t[4]||(t[4]=e=>j.selectedFilter=e),onChange:t[5]||(t[5]=(...e)=>le.applyFilters&&le.applyFilters(...e))},null,544),[[s.XL,j.selectedFilter]]),C,F]),(0,r.Lk)("label",w,[(0,r.bo)((0,r.Lk)("input",{type:"radio",name:"status",value:"rejected","onUpdate:modelValue":t[6]||(t[6]=e=>j.selectedFilter=e),onChange:t[7]||(t[7]=(...e)=>le.applyFilters&&le.applyFilters(...e))},null,544),[[s.XL,j.selectedFilter]]),P,q]),(0,r.Lk)("label",O,[(0,r.bo)((0,r.Lk)("input",{type:"radio",name:"status",value:"false","onUpdate:modelValue":t[8]||(t[8]=e=>j.selectedFilter=e),onChange:t[9]||(t[9]=(...e)=>le.applyFilters&&le.applyFilters(...e))},null,544),[[s.XL,j.selectedFilter]]),E,N])]),(0,r.Lk)("div",null,[(0,r.Lk)("div",null,[(0,r.Lk)("button",{class:"write-button",onClick:t[10]||(t[10]=(...e)=>le.goToWritePage&&le.goToWritePage(...e))},[I,(0,r.eW)(" 글작성 ")])])]),(0,r.Lk)("div",X,[(0,r.bo)((0,r.Lk)("input",{type:"text","onUpdate:modelValue":t[11]||(t[11]=e=>j.searchQuery=e),placeholder:"제목 및 내용을 검색하세요",class:"input-search"},null,512),[[s.Jo,j.searchQuery]]),(0,r.Lk)("button",{class:"search-button",onClick:t[12]||(t[12]=(...e)=>le.applyFilters&&le.applyFilters(...e))},T)]),(0,r.Lk)("div",Q,[(0,r.Lk)("div",S,[0===le.paginatedNotices.length?((0,r.uX)(),(0,r.CE)("div",A," 검색 결과가 없습니다. ")):((0,r.uX)(!0),(0,r.CE)(r.FK,{key:1},(0,r.pI)(le.paginatedNotices,((e,t)=>((0,r.uX)(),(0,r.CE)("div",{key:t},[(0,r.Lk)("div",{class:"input-base list-wrapper",onClick:e=>le.toggleDetails(t)},[(0,r.Lk)("div",R,[(0,r.Lk)("div",V,(0,l.v_)(t+1),1),(0,r.Lk)("div",B,(0,l.v_)(le.getRequestType(e.request)),1),(0,r.Lk)("div",D,(0,l.v_)(e.request_mile_name||e.mile_name),1),(0,r.Lk)("div",U,(0,l.v_)(le.getStatus(e.request_status)),1),(0,r.Lk)("div",z,(0,l.v_)(e.mileage_request_date),1)])],8,M),j.selectedNotice===t?((0,r.uX)(),(0,r.CE)("div",W,[K,G,(0,r.Lk)("p",J," 마일리지 이름 : "+(0,l.v_)(e.request_mile_name||e.mile_name),1),(0,r.Lk)("p",Y," 연간 최고 한도 : "+(0,l.v_)(e.request_mil_max),1),(0,r.Lk)("p",$," 담당자 : "+(0,l.v_)(e.request_admin),1),(0,r.Lk)("p",H," 기타요청: "+(0,l.v_)(e.request_etc),1),0===e.request_status?((0,r.uX)(),(0,r.CE)("div",Z,[ee,(0,r.Lk)("span",{style:{color:"gray","font-size":"larger"},onClick:t=>le.deleteRequest(e.mileage_request_no)},"삭제",8,te)])):(0,r.Q3)("",!0)])):(0,r.Q3)("",!0)])))),128))])]),(0,r.Lk)("div",ne,[((0,r.uX)(!0),(0,r.CE)(r.FK,null,(0,r.pI)(le.totalPages,(e=>((0,r.uX)(),(0,r.CE)("button",{key:e,onClick:t=>j.currentPage=e,class:(0,l.C4)({active:j.currentPage===e})},(0,l.v_)(e),11,re)))),128))])])])}n(4114);var se=n(6278),ie=n(7682),ae=n(8465),oe=n.n(ae),ce={data(){return{requestList:[],searchQuery:"",currentPage:1,itemsPerPage:10,selectedFilter:"all",selectedNotice:null}},computed:{...(0,se.L8)("login",["getLoginInfo","getIsChecked"]),loginInfo(){return this.getLoginInfo},isChecked(){return this.getIsChecked},filteredNotices(){let e=this.requestList;return this.searchQuery&&(e=e.filter((e=>e.mile_name.includes(this.searchQuery)||e.request_mile_name&&e.request_mile_name.includes(this.searchQuery)))),"all"===this.selectedFilter?e:e.filter((e=>{const t=e.request_status;return"processing"===this.selectedFilter&&0===t||"completed"===this.selectedFilter&&1===t||"rejected"===this.selectedFilter&&2===t||"false"===this.selectedFilter&&3===t}))},paginatedNotices(){const e=(this.currentPage-1)*this.itemsPerPage,t=e+this.itemsPerPage;return this.filteredNotices.slice(e,t)},totalPages(){return Math.ceil(this.filteredNotices.length/this.itemsPerPage)}},methods:{goToWritePage(){this.$router.push("/mileageRequestWrite")},async fetchRequestList(){try{const e=await ie.A.post("/user/requestList",null,{params:{user_no:this.getLoginInfo.user_no}});this.requestList=e.data}catch(e){console.error("문제",e),this.requestList=[]}},async deleteRequest(e){const t=await oe().fire({title:"삭제 확인",text:"정말로 요청을 삭제하시겠습니까?",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"삭제",cancelButtonText:"취소"});if(t.isConfirmed)try{const t=await ie.A.post("/user/requestListDelete",null,{params:{mileage_request_no:e}});console.log(t.data),oe().fire("삭제 완료","요청이 삭제되었습니다.","success").then((()=>{window.location.reload()}))}catch(n){console.error("문제",n),oe().fire("오류","요청 삭제에 실패했습니다.","error")}},getRequestType(e){return 1===e?"추가":2===e?"수정":3===e?"삭제":""},getStatus(e){return 0===e?"접수요청":1===e?"접수완료":2===e?"승인완료":3===e?"승인거절":""},applyFilters(){this.currentPage=1},toggleDetails(e){this.selectedNotice===e?this.selectedNotice=null:this.selectedNotice=e}},mounted(){this.fetchRequestList()}},ue=n(6262);const pe=(0,ue.A)(ce,[["render",le],["__scopeId","data-v-f1c4c5f2"]]);var de=pe},9617:function(e,t,n){var r=n(5397),l=n(5610),s=n(6198),i=function(e){return function(t,n,i){var a=r(t),o=s(a);if(0===o)return!e&&-1;var c,u=l(i,o);if(e&&n!==n){while(o>u)if(c=a[u++],c!==c)return!0}else for(;o>u;u++)if((e||u in a)&&a[u]===n)return e||u||0;return!e&&-1}};e.exports={includes:i(!0),indexOf:i(!1)}},4527:function(e,t,n){var r=n(3724),l=n(4376),s=TypeError,i=Object.getOwnPropertyDescriptor,a=r&&!function(){if(void 0!==this)return!0;try{Object.defineProperty([],"length",{writable:!1}).length=1}catch(e){return e instanceof TypeError}}();e.exports=a?function(e,t){if(l(e)&&!i(e,"length").writable)throw new s("Cannot set read only .length");return e.length=t}:function(e,t){return e.length=t}},7740:function(e,t,n){var r=n(9297),l=n(5031),s=n(7347),i=n(4913);e.exports=function(e,t,n){for(var a=l(t),o=i.f,c=s.f,u=0;u<a.length;u++){var p=a[u];r(e,p)||n&&r(n,p)||o(e,p,c(t,p))}}},6837:function(e){var t=TypeError,n=9007199254740991;e.exports=function(e){if(e>n)throw t("Maximum allowed index exceeded");return e}},8727:function(e){e.exports=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"]},6518:function(e,t,n){var r=n(4475),l=n(7347).f,s=n(6699),i=n(6840),a=n(9433),o=n(7740),c=n(2796);e.exports=function(e,t){var n,u,p,d,f,h,g=e.target,v=e.global,y=e.stat;if(u=v?r:y?r[g]||a(g,{}):r[g]&&r[g].prototype,u)for(p in t){if(f=t[p],e.dontCallGetSet?(h=l(u,p),d=h&&h.value):d=u[p],n=c(v?p:g+(y?".":"#")+p,e.forced),!n&&void 0!==d){if(typeof f==typeof d)continue;o(f,d)}(e.sham||d&&d.sham)&&s(f,"sham",!0),i(u,p,f,e)}}},7055:function(e,t,n){var r=n(9504),l=n(9039),s=n(4576),i=Object,a=r("".split);e.exports=l((function(){return!i("z").propertyIsEnumerable(0)}))?function(e){return"String"===s(e)?a(e,""):i(e)}:i},4376:function(e,t,n){var r=n(4576);e.exports=Array.isArray||function(e){return"Array"===r(e)}},2796:function(e,t,n){var r=n(9039),l=n(4901),s=/#|\.prototype\./,i=function(e,t){var n=o[a(e)];return n===u||n!==c&&(l(t)?r(t):!!t)},a=i.normalize=function(e){return String(e).replace(s,".").toLowerCase()},o=i.data={},c=i.NATIVE="N",u=i.POLYFILL="P";e.exports=i},6198:function(e,t,n){var r=n(8014);e.exports=function(e){return r(e.length)}},741:function(e){var t=Math.ceil,n=Math.floor;e.exports=Math.trunc||function(e){var r=+e;return(r>0?n:t)(r)}},7347:function(e,t,n){var r=n(3724),l=n(9565),s=n(8773),i=n(6980),a=n(5397),o=n(6969),c=n(9297),u=n(5917),p=Object.getOwnPropertyDescriptor;t.f=r?p:function(e,t){if(e=a(e),t=o(t),u)try{return p(e,t)}catch(n){}if(c(e,t))return i(!l(s.f,e,t),e[t])}},8480:function(e,t,n){var r=n(1828),l=n(8727),s=l.concat("length","prototype");t.f=Object.getOwnPropertyNames||function(e){return r(e,s)}},3717:function(e,t){t.f=Object.getOwnPropertySymbols},1828:function(e,t,n){var r=n(9504),l=n(9297),s=n(5397),i=n(9617).indexOf,a=n(421),o=r([].push);e.exports=function(e,t){var n,r=s(e),c=0,u=[];for(n in r)!l(a,n)&&l(r,n)&&o(u,n);while(t.length>c)l(r,n=t[c++])&&(~i(u,n)||o(u,n));return u}},8773:function(e,t){var n={}.propertyIsEnumerable,r=Object.getOwnPropertyDescriptor,l=r&&!n.call({1:2},1);t.f=l?function(e){var t=r(this,e);return!!t&&t.enumerable}:n},5031:function(e,t,n){var r=n(7751),l=n(9504),s=n(8480),i=n(3717),a=n(8551),o=l([].concat);e.exports=r("Reflect","ownKeys")||function(e){var t=s.f(a(e)),n=i.f;return n?o(t,n(e)):t}},5610:function(e,t,n){var r=n(1291),l=Math.max,s=Math.min;e.exports=function(e,t){var n=r(e);return n<0?l(n+t,0):s(n,t)}},5397:function(e,t,n){var r=n(7055),l=n(7750);e.exports=function(e){return r(l(e))}},1291:function(e,t,n){var r=n(741);e.exports=function(e){var t=+e;return t!==t||0===t?0:r(t)}},8014:function(e,t,n){var r=n(1291),l=Math.min;e.exports=function(e){var t=r(e);return t>0?l(t,9007199254740991):0}},4114:function(e,t,n){var r=n(6518),l=n(8981),s=n(6198),i=n(4527),a=n(6837),o=n(9039),c=o((function(){return 4294967297!==[].push.call({length:4294967296},1)})),u=function(){try{Object.defineProperty([],"length",{writable:!1}).push()}catch(e){return e instanceof TypeError}},p=c||!u();r({target:"Array",proto:!0,arity:1,forced:p},{push:function(e){var t=l(this),n=s(t),r=arguments.length;a(n+r);for(var o=0;o<r;o++)t[n]=arguments[o],n++;return i(t,n),n}})}}]);
//# sourceMappingURL=2439.38c3d488.js.map
"use strict";(self["webpackChunkmile"]=self["webpackChunkmile"]||[]).push([[6689],{6689:function(e,s,t){t.r(s),t.d(s,{default:function(){return W}});var l=t(641),a=t(33),i=t(3751),r=t(2499);const o=e=>((0,l.Qi)("data-v-cf0bde56"),e=e(),(0,l.jt)(),e),c={class:"cards page-back mx-auto",style:{color:"#4b4a4a"}},n=(0,l.Fv)('<h2 class="bold-x-lg mt-5 mb-5 ml-5" style="font-family:KB_C3;" data-v-cf0bde56> MileEasy 프로모션 </h2><div class="card shadow-sm mb-4 fade-in" style="background-color:#f5f5f5;border:#f5f5f5;" data-v-cf0bde56><div class="card-body text-start card-ml" data-v-cf0bde56><h5 class="text-emphasis text-start" data-v-cf0bde56><i class="bi bi-info-circle-fill" data-v-cf0bde56></i> 유의 사항 </h5><span class="ml-5" style="font-size:13pt;" data-v-cf0bde56> 본 서비스는 직원들의 MileEasy 사이트 대한 관심을 높이고, 관련 혜택을 적극적으로 알리기 위해 제작되었습니다. MileEasy 홍보 이외의 <span class="ml-5" data-v-cf0bde56>목적으로는 사용이 제한됩니다.</span><br data-v-cf0bde56></span><span class="ml-5" data-v-cf0bde56><strong class="text-red" data-v-cf0bde56>(일일 최대 발송 가능 횟수 : 1회 / 주중 최대 발송 가능 횟수 : 3회)</strong></span></div></div>',2),h={class:"row",style:{"margin-top":"60px"}},d={class:"left-item"},u={class:"phone-container"},m=o((()=>(0,l.Lk)("img",{src:r,class:"iphone"},null,-1))),p={class:"phone-overlay"},v={class:"receiver-area"},b={class:"message-area"},g={key:0,class:"message-bubble"},y={class:"right-item"},k={class:"message-input-container"},f={class:"sub-title mb-3",style:{"text-align":"start"}},L=o((()=>(0,l.Lk)("div",null,null,-1))),C={class:"flex"},_={class:"message-input-container mt-4"},M=o((()=>(0,l.Lk)("div",{class:"sub-title"},"메시지 입력",-1))),I={class:"sample-messages"},x=o((()=>(0,l.Lk)("p",{class:"sub-title my-3",style:{"text-align":"start"}},"샘플 메시지",-1))),w={class:"button-container"},A=["onClick"],E={class:"action-buttons mt-5"},F={key:0,class:"modal"},Q={class:"modal-content"},S=o((()=>(0,l.Lk)("h2",null,"직원 검색",-1))),j=o((()=>(0,l.Lk)("hr",{style:{"margin-top":"5px","margin-bottom":"5px"}},null,-1))),$={class:"checkbox-group"},B=["value","checked","onChange"],R=o((()=>(0,l.Lk)("span",{class:"custom-checkbox"},null,-1))),X={class:"checkbox-label"},U={class:"user-list"},q=["onClick"],P={key:0,class:"checkmark"};function T(e,s,t,r,o,T){return(0,l.uX)(),(0,l.CE)("div",c,[n,(0,l.Lk)("div",h,[(0,l.Lk)("div",d,[(0,l.Lk)("div",u,[m,(0,l.Lk)("div",p,[(0,l.Lk)("div",v,(0,a.v_)(T.receiverDisplay||""),1),(0,l.Lk)("div",b,[o.message?((0,l.uX)(),(0,l.CE)("div",g,(0,a.v_)(o.message||""),1)):(0,l.Q3)("",!0)])])])]),(0,l.Lk)("div",y,[(0,l.Lk)("div",k,[(0,l.Lk)("p",f,[(0,l.eW)(" 수신인 지정 "),(0,l.Lk)("i",{class:"bi bi-plus-lg",onClick:s[0]||(s[0]=(...e)=>T.openModal&&T.openModal(...e))})]),L]),(0,l.Lk)("div",C,[(0,l.bo)((0,l.Lk)("input",{"onUpdate:modelValue":s[1]||(s[1]=e=>T.receiverDisplay=e),type:"text",class:"form-control",style:{width:"100%",height:"50px"},placeholder:"수신인을 추가해주세요.",onClick:s[2]||(s[2]=(...e)=>T.openModal&&T.openModal(...e)),readonly:""},null,512),[[i.Jo,T.receiverDisplay]])]),(0,l.Lk)("div",_,[M,(0,l.Lk)("button",{class:"btn-yellow mb-4",onClick:s[3]||(s[3]=(...e)=>T.generateAIContent&&T.generateAIContent(...e))}," AI 내용 자동 생성 ")]),(0,l.bo)((0,l.Lk)("textarea",{"onUpdate:modelValue":s[4]||(s[4]=e=>o.message=e),class:"form-control",style:{height:"250px"},placeholder:"메시지를 입력하세요 (100자 이내)",maxlength:"100"},null,512),[[i.Jo,o.message]]),(0,l.Lk)("div",I,[x,(0,l.Lk)("div",w,[((0,l.uX)(!0),(0,l.CE)(l.FK,null,(0,l.pI)(o.sampleMessages,((e,s)=>((0,l.uX)(),(0,l.CE)("button",{key:s,class:"sample-button",onClick:s=>T.selectSampleMessage(e)},(0,a.v_)(e?.title),9,A)))),128))])]),(0,l.Lk)("div",E,[(0,l.Lk)("button",{class:"btn btn-primary",onClick:s[5]||(s[5]=(...e)=>T.sendSms&&T.sendSms(...e))},"메시지 발송"),(0,l.Lk)("button",{class:"btn btn-secondary",onClick:s[6]||(s[6]=(...e)=>T.reset&&T.reset(...e))},"작성 취소")])])]),o.showModal?((0,l.uX)(),(0,l.CE)("div",F,[(0,l.Lk)("div",Q,[(0,l.Lk)("span",{class:"close",onClick:s[7]||(s[7]=(...e)=>T.closeModal&&T.closeModal(...e))},"×"),S,j,(0,l.Lk)("div",$,[((0,l.uX)(!0),(0,l.CE)(l.FK,null,(0,l.pI)(o.filterOptions,(e=>((0,l.uX)(),(0,l.CE)("label",{class:"checkbox-container",key:e.value},[(0,l.Lk)("input",{type:"checkbox",value:e.value,checked:o.selectedFilter===e.value,onChange:s=>T.handleFilterChange(e.value)},null,40,B),R,(0,l.Lk)("span",X,(0,a.v_)(e?.label),1)])))),128))]),(0,l.bo)((0,l.Lk)("input",{"onUpdate:modelValue":s[8]||(s[8]=e=>o.searchQuery=e),onInput:s[9]||(s[9]=(...e)=>T.searchEmployees&&T.searchEmployees(...e)),placeholder:"직원 이름 또는 번호를 검색해주세요."},null,544),[[i.Jo,o.searchQuery]]),(0,l.Lk)("div",U,[(0,l.Lk)("ul",null,[((0,l.uX)(!0),(0,l.CE)(l.FK,null,(0,l.pI)(o.searchResults,(e=>((0,l.uX)(),(0,l.CE)("li",{key:e.user_no,onClick:s=>T.addReceiver(e),class:(0,a.C4)({selected:T.isSelected(e)})},[(0,l.eW)((0,a.v_)(e?.user_no)+" - "+(0,a.v_)(e?.user_name)+" ",1),T.isSelected(e)?((0,l.uX)(),(0,l.CE)("span",P,"✓")):(0,l.Q3)("",!0)],10,q)))),128))])]),(0,l.Lk)("button",{onClick:s[10]||(s[10]=(...e)=>T.closeModal&&T.closeModal(...e)),class:"btn btn-primary mt-3"},"완료")])])):(0,l.Q3)("",!0)])}t(4114);var D=t(7682),K=t(6278),J={name:"AdminPromotion",data(){return{message:"",receivers:[],showModal:!1,searchQuery:"",searchResults:[],selectedFilter:null,filterOptions:[{label:"전체",value:"all"},{label:"영업점",value:"branch"},{label:"본부",value:"headquarters"}],employees:[],sampleMessages:[{title:"마왕 업데이트 안내",content:"저번 달 마왕 결과가 드디어 나왔습니다! 내가 마왕이 됐을수도..?🤩 서둘러 확인해보세요!"},{title:"M-Tip Best 안내",content:"M-Tip 게시판에서 이뤄지는 🔥🔥치열한 Best 경쟁! 이번 달의 Best M-Tip은 바로 당신의 것! 지금 바로 작성해보세요!"},{title:"AI 리포트 안내",content:"매일 하루 한번, AI 리포트로 나의 마일리지를 분석해보세요! MileEasy가 당신의 길잡이가 되어줄 것입니다.🤗"}]}},methods:{checkLoginInfo(){this.getLoginInfo&&!1!==this.getIsChecked&&!1!==this.getLoginInfo.user_is_admin||(window.location.href="/noAccess")},selectSampleMessage(e){this.message=e.content},async generateAIContent(){console.log("AI 내용 생성"),this.AIAlret();try{const e=await D.A.post("bot/sms",null,{params:{prompt:"우리 회사 인사고과와 연결되는 마일리지 관리 사이트인 MileEasy를 홍보하고 방문을 독려하려고 홍보성 문자메시지를 보내려고해.그 홍보하는 문자 메시지 문구를 만들어주면 되는데, 이 사이트는 전직원의 마일리지 점수를 분석하여 직원별 맞춤형 AI 리포트를 작성해서 앞으로 어떤식으로 마일리지를 향상하는게 유리하고 적절한지 방향성을 제공해줘.마일리지가 전월에비해 크게 증가했거나, 마일리지부문에서 1등을하면 마왕(마일리지왕)이라는 배지를 획득하여 뿌듯함을 느낄수 있기도해. 이 사이트의 출석체크 또는 직원들과 마일리지 꿀팁을 공유하는 M-Tip게시판의 베스트 글로 선정되면 마왕 선정에 가점이 있어. 하지만 가장 중요한것은 인사고과에 반영된다는거야.  내가 예시로 직접 만든 문자문구를 몇개 줄게! 저번 달 마왕 결과가 드디어 나왔습니다! 내가 마왕이 됐을수도..? 서둘러 확인해보세요!, M-Tip 게시판에서 이뤄지는 치열한 Best 경쟁! 이번 달의 Best M-Tip은 바로 당신의 것! 지금 바로 작성해보세요! ,  매일 하루 한번, AI 리포트로 나의 마일리지를 분석해보세요! MileEasy가 당신의 길잡이가 되어줄 것입니다.🤗꼭 이런 멘트가 들어가지않아도 마일리지에 관심이 돋거나 독려하는 문장으로도 충분해. 100자이내로 하나의 메시지만 생성 부탁할게. 바로 문자메시지를 발송할거니까  하나의 문자메시지내용 그대로를 줘."}});console.log(e.data),this.message=e.data}catch(e){console.error("Error during API request:",e)}},reset(){this.message="",this.receivers=[]},openModal(){this.showModal=!0,this.searchResults=this.employees,this.selectedFilter=null,this.searchQuery=""},closeModal(){this.showModal=!1,this.searchQuery="",this.searchResults=[]},searchEmployees(){this.filterEmployees()},addReceiver(e){const s=this.receivers.findIndex((s=>s.user_no===e.user_no));-1===s?this.receivers.push(e):this.receivers.splice(s,1)},isSelected(e){return this.receivers.some((s=>s.user_no===e.user_no))},handleFilterChange(e){this.selectedFilter===e?(this.selectedFilter=null,this.receivers=[]):(this.selectedFilter=e,this.addEmployeesByFilter(e)),this.filterEmployees()},addEmployeesByFilter(e){"all"===e?this.receivers=[...this.employees]:"branch"===e?this.receivers=this.employees.filter((e=>1==e.job_no||2==e.job_no)):"headquarters"===e&&(this.receivers=this.employees.filter((e=>3==e.job_no)))},removeEmployeesByFilter(e){"all"===e?this.receivers=[]:"branch"===e?this.receivers=this.receivers.filter((e=>1!==e.job_no&&2!==e.job_no)):"headquarters"===e&&(this.receivers=this.receivers.filter((e=>3!==e.job_no)))},filterEmployees(){let e=this.employees;if("branch"===this.selectedFilter?e=e.filter((e=>1==e.job_no||2==e.job_no)):"headquarters"===this.selectedFilter&&(e=e.filter((e=>3==e.job_no))),this.searchQuery){const s=this.searchQuery.toLowerCase();e=e.filter((e=>e.user_name.toLowerCase().includes(s)||e.user_no.toString().includes(this.searchQuery)))}this.searchResults=e},applySearch(){if(this.searchQuery){const e=this.searchQuery.toLowerCase();this.searchResults=this.searchResults.filter((s=>s.user_name.toLowerCase().includes(e)||s.user_no.toString().includes(this.searchQuery)))}},async getAllUsers(){try{const e=await D.A.get("/user/getAllUsers");this.employees=e.data,console.log("모든직원정보 :",e.data)}catch(e){console.error("Error getAllUsers")}},succesAlert(){this.$swal({title:"성공",text:"메시지 발송이 완료되었습니다.",icon:"success",scrollbarPadding:!1})},async sendSms(){try{let e=this.receivers.map((e=>e.user_tel));const s=await D.A.post("/user/sendSms",{to:e,text:this.message,mile:"site"});console.log(s),this.succesAlert(),this.reset()}catch(e){console.error("Error sending SMS:",e),this.errorAlert(e.message||"메시지 전송 중 오류가 발생했습니다.")}},AIAlret(){let e,s=10;this.$swal({title:"AI 문구 생성",html:"<b>${timeLeft}</b>초 후에 완료됩니다....",timer:1e4,timerProgressBar:!0,scrollbarPadding:!1,didOpen:()=>{const t=this.$swal.getPopup();t.style.height="200px",this.$swal.showLoading();const l=this.$swal.getHtmlContainer().querySelector("b");l.textContent=`${s}`,e=setInterval((()=>{s-=1,l.textContent=`${s}`,0===s&&clearInterval(e)}),1e3)},willClose:()=>{clearInterval(e)}}).then((e=>{e.dismiss===this.$swal.DismissReason.timer&&console.log("I was closed by the timer")}))}},computed:{...(0,K.L8)("login",["getLoginInfo","getIsChecked"]),receiverDisplay(){const e=this.receivers.length;if(0===e)return"";if(e<=3)return this.receivers.map((e=>e.user_name)).join(", ");{const s=this.receivers.slice(0,3).map((e=>e.user_name)).join(", ");return`${s} 외 ${e-3}명`}}},mounted(){this.getAllUsers()},created(){this.checkLoginInfo()}},O=t(6262);const V=(0,O.A)(J,[["render",T],["__scopeId","data-v-cf0bde56"]]);var W=V},2499:function(e,s,t){e.exports=t.p+"img/iphone.d3ce902e.png"}}]);
//# sourceMappingURL=6689.57160cc4.js.map
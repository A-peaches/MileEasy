"use strict";(self["webpackChunkmile"]=self["webpackChunkmile"]||[]).push([[4444],{4444:function(t,e,n){n.r(e),n.d(e,{default:function(){return R}});var a=n(641),r=n(33);const s=t=>((0,a.Qi)("data-v-6a84a943"),t=t(),(0,a.jt)(),t),i={class:"button-container"},o=s((()=>(0,a.Lk)("span",{class:"arrow"},"❮",-1))),c=s((()=>(0,a.Lk)("h2",{class:"bold-x-lg my-5",style:{"font-family":"KB_C3"}},"채택하기",-1))),l={style:{padding:"0 5%"}},u={class:"p-4 mt-5"},f={class:"d-flex justify-content-between align-items-center"},p={class:"lg p-3",style:{"text-align":"left","font-family":"KB_C2"}},d={style:{"font-size":"10pt"}},h={class:"p-2",style:{"justify-content":"space-between","align-items":"flex-start","background-color":"#f6f6f6"}},g={style:{display:"flex","justify-content":"space-between"}},k={class:"king",style:{width:"48%"}},m=s((()=>(0,a.Lk)("div",{class:"KB_C1 title",style:{"font-size":"20pt","margin-top":"30px"}}," 마왕 TOP 5 ",-1))),v=s((()=>(0,a.Lk)("br",null,null,-1))),y={class:"text-center mx-auto",style:{width:"80%"}},L={class:"KB_S1 text-center"},b={class:"item-rank"},w={class:"item-name"},x={class:"item-score"},j={class:"jump",style:{width:"48%"}},_=s((()=>(0,a.Lk)("div",{class:"KB_C1 title",style:{"font-size":"20pt","margin-top":"30px"}}," Jump UP TOP 5 ",-1))),D=s((()=>(0,a.Lk)("br",null,null,-1))),O={class:"text-center mx-auto",style:{width:"80%"}},C={class:"KB_S1 text-center"},P={class:"item-rank"},E={class:"item-name"},T={class:"item-score"},B={style:{padding:"0 5%"}},M={class:"p-4 mt-5"},S=s((()=>(0,a.Lk)("div",{class:"d-flex justify-content-between align-items-center"},[(0,a.Lk)("h3",{class:"lg p-3",style:{"text-align":"left","font-family":"KB_C2"}}," 문서 업데이트 현황 ")],-1))),A={class:"p-2",style:{"justify-content":"space-between","align-items":"flex-start","background-color":"#f6f6f6"}},K={class:"styled-table"},U=s((()=>(0,a.Lk)("thead",null,[(0,a.Lk)("tr",null,[(0,a.Lk)("th",null,"마일리지"),(0,a.Lk)("th",null,"최종 업데이트")])],-1))),I={class:"btn-container"};function F(t,e,n,s,F,X){return(0,a.uX)(),(0,a.CE)("div",{class:"cards page-back mx-auto",style:(0,r.Tr)({height:t.computedHeight})},[(0,a.Lk)("div",i,[(0,a.Lk)("button",{class:"back-button",onClick:e[0]||(e[0]=(...t)=>X.goBack&&X.goBack(...t))},[o,(0,a.eW)(" 이전 ")])]),c,(0,a.Lk)("div",l,[(0,a.Lk)("div",u,[(0,a.Lk)("div",f,[(0,a.Lk)("h3",p,[(0,a.eW)(" TOP 상위 리스트 "),(0,a.Lk)("span",d," (최근 업데이트 : "+(0,r.v_)(F.baseDate)+") ",1)])]),(0,a.Lk)("div",h,[(0,a.Lk)("div",g,[(0,a.Lk)("div",k,[m,v,(0,a.Lk)("div",y,[(0,a.Lk)("div",L,[((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(F.kingTop5,((t,e)=>((0,a.uX)(),(0,a.CE)("div",{key:e,class:(0,r.C4)([{top1:0===e},"top-item"])},[(0,a.Lk)("div",b,(0,r.v_)(t.ranking)+"등",1),(0,a.Lk)("div",w,(0,r.v_)(t.user_name),1),(0,a.Lk)("div",x,(0,r.v_)(t.total_score),1)],2)))),128))])])]),(0,a.Lk)("div",j,[_,D,(0,a.Lk)("div",O,[(0,a.Lk)("div",C,[((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(F.jumpTop5,((t,e)=>((0,a.uX)(),(0,a.CE)("div",{key:e,class:(0,r.C4)([{top1:0===e},"top-item"])},[(0,a.Lk)("div",P,(0,r.v_)(t.ranking)+"등",1),(0,a.Lk)("div",E,(0,r.v_)(t.user_name),1),(0,a.Lk)("div",T,(0,r.v_)(t.score_increase),1)],2)))),128))])])])])])])]),(0,a.Lk)("div",B,[(0,a.Lk)("div",M,[S,(0,a.Lk)("div",A,[(0,a.Lk)("table",K,[U,(0,a.Lk)("tbody",null,[((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(F.mileageLabels,((t,e)=>((0,a.uX)(),(0,a.CE)("tr",{key:e},[(0,a.Lk)("td",null,(0,r.v_)(t),1),(0,a.Lk)("td",null,(0,r.v_)(F.dates[e]||"-"),1)])))),128))])])])])]),(0,a.Lk)("div",I,[(0,a.Lk)("button",{class:"btn-yellow KB_S4",onClick:e[1]||(e[1]=(...t)=>X.checkValidDates&&X.checkValidDates(...t))}," 채택하기 ")])],4)}n(4114),n(4603),n(7566),n(8721);var X=n(7682),z=n(8465),V=n.n(z),$={name:"KingPickView",data(){return{kingTop5:[],jumpTop5:[],baseDate:"",mileageLabels:[],dates:[],kingUserList:[],jumpUserList:[]}},async mounted(){await this.kingData(),await this.jumpData(),await this.fetchMileageLabels(),await this.lastUpdate()},methods:{async kingData(){try{const t=await X.A.get("/mileage/kingDataSelect");console.log("kingDataSelect top5:",t.data),this.baseDate=t.data.length?t.data[0].base_date:"",this.kingTop5=t.data.slice(0,5);const e=t.data.sort(((t,e)=>e.score-t.score));let n=1,a=e[0].score;const r=[];for(const s of e){if(s.score!==a&&(n++,a=s.score),n>3)break;r.push(s.user_no)}this.kingUserList=r}catch(t){console.error("kingDataSelect top5:",t),this.kingTop5=[],this.kingUserList=[]}},async jumpData(){try{const t=await X.A.get("/mileage/jumpDataSelect");console.log("점프업 top5:",t.data),this.jumpTop5=t.data.slice(0,5);const e=t.data.sort(((t,e)=>e.score-t.score));let n=1,a=e[0].score;const r=[];for(const s of e){if(s.score!==a&&(n++,a=s.score),n>3)break;r.push(s.user_no)}this.jumpUserList=r}catch(t){console.error("점프업 top5:",t),this.jumpTop5=[],this.jumpUserList=[]}},async fetchMileageLabels(){try{const t=await X.A.get("/mileage/getMileage");this.mileageLabels=t.data.map((t=>t.mile_name)),this.dates=new Array(this.mileageLabels.length).fill("-")}catch(t){console.error("Error fetching mileage labels:",t),this.mileageLabels=[],this.dates=[]}},async lastUpdate(){try{const t=await X.A.get("/admin/lastUpdate");console.log("날짜 데이터",t.data),this.dates=t.data.map((t=>t.date||"-"))}catch(t){console.error("Error fetching last update dates:",t),this.dates=new Array(this.mileageLabels.length).fill("-")}},isLastDayOfPreviousMonth(t){if(!t||"-"===t)return!1;const e=new Date(t),n=new Date,a=new Date(n.getFullYear(),n.getMonth(),1),r=new Date(a-1);return e.getFullYear()===r.getFullYear()&&e.getMonth()===r.getMonth()&&e.getDate()===r.getDate()},checkValidDates(){const t=this.dates.map(((t,e)=>({date:t,index:e}))).filter((({date:t})=>"-"===t||!this.isLastDayOfPreviousMonth(t)));if(t.length>0){const e=t.map((({index:t})=>`${this.mileageLabels[t]} (${"-"===this.dates[t]?"날짜 없음":this.dates[t]})`)).join("<br>");V().fire({icon:"warning",title:"업데이트 날짜 오류",html:`\n        <div>최종 업데이트 날짜가 말일이 아닌 것이 있습니다.</div>\n        <div class="swal-dates-list" style="color: red;">${e}</div>\n      `,confirmButtonText:"확인",heightAuto:!0,scrollbarPadding:!1,customClass:{container:"my-swal-container",content:"my-swal-content"}})}else this.pickBadge()},async pickBadge(){try{const t=new URLSearchParams;this.kingUserList.forEach((e=>t.append("king",e))),this.jumpUserList.forEach((e=>t.append("jump",e)));const e=await X.A.post(`/admin/pickBadge?${t.toString()}`);console.log("Response:",e.data),V().fire({icon:"success",title:"채택완료",text:"성공적으로 완료되었습니다",scrollbarPadding:!1})}catch(t){console.error("Error picking badge:",t)}},goBack(){this.$router.go(-1)}}},Y=n(6262);const N=(0,Y.A)($,[["render",F],["__scopeId","data-v-6a84a943"]]);var R=N},9617:function(t,e,n){var a=n(5397),r=n(5610),s=n(6198),i=function(t){return function(e,n,i){var o=a(e),c=s(o);if(0===c)return!t&&-1;var l,u=r(i,c);if(t&&n!==n){while(c>u)if(l=o[u++],l!==l)return!0}else for(;c>u;u++)if((t||u in o)&&o[u]===n)return t||u||0;return!t&&-1}};t.exports={includes:i(!0),indexOf:i(!1)}},4527:function(t,e,n){var a=n(3724),r=n(4376),s=TypeError,i=Object.getOwnPropertyDescriptor,o=a&&!function(){if(void 0!==this)return!0;try{Object.defineProperty([],"length",{writable:!1}).length=1}catch(t){return t instanceof TypeError}}();t.exports=o?function(t,e){if(r(t)&&!i(t,"length").writable)throw new s("Cannot set read only .length");return t.length=e}:function(t,e){return t.length=e}},7740:function(t,e,n){var a=n(9297),r=n(5031),s=n(7347),i=n(4913);t.exports=function(t,e,n){for(var o=r(e),c=i.f,l=s.f,u=0;u<o.length;u++){var f=o[u];a(t,f)||n&&a(n,f)||c(t,f,l(e,f))}}},6837:function(t){var e=TypeError,n=9007199254740991;t.exports=function(t){if(t>n)throw e("Maximum allowed index exceeded");return t}},8727:function(t){t.exports=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"]},6518:function(t,e,n){var a=n(4475),r=n(7347).f,s=n(6699),i=n(6840),o=n(9433),c=n(7740),l=n(2796);t.exports=function(t,e){var n,u,f,p,d,h,g=t.target,k=t.global,m=t.stat;if(u=k?a:m?a[g]||o(g,{}):a[g]&&a[g].prototype,u)for(f in e){if(d=e[f],t.dontCallGetSet?(h=r(u,f),p=h&&h.value):p=u[f],n=l(k?f:g+(m?".":"#")+f,t.forced),!n&&void 0!==p){if(typeof d==typeof p)continue;c(d,p)}(t.sham||p&&p.sham)&&s(d,"sham",!0),i(u,f,d,t)}}},7055:function(t,e,n){var a=n(9504),r=n(9039),s=n(4576),i=Object,o=a("".split);t.exports=r((function(){return!i("z").propertyIsEnumerable(0)}))?function(t){return"String"===s(t)?o(t,""):i(t)}:i},4376:function(t,e,n){var a=n(4576);t.exports=Array.isArray||function(t){return"Array"===a(t)}},2796:function(t,e,n){var a=n(9039),r=n(4901),s=/#|\.prototype\./,i=function(t,e){var n=c[o(t)];return n===u||n!==l&&(r(e)?a(e):!!e)},o=i.normalize=function(t){return String(t).replace(s,".").toLowerCase()},c=i.data={},l=i.NATIVE="N",u=i.POLYFILL="P";t.exports=i},6198:function(t,e,n){var a=n(8014);t.exports=function(t){return a(t.length)}},741:function(t){var e=Math.ceil,n=Math.floor;t.exports=Math.trunc||function(t){var a=+t;return(a>0?n:e)(a)}},7347:function(t,e,n){var a=n(3724),r=n(9565),s=n(8773),i=n(6980),o=n(5397),c=n(6969),l=n(9297),u=n(5917),f=Object.getOwnPropertyDescriptor;e.f=a?f:function(t,e){if(t=o(t),e=c(e),u)try{return f(t,e)}catch(n){}if(l(t,e))return i(!r(s.f,t,e),t[e])}},8480:function(t,e,n){var a=n(1828),r=n(8727),s=r.concat("length","prototype");e.f=Object.getOwnPropertyNames||function(t){return a(t,s)}},3717:function(t,e){e.f=Object.getOwnPropertySymbols},1828:function(t,e,n){var a=n(9504),r=n(9297),s=n(5397),i=n(9617).indexOf,o=n(421),c=a([].push);t.exports=function(t,e){var n,a=s(t),l=0,u=[];for(n in a)!r(o,n)&&r(a,n)&&c(u,n);while(e.length>l)r(a,n=e[l++])&&(~i(u,n)||c(u,n));return u}},8773:function(t,e){var n={}.propertyIsEnumerable,a=Object.getOwnPropertyDescriptor,r=a&&!n.call({1:2},1);e.f=r?function(t){var e=a(this,t);return!!e&&e.enumerable}:n},5031:function(t,e,n){var a=n(7751),r=n(9504),s=n(8480),i=n(3717),o=n(8551),c=r([].concat);t.exports=a("Reflect","ownKeys")||function(t){var e=s.f(o(t)),n=i.f;return n?c(e,n(t)):e}},5610:function(t,e,n){var a=n(1291),r=Math.max,s=Math.min;t.exports=function(t,e){var n=a(t);return n<0?r(n+e,0):s(n,e)}},5397:function(t,e,n){var a=n(7055),r=n(7750);t.exports=function(t){return a(r(t))}},1291:function(t,e,n){var a=n(741);t.exports=function(t){var e=+t;return e!==e||0===e?0:a(e)}},8014:function(t,e,n){var a=n(1291),r=Math.min;t.exports=function(t){var e=a(t);return e>0?r(e,9007199254740991):0}},4114:function(t,e,n){var a=n(6518),r=n(8981),s=n(6198),i=n(4527),o=n(6837),c=n(9039),l=c((function(){return 4294967297!==[].push.call({length:4294967296},1)})),u=function(){try{Object.defineProperty([],"length",{writable:!1}).push()}catch(t){return t instanceof TypeError}},f=l||!u();a({target:"Array",proto:!0,arity:1,forced:f},{push:function(t){var e=r(this),n=s(e),a=arguments.length;o(n+a);for(var c=0;c<a;c++)e[n]=arguments[c],n++;return i(e,n),n}})}}]);
//# sourceMappingURL=4444.c3c94ef1.js.map
"use strict";(self["webpackChunkmile"]=self["webpackChunkmile"]||[]).push([[1947],{1947:function(e,t,i){i.r(t),i.d(t,{default:function(){return Ae}});var s=i(641),l=i(33);const a=e=>((0,s.Qi)("data-v-32aa4d05"),e=e(),(0,s.jt)(),e),n={class:"cards page-back mx-auto"},r=a((()=>(0,s.Lk)("h2",{class:"bold-x-lg my-5",style:{"font-family":"KB_C3"}},"M-Tip 관리",-1))),c={class:"input-base input-search d-flex justify-content-center mx-auto my-3",style:{width:"500px",background:"#ebebeb"}};function o(e,t,i,a,o,u){const d=(0,s.g2)("MTipGuideList"),g=(0,s.g2)("MTipList");return(0,s.uX)(),(0,s.CE)("div",n,[r,(0,s.Lk)("div",null,[(0,s.Lk)("div",c,[(0,s.Lk)("button",{class:(0,l.C4)(["tab-container lg2 fw-bold",{active:o.isModifyActive}]),onClick:t[0]||(t[0]=(...e)=>u.showModify&&u.showModify(...e))}," 가이드 관리 ",2),(0,s.Lk)("button",{class:(0,l.C4)(["tab-container lg2 fw-bold",{active:!o.isModifyActive}]),onClick:t[1]||(t[1]=(...e)=>u.showCoding&&u.showCoding(...e))}," 게시글 관리 ",2)]),o.isModifyActive?((0,s.uX)(),(0,s.Wv)(d,{key:0})):(0,s.Q3)("",!0),o.isModifyActive?(0,s.Q3)("",!0):((0,s.uX)(),(0,s.Wv)(g,{key:1}))])])}var u=i(6278),d=i(3751);const g=e=>((0,s.Qi)("data-v-1e97f984"),e=e(),(0,s.jt)(),e),p={class:"notice-count-container"},h={class:"notice-count"},m={class:"radio-container"},k=g((()=>(0,s.Lk)("span",{class:"custom-radio"},null,-1))),L=g((()=>(0,s.Lk)("span",{class:"radio-label"},"최신순",-1))),v={class:"radio-container"},y=g((()=>(0,s.Lk)("span",{class:"custom-radio"},null,-1))),_=g((()=>(0,s.Lk)("span",{class:"radio-label"},"과거순",-1))),f=g((()=>(0,s.Lk)("i",{class:"bi bi-pencil",style:{"margin-right":"10px"}},null,-1))),C={class:"search-container"},b=g((()=>(0,s.Lk)("i",{class:"bi bi-search"},null,-1))),F=[b],P={style:{"text-align":"center","justify-content":"center"}},w={class:"notice-list",style:{"text-align":"center"}},q={key:0,class:"no-results"},x=["onClick"],M={class:"notice-details"},I={class:"notice-new"},N={class:"notice-num"},T={class:"notice-title"},X={class:"notice-date"},Q={class:"notice-mile"},A=g((()=>(0,s.Lk)("i",{class:"bi bi-eye"},null,-1))),E={class:"pagination"},D=["onClick"];function W(e,t,i,a,n,r){return(0,s.uX)(),(0,s.CE)(s.FK,null,[(0,s.Lk)("div",p,[(0,s.Lk)("div",h,"총 "+(0,l.v_)(r.filteredNotices.length)+"건",1),(0,s.Lk)("label",m,[(0,s.bo)((0,s.Lk)("input",{type:"radio",name:"status",value:"newest","onUpdate:modelValue":t[0]||(t[0]=e=>n.selectedFilter=e),onChange:t[1]||(t[1]=(...e)=>r.applyFilters&&r.applyFilters(...e))},null,544),[[d.XL,n.selectedFilter]]),k,L]),(0,s.Lk)("label",v,[(0,s.bo)((0,s.Lk)("input",{type:"radio",name:"status",value:"oldest","onUpdate:modelValue":t[2]||(t[2]=e=>n.selectedFilter=e),onChange:t[3]||(t[3]=(...e)=>r.applyFilters&&r.applyFilters(...e))},null,544),[[d.XL,n.selectedFilter]]),y,_])]),(0,s.Lk)("div",null,[(0,s.Lk)("button",{class:"write-button",onClick:t[4]||(t[4]=(...e)=>r.goToWritePage&&r.goToWritePage(...e))},[f,(0,s.eW)(" 글작성 ")])]),(0,s.Lk)("div",C,[(0,s.bo)((0,s.Lk)("input",{type:"text","onUpdate:modelValue":t[5]||(t[5]=e=>n.searchQuery=e),placeholder:"제목 및 내용을 검색하세요",class:"input-search"},null,512),[[d.Jo,n.searchQuery]]),(0,s.Lk)("button",{class:"search-button",onClick:t[6]||(t[6]=(...e)=>r.applyFilters&&r.applyFilters(...e))},F)]),(0,s.Lk)("div",P,[(0,s.Lk)("div",w,[0===r.paginatedNotices.length?((0,s.uX)(),(0,s.CE)("div",q," 검색 결과가 없습니다. ")):((0,s.uX)(!0),(0,s.CE)(s.FK,{key:1},(0,s.pI)(r.paginatedNotices,((e,t)=>((0,s.uX)(),(0,s.CE)("div",{key:t},[(0,s.Lk)("div",{class:"input-base list-wrapper",onClick:t=>r.toggleDetails(e.mtip_guide_no)},[(0,s.Lk)("div",M,[(0,s.Lk)("div",I,(0,l.v_)(t+1),1),(0,s.Lk)("div",N,(0,l.v_)(e.user_no)+"("+(0,l.v_)(e.user_name)+") ",1),(0,s.Lk)("div",T,(0,l.v_)(e.mtip_guide_title),1),(0,s.Lk)("div",X,(0,l.v_)(r.formatDate(e.mtip_guide_date)),1),(0,s.Lk)("div",Q,[A,(0,s.eW)(" "+(0,l.v_)(e.mtip_guide_hit),1)])])],8,x)])))),128))])]),(0,s.Lk)("div",E,[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(r.totalPages,(e=>((0,s.uX)(),(0,s.CE)("button",{key:e,onClick:t=>n.currentPage=e,class:(0,l.C4)({active:n.currentPage===e})},(0,l.v_)(e),11,D)))),128))])],64)}i(4114);var G=i(7682),R={data(){return{mTipGuideList:[],searchQuery:"",currentPage:1,itemsPerPage:10,selectedFilter:"newest",selectedNotice:null}},computed:{...(0,u.L8)("login",["getLoginInfo","getIsChecked"]),loginInfo(){return this.getLoginInfo},isChecked(){return this.getIsChecked},filteredNotices(){let e=this.mTipGuideList;return this.searchQuery&&(e=e.filter((e=>{const t=e.mtip_guide_title||"",i=e.mtip_guide_content||"";return t.includes(this.searchQuery)||i.includes(this.searchQuery)}))),"oldest"===this.selectedFilter?e.sort(((e,t)=>new Date(e.mtip_guide_date)-new Date(t.mtip_guide_date))):e.sort(((e,t)=>new Date(t.mtip_guide_date)-new Date(e.mtip_guide_date))),e},paginatedNotices(){const e=(this.currentPage-1)*this.itemsPerPage,t=e+this.itemsPerPage;return this.filteredNotices.slice(e,t)},totalPages(){return Math.ceil(this.filteredNotices.length/this.itemsPerPage)}},methods:{goToWritePage(){this.$router.push("/mTipWrite")},async fetchRequestList(){try{const e=await G.A.post("/notice/mTipGuideList",null);console.log("가져온 엔팀",e.data),this.mTipGuideList=e.data}catch(e){console.error("문제",e),this.mTipGuideList=[]}},applyFilters(){this.currentPage=1},toggleDetails(e){this.$router.push({name:"mTipGuideDetail",params:{mtipGuideNo:e}})},formatDate(e){const t=new Date(e),i=t.getFullYear(),s=String(t.getMonth()+1).padStart(2,"0"),l=String(t.getDate()).padStart(2,"0");return`${i}-${s}-${l}`}},mounted(){this.fetchRequestList()}},j=i(6262);const B=(0,j.A)(R,[["render",W],["__scopeId","data-v-1e97f984"]]);var K=B;const S=e=>((0,s.Qi)("data-v-48424dd1"),e=e(),(0,s.jt)(),e),U={class:"app-container"},V={class:"content cards"},$={class:"notice-count-container"},z={class:"notice-count"},J={class:"radio-container"},Y=S((()=>(0,s.Lk)("span",{class:"custom-radio"},null,-1))),H=S((()=>(0,s.Lk)("span",{class:"radio-label"},"최신순",-1))),O={class:"radio-container"},Z=S((()=>(0,s.Lk)("span",{class:"custom-radio"},null,-1))),ee=S((()=>(0,s.Lk)("span",{class:"radio-label"},"과거순",-1))),te=S((()=>(0,s.Lk)("div",null,null,-1))),ie={class:"search-container"},se=S((()=>(0,s.Lk)("i",{class:"bi bi-search"},null,-1))),le=[se],ae={style:{"text-align":"center","justify-content":"center"}},ne={class:"notice-list",style:{"text-align":"center"}},re={key:0,class:"no-results"},ce=["onClick"],oe={class:"notice-details"},ue={class:"notice-new"},de={class:"notice-num"},ge={class:"notice-title"},pe={class:"notice-mile"},he={class:"notice-date"},me={key:0,class:"notice-details-expanded"},ke=S((()=>(0,s.Lk)("p",{style:{"text-align":"left","font-size":"15pt"},class:"KB_S3 mt-3 ml-3"}," 요청사항 ",-1))),Le=S((()=>(0,s.Lk)("hr",null,null,-1))),ve={style:{"text-align":"left"},class:"ml-3"},ye={style:{"text-align":"left"},class:"ml-3"},_e={style:{"text-align":"left"},class:"ml-3"},fe={style:{"text-align":"left"},class:"ml-3"},Ce={key:0,style:{"text-align":"right","margin-right":"10px"}},be=S((()=>(0,s.Lk)("i",{class:"bi bi-trash-fill",style:{color:"gray","font-size":"larger"}},null,-1))),Fe=["onClick"],Pe={class:"pagination"},we=["onClick"];function qe(e,t,i,a,n,r){return(0,s.uX)(),(0,s.CE)("div",U,[(0,s.Lk)("div",V,[(0,s.Lk)("div",$,[(0,s.Lk)("div",z,"총 "+(0,l.v_)(r.filteredNotices.length)+"건",1),(0,s.Lk)("label",J,[(0,s.bo)((0,s.Lk)("input",{type:"radio",name:"status",value:"all","onUpdate:modelValue":t[0]||(t[0]=e=>n.selectedFilter=e),onChange:t[1]||(t[1]=(...e)=>r.applyFilters&&r.applyFilters(...e))},null,544),[[d.XL,n.selectedFilter]]),Y,H]),(0,s.Lk)("label",O,[(0,s.bo)((0,s.Lk)("input",{type:"radio",name:"status",value:"processing","onUpdate:modelValue":t[2]||(t[2]=e=>n.selectedFilter=e),onChange:t[3]||(t[3]=(...e)=>r.applyFilters&&r.applyFilters(...e))},null,544),[[d.XL,n.selectedFilter]]),Z,ee])]),te,(0,s.Lk)("div",ie,[(0,s.bo)((0,s.Lk)("input",{type:"text","onUpdate:modelValue":t[4]||(t[4]=e=>n.searchQuery=e),placeholder:"제목 및 내용을 검색하세요",class:"input-search"},null,512),[[d.Jo,n.searchQuery]]),(0,s.Lk)("button",{class:"search-button",onClick:t[5]||(t[5]=(...e)=>r.applyFilters&&r.applyFilters(...e))},le)]),(0,s.Lk)("div",ae,[(0,s.Lk)("div",ne,[0===r.paginatedNotices.length?((0,s.uX)(),(0,s.CE)("div",re," 검색 결과가 없습니다. ")):((0,s.uX)(!0),(0,s.CE)(s.FK,{key:1},(0,s.pI)(r.paginatedNotices,((e,t)=>((0,s.uX)(),(0,s.CE)("div",{key:t},[(0,s.Lk)("div",{class:"input-base list-wrapper",onClick:e=>r.toggleDetails(t)},[(0,s.Lk)("div",oe,[(0,s.Lk)("div",ue,(0,l.v_)(t+1),1),(0,s.Lk)("div",de,(0,l.v_)(r.getRequestType(e.request)),1),(0,s.Lk)("div",ge,(0,l.v_)(e.request_mile_name||e.mile_name),1),(0,s.Lk)("div",pe,(0,l.v_)(r.getStatus(e.request_status)),1),(0,s.Lk)("div",he,(0,l.v_)(e.mileage_request_date),1)])],8,ce),n.selectedNotice===t?((0,s.uX)(),(0,s.CE)("div",me,[ke,Le,(0,s.Lk)("p",ve," 마일리지 이름 : "+(0,l.v_)(e.request_mile_name||e.mile_name),1),(0,s.Lk)("p",ye," 연간 최고 한도 : "+(0,l.v_)(e.request_mil_max),1),(0,s.Lk)("p",_e," 담당자 : "+(0,l.v_)(e.request_admin),1),(0,s.Lk)("p",fe," 기타요청: "+(0,l.v_)(e.request_etc),1),0===e.request_status?((0,s.uX)(),(0,s.CE)("div",Ce,[be,(0,s.Lk)("span",{style:{color:"gray","font-size":"larger"},onClick:t=>r.deleteRequest(e.mileage_request_no)},"삭제",8,Fe)])):(0,s.Q3)("",!0)])):(0,s.Q3)("",!0)])))),128))])]),(0,s.Lk)("div",Pe,[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(r.totalPages,(e=>((0,s.uX)(),(0,s.CE)("button",{key:e,onClick:t=>n.currentPage=e,class:(0,l.C4)({active:n.currentPage===e})},(0,l.v_)(e),11,we)))),128))])])])}var xe=i(8465),Me=i.n(xe),Ie={data(){return{requestList:[],searchQuery:"",currentPage:1,itemsPerPage:10,selectedFilter:"all",selectedNotice:null}},computed:{...(0,u.L8)("login",["getLoginInfo","getIsChecked"]),loginInfo(){return this.getLoginInfo},isChecked(){return this.getIsChecked},filteredNotices(){let e=this.requestList;return this.searchQuery&&(e=e.filter((e=>e.mile_name.includes(this.searchQuery)||e.request_mile_name&&e.request_mile_name.includes(this.searchQuery)))),"all"===this.selectedFilter?e:e.filter((e=>{const t=e.request_status;return"processing"===this.selectedFilter&&0===t||"completed"===this.selectedFilter&&1===t||"rejected"===this.selectedFilter&&2===t||"false"===this.selectedFilter&&3===t}))},paginatedNotices(){const e=(this.currentPage-1)*this.itemsPerPage,t=e+this.itemsPerPage;return this.filteredNotices.slice(e,t)},totalPages(){return Math.ceil(this.filteredNotices.length/this.itemsPerPage)}},methods:{goToWritePage(){this.$router.push("/mileageRequestWrite")},async fetchRequestList(){try{const e=await G.A.post("/user/requestList",null,{params:{user_no:this.getLoginInfo.user_no}});this.requestList=e.data}catch(e){console.error("문제",e),this.requestList=[]}},async deleteRequest(e){const t=await Me().fire({title:"삭제 확인",text:"정말로 요청을 삭제하시겠습니까?",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"삭제",cancelButtonText:"취소"});if(t.isConfirmed)try{const t=await G.A.post("/user/requestListDelete",null,{params:{mileage_request_no:e}});console.log(t.data),Me().fire("삭제 완료","요청이 삭제되었습니다.","success").then((()=>{window.location.reload()}))}catch(i){console.error("문제",i),Me().fire("오류","요청 삭제에 실패했습니다.","error")}},getRequestType(e){return 1===e?"추가":2===e?"수정":3===e?"삭제":""},getStatus(e){return 0===e?"접수요청":1===e?"접수완료":2===e?"승인완료":3===e?"승인거절":""},applyFilters(){this.currentPage=1},toggleDetails(e){this.selectedNotice===e?this.selectedNotice=null:this.selectedNotice=e}},mounted(){this.fetchRequestList()}};const Ne=(0,j.A)(Ie,[["render",qe],["__scopeId","data-v-48424dd1"]]);var Te=Ne,Xe={name:"mTipMainAdmin",components:{MTipGuideList:K,MTipList:Te},data(){return{isModifyActive:!0}},computed:{...(0,u.L8)("login",["getLoginInfo"]),...(0,u.L8)("mileage",["getArrayMileage"]),...(0,u.L8)(""),loginInfo(){return this.getLoginInfo},mileageLabel(){return this.getArrayMileage}},methods:{...(0,u.i0)("mileage",["getMileage"]),showModify(){this.isModifyActive=!0},showCoding(){this.isModifyActive=!1}},mounted(){this.getMileage()}};const Qe=(0,j.A)(Xe,[["render",o],["__scopeId","data-v-32aa4d05"]]);var Ae=Qe}}]);
//# sourceMappingURL=1947.b2582ca6.js.map
"use strict";(self["webpackChunkmile"]=self["webpackChunkmile"]||[]).push([[6795],{6795:function(e,t,s){s.r(t),s.d(t,{default:function(){return W}});var i=s(641),n=s(33),a=s(3751);const o=e=>((0,i.Qi)("data-v-0d7f8683"),e=e(),(0,i.jt)(),e),l=o((()=>(0,i.Lk)("h2",{class:"bold-x-lg mt-5 mb-4",style:{"font-family":"KB_C3"}},[(0,i.eW)(" 문서모아 "),(0,i.Lk)("hr",{style:{width:"13%",border:"0",height:"2px",background:"black"},class:"mx-auto"})],-1))),c={class:"category-button list-wrapper",style:{width:"10vw"}},r={key:0,class:"dropdown-menu",ref:"dropdownMenu"},u={class:"menu-items"},d=["onClick"],g={class:"d-flex justify-content-between align-items-center"},h={class:"lg2",style:{padding:"3em"}},m={class:"input-search input-base",style:{"margin-right":"2em",width:"17vw",height:"6vh"}},f={class:"d-flex justify-content-between align-items-center",style:{"font-size":"14pt",height:"100%","margin-left":"1em"}},p=o((()=>(0,i.Lk)("button",null,[(0,i.Lk)("i",{class:"bi bi-search mr-2",style:{"font-size":"25px",color:"#4b4a4a"}})],-1))),y={key:0,class:"pr-5 pl-5 pb-5 pt-2",style:{"margin-top":"8vh"}},k={class:"d-flex align-items-center justify-content-between"},w={style:{width:"90%","text-align":"left"}},C={class:"d-flex align-items-center justify-content-start"},b={key:0,style:{width:"5%","padding-left":"3%"}},D=o((()=>(0,i.Lk)("span",{class:"md",style:{color:"#edbb00","font-family":"'KB_C2'"}},"NEW",-1))),v=[D],L={class:"d-flex align-items-center justify-content-between",style:{width:"100%"}},P={class:"pl-4",style:{width:"20%","margin-left":"3%","text-align":"left","font-family":"'KB_C2'","font-size":"14pt",color:"#9c8480"}},_={class:"lg2",style:{width:"65%","margin-left":"3%","text-align":"center","font-family":"'KB_C2'"}},x={class:"md pl-3",style:{width:"15%","margin-right":"3%","text-align":"right","font-family":"'KB_C3'"}},E=["onClick"],M=o((()=>(0,i.Lk)("span",{class:"md",style:{"text-align":"right"}},"파일 다운로드 〉",-1))),I=[M],B={key:1,style:{"padding-top":"10vh"}},X=o((()=>(0,i.Lk)("p",{class:"lg2",style:{"text-align":"center",color:"#aeaeb2","font-family":"KB_C2"}}," 검색 결과가 없습니다. ",-1))),K=[X],Q={class:"pagination"},$=["disabled"],S=["onClick"],T=["disabled"];function j(e,t,s,o,D,M){return(0,i.uX)(),(0,i.CE)(i.FK,null,[(0,i.Lk)("div",{class:"cards page-back mx-auto",style:(0,n.Tr)({height:M.computedHeight})},[l,(0,i.Lk)("div",{onClick:t[1]||(t[1]=(0,a.D$)(((...e)=>M.toggleCategory&&M.toggleCategory(...e)),["stop"])),class:"QnA",ref:"categoryButton"},[(0,i.Lk)("div",c,(0,n.v_)(D.selectedCategory?D.selectedCategory:"카테고리"),1),D.showCategory?((0,i.uX)(),(0,i.CE)("div",r,[(0,i.Lk)("div",u,[(0,i.Lk)("a",{class:"dropdown-item",onClick:t[0]||(t[0]=e=>M.filterByCategory(null))},"전체"),((0,i.uX)(!0),(0,i.CE)(i.FK,null,(0,i.pI)(D.mileages,(e=>((0,i.uX)(),(0,i.CE)("a",{class:"dropdown-item",key:e.mile_no,onClick:t=>M.filterByCategory(e.mile_name)},(0,n.v_)(e.mile_name)+" 마일리지 ",9,d)))),128))])],512)):(0,i.Q3)("",!0)],512)],4),(0,i.Lk)("div",g,[(0,i.Lk)("div",h,"총 "+(0,n.v_)(D.countList)+"건",1),(0,i.Lk)("div",m,[(0,i.Lk)("div",f,[(0,i.bo)((0,i.Lk)("input",{type:"text","onUpdate:modelValue":t[2]||(t[2]=e=>D.searchQuery=e),onInput:t[3]||(t[3]=(...e)=>M.onSearch&&M.onSearch(...e)),placeholder:"검색어를 입력하세요",class:"w-100 h-100 d-inline-block",style:{"text-align":"left"}},null,544),[[a.Jo,D.searchQuery]]),p])]),M.filteredDocuments.length>0?((0,i.uX)(),(0,i.CE)("div",y,[((0,i.uX)(!0),(0,i.CE)(i.FK,null,(0,i.pI)(M.paginatedDocuments,(e=>((0,i.uX)(),(0,i.CE)("div",{key:e.documnet_mile_no,class:"mx-auto mb-4 border-bottom p-4 input-base input-white list-wrapper",style:{width:"95%",height:"5em","box-shadow":"0 4px 8px rgba(0, 0, 0, 0.2)","background-color":"#fbfbfb"}},[(0,i.Lk)("div",k,[(0,i.Lk)("button",w,[(0,i.Lk)("div",C,[M.isNew(e.document_date)?((0,i.uX)(),(0,i.CE)("div",b,v)):(0,i.Q3)("",!0),(0,i.Lk)("div",L,[(0,i.Lk)("span",P,(0,n.v_)(e.mile_name),1),(0,i.Lk)("span",_,(0,n.v_)(e.document_file),1),(0,i.Lk)("span",x,(0,n.v_)(M.formatDate(e.document_date)),1)])])]),(0,i.Lk)("button",{onClick:(0,a.D$)((t=>M.downloadDocu(e.document_file)),["stop"])},I,8,E)])])))),128))])):((0,i.uX)(),(0,i.CE)("div",B,K)),(0,i.Lk)("div",Q,[(0,i.Lk)("button",{onClick:t[4]||(t[4]=(...e)=>M.prevPage&&M.prevPage(...e)),disabled:1===D.currentPage},"〈",8,$),((0,i.uX)(!0),(0,i.CE)(i.FK,null,(0,i.pI)(D.totalPages,(e=>((0,i.uX)(),(0,i.CE)("button",{key:e,onClick:t=>M.goToPage(e),class:(0,n.C4)({active:D.currentPage===e})},(0,n.v_)(e),11,S)))),128)),(0,i.Lk)("button",{onClick:t[5]||(t[5]=(...e)=>M.nextPage&&M.nextPage(...e)),disabled:D.currentPage===D.totalPages}," 〉 ",8,T)])])],64)}s(4114);var A=s(6278),H=s(7682),F=s(5093),Y=s.n(F),z={name:"DocumentsView",data(){return{mileages:[],baseHeight:90,increment:10,buttonHeight:10,searchQuery:"",currentPage:1,itemsPerPage:7,allDocuments:[],countList:0,lastInputTime:0,selectedCategory:"",showCategory:!1,totalPages:0}},computed:{...(0,A.L8)("login",["getLoginInfo"]),...(0,A.L8)("mileExcel",["getArrayMileDocument","getDocumentSum"]),computedHeight(){let e=this.baseHeight+this.paginatedDocuments.length*this.increment;return this.paginatedDocuments.length%this.itemsPerPage===0&&this.paginatedDocuments.length,e+=this.buttonHeight/2,`${e}vh`},documentSum(){return this.getDocumentSum},filteredDocuments(){let e=this.allDocuments;return this.selectedCategory&&"null"!==this.selectedCategory&&(e=e.filter((e=>e.mile_name===this.selectedCategory))),e.filter((e=>e.document_file.includes(this.searchQuery)))},paginatedDocuments(){return this.filteredDocuments.slice((this.currentPage-1)*this.itemsPerPage,this.currentPage*this.itemsPerPage)}},methods:{...(0,A.i0)("mile",["fetchMileInfo","getMileDetail"]),...(0,A.i0)("mileExcel",["downloadDocument"]),...(0,A.i0)("mileDocument",["fetchMileDocument"]),formatDate(e){return Y()(e).format("YYYY-MM-DD")},isNew(e){const t=Y()(e),s=Y()(),i=Y()().subtract(7,"days");return t.isBetween(i,s,null,"[]")},showAlert(e,t,s){this.$swal({title:e,icon:t,scrollbarPadding:!1}).then((e=>{e.isConfirmed&&("#"==s?location.reload():this.$router.push(s))}))},downloadDocu(e){this.downloadDocument({document_file:e})},async loadDocuments(){const e=await this.fetchMileDocument();this.allDocuments=e.data;const t=await H.A.get("http://localhost:8090/myMile/countListDocuments");this.countList=t.data,this.totalPages=Math.ceil(this.countList/this.itemsPerPage)},onSearch(){const e=Date.now(),t=e-this.lastInputTime;t>500&&(this.lastInputTime=e,this.loadDocuments())},async fetchMileages(){try{const e=await H.A.get("http://localhost:8090/notice/mileage");console.log("Fetched mileages:",e.data),this.mileages=e.data}catch(e){console.error("Error fetching mileages:",e.response?e.response.data:e.message)}},toggleCategory(){this.showCategory=!this.showCategory},closeDropdown(){this.showCategory=!1},handleClickOutside(e){this.$refs.dropdownMenu&&!this.$refs.dropdownMenu.contains(e.target)&&this.$refs.categoryButton&&!this.$refs.categoryButton.contains(e.target)&&this.closeDropdown()},filterByCategory(e){this.selectedCategory=null!==e?e:"",this.currentPage=1,this.loadDocuments()},prevPage(){this.currentPage>1&&(this.currentPage--,this.loadDocuments())},nextPage(){this.currentPage<this.totalPages&&(this.currentPage++,this.loadDocuments())},goToPage(e){this.currentPage=e,this.loadDocuments()}},created(){const e=this.getLoginInfo?this.getLoginInfo.user_no:null;e?this.fetchMileInfo(e):console.error("user_no이 유효하지 않습니다."),this.loadDocuments(),this.fetchMileages()},watch:{searchQuery(){this.lastInputTime=Date.now(),this.onSearch()}}},N=s(6262);const V=(0,N.A)(z,[["render",j],["__scopeId","data-v-0d7f8683"]]);var W=V}}]);
//# sourceMappingURL=6795.b2b0070d.js.map
"use strict";(self["webpackChunkmile"]=self["webpackChunkmile"]||[]).push([[4387],{4387:function(e,t,n){n.r(t),n.d(t,{default:function(){return G}});var o=n(641),i=n(3751),r=n(33);const s=e=>((0,o.Qi)("data-v-6f0ecf68"),e=e(),(0,o.jt)(),e),a={class:"app-container"},c=s((()=>(0,o.Lk)("div",null,[(0,o.Lk)("h2",null,"공지사항")],-1))),l=s((()=>(0,o.Lk)("div",{class:"category-button list-wrapper"},"카테고리",-1))),u={key:0,class:"dropdown-menu",ref:"dropdownMenu"},d={class:"menu-items"},h=["onClick"],g={class:"notice-count-container"},f={class:"notice-count"},p={class:"checkbox-container"},k=s((()=>(0,o.Lk)("span",{class:"custom-checkbox"},null,-1))),v=s((()=>(0,o.Lk)("span",{class:"checkbox-label"},"조회수",-1))),m={class:"checkbox-container"},y=s((()=>(0,o.Lk)("span",{class:"custom-checkbox"},null,-1))),_=s((()=>(0,o.Lk)("span",{class:"checkbox-label"},"최신순",-1))),w={key:0},C=s((()=>(0,o.Lk)("i",{class:"bi bi-pencil",style:{"margin-right":"10px"}},null,-1))),b={class:"search-container"},L=s((()=>(0,o.Lk)("i",{class:"bi bi-search"},null,-1))),P=[L],x={class:"notice-list"},D={key:0},I=["onClick"],S={class:"notice-details"},E={key:0,class:"notice-new"},B={key:1,class:"notice-num"},N={class:"notice-mile"},A={class:"notice-title"},X={class:"notice-date"},V=s((()=>(0,o.Lk)("i",{class:"bi bi-eye"},null,-1))),z={class:"notice-views"},Q=s((()=>(0,o.Lk)("i",{class:"fa fa-eye"},null,-1))),O={key:1},$=s((()=>(0,o.Lk)("p",null,"게시글이 없습니다.",-1))),M=[$],T={class:"pagination"},F=["disabled"],W=["onClick"],j=["disabled"];function K(e,t,n,s,L,$){return(0,o.uX)(),(0,o.CE)("div",a,[(0,o.Lk)("div",{class:"content cards",onClick:t[12]||(t[12]=(...t)=>e.handleClick&&e.handleClick(...t))},[c,(0,o.Lk)("div",{onClick:t[2]||(t[2]=(0,i.D$)(((...e)=>$.toggleCategory&&$.toggleCategory(...e)),["stop"])),class:"QnA",ref:"categoryButton"},[l,L.showCategory?((0,o.uX)(),(0,o.CE)("div",u,[(0,o.Lk)("div",d,[(0,o.Lk)("a",{class:"dropdown-item",onClick:t[0]||(t[0]=e=>$.filterByCategory(null))},"전체"),((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(L.mileages,(e=>((0,o.uX)(),(0,o.CE)("a",{class:"dropdown-item",key:e.mile_no,onClick:t=>$.filterByCategory(e.mile_name)},(0,r.v_)(e.mile_name)+" 마일리지 ",9,h)))),128)),(0,o.Lk)("a",{class:"dropdown-item",onClick:t[1]||(t[1]=e=>$.filterByCategory("기타"))},"기타")])],512)):(0,o.Q3)("",!0)],512),(0,o.Lk)("div",g,[(0,o.Lk)("div",f,"총 "+(0,r.v_)($.filteredNotices.length)+"건",1),(0,o.Lk)("label",p,[(0,o.bo)((0,o.Lk)("input",{type:"checkbox","onUpdate:modelValue":t[3]||(t[3]=e=>L.sortByViews=e),onChange:t[4]||(t[4]=e=>$.handleCheckboxChange("views"))},null,544),[[i.lH,L.sortByViews]]),k,v]),(0,o.Lk)("label",m,[(0,o.bo)((0,o.Lk)("input",{type:"checkbox","onUpdate:modelValue":t[5]||(t[5]=e=>L.sortByDateAsc=e),onChange:t[6]||(t[6]=e=>$.handleCheckboxChange("date"))},null,544),[[i.lH,L.sortByDateAsc]]),y,_])]),(0,o.Lk)("div",null,[$.isLoggedIn&&($.loginInfo.user_is_admin||$.loginInfo.user_is_manager)&&$.isChecked?((0,o.uX)(),(0,o.CE)("div",w,[(0,o.Lk)("button",{class:"write-button",onClick:t[7]||(t[7]=(...e)=>$.goToWritePage&&$.goToWritePage(...e))},[C,(0,o.eW)(" 글작성 ")])])):(0,o.Q3)("",!0)]),(0,o.Lk)("div",b,[(0,o.bo)((0,o.Lk)("input",{type:"text","onUpdate:modelValue":t[8]||(t[8]=e=>L.searchQuery=e),placeholder:"제목 및 내용을 검색하세요",class:"input-search"},null,512),[[i.Jo,L.searchQuery]]),(0,o.Lk)("button",{class:"search-button",onClick:t[9]||(t[9]=(...e)=>$.searchNotices&&$.searchNotices(...e))},P)]),(0,o.Lk)("div",x,[$.paginatedNotices.length?((0,o.uX)(),(0,o.CE)("div",D,[((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)($.paginatedNotices,(e=>((0,o.uX)(),(0,o.CE)("div",{class:"input-base list-wrapper",key:e.notice_board_no,onClick:t=>$.handleNoticeClick(e)},[(0,o.Lk)("div",S,[e.is_new?((0,o.uX)(),(0,o.CE)("div",E,(0,r.v_)(e.display_num),1)):((0,o.uX)(),(0,o.CE)("div",B,(0,r.v_)(e.display_num),1)),(0,o.Lk)("div",N,(0,r.v_)(e.mile_name?e.mile_name+" 마일리지":"기타"),1),(0,o.Lk)("div",A,(0,r.v_)(e.notice_board_title),1),(0,o.Lk)("pre",X,(0,r.v_)($.formatDate(e.notice_board_date)),1),V,(0,o.Lk)("div",z,[(0,o.eW)((0,r.v_)(e.notice_board_hit)+" ",1),Q])])],8,I)))),128))])):((0,o.uX)(),(0,o.CE)("div",O,M))]),(0,o.Lk)("div",T,[(0,o.Lk)("button",{onClick:t[10]||(t[10]=(...e)=>$.prevPage&&$.prevPage(...e)),disabled:1===L.currentPage},"〈",8,F),((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)($.totalPages,(e=>((0,o.uX)(),(0,o.CE)("button",{onClick:t=>$.goToPage(e),class:(0,r.C4)({active:L.currentPage===e}),key:e},(0,r.v_)(e),11,W)))),128)),(0,o.Lk)("button",{onClick:t[11]||(t[11]=(...e)=>$.nextPage&&$.nextPage(...e)),disabled:L.currentPage===$.totalPages}," 〉 ",8,j)])])])}n(4114),n(3375),n(9225),n(3972),n(9209),n(5714),n(7561),n(6197);var U=n(6278),H=n(7682),R={data(){return{notices:[],mileages:[],showCategory:!1,currentPage:1,itemsPerPage:10,searchQuery:"",selectedCategory:null,isProcessing:!1,sortByDateAsc:!0,sortByViews:!1}},computed:{...(0,U.L8)("login",["getLoginInfo","getIsChecked"]),uniqueMileages(){return[...new Set(this.notices.filter((e=>e.mile_name)).map((e=>e.mile_name)))]},filteredNotices(){let e=this.notices;if(this.searchQuery){const t=this.searchQuery.toLowerCase();e=e.filter((e=>e.notice_board_title.toLowerCase().includes(t)||e.notice_board_content.toLowerCase().includes(t)))}null!==this.selectedCategory&&(e="기타"===this.selectedCategory?e.filter((e=>!e.mile_name)):e.filter((e=>e.mile_name===this.selectedCategory))),this.sortByViews?e.sort(((e,t)=>t.notice_board_hit-e.notice_board_hit||new Date(t.notice_board_date)-new Date(e.notice_board_date))):this.sortByDateAsc?e.sort(((e,t)=>new Date(t.notice_board_date)-new Date(e.notice_board_date))):e.sort(((e,t)=>new Date(e.notice_board_date)-new Date(t.notice_board_date)));let t=1;return e.map((e=>({...e,is_new:this.isNew(e.notice_board_date),display_num:this.isNew(e.notice_board_date)?"NEW":t++})))},loginInfo(){return this.getLoginInfo},isChecked(){return this.getIsChecked},isLoggedIn(){return!!this.loginInfo},totalPages(){return Math.ceil(this.filteredNotices.length/this.itemsPerPage)},paginatedNotices(){const e=(this.currentPage-1)*this.itemsPerPage,t=e+this.itemsPerPage;return this.filteredNotices.slice(e,t)}},methods:{isNew(e){const t=new Date,n=new Date(e),o=t.getTime()-n.getTime(),i=o/864e5;return i<=7},handleCheckboxChange(e){"views"===e&&this.sortByViews?this.sortByDateAsc=!1:"date"===e&&this.sortByDateAsc&&(this.sortByViews=!1)},toggleCategory(){this.showCategory=!this.showCategory},closeDropdown(){this.showCategory=!1},handleClickOutside(e){this.$refs.dropdownMenu&&!this.$refs.dropdownMenu.contains(e.target)&&this.$refs.categoryButton&&!this.$refs.categoryButton.contains(e.target)&&this.closeDropdown()},goToPage(e){this.currentPage=e},nextPage(){this.currentPage<this.totalPages&&this.currentPage++},prevPage(){this.currentPage>1&&this.currentPage--},goToWritePage(){this.$router.push({name:"noticeWriteAdminView"})},async fetchNotices(){console.log("게시글 list 서버 메소드로 이동 ~ ");try{const e=await H.A.get("/notice/list");this.notices=e.data,console.log("list 서버에서 가지고 온 값 :",this.notices)}catch(e){console.error("Error fetching notices:",e.response?e.response.data:e.message)}},async fetchMileages(){try{const e=await H.A.get("/notice/mileage");console.log("Fetched mileages:",e.data),this.mileages=e.data}catch(e){console.error("Error fetching mileages:",e.response?e.response.data:e.message)}},async handleNoticeClick(e){if(console.log("notice:",e),!this.isProcessing){this.isProcessing=!0;try{console.log("게시글 상세보기+조회수 메소드 도달",e),await H.A.post(`/notice/increment-views/${e.notice_board_no}`);const t=await H.A.get(`/notice/details/${e.notice_board_no}`);console.log("게시글 상세보기 서버에서 가지고 온 데이터:",t);const n=t.data;console.log("Fetched notice details:",n),e.notice_board_hit+=1;const o={...n,mile_no:n.mile_no,mile_name:n.mile_name,file:n.file||null,notice_board_hit:e.notice_board_hit};console.log("Navigating to noticeDetailView with notice:",{id:e.notice_board_no,notice:o}),this.$router.push({name:"noticeDetailView",params:{id:e.notice_board_no,notice:o}})}catch(t){console.error("Error fetching notice details:",t.response?t.response.data:t.message)}finally{this.isProcessing=!1}}},formatDate(e){const t={year:"numeric",month:"2-digit",day:"2-digit"};return new Date(e).toLocaleDateString("ko-KR",t)},searchNotices(){this.currentPage=1},filterByCategory(e){this.selectedCategory=e,this.currentPage=1},refreshPage(){this.selectedCategory=null,this.searchQuery="",this.currentPage=1}},mounted(){console.log("loginInfo:",this.loginInfo),console.log("isLoggedIn:",this.isLoggedIn),console.log("isChecked:",this.isChecked),document.addEventListener("click",this.handleClickOutside),this.fetchNotices(),this.fetchMileages()},beforeUnmount(){document.removeEventListener("click",this.handleClickOutside)}},q=n(6262);const J=(0,q.A)(R,[["render",K],["__scopeId","data-v-6f0ecf68"]]);var G=J},7080:function(e,t,n){var o=n(4402).has;e.exports=function(e){return o(e),e}},6706:function(e,t,n){var o=n(9504),i=n(9306);e.exports=function(e,t,n){try{return o(i(Object.getOwnPropertyDescriptor(e,t)[n]))}catch(r){}}},1767:function(e){e.exports=function(e){return{iterator:e,next:e.next,done:!1}}},3789:function(e,t,n){var o=n(9306),i=n(8551),r=n(9565),s=n(1291),a=n(1767),c="Invalid size",l=RangeError,u=TypeError,d=Math.max,h=function(e,t){this.set=e,this.size=d(t,0),this.has=o(e.has),this.keys=o(e.keys)};h.prototype={getIterator:function(){return a(i(r(this.keys,this.set)))},includes:function(e){return r(this.has,this.set,e)}},e.exports=function(e){i(e);var t=+e.size;if(t!==t)throw new u(c);var n=s(t);if(n<0)throw new l(c);return new h(e,n)}},507:function(e,t,n){var o=n(9565);e.exports=function(e,t,n){var i,r,s=n?e:e.iterator,a=e.next;while(!(i=o(a,s)).done)if(r=t(i.value),void 0!==r)return r}},9539:function(e,t,n){var o=n(9565),i=n(8551),r=n(5966);e.exports=function(e,t,n){var s,a;i(e);try{if(s=r(e,"return"),!s){if("throw"===t)throw n;return n}s=o(s,e)}catch(c){a=!0,s=c}if("throw"===t)throw n;if(a)throw s;return i(s),n}},9286:function(e,t,n){var o=n(4402),i=n(8469),r=o.Set,s=o.add;e.exports=function(e){var t=new r;return i(e,(function(e){s(t,e)})),t}},3440:function(e,t,n){var o=n(7080),i=n(4402),r=n(9286),s=n(5170),a=n(3789),c=n(8469),l=n(507),u=i.has,d=i.remove;e.exports=function(e){var t=o(this),n=a(e),i=r(t);return s(t)<=n.size?c(t,(function(e){n.includes(e)&&d(i,e)})):l(n.getIterator(),(function(e){u(t,e)&&d(i,e)})),i}},4402:function(e,t,n){var o=n(9504),i=Set.prototype;e.exports={Set:Set,add:o(i.add),has:o(i.has),remove:o(i["delete"]),proto:i}},8750:function(e,t,n){var o=n(7080),i=n(4402),r=n(5170),s=n(3789),a=n(8469),c=n(507),l=i.Set,u=i.add,d=i.has;e.exports=function(e){var t=o(this),n=s(e),i=new l;return r(t)>n.size?c(n.getIterator(),(function(e){d(t,e)&&u(i,e)})):a(t,(function(e){n.includes(e)&&u(i,e)})),i}},4449:function(e,t,n){var o=n(7080),i=n(4402).has,r=n(5170),s=n(3789),a=n(8469),c=n(507),l=n(9539);e.exports=function(e){var t=o(this),n=s(e);if(r(t)<=n.size)return!1!==a(t,(function(e){if(n.includes(e))return!1}),!0);var u=n.getIterator();return!1!==c(u,(function(e){if(i(t,e))return l(u,"normal",!1)}))}},3838:function(e,t,n){var o=n(7080),i=n(5170),r=n(8469),s=n(3789);e.exports=function(e){var t=o(this),n=s(e);return!(i(t)>n.size)&&!1!==r(t,(function(e){if(!n.includes(e))return!1}),!0)}},8527:function(e,t,n){var o=n(7080),i=n(4402).has,r=n(5170),s=n(3789),a=n(507),c=n(9539);e.exports=function(e){var t=o(this),n=s(e);if(r(t)<n.size)return!1;var l=n.getIterator();return!1!==a(l,(function(e){if(!i(t,e))return c(l,"normal",!1)}))}},8469:function(e,t,n){var o=n(9504),i=n(507),r=n(4402),s=r.Set,a=r.proto,c=o(a.forEach),l=o(a.keys),u=l(new s).next;e.exports=function(e,t,n){return n?i({iterator:l(e),next:u},t):c(e,t)}},4916:function(e,t,n){var o=n(7751),i=function(e){return{size:e,has:function(){return!1},keys:function(){return{next:function(){return{done:!0}}}}}};e.exports=function(e){var t=o("Set");try{(new t)[e](i(0));try{return(new t)[e](i(-1)),!1}catch(n){return!0}}catch(r){return!1}}},5170:function(e,t,n){var o=n(6706),i=n(4402);e.exports=o(i.proto,"size","get")||function(e){return e.size}},3650:function(e,t,n){var o=n(7080),i=n(4402),r=n(9286),s=n(3789),a=n(507),c=i.add,l=i.has,u=i.remove;e.exports=function(e){var t=o(this),n=s(e).getIterator(),i=r(t);return a(n,(function(e){l(t,e)?u(i,e):c(i,e)})),i}},4204:function(e,t,n){var o=n(7080),i=n(4402).add,r=n(9286),s=n(3789),a=n(507);e.exports=function(e){var t=o(this),n=s(e).getIterator(),c=r(t);return a(n,(function(e){i(c,e)})),c}},7642:function(e,t,n){var o=n(6518),i=n(3440),r=n(4916);o({target:"Set",proto:!0,real:!0,forced:!r("difference")},{difference:i})},8004:function(e,t,n){var o=n(6518),i=n(9039),r=n(8750),s=n(4916),a=!s("intersection")||i((function(){return"3,2"!==String(Array.from(new Set([1,2,3]).intersection(new Set([3,2]))))}));o({target:"Set",proto:!0,real:!0,forced:a},{intersection:r})},3853:function(e,t,n){var o=n(6518),i=n(4449),r=n(4916);o({target:"Set",proto:!0,real:!0,forced:!r("isDisjointFrom")},{isDisjointFrom:i})},5876:function(e,t,n){var o=n(6518),i=n(3838),r=n(4916);o({target:"Set",proto:!0,real:!0,forced:!r("isSubsetOf")},{isSubsetOf:i})},4856:function(e,t,n){var o=n(6518),i=n(8527),r=n(4916);o({target:"Set",proto:!0,real:!0,forced:!r("isSupersetOf")},{isSupersetOf:i})},5024:function(e,t,n){var o=n(6518),i=n(3650),r=n(4916);o({target:"Set",proto:!0,real:!0,forced:!r("symmetricDifference")},{symmetricDifference:i})},1698:function(e,t,n){var o=n(6518),i=n(4204),r=n(4916);o({target:"Set",proto:!0,real:!0,forced:!r("union")},{union:i})},3375:function(e,t,n){n(7642)},9225:function(e,t,n){n(8004)},3972:function(e,t,n){n(3853)},9209:function(e,t,n){n(5876)},5714:function(e,t,n){n(4856)},7561:function(e,t,n){n(5024)},6197:function(e,t,n){n(1698)}}]);
//# sourceMappingURL=4387.2ccdece0.js.map
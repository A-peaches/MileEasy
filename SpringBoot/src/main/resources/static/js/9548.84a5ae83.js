"use strict";(self["webpackChunkmile"]=self["webpackChunkmile"]||[]).push([[9548],{89548:function(e,t,s){s.r(t),s.d(t,{default:function(){return Re}});var i=s(20641),a=s(90033);const l=e=>((0,i.Qi)("data-v-4f9e0f3d"),e=e(),(0,i.jt)(),e),n={class:"cards page-back mx-auto"},r=l((()=>(0,i.Lk)("h2",{class:"bold-x-lg my-5",style:{"font-family":"KB_C3"}},"마일리지 관리",-1))),c={class:"input-base input-search d-flex justify-content-center mx-auto my-3",style:{width:"500px",background:"#ebebeb"}};function o(e,t,s,l,o,u){const d=(0,i.g2)("requestList"),g=(0,i.g2)("pastList");return(0,i.uX)(),(0,i.CE)("div",n,[r,(0,i.Lk)("div",null,[(0,i.Lk)("div",c,[(0,i.Lk)("button",{class:(0,a.C4)(["tab-container lg2 fw-bold",{active:o.isModifyActive}]),onClick:t[0]||(t[0]=(...e)=>u.showModify&&u.showModify(...e))}," 접수내역 ",2),(0,i.Lk)("button",{class:(0,a.C4)(["tab-container lg2 fw-bold",{active:!o.isModifyActive}]),onClick:t[1]||(t[1]=(...e)=>u.showCoding&&u.showCoding(...e))}," 과거내역 ",2)]),o.isModifyActive?((0,i.uX)(),(0,i.Wv)(d,{key:0})):(0,i.Q3)("",!0),o.isModifyActive?(0,i.Q3)("",!0):((0,i.uX)(),(0,i.Wv)(g,{key:1}))])])}var u=s(66278),d=s(37682),g=s(78465),L=s.n(g),h=s(53751);const p=e=>((0,i.Qi)("data-v-449cac36"),e=e(),(0,i.jt)(),e),m={class:"mt-5 mx-auto"},k={class:"notice-count-container"},v={class:"notice-count"},y={class:"radio-container"},f=p((()=>(0,i.Lk)("span",{class:"custom-radio"},null,-1))),q=p((()=>(0,i.Lk)("span",{class:"radio-label"},"접수요청",-1))),_={class:"radio-container"},C=p((()=>(0,i.Lk)("span",{class:"custom-radio"},null,-1))),b=p((()=>(0,i.Lk)("span",{class:"radio-label"},"접수완료",-1))),w={class:"search-container"},R=p((()=>(0,i.Lk)("i",{class:"bi bi-search"},null,-1))),F=[R],P={style:{"text-align":"center","justify-content":"center"}},A={class:"notice-list",style:{"text-align":"center"}},M={key:0},I=p((()=>(0,i.Lk)("p",null,"등록된 요청이 없습니다.",-1))),Q=[I],X=["onClick"],x={class:"notice-details"},E={class:"notice-new"},j={class:"notice-num"},D={class:"notice-title"},K={class:"notice-mile"},U={class:"notice-date"},V={class:"pagination"},S=["onClick"];function $(e,t,s,l,n,r){return(0,i.uX)(),(0,i.CE)("div",null,[(0,i.Lk)("div",m,[(0,i.Lk)("div",{class:"cards-container mx-auto",style:(0,a.Tr)({height:e.computedHeight})},[(0,i.Lk)("div",k,[(0,i.Lk)("div",v,"총 "+(0,a.v_)(r.filteredRequestList.length)+" 건",1),(0,i.Lk)("label",y,[(0,i.bo)((0,i.Lk)("input",{type:"radio",name:"status",value:"접수요청","onUpdate:modelValue":t[0]||(t[0]=e=>n.selectedFilter=e),onChange:t[1]||(t[1]=(...e)=>r.applyFilters&&r.applyFilters(...e))},null,544),[[h.XL,n.selectedFilter]]),f,q]),(0,i.Lk)("label",_,[(0,i.bo)((0,i.Lk)("input",{type:"radio",name:"status",value:"접수완료","onUpdate:modelValue":t[2]||(t[2]=e=>n.selectedFilter=e),onChange:t[3]||(t[3]=(...e)=>r.applyFilters&&r.applyFilters(...e))},null,544),[[h.XL,n.selectedFilter]]),C,b])]),(0,i.Lk)("div",w,[(0,i.bo)((0,i.Lk)("input",{type:"text","onUpdate:modelValue":t[4]||(t[4]=e=>n.searchQuery=e),placeholder:"제목 및 내용을 검색하세요",class:"input-search"},null,512),[[h.Jo,n.searchQuery]]),(0,i.Lk)("button",{class:"search-button",onClick:t[5]||(t[5]=(...e)=>r.applyFilters&&r.applyFilters(...e))},F)]),(0,i.Lk)("div",P,[(0,i.Lk)("div",A,[r.filteredRequestList.length?(0,i.Q3)("",!0):((0,i.uX)(),(0,i.CE)("div",M,Q)),((0,i.uX)(!0),(0,i.CE)(i.FK,null,(0,i.pI)(r.paginatedRequestList,((e,t)=>((0,i.uX)(),(0,i.CE)("div",{key:e.mileage_request_no},[(0,i.Lk)("div",{class:"input-base list-wrapper",onClick:t=>r.toggleDetails(e.mileage_request_no)},[(0,i.Lk)("div",x,[(0,i.Lk)("div",E,(0,a.v_)(t+1),1),(0,i.Lk)("div",j,(0,a.v_)(r.getRequestAction(e.request)),1),(0,i.Lk)("div",D,(0,a.v_)(e.request_mile_name||e.mile_name),1),(0,i.Lk)("div",K,(0,a.v_)(r.getRequestStatus(e.request_status)),1),(0,i.Lk)("div",U,(0,a.v_)(e.mileage_request_date||"날짜 없음"),1)])],8,X)])))),128))])])],4),(0,i.Lk)("div",V,[((0,i.uX)(!0),(0,i.CE)(i.FK,null,(0,i.pI)(r.totalPages,(e=>((0,i.uX)(),(0,i.CE)("button",{key:e,onClick:t=>n.currentPage=e,class:(0,a.C4)({active:n.currentPage===e})},(0,a.v_)(e),11,S)))),128))])])])}s(44114);var T={name:"MileageRequestListAdmin",data(){return{selectedFilter:"접수요청",searchQuery:"",currentPage:1,noticesPerPage:10}},computed:{...(0,u.L8)("login",["getLoginInfo"]),...(0,u.L8)("request",["getRequestList"]),totalPages(){return Math.ceil(this.filteredRequestList.length/this.noticesPerPage)},loginInfo(){return this.getLoginInfo},filteredRequestList(){if(!this.getRequestList||!Array.isArray(this.getRequestList))return[];let e=[...this.getRequestList];return e=e.filter((e=>"접수요청"===this.selectedFilter&&0===e.request_status||"접수완료"===this.selectedFilter&&1===e.request_status)),this.searchQuery&&(e=e.filter((e=>e.request_mile_name&&e.request_mile_name.toLowerCase().includes(this.searchQuery.toLowerCase())||e.mile_name&&e.mile_name.toLowerCase().includes(this.searchQuery.toLowerCase())))),e},paginatedRequestList(){const e=(this.currentPage-1)*this.noticesPerPage,t=e+this.noticesPerPage;return this.filteredRequestList.slice(e,t)}},methods:{...(0,u.i0)("mileage",["getMileage"]),...(0,u.i0)("request",["requestList"]),applyFilters(){this.currentPage=1},getRequestAction(e){switch(e){case 1:return"추가";case 2:return"수정";case 3:return"삭제";default:return""}},getRequestStatus(e){switch(e){case 0:return"접수요청";case 1:return"접수완료";case 2:return"승인완료";case 3:return"승인거절";default:return""}},toggleDetails(e){this.$router.push(`/mileageRequesDetail/${e}`)}},mounted(){this.requestList().catch((e=>{console.error("데이터 로딩 오류:",e)}))}},H=s(66262);const J=(0,H.A)(T,[["render",$],["__scopeId","data-v-449cac36"]]);var W=J;const B=e=>((0,i.Qi)("data-v-09dd2206"),e=e(),(0,i.jt)(),e),z={class:"mt-5 mx-auto"},G={class:"notice-count-container"},N={class:"notice-count"},O={class:"radio-container"},Y=B((()=>(0,i.Lk)("span",{class:"custom-radio"},null,-1))),Z=B((()=>(0,i.Lk)("span",{class:"radio-label"},"승인완료",-1))),ee={class:"radio-container"},te=B((()=>(0,i.Lk)("span",{class:"custom-radio"},null,-1))),se=B((()=>(0,i.Lk)("span",{class:"radio-label"},"승인거절",-1))),ie={class:"search-container"},ae=B((()=>(0,i.Lk)("i",{class:"bi bi-search"},null,-1))),le=[ae],ne={style:{"text-align":"center","justify-content":"center"}},re={class:"notice-list",style:{"text-align":"center"}},ce={key:0},oe=B((()=>(0,i.Lk)("p",null,"등록된 요청이 없습니다.",-1))),ue=[oe],de=["onClick"],ge={class:"notice-details"},Le={class:"notice-new"},he={class:"notice-num"},pe={class:"notice-title"},me={class:"notice-mile"},ke={class:"notice-date"},ve={class:"pagination"},ye=["onClick"];function fe(e,t,s,l,n,r){return(0,i.uX)(),(0,i.CE)("div",null,[(0,i.Lk)("div",z,[(0,i.Lk)("div",{class:"cards-container mx-auto",style:(0,a.Tr)({height:e.computedHeight})},[(0,i.Lk)("div",G,[(0,i.Lk)("div",N,"총 "+(0,a.v_)(r.filteredRequestList.length)+" 건",1),(0,i.Lk)("label",O,[(0,i.bo)((0,i.Lk)("input",{type:"radio",name:"status",value:"승인완료","onUpdate:modelValue":t[0]||(t[0]=e=>n.selectedFilter=e),onChange:t[1]||(t[1]=(...e)=>r.applyFilters&&r.applyFilters(...e))},null,544),[[h.XL,n.selectedFilter]]),Y,Z]),(0,i.Lk)("label",ee,[(0,i.bo)((0,i.Lk)("input",{type:"radio",name:"status",value:"승인거절","onUpdate:modelValue":t[2]||(t[2]=e=>n.selectedFilter=e),onChange:t[3]||(t[3]=(...e)=>r.applyFilters&&r.applyFilters(...e))},null,544),[[h.XL,n.selectedFilter]]),te,se])]),(0,i.Lk)("div",ie,[(0,i.bo)((0,i.Lk)("input",{type:"text","onUpdate:modelValue":t[4]||(t[4]=e=>n.searchQuery=e),placeholder:"제목 및 내용을 검색하세요",class:"input-search"},null,512),[[h.Jo,n.searchQuery]]),(0,i.Lk)("button",{class:"search-button",onClick:t[5]||(t[5]=(...e)=>r.applyFilters&&r.applyFilters(...e))},le)]),(0,i.Lk)("div",ne,[(0,i.Lk)("div",re,[r.filteredRequestList.length?(0,i.Q3)("",!0):((0,i.uX)(),(0,i.CE)("div",ce,ue)),((0,i.uX)(!0),(0,i.CE)(i.FK,null,(0,i.pI)(r.paginatedRequestList,((e,t)=>((0,i.uX)(),(0,i.CE)("div",{key:e.mileage_request_no},[(0,i.Lk)("div",{class:"input-base list-wrapper",onClick:t=>r.toggleDetails(e.mileage_request_no)},[(0,i.Lk)("div",ge,[(0,i.Lk)("div",Le,(0,a.v_)(t+1),1),(0,i.Lk)("div",he,(0,a.v_)(r.getRequestAction(e.request)),1),(0,i.Lk)("div",pe,(0,a.v_)(e.request_mile_name||e.mile_name),1),(0,i.Lk)("div",me,(0,a.v_)(r.getRequestStatus(e.request_status)),1),(0,i.Lk)("div",ke,(0,a.v_)(e.mileage_request_date||"날짜 없음"),1)])],8,de)])))),128))])])],4),(0,i.Lk)("div",ve,[((0,i.uX)(!0),(0,i.CE)(i.FK,null,(0,i.pI)(r.totalPages,(e=>((0,i.uX)(),(0,i.CE)("button",{key:e,onClick:t=>n.currentPage=e,class:(0,a.C4)({active:n.currentPage===e})},(0,a.v_)(e),11,ye)))),128))])])])}var qe={name:"MileageRequestListAdmin",data(){return{selectedFilter:"승인완료",searchQuery:"",currentPage:1,noticesPerPage:10}},computed:{...(0,u.L8)("login",["getLoginInfo"]),...(0,u.L8)("request",["getRequestList"]),totalPages(){return Math.ceil(this.filteredRequestList.length/this.noticesPerPage)},loginInfo(){return this.getLoginInfo},filteredRequestList(){if(!this.getRequestList||!Array.isArray(this.getRequestList))return[];let e=[...this.getRequestList];return e=e.filter((e=>"승인완료"===this.selectedFilter&&2===e.request_status||"승인거절"===this.selectedFilter&&3===e.request_status)),this.searchQuery&&(e=e.filter((e=>e.request_mile_name&&e.request_mile_name.toLowerCase().includes(this.searchQuery.toLowerCase())||e.mile_name&&e.mile_name.toLowerCase().includes(this.searchQuery.toLowerCase())))),e},paginatedRequestList(){const e=(this.currentPage-1)*this.noticesPerPage,t=e+this.noticesPerPage;return this.filteredRequestList.slice(e,t)}},methods:{...(0,u.i0)("mileage",["getMileage"]),...(0,u.i0)("request",["requestList"]),applyFilters(){this.currentPage=1},getRequestAction(e){switch(e){case 1:return"추가";case 2:return"수정";case 3:return"삭제";default:return""}},getRequestStatus(e){switch(e){case 0:return"접수요청";case 1:return"접수완료";case 2:return"승인완료";case 3:return"승인거절";default:return""}},toggleDetails(e){this.$router.push(`/mileageRequesDetail/${e}`)}},mounted(){this.requestList().catch((e=>{console.error("데이터 로딩 오류:",e)}))}};const _e=(0,H.A)(qe,[["render",fe],["__scopeId","data-v-09dd2206"]]);var Ce=_e,be={name:"KingMain",components:{requestList:W,pastList:Ce},data(){return{isModifyActive:!0}},computed:{...(0,u.L8)("login",["getLoginInfo"]),...(0,u.L8)("mileage",["getArrayMileage"]),...(0,u.L8)("login",["getLoginInfo","getIsChecked"]),...(0,u.L8)(""),loginInfo(){return this.getLoginInfo},mileageLabel(){return this.getArrayMileage}},methods:{...(0,u.i0)("mileage",["getMileage"]),async deleteMile(e){const{value:t}=await L().fire({title:"삭제 확인",text:"정말로 이 마일리지를 삭제하시겠습니까?",icon:"warning",scrollbarPadding:!1});if(t)try{const t=await d.A.post("/admin/deleteMile",null,{params:{mile_no:e},headers:{"Content-Type":"application/x-www-form-urlencoded"}});this.getMileage(),L().fire("삭제 완료!","마일리지가 삭제되었습니다.","success"),console.log("삭제",t.data)}catch(s){L().fire("삭제 오류!","마일리지 삭제 중 오류가 발생했습니다.","error"),console.error("삭제 오류:",s)}else console.log("삭제 취소됨")},showModify(){this.isModifyActive=!0},showCoding(){this.isModifyActive=!1},checkLoginInfo(){this.getLoginInfo&&!1!==this.getIsChecked&&!1!==this.getLoginInfo.user_is_admin||(window.location.href="/noAccess")}},mounted(){this.getMileage()},created(){this.checkLoginInfo()}};const we=(0,H.A)(be,[["render",o],["__scopeId","data-v-4f9e0f3d"]]);var Re=we}}]);
//# sourceMappingURL=9548.84a5ae83.js.map
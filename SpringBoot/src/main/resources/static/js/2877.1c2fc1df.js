"use strict";(self["webpackChunkmile"]=self["webpackChunkmile"]||[]).push([[2877],{2877:function(e,t,n){n.r(t),n.d(t,{default:function(){return J}});var r=n(641),o=n(3751),i=n(33);const a=e=>((0,r.Qi)("data-v-92e31856"),e=e(),(0,r.jt)(),e),s={class:"app-container"},c=a((()=>(0,r.Lk)("div",null,[(0,r.Lk)("h2",null,"공지사항")],-1))),u=a((()=>(0,r.Lk)("div",{class:"category-button list-wrapper"},"카테고리",-1))),l={key:0,class:"dropdown-menu",ref:"dropdownMenu"},f={class:"menu-items"},h=["onClick"],d={class:"notice-count-container"},g={class:"notice-count"},p={class:"checkbox-container"},v=a((()=>(0,r.Lk)("span",{class:"custom-checkbox"},null,-1))),y=a((()=>(0,r.Lk)("span",{class:"checkbox-label"},"조회수",-1))),m={class:"checkbox-container"},k=a((()=>(0,r.Lk)("span",{class:"custom-checkbox"},null,-1))),w=a((()=>(0,r.Lk)("span",{class:"checkbox-label"},"최신순",-1))),b={key:0},_=a((()=>(0,r.Lk)("i",{class:"bi bi-pencil",style:{"margin-right":"10px"}},null,-1))),C={class:"search-container"},x=a((()=>(0,r.Lk)("i",{class:"bi bi-search"},null,-1))),L=[x],P={class:"notice-list"},D={key:0},I=["onClick"],E={class:"notice-details"},S={key:0,class:"notice-new"},O={key:1,class:"notice-num"},N={class:"notice-mile"},A={class:"notice-title"},B={class:"notice-date"},M=a((()=>(0,r.Lk)("i",{class:"bi bi-eye"},null,-1))),z={class:"notice-views"},T=a((()=>(0,r.Lk)("i",{class:"fa fa-eye"},null,-1))),V={key:1},X=a((()=>(0,r.Lk)("p",null,"게시글이 없습니다.",-1))),j=[X],Q={class:"pagination"},W=["disabled"],$=["onClick"],F=["disabled"];function K(e,t,n,a,x,X){return(0,r.uX)(),(0,r.CE)("div",s,[(0,r.Lk)("div",{class:"content cards",onClick:t[12]||(t[12]=(...t)=>e.handleClick&&e.handleClick(...t))},[c,(0,r.Lk)("div",{onClick:t[2]||(t[2]=(0,o.D$)(((...e)=>X.toggleCategory&&X.toggleCategory(...e)),["stop"])),class:"QnA",ref:"categoryButton"},[u,x.showCategory?((0,r.uX)(),(0,r.CE)("div",l,[(0,r.Lk)("div",f,[(0,r.Lk)("a",{class:"dropdown-item",onClick:t[0]||(t[0]=e=>X.filterByCategory(null))},"전체"),((0,r.uX)(!0),(0,r.CE)(r.FK,null,(0,r.pI)(x.mileages,(e=>((0,r.uX)(),(0,r.CE)("a",{class:"dropdown-item",key:e.mile_no,onClick:t=>X.filterByCategory(e.mile_name)},(0,i.v_)(e.mile_name)+" 마일리지 ",9,h)))),128)),(0,r.Lk)("a",{class:"dropdown-item",onClick:t[1]||(t[1]=e=>X.filterByCategory("기타"))},"기타")])],512)):(0,r.Q3)("",!0)],512),(0,r.Lk)("div",d,[(0,r.Lk)("div",g,"총 "+(0,i.v_)(X.filteredNotices.length)+"건",1),(0,r.Lk)("label",p,[(0,r.bo)((0,r.Lk)("input",{type:"checkbox","onUpdate:modelValue":t[3]||(t[3]=e=>x.sortByViews=e),onChange:t[4]||(t[4]=e=>X.handleCheckboxChange("views"))},null,544),[[o.lH,x.sortByViews]]),v,(0,r.eW)(),y]),(0,r.Lk)("label",m,[(0,r.bo)((0,r.Lk)("input",{type:"checkbox","onUpdate:modelValue":t[5]||(t[5]=e=>x.sortByDateAsc=e),onChange:t[6]||(t[6]=e=>X.handleCheckboxChange("date"))},null,544),[[o.lH,x.sortByDateAsc]]),k,(0,r.eW)(),w])]),(0,r.Lk)("div",null,[X.isLoggedIn&&X.loginInfo.user_is_admin&&!X.loginInfo.user_is_manager&&X.isChecked?((0,r.uX)(),(0,r.CE)("div",b,[(0,r.Lk)("button",{class:"write-button",onClick:t[7]||(t[7]=(...e)=>X.goToWritePage&&X.goToWritePage(...e))},[_,(0,r.eW)(" 글작성 ")])])):(0,r.Q3)("",!0)]),(0,r.Lk)("div",C,[(0,r.bo)((0,r.Lk)("input",{type:"text","onUpdate:modelValue":t[8]||(t[8]=e=>x.searchQuery=e),placeholder:"제목 및 내용을 검색하세요",class:"input-search"},null,512),[[o.Jo,x.searchQuery]]),(0,r.Lk)("button",{class:"search-button",onClick:t[9]||(t[9]=(...e)=>X.searchNotices&&X.searchNotices(...e))},L)]),(0,r.Lk)("div",P,[X.paginatedNotices.length?((0,r.uX)(),(0,r.CE)("div",D,[((0,r.uX)(!0),(0,r.CE)(r.FK,null,(0,r.pI)(X.paginatedNotices,(e=>((0,r.uX)(),(0,r.CE)("div",{class:"input-base list-wrapper",key:e.notice_board_no,onClick:t=>X.handleNoticeClick(e)},[(0,r.Lk)("div",E,[e.is_new?((0,r.uX)(),(0,r.CE)("div",S,(0,i.v_)(e.display_num),1)):((0,r.uX)(),(0,r.CE)("div",O,(0,i.v_)(e.display_num),1)),(0,r.Lk)("div",N,(0,i.v_)(e.mile_name?e.mile_name+" 마일리지":"기타"),1),(0,r.Lk)("div",A,(0,i.v_)(e.notice_board_title),1),(0,r.Lk)("pre",B,(0,i.v_)(X.formatDate(e.notice_board_date)),1),M,(0,r.Lk)("div",z,[(0,r.eW)((0,i.v_)(e.notice_board_hit)+" ",1),T])])],8,I)))),128))])):((0,r.uX)(),(0,r.CE)("div",V,j))]),(0,r.Lk)("div",Q,[(0,r.Lk)("button",{onClick:t[10]||(t[10]=(...e)=>X.prevPage&&X.prevPage(...e)),disabled:1===x.currentPage},"〈",8,W),((0,r.uX)(!0),(0,r.CE)(r.FK,null,(0,r.pI)(X.totalPages,(e=>((0,r.uX)(),(0,r.CE)("button",{onClick:t=>X.goToPage(e),class:(0,i.C4)({active:x.currentPage===e}),key:e},(0,i.v_)(e),11,$)))),128)),(0,r.Lk)("button",{onClick:t[11]||(t[11]=(...e)=>X.nextPage&&X.nextPage(...e)),disabled:x.currentPage===X.totalPages},"〉",8,F)])])])}n(4114),n(3375),n(9225),n(3972),n(9209),n(5714),n(7561),n(6197);var U=n(6278),R=n(7682),H={data(){return{notices:[],mileages:[],showCategory:!1,currentPage:1,itemsPerPage:10,searchQuery:"",selectedCategory:null,isProcessing:!1,sortByDateAsc:!0,sortByViews:!1}},computed:{...(0,U.L8)("login",["getLoginInfo","getIsChecked"]),uniqueMileages(){return[...new Set(this.notices.filter((e=>e.mile_name)).map((e=>e.mile_name)))]},filteredNotices(){let e=this.notices;if(this.searchQuery){const t=this.searchQuery.toLowerCase();e=e.filter((e=>e.notice_board_title.toLowerCase().includes(t)||e.notice_board_content.toLowerCase().includes(t)))}null!==this.selectedCategory&&(e="기타"===this.selectedCategory?e.filter((e=>!e.mile_name)):e.filter((e=>e.mile_name===this.selectedCategory))),this.sortByViews?e.sort(((e,t)=>t.notice_board_hit-e.notice_board_hit||new Date(t.notice_board_date)-new Date(e.notice_board_date))):this.sortByDateAsc?e.sort(((e,t)=>new Date(t.notice_board_date)-new Date(e.notice_board_date))):e.sort(((e,t)=>new Date(e.notice_board_date)-new Date(t.notice_board_date)));let t=1;return e.map((e=>({...e,is_new:this.isNew(e.notice_board_date),display_num:this.isNew(e.notice_board_date)?"NEW":t++})))},loginInfo(){return this.getLoginInfo},isChecked(){return this.getIsChecked},isLoggedIn(){return!!this.loginInfo},totalPages(){return Math.ceil(this.filteredNotices.length/this.itemsPerPage)},paginatedNotices(){const e=(this.currentPage-1)*this.itemsPerPage,t=e+this.itemsPerPage;return this.filteredNotices.slice(e,t)}},methods:{isNew(e){const t=new Date,n=new Date(e),r=t.getTime()-n.getTime(),o=r/864e5;return o<=7},handleCheckboxChange(e){"views"===e&&this.sortByViews?this.sortByDateAsc=!1:"date"===e&&this.sortByDateAsc&&(this.sortByViews=!1)},toggleCategory(){this.showCategory=!this.showCategory},closeDropdown(){this.showCategory=!1},handleClickOutside(e){this.$refs.dropdownMenu&&!this.$refs.dropdownMenu.contains(e.target)&&this.$refs.categoryButton&&!this.$refs.categoryButton.contains(e.target)&&this.closeDropdown()},goToPage(e){this.currentPage=e},nextPage(){this.currentPage<this.totalPages&&this.currentPage++},prevPage(){this.currentPage>1&&this.currentPage--},goToWritePage(){this.$router.push({name:"noticeWriteAdminView"})},async fetchNotices(){console.log("게시글 list 서버 메소드로 이동 ~ ");try{const e=await R.A.get("/notice/list");this.notices=e.data,console.log("list 서버에서 가지고 온 값 :",this.notices)}catch(e){console.error("Error fetching notices:",e.response?e.response.data:e.message)}},async fetchMileages(){try{const e=await R.A.get("/notice/mileage");console.log("Fetched mileages:",e.data),this.mileages=e.data}catch(e){console.error("Error fetching mileages:",e.response?e.response.data:e.message)}},async handleNoticeClick(e){if(console.log("notice:",e),!this.isProcessing){this.isProcessing=!0;try{console.log("게시글 상세보기+조회수 메소드 도달",e),await R.A.post(`/notice/increment-views/${e.notice_board_no}`);const t=await R.A.get(`/notice/details/${e.notice_board_no}`);console.log("게시글 상세보기 서버에서 가지고 온 데이터:",t);const n=t.data;console.log("Fetched notice details:",n),e.notice_board_hit+=1;const r={...n,mile_no:n.mile_no,mile_name:n.mile_name,file:n.file||null,notice_board_hit:e.notice_board_hit};console.log("Navigating to noticeDetailView with notice:",{id:e.notice_board_no,notice:r}),this.$router.push({name:"noticeDetailView",params:{id:e.notice_board_no,notice:r}})}catch(t){console.error("Error fetching notice details:",t.response?t.response.data:t.message)}finally{this.isProcessing=!1}}},formatDate(e){const t={year:"numeric",month:"2-digit",day:"2-digit"};return new Date(e).toLocaleDateString("ko-KR",t)},searchNotices(){this.currentPage=1},filterByCategory(e){this.selectedCategory=e,this.currentPage=1},refreshPage(){this.selectedCategory=null,this.searchQuery="",this.currentPage=1}},mounted(){console.log("loginInfo:",this.loginInfo),console.log("isLoggedIn:",this.isLoggedIn),console.log("isChecked:",this.isChecked),document.addEventListener("click",this.handleClickOutside),this.fetchNotices(),this.fetchMileages()},beforeUnmount(){document.removeEventListener("click",this.handleClickOutside)}},q=n(6262);const G=(0,q.A)(H,[["render",K],["__scopeId","data-v-92e31856"]]);var J=G},7080:function(e,t,n){var r=n(4402).has;e.exports=function(e){return r(e),e}},9617:function(e,t,n){var r=n(5397),o=n(5610),i=n(6198),a=function(e){return function(t,n,a){var s=r(t),c=i(s);if(0===c)return!e&&-1;var u,l=o(a,c);if(e&&n!==n){while(c>l)if(u=s[l++],u!==u)return!0}else for(;c>l;l++)if((e||l in s)&&s[l]===n)return e||l||0;return!e&&-1}};e.exports={includes:a(!0),indexOf:a(!1)}},4527:function(e,t,n){var r=n(3724),o=n(4376),i=TypeError,a=Object.getOwnPropertyDescriptor,s=r&&!function(){if(void 0!==this)return!0;try{Object.defineProperty([],"length",{writable:!1}).length=1}catch(e){return e instanceof TypeError}}();e.exports=s?function(e,t){if(o(e)&&!a(e,"length").writable)throw new i("Cannot set read only .length");return e.length=t}:function(e,t){return e.length=t}},7740:function(e,t,n){var r=n(9297),o=n(5031),i=n(7347),a=n(4913);e.exports=function(e,t,n){for(var s=o(t),c=a.f,u=i.f,l=0;l<s.length;l++){var f=s[l];r(e,f)||n&&r(n,f)||c(e,f,u(t,f))}}},6837:function(e){var t=TypeError,n=9007199254740991;e.exports=function(e){if(e>n)throw t("Maximum allowed index exceeded");return e}},8727:function(e){e.exports=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"]},6518:function(e,t,n){var r=n(4475),o=n(7347).f,i=n(6699),a=n(6840),s=n(9433),c=n(7740),u=n(2796);e.exports=function(e,t){var n,l,f,h,d,g,p=e.target,v=e.global,y=e.stat;if(l=v?r:y?r[p]||s(p,{}):r[p]&&r[p].prototype,l)for(f in t){if(d=t[f],e.dontCallGetSet?(g=o(l,f),h=g&&g.value):h=l[f],n=u(v?f:p+(y?".":"#")+f,e.forced),!n&&void 0!==h){if(typeof d==typeof h)continue;c(d,h)}(e.sham||h&&h.sham)&&i(d,"sham",!0),a(l,f,d,e)}}},6706:function(e,t,n){var r=n(9504),o=n(9306);e.exports=function(e,t,n){try{return r(o(Object.getOwnPropertyDescriptor(e,t)[n]))}catch(i){}}},1767:function(e){e.exports=function(e){return{iterator:e,next:e.next,done:!1}}},3789:function(e,t,n){var r=n(9306),o=n(8551),i=n(9565),a=n(1291),s=n(1767),c="Invalid size",u=RangeError,l=TypeError,f=Math.max,h=function(e,t){this.set=e,this.size=f(t,0),this.has=r(e.has),this.keys=r(e.keys)};h.prototype={getIterator:function(){return s(o(i(this.keys,this.set)))},includes:function(e){return i(this.has,this.set,e)}},e.exports=function(e){o(e);var t=+e.size;if(t!==t)throw new l(c);var n=a(t);if(n<0)throw new u(c);return new h(e,n)}},7055:function(e,t,n){var r=n(9504),o=n(9039),i=n(4576),a=Object,s=r("".split);e.exports=o((function(){return!a("z").propertyIsEnumerable(0)}))?function(e){return"String"===i(e)?s(e,""):a(e)}:a},4376:function(e,t,n){var r=n(4576);e.exports=Array.isArray||function(e){return"Array"===r(e)}},2796:function(e,t,n){var r=n(9039),o=n(4901),i=/#|\.prototype\./,a=function(e,t){var n=c[s(e)];return n===l||n!==u&&(o(t)?r(t):!!t)},s=a.normalize=function(e){return String(e).replace(i,".").toLowerCase()},c=a.data={},u=a.NATIVE="N",l=a.POLYFILL="P";e.exports=a},507:function(e,t,n){var r=n(9565);e.exports=function(e,t,n){var o,i,a=n?e:e.iterator,s=e.next;while(!(o=r(s,a)).done)if(i=t(o.value),void 0!==i)return i}},9539:function(e,t,n){var r=n(9565),o=n(8551),i=n(5966);e.exports=function(e,t,n){var a,s;o(e);try{if(a=i(e,"return"),!a){if("throw"===t)throw n;return n}a=r(a,e)}catch(c){s=!0,a=c}if("throw"===t)throw n;if(s)throw a;return o(a),n}},6198:function(e,t,n){var r=n(8014);e.exports=function(e){return r(e.length)}},741:function(e){var t=Math.ceil,n=Math.floor;e.exports=Math.trunc||function(e){var r=+e;return(r>0?n:t)(r)}},7347:function(e,t,n){var r=n(3724),o=n(9565),i=n(8773),a=n(6980),s=n(5397),c=n(6969),u=n(9297),l=n(5917),f=Object.getOwnPropertyDescriptor;t.f=r?f:function(e,t){if(e=s(e),t=c(t),l)try{return f(e,t)}catch(n){}if(u(e,t))return a(!o(i.f,e,t),e[t])}},8480:function(e,t,n){var r=n(1828),o=n(8727),i=o.concat("length","prototype");t.f=Object.getOwnPropertyNames||function(e){return r(e,i)}},3717:function(e,t){t.f=Object.getOwnPropertySymbols},1828:function(e,t,n){var r=n(9504),o=n(9297),i=n(5397),a=n(9617).indexOf,s=n(421),c=r([].push);e.exports=function(e,t){var n,r=i(e),u=0,l=[];for(n in r)!o(s,n)&&o(r,n)&&c(l,n);while(t.length>u)o(r,n=t[u++])&&(~a(l,n)||c(l,n));return l}},8773:function(e,t){var n={}.propertyIsEnumerable,r=Object.getOwnPropertyDescriptor,o=r&&!n.call({1:2},1);t.f=o?function(e){var t=r(this,e);return!!t&&t.enumerable}:n},5031:function(e,t,n){var r=n(7751),o=n(9504),i=n(8480),a=n(3717),s=n(8551),c=o([].concat);e.exports=r("Reflect","ownKeys")||function(e){var t=i.f(s(e)),n=a.f;return n?c(t,n(e)):t}},9286:function(e,t,n){var r=n(4402),o=n(8469),i=r.Set,a=r.add;e.exports=function(e){var t=new i;return o(e,(function(e){a(t,e)})),t}},3440:function(e,t,n){var r=n(7080),o=n(4402),i=n(9286),a=n(5170),s=n(3789),c=n(8469),u=n(507),l=o.has,f=o.remove;e.exports=function(e){var t=r(this),n=s(e),o=i(t);return a(t)<=n.size?c(t,(function(e){n.includes(e)&&f(o,e)})):u(n.getIterator(),(function(e){l(t,e)&&f(o,e)})),o}},4402:function(e,t,n){var r=n(9504),o=Set.prototype;e.exports={Set:Set,add:r(o.add),has:r(o.has),remove:r(o["delete"]),proto:o}},8750:function(e,t,n){var r=n(7080),o=n(4402),i=n(5170),a=n(3789),s=n(8469),c=n(507),u=o.Set,l=o.add,f=o.has;e.exports=function(e){var t=r(this),n=a(e),o=new u;return i(t)>n.size?c(n.getIterator(),(function(e){f(t,e)&&l(o,e)})):s(t,(function(e){n.includes(e)&&l(o,e)})),o}},4449:function(e,t,n){var r=n(7080),o=n(4402).has,i=n(5170),a=n(3789),s=n(8469),c=n(507),u=n(9539);e.exports=function(e){var t=r(this),n=a(e);if(i(t)<=n.size)return!1!==s(t,(function(e){if(n.includes(e))return!1}),!0);var l=n.getIterator();return!1!==c(l,(function(e){if(o(t,e))return u(l,"normal",!1)}))}},3838:function(e,t,n){var r=n(7080),o=n(5170),i=n(8469),a=n(3789);e.exports=function(e){var t=r(this),n=a(e);return!(o(t)>n.size)&&!1!==i(t,(function(e){if(!n.includes(e))return!1}),!0)}},8527:function(e,t,n){var r=n(7080),o=n(4402).has,i=n(5170),a=n(3789),s=n(507),c=n(9539);e.exports=function(e){var t=r(this),n=a(e);if(i(t)<n.size)return!1;var u=n.getIterator();return!1!==s(u,(function(e){if(!o(t,e))return c(u,"normal",!1)}))}},8469:function(e,t,n){var r=n(9504),o=n(507),i=n(4402),a=i.Set,s=i.proto,c=r(s.forEach),u=r(s.keys),l=u(new a).next;e.exports=function(e,t,n){return n?o({iterator:u(e),next:l},t):c(e,t)}},4916:function(e,t,n){var r=n(7751),o=function(e){return{size:e,has:function(){return!1},keys:function(){return{next:function(){return{done:!0}}}}}};e.exports=function(e){var t=r("Set");try{(new t)[e](o(0));try{return(new t)[e](o(-1)),!1}catch(n){return!0}}catch(i){return!1}}},5170:function(e,t,n){var r=n(6706),o=n(4402);e.exports=r(o.proto,"size","get")||function(e){return e.size}},3650:function(e,t,n){var r=n(7080),o=n(4402),i=n(9286),a=n(3789),s=n(507),c=o.add,u=o.has,l=o.remove;e.exports=function(e){var t=r(this),n=a(e).getIterator(),o=i(t);return s(n,(function(e){u(t,e)?l(o,e):c(o,e)})),o}},4204:function(e,t,n){var r=n(7080),o=n(4402).add,i=n(9286),a=n(3789),s=n(507);e.exports=function(e){var t=r(this),n=a(e).getIterator(),c=i(t);return s(n,(function(e){o(c,e)})),c}},5610:function(e,t,n){var r=n(1291),o=Math.max,i=Math.min;e.exports=function(e,t){var n=r(e);return n<0?o(n+t,0):i(n,t)}},5397:function(e,t,n){var r=n(7055),o=n(7750);e.exports=function(e){return r(o(e))}},1291:function(e,t,n){var r=n(741);e.exports=function(e){var t=+e;return t!==t||0===t?0:r(t)}},8014:function(e,t,n){var r=n(1291),o=Math.min;e.exports=function(e){var t=r(e);return t>0?o(t,9007199254740991):0}},4114:function(e,t,n){var r=n(6518),o=n(8981),i=n(6198),a=n(4527),s=n(6837),c=n(9039),u=c((function(){return 4294967297!==[].push.call({length:4294967296},1)})),l=function(){try{Object.defineProperty([],"length",{writable:!1}).push()}catch(e){return e instanceof TypeError}},f=u||!l();r({target:"Array",proto:!0,arity:1,forced:f},{push:function(e){var t=o(this),n=i(t),r=arguments.length;s(n+r);for(var c=0;c<r;c++)t[n]=arguments[c],n++;return a(t,n),n}})},7642:function(e,t,n){var r=n(6518),o=n(3440),i=n(4916);r({target:"Set",proto:!0,real:!0,forced:!i("difference")},{difference:o})},8004:function(e,t,n){var r=n(6518),o=n(9039),i=n(8750),a=n(4916),s=!a("intersection")||o((function(){return"3,2"!==String(Array.from(new Set([1,2,3]).intersection(new Set([3,2]))))}));r({target:"Set",proto:!0,real:!0,forced:s},{intersection:i})},3853:function(e,t,n){var r=n(6518),o=n(4449),i=n(4916);r({target:"Set",proto:!0,real:!0,forced:!i("isDisjointFrom")},{isDisjointFrom:o})},5876:function(e,t,n){var r=n(6518),o=n(3838),i=n(4916);r({target:"Set",proto:!0,real:!0,forced:!i("isSubsetOf")},{isSubsetOf:o})},4856:function(e,t,n){var r=n(6518),o=n(8527),i=n(4916);r({target:"Set",proto:!0,real:!0,forced:!i("isSupersetOf")},{isSupersetOf:o})},5024:function(e,t,n){var r=n(6518),o=n(3650),i=n(4916);r({target:"Set",proto:!0,real:!0,forced:!i("symmetricDifference")},{symmetricDifference:o})},1698:function(e,t,n){var r=n(6518),o=n(4204),i=n(4916);r({target:"Set",proto:!0,real:!0,forced:!i("union")},{union:o})},3375:function(e,t,n){n(7642)},9225:function(e,t,n){n(8004)},3972:function(e,t,n){n(3853)},9209:function(e,t,n){n(5876)},5714:function(e,t,n){n(4856)},7561:function(e,t,n){n(5024)},6197:function(e,t,n){n(1698)}}]);
//# sourceMappingURL=2877.1c2fc1df.js.map
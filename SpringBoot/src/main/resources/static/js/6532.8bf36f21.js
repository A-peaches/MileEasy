"use strict";(self["webpackChunkmile"]=self["webpackChunkmile"]||[]).push([[6532],{6532:function(e,t,a){a.r(t),a.d(t,{default:function(){return Ce}});var s=a(641),l=a(33);const o={class:"cards page-back mx-auto"},n=(0,s.Lk)("h2",{class:"bold-x-lg mt-5 mb-4",style:{"font-family":"KB_C3"}},[(0,s.eW)(" ëª©í‘œì„¤ì • "),(0,s.Lk)("hr",{style:{width:"13%",border:"0",height:"2px",background:"black"},class:"mx-auto"})],-1),r={class:"input-base input-search d-flex justify-content-center mx-auto my-5",style:{width:"600px",background:"#ebebeb"}};function i(e,t,a,i,c,d){return(0,s.uX)(),(0,s.CE)("div",o,[n,(0,s.Lk)("div",r,[(0,s.Lk)("button",{class:(0,l.C4)(["tab-container lg2 fw-bold",{active:"together"===c.activeTab}]),onClick:t[0]||(t[0]=e=>d.setActiveTab("together"))}," ì°¸ì—¬í˜• ",2),(0,s.Lk)("button",{class:(0,l.C4)(["tab-container lg2 fw-bold",{active:"personal"===c.activeTab}]),onClick:t[1]||(t[1]=e=>d.setActiveTab("personal"))}," ê°œì¸í˜• ",2)]),((0,s.uX)(),(0,s.Wv)((0,s.$y)(d.currentComponent),{onDataLoaded:e.handleDataLoaded,class:"my-5"},null,40,["onDataLoaded"]))])}const c=e=>((0,s.Qi)("data-v-33bda4a3"),e=e(),(0,s.jt)(),e),d={class:"row"},g={class:"p-3"},u={style:{"text-align":"center","font-family":"KB_C2","font-size":"16pt"},class:"mb-2"},m={key:0},h=c((()=>(0,s.Lk)("div",{class:"py-4"},[(0,s.Lk)("span",{class:"lg2",style:{"font-family":"'KB_C1'"}},"ëª©í‘œê¸°ê°„"),(0,s.Lk)("br"),(0,s.Lk)("span",{class:"md"},"2024.08.06 - 2024.08.17")],-1))),k=c((()=>(0,s.Lk)("div",{class:"py-3"},[(0,s.Lk)("span",{class:"lg2",style:{"font-family":"'KB_C1'"}},"ì§„í–‰ë¥ "),(0,s.Lk)("br"),(0,s.Lk)("div",{class:"progress mx-auto",role:"progressbar","aria-label":"Animated striped example","aria-valuenow":"60","aria-valuemin":"0","aria-valuemax":"100",style:{width:"80%"}},[(0,s.Lk)("div",{class:"progress-bar progress-bar-striped progress-bar-animated bg-info",style:{width:"60%"}})])],-1))),f=c((()=>(0,s.Lk)("div",{class:"py-3"},[(0,s.Lk)("span",{class:"bold-x-lg",style:{"font-family":"'KB_C1'"}},"12 / 20")],-1))),p=[h,k,f],b={key:1,style:{"background-color":"#aeaeb2",height:"100%"},class:"rounded-4"},L={style:{"padding-top":"30%"}},v=c((()=>(0,s.Lk)("span",{class:"bold-x-lg"},"ðŸŽ¯",-1))),y=c((()=>(0,s.Lk)("br",null,null,-1))),F=c((()=>(0,s.Lk)("br",null,null,-1))),C=c((()=>(0,s.Lk)("span",{class:"md",style:{"font-family":"'KB_C2'",color:"#fff"}},"ì„¤ì •ëœ ëª©í‘œê°€ ì—†ìŠµë‹ˆë‹¤",-1)));function _(e,t,a,o,n,r){return(0,s.uX)(),(0,s.CE)("div",null,[(0,s.Lk)("div",d,[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(n.mileages,((a,o)=>((0,s.uX)(),(0,s.CE)("div",{key:a.mile_no,class:"col-md-4 mb-3"},[(0,s.Lk)("div",g,[(0,s.Lk)("div",u,(0,l.v_)(a.mile_name)+" ë§ˆì¼ë¦¬ì§€",1),(0,s.Lk)("div",{style:(0,l.Tr)([{backgroundColor:n.backgroundColors[o%n.backgroundColors.length]},{width:"250px",height:"300px",transition:"transform 0.3s ease"}]),class:"mx-auto rounded-4 target-box"},[o%2==0?((0,s.uX)(),(0,s.CE)("div",m,p)):((0,s.uX)(),(0,s.CE)("div",b,[(0,s.Lk)("div",L,[v,y,F,C,(0,s.Lk)("button",{class:"btn-green mt-3",onClick:t[0]||(t[0]=(...t)=>e.goTogether&&e.goTogether(...t))},"ì°¸ì—¬í•˜ê¸°")])]))],4)])])))),128))])])}var T=a(7682),B={name:"TogetherTarget",data(){return{mileages:[],backgroundColors:["#FDF5F5","#FBF4EE","#FCFBF1","#F4FBF2","#F3FBFE","#F5F5FF","#FFF2FD","#F4F4F4"]}},methods:{async fetchMileages(){try{const e=await T.A.get("http://localhost:8090/notice/mileage");this.mileages=e.data}catch(e){console.error("Error fetching mileages:",e.response?e.response.data:e.message)}}},created(){this.fetchMileages()},computed:{}},w=a(6262);const D=(0,w.A)(B,[["render",_],["__scopeId","data-v-33bda4a3"]]);var x=D,M=a(3751);const E=e=>((0,s.Qi)("data-v-29f6e139"),e=e(),(0,s.jt)(),e),I={class:"d-flex justify-content-start align-items-center mb-5",style:{"margin-left":"5%"}},K={class:"form-check p-3 lg2 mr-3"},X=E((()=>(0,s.Lk)("label",{class:"form-check-label",for:"finished"}," ì™„ë£Œ ",-1))),A={class:"form-check p-3 lg2"},V=E((()=>(0,s.Lk)("label",{class:"form-check-label",for:"notFinished"}," ì§„í–‰ì¤‘ ",-1))),S={key:0,class:"text-center mb-4",style:{color:"gray"}},N={class:"row"},U={class:"p-3"},j={style:{"text-align":"center","font-family":"KB_C2","font-size":"16pt"},class:"mb-2"},O={class:"py-4"},P=E((()=>(0,s.Lk)("span",{class:"lg2",style:{"font-family":"'KB_C1'"}},"ëª©í‘œê¸°ê°„",-1))),Q=E((()=>(0,s.Lk)("br",null,null,-1))),$={class:"md"},z={class:"py-3"},R=E((()=>(0,s.Lk)("span",{class:"lg2",style:{"font-family":"'KB_C1'"}},"ëª©í‘œ ë§ˆì¼ë¦¬ì§€",-1))),W=E((()=>(0,s.Lk)("br",null,null,-1))),H={class:"lg2"},J={class:"py-3"},Y={class:"bold-x-lg",style:{"font-family":"'KB_C1'"}},q={class:"d-flex justify-content-center",style:{"margin-top":"12vh"}},G={key:0,class:"modal-overlay"},Z={class:"modal-content"},ee={class:"modal-header"},te=E((()=>(0,s.Lk)("h2",{class:"modal-title"},"ê°œì¸ë³„ ëª©í‘œ ì„¤ì •í•˜ê¸°",-1))),ae={class:"modal-body"},se={class:"form-group"},le=E((()=>(0,s.Lk)("label",{for:"mileage-select"},"ëª©í‘œ ë§ˆì¼ë¦¬ì§€",-1))),oe={class:"select-wrapper"},ne=["value"],re=E((()=>(0,s.Lk)("i",{class:"bi bi-caret-down-fill select-icon"},null,-1))),ie={class:"form-group"},ce=E((()=>(0,s.Lk)("label",null,"ëª©í‘œ ê¸°ê°„",-1))),de={class:"date-range"},ge=E((()=>(0,s.Lk)("span",{class:"date-separator"},"~",-1))),ue={class:"form-group"},me=E((()=>(0,s.Lk)("label",{for:"mileage-score"},"ëª©í‘œ ë§ˆì¼ë¦¬ì§€ ì ìˆ˜",-1))),he={class:"modal-footer"};function ke(e,t,a,o,n,r){const i=(0,s.g2)("Datepicker");return(0,s.uX)(),(0,s.CE)(s.FK,null,[(0,s.Lk)("div",null,[(0,s.Lk)("div",I,[(0,s.Lk)("div",K,[(0,s.bo)((0,s.Lk)("input",{class:"form-check-input",type:"radio",name:"targetList",id:"finished",value:"finished","onUpdate:modelValue":t[0]||(t[0]=e=>n.sortBy=e)},null,512),[[M.XL,n.sortBy]]),X]),(0,s.Lk)("div",A,[(0,s.bo)((0,s.Lk)("input",{class:"form-check-input",type:"radio",name:"targetList",id:"notFinished",value:"not-finished","onUpdate:modelValue":t[1]||(t[1]=e=>n.sortBy=e)},null,512),[[M.XL,n.sortBy]]),V])]),0===r.filteredMileages.length?((0,s.uX)(),(0,s.CE)("div",S," ì§„í–‰ ì¤‘ì¸ ëª©í‘œê°€ ì—†ìŠµë‹ˆë‹¤. ")):(0,s.Q3)("",!0),(0,s.Lk)("div",N,[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(r.filteredMileages,((e,t)=>((0,s.uX)(),(0,s.CE)("div",{key:e.mile_no,class:"col-md-4 mb-3"},[(0,s.Lk)("div",U,[(0,s.Lk)("div",j,(0,l.v_)(e.mile_name)+" ë§ˆì¼ë¦¬ì§€",1),(0,s.Lk)("div",{style:(0,l.Tr)([{backgroundColor:n.backgroundColors[t%n.backgroundColors.length]},{width:"250px",height:"300px",transition:"transform 0.3s ease"}]),class:"mx-auto rounded-4 target-box"},[(0,s.Lk)("div",O,[P,Q,(0,s.Lk)("span",$,(0,l.v_)(e.start_date)+" - "+(0,l.v_)(e.end_date),1)]),(0,s.Lk)("div",z,[R,W,(0,s.Lk)("span",H,(0,l.v_)(e.target_mileage),1)]),(0,s.Lk)("div",J,[(0,s.Lk)("span",Y,(0,l.v_)(e.achievementRate)+" / "+(0,l.v_)(e.target_mileage),1)])],4)])])))),128))])]),(0,s.Lk)("div",q,[(0,s.Lk)("button",{class:"btn-green mt-2 KB_C2",onClick:t[2]||(t[2]=(...e)=>r.openModal&&r.openModal(...e)),style:{width:"8vw",height:"3vw","font-size":"1.2vw","font-family":"KB_C2"}}," ì¶”ê°€í•˜ê¸° ")]),n.isModalOpen?((0,s.uX)(),(0,s.CE)("div",G,[(0,s.Lk)("div",Z,[(0,s.Lk)("div",ee,[te,(0,s.Lk)("button",{class:"close-button",onClick:t[3]||(t[3]=(...e)=>r.closeModal&&r.closeModal(...e))},"Ã—")]),(0,s.Lk)("div",ae,[(0,s.Lk)("div",se,[le,(0,s.Lk)("div",oe,[(0,s.bo)((0,s.Lk)("select",{"onUpdate:modelValue":t[4]||(t[4]=e=>n.selectedLabel=e),id:"mileage-select",class:"form-select"},[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(n.labels,(e=>((0,s.uX)(),(0,s.CE)("option",{key:e,value:e},(0,l.v_)(e.mile_name),9,ne)))),128))],512),[[M.u1,n.selectedLabel]]),re])]),(0,s.Lk)("div",ie,[ce,(0,s.Lk)("div",de,[(0,s.bF)(i,{modelValue:n.startDate,"onUpdate:modelValue":t[5]||(t[5]=e=>n.startDate=e),format:r.formatDate,placeholder:"ì‹œìž‘ì¼"},null,8,["modelValue","format"]),ge,(0,s.bF)(i,{modelValue:n.endDate,"onUpdate:modelValue":t[6]||(t[6]=e=>n.endDate=e),format:r.formatDate,placeholder:"ì¢…ë£Œì¼"},null,8,["modelValue","format"])])]),(0,s.Lk)("div",ue,[me,(0,s.bo)((0,s.Lk)("input",{type:"number",id:"mileage-score","onUpdate:modelValue":t[7]||(t[7]=e=>n.targetScore=e)},null,512),[[M.Jo,n.targetScore]])])]),(0,s.Lk)("div",he,[(0,s.Lk)("button",{class:"submit-button",onClick:t[8]||(t[8]=(...e)=>r.addAction&&r.addAction(...e))},"ë“±ë¡")])])])):(0,s.Q3)("",!0)],64)}var fe=a(6278),pe=a(6652),be={name:"PersonalTarget",emits:["dataLoaded"],components:{Datepicker:pe.A},data(){return{backgroundColors:["#F4FBF2","#F3FBFE","#F5F5FF","#FFF2FD","#F4F4F4","#FDF5F5","#FBF4EE","#FCFBF1"],isModalOpen:!1,labels:[],selectedLabel:null,startDate:null,endDate:null,targetScore:0,sortBy:"not-finished"}},methods:{...(0,fe.i0)("target",["addTarget","fetchTargets"]),loginInfo(){return this.getLoginInfo},isChecked(){return this.getIsChecked},isLoggedIn(){return!!this.loginInfo},async fetchMileages(){try{const e=await T.A.get("http://localhost:8090/notice/mileage");console.log("fetchMileages ë©”ì†Œë“œ :",e.data),this.labels=e.data}catch(e){console.error("Error fetching mileages:",e.response?e.response.data:e.message)}},handleCheckboxChange(e){"finished"===e&&this.sortByFin?this.sortByNotFin=!1:"not-finished"===e&&this.sortByNotFin&&(this.sortByFin=!1)},formatDate(e){const t=e.getFullYear(),a=String(e.getMonth()+1).padStart(2,"0"),s=String(e.getDate()).padStart(2,"0");return`${t}-${a}-${s}`},openModal(){this.isModalOpen=!0},closeModal(){this.isModalOpen=!1},async addAction(){const e={mileNo:this.selectedLabel.mile_no,userNo:this.loginInfo.user_no,startDate:this.startDate,endDate:this.endDate,targetMileage:this.targetScore,isTogether:!1,isManagerPlan:!1,month:(new Date).getMonth()+1,achievementRate:0};console.log("targetì´ ì„œë²„ë¡œ ë°ì´í„° ë„˜ê¸°ëŠ” ê²ƒ :",e);try{await this.addTarget(e),this.closeModal()}catch(t){console.error("Error adding target:",t.response?t.response.data:t.message)}}},created(){console.log("targer loginInfo ì´ ì°ížˆë‚˜ìš” ?:",this.loginInfo),console.log("isLoggedIn:",this.isLoggedIn),console.log("isChecked:",this.isChecked),this.fetchMileages(),this.fetchTargets(this.loginInfo.user_no).then((()=>{console.log("Targets after fetch:",this.getTargets)}))},computed:{...(0,fe.L8)("login",["getLoginInfo","getIsChecked"]),...(0,fe.aH)("login",["loginInfo"]),...(0,fe.L8)("target",["getTargets"]),targets(){const e=this.getTargets;return console.log("Targets:",e),Array.isArray(e)?e:[]},filteredMileages(){const e=new Date;return this.targets.filter((t=>{if(!t||!t.end_date)return console.warn("Skipping mileage due to missing endDate:",t),!1;const a=new Date(t.end_date);return isNaN(a.getTime())?(console.warn("Invalid date format in endDate:",t.end_date),!1):"finished"===this.sortBy?a<e:"not-finished"!==this.sortBy||a>=e}))}}};const Le=(0,w.A)(be,[["render",ke],["__scopeId","data-v-29f6e139"]]);var ve=Le,ye={name:"MyMileageTarget",components:{TogetherTarget:x,PersonalTarget:ve},data(){return{activeTab:"together"}},methods:{setActiveTab(e){this.activeTab=e}},created(){},computed:{currentComponent(){switch(this.activeTab){case"together":return"TogetherTarget";case"personal":return"PersonalTarget";default:return"TogetherTarget"}},watch:{}}};const Fe=(0,w.A)(ye,[["render",i]]);var Ce=Fe}}]);
//# sourceMappingURL=6532.8bf36f21.js.map
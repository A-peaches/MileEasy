{"version":3,"file":"js/5346.12dba30f.js","mappings":"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","sources":["webpack://mile/./src/views/user/mileage/AI_ReportView.vue","webpack://mile/./node_modules/chartjs-plugin-annotation/dist/chartjs-plugin-annotation.esm.js","webpack://mile/./src/views/user/mileage/AI_ReportView.vue?7a01","webpack://mile/./node_modules/chart.js/auto/auto.js"],"sourcesContent":["<template>\r\n  <div class=\"cards page-back mx-auto\" style=\"color: #4b4a4a\">\r\n    <h2 class=\"bold-x-lg mt-5 mb-5 ml-5\" style=\"font-family: KB_C3\">\r\n      {{ this.loginInfo.user_name }}님의 AI 리포트\r\n    </h2>\r\n\r\n    <div class=\"text-end mb-4 mr-3\">\r\n      <button class=\"btn-analysis\" @click=\"analysis\">AI 맞춤형 분석하기</button>\r\n    </div>\r\n\r\n    <!-- 데이터가 없을 때 메시지 표시 -->\r\n    <div\r\n      v-if=\"!all\"\r\n      class=\"text-center\"\r\n      style=\"\r\n        display: flex;\r\n        justify-content: center;\r\n        align-items: center;\r\n        height: 300px;\r\n      \"\r\n    >\r\n      <h4 class=\"text-center\">조회한 이력이 없습니다.</h4>\r\n    </div>\r\n\r\n    <div v-else>\r\n      <div class=\"row\">\r\n        <div class=\"col-md-3 mb-4\">\r\n          <div class=\"card h-100 shadow-sm fade-in\">\r\n            <div class=\"card-body\">\r\n              <h5 class=\"card-title text-goal\" style=\"font-size: 20pt\">\r\n                전체 순위\r\n              </h5>\r\n              <hr />\r\n              <p\r\n                class=\"mt-4\"\r\n                style=\"font-size: 35pt; font-family: 'KB_C1'; font-weight: 600\"\r\n              >\r\n                <span class=\"fs-4\">상위</span> {{ myRank }}%\r\n              </p>\r\n              <span class=\"addInfo\">( 순위분석 기준일 : {{ dateAi }} )</span>\r\n            </div>\r\n          </div>\r\n        </div>\r\n        <div class=\"col-md mb-4\">\r\n          <div class=\"card h-100 shadow-sm fade-in\">\r\n            <div class=\"card-body card-ml\">\r\n              <h5 class=\"text-primary text-start\" style=\"font-size: 20pt\">\r\n                AI 종합 분석\r\n              </h5>\r\n              <p class=\"text-start addInfo\">\r\n                * 마일이지 AI가 예측한 마일리지 추이와 점수를 토대로 앞으로의\r\n                마일리지 취득 전략을 제안해드립니다.\r\n              </p>\r\n              <div class=\"card-gray\">\r\n                <span>{{ all }}</span>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n      <div class=\"row\">\r\n        <div class=\"col-md-5 mb-4\">\r\n          <div class=\"card h-100 shadow-sm fade-in\">\r\n            <div v-if=\"successYN\" class=\"text-center\">\r\n              <div class=\"card-body\">\r\n                <canvas id=\"myChart1\" style=\"height: 30vh\"></canvas>\r\n              </div>\r\n              <!-- <canvas ref=\"makeChart1\" style=\"height: 30vh\"></canvas> -->\r\n            </div>\r\n          </div>\r\n        </div>\r\n        <div class=\"col-md mb-4\">\r\n          <div class=\"card h-100 shadow-sm fade-in\">\r\n            <div class=\"card-body card-ml\">\r\n              <h5 class=\"text-gray text-start\">순위 분석</h5>\r\n              <div class=\"card-gray\">\r\n                <span>{{ rank }}</span>\r\n              </div>\r\n              <h5 class=\"text-gray text-start mt-4\">1등 추격 전략 🎯</h5>\r\n              <div class=\"card-gray\" style=\"text-align: start\">\r\n                <span> {{ catchTop }}</span>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n      <div class=\"row\">\r\n        <div class=\"col-md mb-4\">\r\n          <div class=\"card h-100 shadow-sm fade-in\">\r\n            <div class=\"card-body card-ml\">\r\n              <h5 class=\"text-gray text-start\">마일리지별 분석</h5>\r\n              <p class=\"text-start addInfo\">\r\n                * 마일이지가 사용자의 포지션에 따라 분석한 결과로, 마일리지\r\n                가중치 및 연간 최대 한도를 고려하여 전략과 개선 사항을\r\n                제안해드립니다.\r\n              </p>\r\n              <div class=\"card-gray\">\r\n                <span> {{ mile }} </span>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n        <div class=\"col-md-5 mb-4\">\r\n          <div class=\"card h-100 shadow-sm fade-in\">\r\n            <div class=\"card-body\">\r\n              <canvas id=\"myChart2\" style=\"height: 30vh\"></canvas>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n      <div class=\"row\">\r\n        <div class=\"col-md\">\r\n          <div\r\n            class=\"card shadow-sm mb-4 fade-in\"\r\n            style=\"background-color: #f5f5f5; border: #f5f5f5\"\r\n          >\r\n            <div class=\"card-body text-start card-ml\">\r\n              <h5 class=\"text-emphasis text-start\">\r\n                <i class=\"bi bi-info-circle-fill\"></i> 유의 사항\r\n              </h5>\r\n              <span class=\"ml-5\">\r\n                본 리포트는 마일이지 플랫폼에 축척된 데이터를 학습한 AI 모델의\r\n                예측에 기반하고 있습니다. <br />\r\n              </span>\r\n              <span class=\"ml-5\">\r\n                본 리포트는 마일리지 관리를 위한 참고 목적으로 활용할 수 있도록\r\n                제공되며, 증빙 등의 다른 목적으로는 사용할 수 없습니다.\r\n              </span>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { mapActions, mapGetters } from 'vuex';\r\nimport Chart from 'chart.js/auto';\r\nimport annotationPlugin from 'chartjs-plugin-annotation';\r\nimport api from '@/api/axios';\r\nimport Swal from 'sweetalert2';\r\n\r\nChart.register(annotationPlugin);\r\n\r\nexport default {\r\n  name: 'AI_ReportView',\r\n\r\n  data() {\r\n    return {\r\n      hasReport: true, // 리포트 데이터 존재 여부\r\n    };\r\n  },\r\n  methods: {\r\n    async aitest() {\r\n      try {\r\n        const response = await api.post('bot/chat', null, {\r\n          params: {\r\n            prompt: `이름: ${this.loginInfo.user_name}, 사번: ${this.loginInfo.user_no}님을`,\r\n\r\n            user_no: this.loginInfo.user_no,\r\n          },\r\n        });\r\n        console.log(response.data);\r\n      } catch (error) {\r\n        console.error('Error during API request:', error);\r\n      }\r\n    },\r\n\r\n    async airank() {\r\n      try {\r\n        const response = await api.post('bot/chatRank', null, {\r\n          params: {\r\n            prompt: `이름: ${this.loginInfo.user_name}, 사번: ${this.loginInfo.user_no}님`,\r\n\r\n            user_no: this.loginInfo.user_no,\r\n          },\r\n        });\r\n        console.log(response.data);\r\n      } catch (error) {\r\n        console.error('Error during API request:', error);\r\n      }\r\n    },\r\n\r\n    async aiCatch() {\r\n      try {\r\n        const response = await api.post('bot/chatCatchup', null, {\r\n          params: {\r\n            prompt: `이름: ${this.loginInfo.user_name}, 사번: ${this.loginInfo.user_no}님`,\r\n\r\n            user_no: this.loginInfo.user_no,\r\n          },\r\n        });\r\n        console.log(response.data);\r\n      } catch (error) {\r\n        console.error('Error during API request:', error);\r\n      }\r\n    },\r\n    async aiMile() {\r\n      try {\r\n        const response = await api.post('bot/chatMile', null, {\r\n          params: {\r\n            prompt: `이름: ${this.loginInfo.user_name}, 사번: ${this.loginInfo.user_no}`,\r\n\r\n            user_no: this.loginInfo.user_no,\r\n          },\r\n        });\r\n        console.log(response.data);\r\n      } catch (error) {\r\n        console.error('Error during API request:', error);\r\n      }\r\n    },\r\n\r\n    async runAnalysis() {\r\n      // 순차적으로 메소드를 실행\r\n      await this.aitest();\r\n      await this.delay(5000);\r\n      await this.airank();\r\n      await this.delay(5000);\r\n      await this.aiMile();\r\n      await this.delay(10000);\r\n      await this.aiCatch();\r\n    },\r\n    delay(ms) {\r\n      return new Promise((resolve) => setTimeout(resolve, ms));\r\n    },\r\n    ...mapActions('aireport', ['getReport']),\r\n    // async\r\n    getReport() {\r\n      try {\r\n        // await\r\n        this.$store.dispatch('aireport/getReport', this.loginInfo.user_no);\r\n        if (this.all) {\r\n          // 데이터가 있는 경우에만 차트 생성\r\n          this.createCharts();\r\n        }\r\n      } catch (error) {\r\n        console.error('Failed to get report:', error);\r\n        // 에러 처리 로직 (예: 사용자에게 알림)\r\n      }\r\n    },\r\n\r\n    async createCharts() {\r\n      this.createChart1();\r\n      this.createChart2();\r\n    },\r\n\r\n    async analysis() {\r\n      const today = new Date().toISOString().split('T')[0];\r\n      if (this.dateAi === today) {\r\n        Swal.fire({\r\n          title: '알림',\r\n          text: '하루에 한 번만 조회가 가능합니다.',\r\n          icon: 'info',\r\n          confirmButtonText: '확인',\r\n        });\r\n        return;\r\n      }\r\n\r\n      try {\r\n        // 분석 알림창을 표시하고, 동시에 백그라운드에서 분석 작업을 시작합니다.\r\n        const alertPromise = this.analysisAlert();\r\n        const analysisPromise = this.runAnalysis();\r\n\r\n        // 두 작업이 모두 완료될 때까지 기다립니다.\r\n        await Promise.all([alertPromise, analysisPromise]);\r\n\r\n        Swal.fire({\r\n          title: '분석 완료',\r\n          text: '마일리지 분석이 완료되었습니다.',\r\n          icon: 'success',\r\n          confirmButtonText: '확인',\r\n        });\r\n        // 분석이 완료되면 데이터를 가져옵니다.\r\n        await this.getReport();\r\n\r\n        // 분석 완료 메시지를 표시합니다.\r\n      } catch (error) {\r\n        console.error('분석 중 오류가 발생했습니다:', error);\r\n        Swal.fire({\r\n          title: '오류',\r\n          text: '분석 중 문제가 발생했습니다. 다시 시도해 주세요.',\r\n          icon: 'error',\r\n          confirmButtonText: '확인',\r\n        });\r\n      }\r\n    },\r\n\r\n    async analysisAlert() {\r\n      return new Promise((resolve) => {\r\n        Swal.fire({\r\n          timer: 45000,\r\n          timerProgressBar: true,\r\n          imageUrl: require('@/assets/img/analysis.gif'),\r\n          imageClass: 'custom-image-class',\r\n          scrollbarPadding: false,\r\n          title: '분석중..',\r\n          html: `${this.getLoginInfo.user_name}님의 마일리지를 분석중입니다`,\r\n          showCloseButton: true,\r\n          didOpen: () => {\r\n            const popup = Swal.getPopup();\r\n            const image = Swal.getImage();\r\n            const title = popup.querySelector('.swal2-title');\r\n            const img = popup.querySelector('.swal2-image');\r\n\r\n            title.style.marginTop = '0';\r\n            title.style.paddingTop = '0';\r\n            popup.style.height = '400px';\r\n            img.style.margin = '15px auto 0px auto';\r\n            image.style.width = '200px';\r\n            image.style.height = 'auto';\r\n            image.style.padding = '0px 0px 0px 30px';\r\n\r\n            Swal.showLoading();\r\n          },\r\n          willClose: () => {\r\n            resolve();\r\n          },\r\n        });\r\n      });\r\n    },\r\n\r\n    createChart1() {\r\n      console.log('차트1', document.getElementById('myChart1'));\r\n      let myChart1 = document.getElementById('myChart1');\r\n      // const myChart1 = this.$refs.makeChart1;\r\n      const ctx = myChart1.getContext('2d');\r\n      if (Chart.getChart(myChart1)) {\r\n        Chart.getChart(myChart1)?.destroy();\r\n      }\r\n\r\n      if (!ctx) {\r\n        return;\r\n      }\r\n      const score = parseInt(this.chartRank);\r\n\r\n      const getPointColor = (score) => {\r\n        if (score > 70) return 'rgba(146, 183, 255)';\r\n        if (score >= 30) return 'rgba(39, 234, 182)';\r\n        return 'rgba(255, 206, 86)';\r\n      };\r\n\r\n      // 선형 보간 함수\r\n      const linearInterpolation = (x, x0, x1, y0, y1) => {\r\n        return y0 + ((x - x0) * (y1 - y0)) / (x1 - x0);\r\n      };\r\n\r\n      // 점수에 따른 x 위치 계산\r\n      const getXPosition = (score) => {\r\n        if (score <= 30) return linearInterpolation(score, 0, 30, 0, 1);\r\n        if (score <= 70) return linearInterpolation(score, 30, 70, 1, 2);\r\n        return linearInterpolation(score, 70, 100, 2, 3);\r\n      };\r\n\r\n      const xPosition = getXPosition(score);\r\n\r\n      myChart1 = new Chart(ctx, {\r\n        type: 'line',\r\n        data: {\r\n          labels: ['0%', '30%', '70%', '100%'],\r\n          datasets: [\r\n            {\r\n              data: [\r\n                { x: 0, y: 0 },\r\n                { x: 1, y: 30 },\r\n                { x: 2, y: 70 },\r\n                { x: 3, y: 100 },\r\n              ],\r\n              borderColor: (context) => {\r\n                const chart = context.chart;\r\n                const { ctx, chartArea } = chart;\r\n                if (!chartArea) {\r\n                  return null;\r\n                }\r\n                const gradient = ctx.createLinearGradient(\r\n                  chartArea.left,\r\n                  0,\r\n                  chartArea.right,\r\n                  0\r\n                );\r\n                gradient.addColorStop(0, 'rgba(255, 206, 86, 1)');\r\n                gradient.addColorStop(0.31, 'rgba(255, 206, 86, 1)');\r\n                gradient.addColorStop(0.35, 'rgba(39, 234, 182, 1)');\r\n                gradient.addColorStop(0.66, 'rgba(39, 234, 182, 1)');\r\n                gradient.addColorStop(0.69, 'rgba(146, 183, 255, 1)');\r\n                gradient.addColorStop(1, 'rgba(146, 183, 255, 1)');\r\n                return gradient;\r\n              },\r\n              borderWidth: 2,\r\n              fill: true,\r\n              backgroundColor: (context) => {\r\n                const chart = context.chart;\r\n                const { ctx, chartArea } = chart;\r\n                if (!chartArea) {\r\n                  return null;\r\n                }\r\n                const gradient = ctx.createLinearGradient(\r\n                  chartArea.left,\r\n                  0,\r\n                  chartArea.right,\r\n                  0\r\n                );\r\n                gradient.addColorStop(0, 'rgba(255, 206, 86, 0.5)');\r\n                gradient.addColorStop(0.31, 'rgba(255, 206, 86, 0.5)');\r\n                gradient.addColorStop(0.35, 'rgba(39, 234, 182, 0.5)');\r\n                gradient.addColorStop(0.66, 'rgba(39, 234, 182, 0.5)');\r\n                gradient.addColorStop(0.69, 'rgba(146, 183, 255, 0.5)');\r\n                gradient.addColorStop(1, 'rgba(146, 183, 255, 0.5)');\r\n                return gradient;\r\n              },\r\n              pointRadius: 0,\r\n              order: 2, // 라인 그래프를 뒤로 보냅니다\r\n            },\r\n            {\r\n              data: [{ x: xPosition, y: score }],\r\n              pointBackgroundColor: getPointColor(score),\r\n              pointBorderColor: getPointColor(score),\r\n              pointRadius: 6,\r\n              pointHoverRadius: 8,\r\n              type: 'scatter',\r\n              order: 1, // 스캐터 포인트를 앞으로 가져옵니다\r\n            },\r\n          ],\r\n        },\r\n        options: {\r\n          responsive: true,\r\n          maintainAspectRatio: false,\r\n          scales: {\r\n            x: {\r\n              type: 'linear',\r\n              min: 0,\r\n              max: 3,\r\n              ticks: {\r\n                stepSize: 1,\r\n                callback: function (value, index) {\r\n                  return ['0%', '30%', '70%', '100%'][index];\r\n                },\r\n              },\r\n            },\r\n            y: {\r\n              beginAtZero: true,\r\n              max: 100,\r\n              grid: {\r\n                display: true,\r\n              },\r\n              ticks: {\r\n                // display: false\r\n              },\r\n            },\r\n          },\r\n          plugins: {\r\n            legend: {\r\n              display: false,\r\n            },\r\n            tooltip: {\r\n              callbacks: {\r\n                label: function (context) {\r\n                  if (context.datasetIndex === 1) {\r\n                    return 'Me: ' + context.parsed.y + '%';\r\n                  }\r\n                },\r\n              },\r\n            },\r\n          },\r\n          elements: {\r\n            point: {\r\n              radius: 0,\r\n            },\r\n            line: {\r\n              tension: 0.2,\r\n            },\r\n          },\r\n        },\r\n        plugins: [\r\n          {\r\n            afterDraw: (chart) => {\r\n              const ctx = chart.ctx;\r\n              const xAxis = chart.scales.x;\r\n              const yAxis = chart.scales.y;\r\n\r\n              const x = xAxis.getPixelForValue(xPosition);\r\n              const y = yAxis.getPixelForValue(score);\r\n\r\n              ctx.save();\r\n              ctx.fillStyle = getPointColor(score);\r\n              ctx.font = 'bold 14px Arial';\r\n              ctx.textAlign = 'center';\r\n\r\n              if (score < 79) {\r\n                // 화살표 그리기\r\n                ctx.strokeStyle = getPointColor(score);\r\n\r\n                // 막대기 부분\r\n                ctx.beginPath();\r\n                ctx.moveTo(x, y);\r\n                ctx.lineTo(x, y - 40);\r\n                ctx.lineWidth = 2;\r\n                ctx.stroke();\r\n\r\n                // 삼각형 화살표 부분\r\n                ctx.beginPath();\r\n                ctx.moveTo(x, y - 40);\r\n                ctx.lineTo(x - 6, y - 34);\r\n                ctx.lineTo(x + 6, y - 34);\r\n                ctx.closePath();\r\n                ctx.fill();\r\n\r\n                // \"Me!\" 텍스트 그리기\r\n                ctx.fillText('Me!', x, y - 50);\r\n              } else {\r\n                // score가 79 이상일 때는 scatter 바로 위에 \"Me!\" 표시\r\n                ctx.fillText('Me!', x, y - 15);\r\n              }\r\n\r\n              ctx.restore();\r\n            },\r\n          },\r\n        ],\r\n      });\r\n    },\r\n\r\n    createChart2() {\r\n      let myChart2 = document.getElementById('myChart2');\r\n\r\n      const ctx = myChart2.getContext('2d');\r\n      if (Chart.getChart(myChart2)) {\r\n        Chart.getChart(myChart2)?.destroy();\r\n      }\r\n\r\n      if (!ctx) {\r\n        return;\r\n      }\r\n\r\n      this.label = this.avg_score_json.map((item) => item.mile_name);\r\n      this.avg_data = this.avg_score_json.map((item) => item.average_score);\r\n      this.my_data = this.my_score_json.map((item) => item.total_score);\r\n\r\n      console.log();\r\n      let data = {\r\n        labels: this.label,\r\n\r\n        datasets: [\r\n          {\r\n            label: '내 점수',\r\n            data: this.my_data,\r\n            backgroundColor: 'rgba(255, 0, 46, 0.3)',\r\n            borderColor: 'rgba(255, 0, 46, 0.5)',\r\n            pointBackgroundColor: 'rgb(255, 99, 132)',\r\n            pointBorderColor: '#fff',\r\n            pointHoverBackgroundColor: '#fff',\r\n            pointHoverBorderColor: 'rgb(255, 99, 132)',\r\n          },\r\n          {\r\n            label: '평균 점수',\r\n            data: this.avg_data,\r\n            backgroundColor: 'rgba(0, 122, 255, 0.2)',\r\n            borderColor: 'rgba(0, 122, 255, 0.4)',\r\n            pointBackgroundColor: 'rgb(54, 162, 235)',\r\n            pointBorderColor: '#fff',\r\n            pointHoverBackgroundColor: '#fff',\r\n            pointHoverBorderColor: 'rgb(54, 162, 235)',\r\n          },\r\n        ],\r\n      };\r\n\r\n      const config = {\r\n        type: 'radar',\r\n        data: data,\r\n        options: {\r\n          elements: {\r\n            line: {\r\n              borderWidth: 3,\r\n            },\r\n          },\r\n          scales: {\r\n            r: {\r\n              angleLines: {\r\n                display: false,\r\n              },\r\n              suggestedMin: 0,\r\n              suggestedMax: 100,\r\n              ticks: {\r\n                stepSize: 20, // 간격을 20으로 설정 (5개의 간격: 20, 40, 60, 80, 100)\r\n                display: false, // 눈금 숫자를 표시하지 않음\r\n              },\r\n              pointLabels: {\r\n                font: {\r\n                  size: 12, // 레이블 폰트 크기 조정\r\n                },\r\n              },\r\n              grid: {\r\n                // circular: true,\r\n                color: 'rgba(0, 0, 0, 0.2)', // 그리드 선 색상 설정 (필요시)\r\n              },\r\n            },\r\n          },\r\n        },\r\n      };\r\n\r\n      myChart2 = new Chart(ctx, config);\r\n    },\r\n  },\r\n  mounted() {\r\n    this.getReport();\r\n  },\r\n  computed: {\r\n    ...mapGetters('login', ['getLoginInfo']),\r\n\r\n    ...mapGetters('aireport', [\r\n      'getAll',\r\n      'getRank',\r\n      'getCatchTops',\r\n      'getDateAi',\r\n      'getMyRank',\r\n      'getChartRank',\r\n      'getAvg_score_json',\r\n      'getMy_score_json',\r\n      'getSuccessYN',\r\n      'getMile',\r\n    ]),\r\n\r\n    loginInfo() {\r\n      return this.getLoginInfo;\r\n    },\r\n    all() {\r\n      return this.getAll;\r\n    },\r\n    rank() {\r\n      return this.getRank;\r\n    },\r\n    catchTop() {\r\n      return this.getCatchTops;\r\n    },\r\n    mile() {\r\n      return this.getMile;\r\n    },\r\n    dateAi() {\r\n      return this.getDateAi;\r\n    },\r\n    myRank() {\r\n      return this.getMyRank;\r\n    },\r\n    chartRank() {\r\n      return this.getChartRank;\r\n    },\r\n    avg_score_json() {\r\n      return this.getAvg_score_json;\r\n    },\r\n    my_score_json() {\r\n      return this.getMy_score_json;\r\n    },\r\n    successYN() {\r\n      return this.getSuccessYN;\r\n    },\r\n  },\r\n\r\n  watch: {\r\n    loginInfo: {\r\n      immediate: true,\r\n      handler(newVal) {\r\n        if (newVal) {\r\n          this.getReport();\r\n        }\r\n      },\r\n    },\r\n    all: {\r\n      handler(newVal) {\r\n        if (newVal) {\r\n          this.$nextTick(() => {\r\n            this.createCharts();\r\n          });\r\n        }\r\n      },\r\n      immediate: true,\r\n    },\r\n  },\r\n};\r\n</script>\r\n\r\n<style scoped>\r\n.text-emphasis {\r\n  font-size: 13pt;\r\n  font-family: 'KB_S5';\r\n  font-weight: 600;\r\n  color: #4b4a4a;\r\n}\r\n\r\n.card {\r\n  transition: all 0.3s ease;\r\n}\r\n\r\n.card-ml {\r\n  margin-left: 10px;\r\n  text-align: start;\r\n}\r\n\r\n.card:hover {\r\n  transform: translateY(-5px);\r\n  box-shadow: 0 4px 15px rgba(0, 0, 0, 0.1) !important;\r\n}\r\n\r\n.text-primary {\r\n  color: #32ab8b !important;\r\n  font-weight: 600;\r\n  font-family: 'KB_S5';\r\n}\r\n\r\n.text-secondary {\r\n  color: #4a90e2 !important;\r\n  font-weight: 600;\r\n  font-family: 'KB_S5';\r\n}\r\n\r\n.text-goal {\r\n  color: #ff7e5e !important;\r\n  font-weight: 600;\r\n  font-family: 'KB_S5';\r\n}\r\n\r\n.text-gray {\r\n  color: #3b3b3b !important;\r\n  font-weight: 600;\r\n  font-family: 'KB_S5';\r\n}\r\n\r\n.addInfo {\r\n  color: rgb(152, 152, 152);\r\n  font-size: 12pt;\r\n}\r\n\r\n.card-gray {\r\n  border-radius: 7px;\r\n  padding: 15px 10px 15px 10px;\r\n  text-align: start;\r\n}\r\n\r\nspan {\r\n  font-size: 14pt;\r\n  font-family: 'KB_S5';\r\n}\r\n\r\n.row {\r\n  margin: 17px 0px 17px 0px;\r\n}\r\n\r\n.highlight {\r\n  background-color: #fff6d4;\r\n  border-radius: 30px; /* 둥근 모서리 */\r\n  padding: 4px 8px; /* 내부 여백을 추가하여 크기 조절 */\r\n  display: inline-block; /* 인라인 블록 요소로 설정하여 크기 조절 */\r\n}\r\n\r\n.page-back {\r\n  padding-left: 5%;\r\n  padding-right: 5%;\r\n}\r\n\r\n@keyframes fadeIn {\r\n  from {\r\n    opacity: 0;\r\n    transform: translateY(-20px);\r\n  }\r\n  to {\r\n    opacity: 1;\r\n    transform: translateY(0);\r\n  }\r\n}\r\n\r\n.fade-in {\r\n  animation: fadeIn 0.5s ease-out;\r\n}\r\n</style>\r\n","/*!\n* chartjs-plugin-annotation v3.0.1\n* https://www.chartjs.org/chartjs-plugin-annotation/index\n * (c) 2023 chartjs-plugin-annotation Contributors\n * Released under the MIT License\n */\nimport { Element, defaults, Animations, Chart } from 'chart.js';\nimport { distanceBetweenPoints, defined, isFunction, callback, isObject, valueOrDefault, toRadians, isArray, toFont, addRoundedRectPath, toTRBLCorners, QUARTER_PI, PI, HALF_PI, TWO_THIRDS_PI, TAU, isNumber, RAD_PER_DEG, toPadding, isFinite, toDegrees, clipArea, unclipArea } from 'chart.js/helpers';\n\n/**\n * @typedef { import(\"chart.js\").ChartEvent } ChartEvent\n * @typedef { import('../../types/element').AnnotationElement } AnnotationElement\n */\n\nconst interaction = {\n  modes: {\n    /**\n     * Point mode returns all elements that hit test based on the event position\n     * @param {Object} state - the state of the plugin\n     * @param {ChartEvent} event - the event we are find things at\n     * @return {AnnotationElement[]} - elements that are found\n     */\n    point(state, event) {\n      return filterElements(state, event, {intersect: true});\n    },\n\n    /**\n     * Nearest mode returns the element closest to the event position\n     * @param {Object} state - the state of the plugin\n     * @param {ChartEvent} event - the event we are find things at\n     * @param {Object} options - interaction options to use\n     * @return {AnnotationElement[]} - elements that are found (only 1 element)\n     */\n    nearest(state, event, options) {\n      return getNearestItem(state, event, options);\n    },\n    /**\n     * x mode returns the elements that hit-test at the current x coordinate\n     * @param {Object} state - the state of the plugin\n     * @param {ChartEvent} event - the event we are find things at\n     * @param {Object} options - interaction options to use\n     * @return {AnnotationElement[]} - elements that are found\n     */\n    x(state, event, options) {\n      return filterElements(state, event, {intersect: options.intersect, axis: 'x'});\n    },\n\n    /**\n     * y mode returns the elements that hit-test at the current y coordinate\n     * @param {Object} state - the state of the plugin\n     * @param {ChartEvent} event - the event we are find things at\n     * @param {Object} options - interaction options to use\n     * @return {AnnotationElement[]} - elements that are found\n     */\n    y(state, event, options) {\n      return filterElements(state, event, {intersect: options.intersect, axis: 'y'});\n    }\n  }\n};\n\n/**\n * Returns all elements that hit test based on the event position\n * @param {Object} state - the state of the plugin\n * @param {ChartEvent} event - the event we are find things at\n * @param {Object} options - interaction options to use\n * @return {AnnotationElement[]} - elements that are found\n */\nfunction getElements(state, event, options) {\n  const mode = interaction.modes[options.mode] || interaction.modes.nearest;\n  return mode(state, event, options);\n}\n\nfunction inRangeByAxis(element, event, axis) {\n  if (axis !== 'x' && axis !== 'y') {\n    return element.inRange(event.x, event.y, 'x', true) || element.inRange(event.x, event.y, 'y', true);\n  }\n  return element.inRange(event.x, event.y, axis, true);\n}\n\nfunction getPointByAxis(event, center, axis) {\n  if (axis === 'x') {\n    return {x: event.x, y: center.y};\n  } else if (axis === 'y') {\n    return {x: center.x, y: event.y};\n  }\n  return center;\n}\n\nfunction filterElements(state, event, options) {\n  return state.visibleElements.filter((element) => options.intersect ? element.inRange(event.x, event.y) : inRangeByAxis(element, event, options.axis));\n}\n\nfunction getNearestItem(state, event, options) {\n  let minDistance = Number.POSITIVE_INFINITY;\n\n  return filterElements(state, event, options)\n    .reduce((nearestItems, element) => {\n      const center = element.getCenterPoint();\n      const evenPoint = getPointByAxis(event, center, options.axis);\n      const distance = distanceBetweenPoints(event, evenPoint);\n      if (distance < minDistance) {\n        nearestItems = [element];\n        minDistance = distance;\n      } else if (distance === minDistance) {\n        // Can have multiple items at the same distance in which case we sort by size\n        nearestItems.push(element);\n      }\n\n      return nearestItems;\n    }, [])\n    .sort((a, b) => a._index - b._index)\n    .slice(0, 1); // return only the top item;\n}\n\nconst isOlderPart = (act, req) => req > act || (act.length > req.length && act.slice(0, req.length) === req);\n\n/**\n * @typedef { import('chart.js').Point } Point\n * @typedef { import('chart.js').InteractionAxis } InteractionAxis\n * @typedef { import('../../types/element').AnnotationElement } AnnotationElement\n */\n\nconst EPSILON = 0.001;\nconst clamp = (x, from, to) => Math.min(to, Math.max(from, x));\n\n/**\n * @param {Object} obj\n * @param {number} from\n * @param {number} to\n * @returns {Object}\n */\nfunction clampAll(obj, from, to) {\n  for (const key of Object.keys(obj)) {\n    obj[key] = clamp(obj[key], from, to);\n  }\n  return obj;\n}\n\n/**\n * @param {Point} point\n * @param {Point} center\n * @param {number} radius\n * @param {number} borderWidth\n * @returns {boolean}\n */\nfunction inPointRange(point, center, radius, borderWidth) {\n  if (!point || !center || radius <= 0) {\n    return false;\n  }\n  const hBorderWidth = borderWidth / 2;\n  return (Math.pow(point.x - center.x, 2) + Math.pow(point.y - center.y, 2)) <= Math.pow(radius + hBorderWidth, 2);\n}\n\n/**\n * @param {Point} point\n * @param {{x: number, y: number, x2: number, y2: number}} rect\n * @param {InteractionAxis} axis\n * @param {number} borderWidth\n * @returns {boolean}\n */\nfunction inBoxRange(point, {x, y, x2, y2}, axis, borderWidth) {\n  const hBorderWidth = borderWidth / 2;\n  const inRangeX = point.x >= x - hBorderWidth - EPSILON && point.x <= x2 + hBorderWidth + EPSILON;\n  const inRangeY = point.y >= y - hBorderWidth - EPSILON && point.y <= y2 + hBorderWidth + EPSILON;\n  if (axis === 'x') {\n    return inRangeX;\n  } else if (axis === 'y') {\n    return inRangeY;\n  }\n  return inRangeX && inRangeY;\n}\n\n/**\n * @param {AnnotationElement} element\n * @param {boolean} useFinalPosition\n * @returns {Point}\n */\nfunction getElementCenterPoint(element, useFinalPosition) {\n  const {centerX, centerY} = element.getProps(['centerX', 'centerY'], useFinalPosition);\n  return {x: centerX, y: centerY};\n}\n\n/**\n * @param {string} pkg\n * @param {string} min\n * @param {string} ver\n * @param {boolean} [strict=true]\n * @returns {boolean}\n */\nfunction requireVersion(pkg, min, ver, strict = true) {\n  const parts = ver.split('.');\n  let i = 0;\n  for (const req of min.split('.')) {\n    const act = parts[i++];\n    if (parseInt(req, 10) < parseInt(act, 10)) {\n      break;\n    }\n    if (isOlderPart(act, req)) {\n      if (strict) {\n        throw new Error(`${pkg} v${ver} is not supported. v${min} or newer is required.`);\n      } else {\n        return false;\n      }\n    }\n  }\n  return true;\n}\n\nconst isPercentString = (s) => typeof s === 'string' && s.endsWith('%');\nconst toPercent = (s) => parseFloat(s) / 100;\nconst toPositivePercent = (s) => clamp(toPercent(s), 0, 1);\n\nconst boxAppering = (x, y) => ({x, y, x2: x, y2: y, width: 0, height: 0});\nconst defaultInitAnimation = {\n  box: (properties) => boxAppering(properties.centerX, properties.centerY),\n  ellipse: (properties) => ({centerX: properties.centerX, centerY: properties.centerX, radius: 0, width: 0, height: 0}),\n  label: (properties) => boxAppering(properties.centerX, properties.centerY),\n  line: (properties) => boxAppering(properties.x, properties.y),\n  point: (properties) => ({centerX: properties.centerX, centerY: properties.centerY, radius: 0, width: 0, height: 0}),\n  polygon: (properties) => boxAppering(properties.centerX, properties.centerY)\n};\n\n/**\n * @typedef { import(\"chart.js\").Chart } Chart\n * @typedef { import('../../types/element').AnnotationBoxModel } AnnotationBoxModel\n * @typedef { import('../../types/element').AnnotationElement } AnnotationElement\n * @typedef { import('../../types/options').AnnotationPointCoordinates } AnnotationPointCoordinates\n * @typedef { import('../../types/label').CoreLabelOptions } CoreLabelOptions\n * @typedef { import('../../types/label').LabelPositionObject } LabelPositionObject\n */\n\n/**\n * @param {number} size\n * @param {number|string} position\n * @returns {number}\n */\nfunction getRelativePosition(size, position) {\n  if (position === 'start') {\n    return 0;\n  }\n  if (position === 'end') {\n    return size;\n  }\n  if (isPercentString(position)) {\n    return toPositivePercent(position) * size;\n  }\n  return size / 2;\n}\n\n/**\n * @param {number} size\n * @param {number|string} value\n * @param {boolean} [positivePercent=true]\n * @returns {number}\n */\nfunction getSize(size, value, positivePercent = true) {\n  if (typeof value === 'number') {\n    return value;\n  } else if (isPercentString(value)) {\n    return (positivePercent ? toPositivePercent(value) : toPercent(value)) * size;\n  }\n  return size;\n}\n\n/**\n * @param {{x: number, width: number}} size\n * @param {CoreLabelOptions} options\n * @returns {number}\n */\nfunction calculateTextAlignment(size, options) {\n  const {x, width} = size;\n  const textAlign = options.textAlign;\n  if (textAlign === 'center') {\n    return x + width / 2;\n  } else if (textAlign === 'end' || textAlign === 'right') {\n    return x + width;\n  }\n  return x;\n}\n\n/**\n * @param {{x: number|string, y: number|string}|string|number} value\n * @param {string|number} defaultValue\n * @returns {{x: number|string, y: number|string}}\n */\nfunction toPosition(value, defaultValue = 'center') {\n  if (isObject(value)) {\n    return {\n      x: valueOrDefault(value.x, defaultValue),\n      y: valueOrDefault(value.y, defaultValue),\n    };\n  }\n  value = valueOrDefault(value, defaultValue);\n  return {\n    x: value,\n    y: value\n  };\n}\n\n/**\n * @param {AnnotationPointCoordinates} options\n * @returns {boolean}\n */\nfunction isBoundToPoint(options) {\n  return options && (defined(options.xValue) || defined(options.yValue));\n}\n\n/**\n * @param {Chart} chart\n * @param {AnnotationBoxModel} properties\n * @param {CoreAnnotationOptions} options\n * @returns {AnnotationElement}\n */\nfunction initAnimationProperties(chart, properties, options) {\n  const initAnim = options.init;\n  if (!initAnim) {\n    return;\n  } else if (initAnim === true) {\n    return applyDefault(properties, options);\n  }\n  return execCallback(chart, properties, options);\n}\n\n/**\n * @param {Object} options\n * @param {Array} hooks\n * @param {Object} hooksContainer\n * @returns {boolean}\n */\nfunction loadHooks(options, hooks, hooksContainer) {\n  let activated = false;\n  hooks.forEach(hook => {\n    if (isFunction(options[hook])) {\n      activated = true;\n      hooksContainer[hook] = options[hook];\n    } else if (defined(hooksContainer[hook])) {\n      delete hooksContainer[hook];\n    }\n  });\n  return activated;\n}\n\nfunction applyDefault(properties, options) {\n  const type = options.type || 'line';\n  return defaultInitAnimation[type](properties);\n}\n\nfunction execCallback(chart, properties, options) {\n  const result = callback(options.init, [{chart, properties, options}]);\n  if (result === true) {\n    return applyDefault(properties, options);\n  } else if (isObject(result)) {\n    return result;\n  }\n}\n\nconst widthCache = new Map();\nconst notRadius = (radius) => isNaN(radius) || radius <= 0;\nconst fontsKey = (fonts) => fonts.reduce(function(prev, item) {\n  prev += item.string;\n  return prev;\n}, '');\n\n/**\n * @typedef { import('chart.js').Point } Point\n * @typedef { import('../../types/label').CoreLabelOptions } CoreLabelOptions\n * @typedef { import('../../types/options').PointAnnotationOptions } PointAnnotationOptions\n */\n\n/**\n * Determine if content is an image or a canvas.\n * @param {*} content\n * @returns boolean|undefined\n * @todo move this function to chart.js helpers\n */\nfunction isImageOrCanvas(content) {\n  if (content && typeof content === 'object') {\n    const type = content.toString();\n    return (type === '[object HTMLImageElement]' || type === '[object HTMLCanvasElement]');\n  }\n}\n\n/**\n * Set the translation on the canvas if the rotation must be applied.\n * @param {CanvasRenderingContext2D} ctx - chart canvas context\n * @param {Point} point - the point of translation\n * @param {number} rotation - rotation (in degrees) to apply\n */\nfunction translate(ctx, {x, y}, rotation) {\n  if (rotation) {\n    ctx.translate(x, y);\n    ctx.rotate(toRadians(rotation));\n    ctx.translate(-x, -y);\n  }\n}\n\n/**\n * @param {CanvasRenderingContext2D} ctx\n * @param {Object} options\n * @returns {boolean|undefined}\n */\nfunction setBorderStyle(ctx, options) {\n  if (options && options.borderWidth) {\n    ctx.lineCap = options.borderCapStyle;\n    ctx.setLineDash(options.borderDash);\n    ctx.lineDashOffset = options.borderDashOffset;\n    ctx.lineJoin = options.borderJoinStyle;\n    ctx.lineWidth = options.borderWidth;\n    ctx.strokeStyle = options.borderColor;\n    return true;\n  }\n}\n\n/**\n * @param {CanvasRenderingContext2D} ctx\n * @param {Object} options\n */\nfunction setShadowStyle(ctx, options) {\n  ctx.shadowColor = options.backgroundShadowColor;\n  ctx.shadowBlur = options.shadowBlur;\n  ctx.shadowOffsetX = options.shadowOffsetX;\n  ctx.shadowOffsetY = options.shadowOffsetY;\n}\n\n/**\n * @param {CanvasRenderingContext2D} ctx\n * @param {CoreLabelOptions} options\n * @returns {{width: number, height: number}}\n */\nfunction measureLabelSize(ctx, options) {\n  const content = options.content;\n  if (isImageOrCanvas(content)) {\n    return {\n      width: getSize(content.width, options.width),\n      height: getSize(content.height, options.height)\n    };\n  }\n  const optFont = options.font;\n  const fonts = isArray(optFont) ? optFont.map(f => toFont(f)) : [toFont(optFont)];\n  const strokeWidth = options.textStrokeWidth;\n  const lines = isArray(content) ? content : [content];\n  const mapKey = lines.join() + fontsKey(fonts) + strokeWidth + (ctx._measureText ? '-spriting' : '');\n  if (!widthCache.has(mapKey)) {\n    widthCache.set(mapKey, calculateLabelSize(ctx, lines, fonts, strokeWidth));\n  }\n  return widthCache.get(mapKey);\n}\n\n/**\n * @param {CanvasRenderingContext2D} ctx\n * @param {{x: number, y: number, width: number, height: number}} rect\n * @param {Object} options\n */\nfunction drawBox(ctx, rect, options) {\n  const {x, y, width, height} = rect;\n  ctx.save();\n  setShadowStyle(ctx, options);\n  const stroke = setBorderStyle(ctx, options);\n  ctx.fillStyle = options.backgroundColor;\n  ctx.beginPath();\n  addRoundedRectPath(ctx, {\n    x, y, w: width, h: height,\n    radius: clampAll(toTRBLCorners(options.borderRadius), 0, Math.min(width, height) / 2)\n  });\n  ctx.closePath();\n  ctx.fill();\n  if (stroke) {\n    ctx.shadowColor = options.borderShadowColor;\n    ctx.stroke();\n  }\n  ctx.restore();\n}\n\n/**\n * @param {CanvasRenderingContext2D} ctx\n * @param {{x: number, y: number, width: number, height: number}} rect\n * @param {CoreLabelOptions} options\n */\nfunction drawLabel(ctx, rect, options) {\n  const content = options.content;\n  if (isImageOrCanvas(content)) {\n    ctx.save();\n    ctx.globalAlpha = getOpacity(options.opacity, content.style.opacity);\n    ctx.drawImage(content, rect.x, rect.y, rect.width, rect.height);\n    ctx.restore();\n    return;\n  }\n  const labels = isArray(content) ? content : [content];\n  const optFont = options.font;\n  const fonts = isArray(optFont) ? optFont.map(f => toFont(f)) : [toFont(optFont)];\n  const optColor = options.color;\n  const colors = isArray(optColor) ? optColor : [optColor];\n  const x = calculateTextAlignment(rect, options);\n  const y = rect.y + options.textStrokeWidth / 2;\n  ctx.save();\n  ctx.textBaseline = 'middle';\n  ctx.textAlign = options.textAlign;\n  if (setTextStrokeStyle(ctx, options)) {\n    applyLabelDecoration(ctx, {x, y}, labels, fonts);\n  }\n  applyLabelContent(ctx, {x, y}, labels, {fonts, colors});\n  ctx.restore();\n}\n\nfunction setTextStrokeStyle(ctx, options) {\n  if (options.textStrokeWidth > 0) {\n    // https://stackoverflow.com/questions/13627111/drawing-text-with-an-outer-stroke-with-html5s-canvas\n    ctx.lineJoin = 'round';\n    ctx.miterLimit = 2;\n    ctx.lineWidth = options.textStrokeWidth;\n    ctx.strokeStyle = options.textStrokeColor;\n    return true;\n  }\n}\n\n/**\n * @param {CanvasRenderingContext2D} ctx\n * @param {{radius: number, options: PointAnnotationOptions}} element\n * @param {number} x\n * @param {number} y\n */\nfunction drawPoint(ctx, element, x, y) {\n  const {radius, options} = element;\n  const style = options.pointStyle;\n  const rotation = options.rotation;\n  let rad = (rotation || 0) * RAD_PER_DEG;\n\n  if (isImageOrCanvas(style)) {\n    ctx.save();\n    ctx.translate(x, y);\n    ctx.rotate(rad);\n    ctx.drawImage(style, -style.width / 2, -style.height / 2, style.width, style.height);\n    ctx.restore();\n    return;\n  }\n  if (notRadius(radius)) {\n    return;\n  }\n  drawPointStyle(ctx, {x, y, radius, rotation, style, rad});\n}\n\nfunction drawPointStyle(ctx, {x, y, radius, rotation, style, rad}) {\n  let xOffset, yOffset, size, cornerRadius;\n  ctx.beginPath();\n\n  switch (style) {\n  // Default includes circle\n  default:\n    ctx.arc(x, y, radius, 0, TAU);\n    ctx.closePath();\n    break;\n  case 'triangle':\n    ctx.moveTo(x + Math.sin(rad) * radius, y - Math.cos(rad) * radius);\n    rad += TWO_THIRDS_PI;\n    ctx.lineTo(x + Math.sin(rad) * radius, y - Math.cos(rad) * radius);\n    rad += TWO_THIRDS_PI;\n    ctx.lineTo(x + Math.sin(rad) * radius, y - Math.cos(rad) * radius);\n    ctx.closePath();\n    break;\n  case 'rectRounded':\n    // NOTE: the rounded rect implementation changed to use `arc` instead of\n    // `quadraticCurveTo` since it generates better results when rect is\n    // almost a circle. 0.516 (instead of 0.5) produces results with visually\n    // closer proportion to the previous impl and it is inscribed in the\n    // circle with `radius`. For more details, see the following PRs:\n    // https://github.com/chartjs/Chart.js/issues/5597\n    // https://github.com/chartjs/Chart.js/issues/5858\n    cornerRadius = radius * 0.516;\n    size = radius - cornerRadius;\n    xOffset = Math.cos(rad + QUARTER_PI) * size;\n    yOffset = Math.sin(rad + QUARTER_PI) * size;\n    ctx.arc(x - xOffset, y - yOffset, cornerRadius, rad - PI, rad - HALF_PI);\n    ctx.arc(x + yOffset, y - xOffset, cornerRadius, rad - HALF_PI, rad);\n    ctx.arc(x + xOffset, y + yOffset, cornerRadius, rad, rad + HALF_PI);\n    ctx.arc(x - yOffset, y + xOffset, cornerRadius, rad + HALF_PI, rad + PI);\n    ctx.closePath();\n    break;\n  case 'rect':\n    if (!rotation) {\n      size = Math.SQRT1_2 * radius;\n      ctx.rect(x - size, y - size, 2 * size, 2 * size);\n      break;\n    }\n    rad += QUARTER_PI;\n    /* falls through */\n  case 'rectRot':\n    xOffset = Math.cos(rad) * radius;\n    yOffset = Math.sin(rad) * radius;\n    ctx.moveTo(x - xOffset, y - yOffset);\n    ctx.lineTo(x + yOffset, y - xOffset);\n    ctx.lineTo(x + xOffset, y + yOffset);\n    ctx.lineTo(x - yOffset, y + xOffset);\n    ctx.closePath();\n    break;\n  case 'crossRot':\n    rad += QUARTER_PI;\n    /* falls through */\n  case 'cross':\n    xOffset = Math.cos(rad) * radius;\n    yOffset = Math.sin(rad) * radius;\n    ctx.moveTo(x - xOffset, y - yOffset);\n    ctx.lineTo(x + xOffset, y + yOffset);\n    ctx.moveTo(x + yOffset, y - xOffset);\n    ctx.lineTo(x - yOffset, y + xOffset);\n    break;\n  case 'star':\n    xOffset = Math.cos(rad) * radius;\n    yOffset = Math.sin(rad) * radius;\n    ctx.moveTo(x - xOffset, y - yOffset);\n    ctx.lineTo(x + xOffset, y + yOffset);\n    ctx.moveTo(x + yOffset, y - xOffset);\n    ctx.lineTo(x - yOffset, y + xOffset);\n    rad += QUARTER_PI;\n    xOffset = Math.cos(rad) * radius;\n    yOffset = Math.sin(rad) * radius;\n    ctx.moveTo(x - xOffset, y - yOffset);\n    ctx.lineTo(x + xOffset, y + yOffset);\n    ctx.moveTo(x + yOffset, y - xOffset);\n    ctx.lineTo(x - yOffset, y + xOffset);\n    break;\n  case 'line':\n    xOffset = Math.cos(rad) * radius;\n    yOffset = Math.sin(rad) * radius;\n    ctx.moveTo(x - xOffset, y - yOffset);\n    ctx.lineTo(x + xOffset, y + yOffset);\n    break;\n  case 'dash':\n    ctx.moveTo(x, y);\n    ctx.lineTo(x + Math.cos(rad) * radius, y + Math.sin(rad) * radius);\n    break;\n  }\n\n  ctx.fill();\n}\n\nfunction calculateLabelSize(ctx, lines, fonts, strokeWidth) {\n  ctx.save();\n  const count = lines.length;\n  let width = 0;\n  let height = strokeWidth;\n  for (let i = 0; i < count; i++) {\n    const font = fonts[Math.min(i, fonts.length - 1)];\n    ctx.font = font.string;\n    const text = lines[i];\n    width = Math.max(width, ctx.measureText(text).width + strokeWidth);\n    height += font.lineHeight;\n  }\n  ctx.restore();\n  return {width, height};\n}\n\nfunction applyLabelDecoration(ctx, {x, y}, labels, fonts) {\n  ctx.beginPath();\n  let lhs = 0;\n  labels.forEach(function(l, i) {\n    const f = fonts[Math.min(i, fonts.length - 1)];\n    const lh = f.lineHeight;\n    ctx.font = f.string;\n    ctx.strokeText(l, x, y + lh / 2 + lhs);\n    lhs += lh;\n  });\n  ctx.stroke();\n}\n\nfunction applyLabelContent(ctx, {x, y}, labels, {fonts, colors}) {\n  let lhs = 0;\n  labels.forEach(function(l, i) {\n    const c = colors[Math.min(i, colors.length - 1)];\n    const f = fonts[Math.min(i, fonts.length - 1)];\n    const lh = f.lineHeight;\n    ctx.beginPath();\n    ctx.font = f.string;\n    ctx.fillStyle = c;\n    ctx.fillText(l, x, y + lh / 2 + lhs);\n    lhs += lh;\n    ctx.fill();\n  });\n}\n\nfunction getOpacity(value, elementValue) {\n  const opacity = isNumber(value) ? value : elementValue;\n  return isNumber(opacity) ? clamp(opacity, 0, 1) : 1;\n}\n\nconst limitedLineScale = {\n  xScaleID: {min: 'xMin', max: 'xMax', start: 'left', end: 'right', startProp: 'x', endProp: 'x2'},\n  yScaleID: {min: 'yMin', max: 'yMax', start: 'bottom', end: 'top', startProp: 'y', endProp: 'y2'}\n};\n\n/**\n * @typedef { import(\"chart.js\").Chart } Chart\n * @typedef { import(\"chart.js\").Scale } Scale\n * @typedef { import(\"chart.js\").Point } Point\n * @typedef { import('../../types/element').AnnotationBoxModel } AnnotationBoxModel\n * @typedef { import('../../types/options').CoreAnnotationOptions } CoreAnnotationOptions\n * @typedef { import('../../types/options').LineAnnotationOptions } LineAnnotationOptions\n * @typedef { import('../../types/options').PointAnnotationOptions } PointAnnotationOptions\n * @typedef { import('../../types/options').PolygonAnnotationOptions } PolygonAnnotationOptions\n */\n\n/**\n * @param {Scale} scale\n * @param {number|string} value\n * @param {number} fallback\n * @returns {number}\n */\nfunction scaleValue(scale, value, fallback) {\n  value = typeof value === 'number' ? value : scale.parse(value);\n  return isFinite(value) ? scale.getPixelForValue(value) : fallback;\n}\n\n/**\n * Search the scale defined in chartjs by the axis related to the annotation options key.\n * @param {{ [key: string]: Scale }} scales\n * @param {CoreAnnotationOptions} options\n * @param {string} key\n * @returns {string}\n */\nfunction retrieveScaleID(scales, options, key) {\n  const scaleID = options[key];\n  if (scaleID || key === 'scaleID') {\n    return scaleID;\n  }\n  const axis = key.charAt(0);\n  const axes = Object.values(scales).filter((scale) => scale.axis && scale.axis === axis);\n  if (axes.length) {\n    return axes[0].id;\n  }\n  return axis;\n}\n\n/**\n * @param {Scale} scale\n * @param {{min: number, max: number, start: number, end: number}} options\n * @returns {{start: number, end: number}|undefined}\n */\nfunction getDimensionByScale(scale, options) {\n  if (scale) {\n    const reverse = scale.options.reverse;\n    const start = scaleValue(scale, options.min, reverse ? options.end : options.start);\n    const end = scaleValue(scale, options.max, reverse ? options.start : options.end);\n    return {\n      start,\n      end\n    };\n  }\n}\n\n/**\n * @param {Chart} chart\n * @param {CoreAnnotationOptions} options\n * @returns {Point}\n */\nfunction getChartPoint(chart, options) {\n  const {chartArea, scales} = chart;\n  const xScale = scales[retrieveScaleID(scales, options, 'xScaleID')];\n  const yScale = scales[retrieveScaleID(scales, options, 'yScaleID')];\n  let x = chartArea.width / 2;\n  let y = chartArea.height / 2;\n\n  if (xScale) {\n    x = scaleValue(xScale, options.xValue, xScale.left + xScale.width / 2);\n  }\n\n  if (yScale) {\n    y = scaleValue(yScale, options.yValue, yScale.top + yScale.height / 2);\n  }\n  return {x, y};\n}\n\n/**\n * @param {Chart} chart\n * @param {CoreAnnotationOptions} options\n * @returns {AnnotationBoxModel}\n */\nfunction resolveBoxProperties(chart, options) {\n  const scales = chart.scales;\n  const xScale = scales[retrieveScaleID(scales, options, 'xScaleID')];\n  const yScale = scales[retrieveScaleID(scales, options, 'yScaleID')];\n\n  if (!xScale && !yScale) {\n    return {};\n  }\n\n  let {left: x, right: x2} = xScale || chart.chartArea;\n  let {top: y, bottom: y2} = yScale || chart.chartArea;\n  const xDim = getChartDimensionByScale(xScale, {min: options.xMin, max: options.xMax, start: x, end: x2});\n  x = xDim.start;\n  x2 = xDim.end;\n  const yDim = getChartDimensionByScale(yScale, {min: options.yMin, max: options.yMax, start: y2, end: y});\n  y = yDim.start;\n  y2 = yDim.end;\n\n  return {\n    x,\n    y,\n    x2,\n    y2,\n    width: x2 - x,\n    height: y2 - y,\n    centerX: x + (x2 - x) / 2,\n    centerY: y + (y2 - y) / 2\n  };\n}\n\n/**\n * @param {Chart} chart\n * @param {PointAnnotationOptions|PolygonAnnotationOptions} options\n * @returns {AnnotationBoxModel}\n */\nfunction resolvePointProperties(chart, options) {\n  if (!isBoundToPoint(options)) {\n    const box = resolveBoxProperties(chart, options);\n    let radius = options.radius;\n    if (!radius || isNaN(radius)) {\n      radius = Math.min(box.width, box.height) / 2;\n      options.radius = radius;\n    }\n    const size = radius * 2;\n    const adjustCenterX = box.centerX + options.xAdjust;\n    const adjustCenterY = box.centerY + options.yAdjust;\n    return {\n      x: adjustCenterX - radius,\n      y: adjustCenterY - radius,\n      x2: adjustCenterX + radius,\n      y2: adjustCenterY + radius,\n      centerX: adjustCenterX,\n      centerY: adjustCenterY,\n      width: size,\n      height: size,\n      radius\n    };\n  }\n  return getChartCircle(chart, options);\n}\n/**\n * @param {Chart} chart\n * @param {LineAnnotationOptions} options\n * @returns {AnnotationBoxModel}\n */\nfunction resolveLineProperties(chart, options) {\n  const {scales, chartArea} = chart;\n  const scale = scales[options.scaleID];\n  const area = {x: chartArea.left, y: chartArea.top, x2: chartArea.right, y2: chartArea.bottom};\n\n  if (scale) {\n    resolveFullLineProperties(scale, area, options);\n  } else {\n    resolveLimitedLineProperties(scales, area, options);\n  }\n  return area;\n}\n\n/**\n * @param {Chart} chart\n * @param {CoreAnnotationOptions} options\n * @param {boolean} [centerBased=false]\n * @returns {AnnotationBoxModel}\n */\nfunction resolveBoxAndLabelProperties(chart, options) {\n  const properties = resolveBoxProperties(chart, options);\n  properties.initProperties = initAnimationProperties(chart, properties, options);\n  properties.elements = [{\n    type: 'label',\n    optionScope: 'label',\n    properties: resolveLabelElementProperties$1(chart, properties, options),\n    initProperties: properties.initProperties\n  }];\n  return properties;\n}\n\nfunction getChartCircle(chart, options) {\n  const point = getChartPoint(chart, options);\n  const size = options.radius * 2;\n  return {\n    x: point.x - options.radius + options.xAdjust,\n    y: point.y - options.radius + options.yAdjust,\n    x2: point.x + options.radius + options.xAdjust,\n    y2: point.y + options.radius + options.yAdjust,\n    centerX: point.x + options.xAdjust,\n    centerY: point.y + options.yAdjust,\n    radius: options.radius,\n    width: size,\n    height: size\n  };\n}\n\nfunction getChartDimensionByScale(scale, options) {\n  const result = getDimensionByScale(scale, options) || options;\n  return {\n    start: Math.min(result.start, result.end),\n    end: Math.max(result.start, result.end)\n  };\n}\n\nfunction resolveFullLineProperties(scale, area, options) {\n  const min = scaleValue(scale, options.value, NaN);\n  const max = scaleValue(scale, options.endValue, min);\n  if (scale.isHorizontal()) {\n    area.x = min;\n    area.x2 = max;\n  } else {\n    area.y = min;\n    area.y2 = max;\n  }\n}\n\nfunction resolveLimitedLineProperties(scales, area, options) {\n  for (const scaleId of Object.keys(limitedLineScale)) {\n    const scale = scales[retrieveScaleID(scales, options, scaleId)];\n    if (scale) {\n      const {min, max, start, end, startProp, endProp} = limitedLineScale[scaleId];\n      const dim = getDimensionByScale(scale, {min: options[min], max: options[max], start: scale[start], end: scale[end]});\n      area[startProp] = dim.start;\n      area[endProp] = dim.end;\n    }\n  }\n}\n\nfunction calculateX({properties, options}, labelSize, position, padding) {\n  const {x: start, x2: end, width: size} = properties;\n  return calculatePosition$1({start, end, size, borderWidth: options.borderWidth}, {\n    position: position.x,\n    padding: {start: padding.left, end: padding.right},\n    adjust: options.label.xAdjust,\n    size: labelSize.width\n  });\n}\n\nfunction calculateY({properties, options}, labelSize, position, padding) {\n  const {y: start, y2: end, height: size} = properties;\n  return calculatePosition$1({start, end, size, borderWidth: options.borderWidth}, {\n    position: position.y,\n    padding: {start: padding.top, end: padding.bottom},\n    adjust: options.label.yAdjust,\n    size: labelSize.height\n  });\n}\n\nfunction calculatePosition$1(boxOpts, labelOpts) {\n  const {start, end, borderWidth} = boxOpts;\n  const {position, padding: {start: padStart, end: padEnd}, adjust} = labelOpts;\n  const availableSize = end - borderWidth - start - padStart - padEnd - labelOpts.size;\n  return start + borderWidth / 2 + adjust + getRelativePosition(availableSize, position);\n}\n\nfunction resolveLabelElementProperties$1(chart, properties, options) {\n  const label = options.label;\n  label.backgroundColor = 'transparent';\n  label.callout.display = false;\n  const position = toPosition(label.position);\n  const padding = toPadding(label.padding);\n  const labelSize = measureLabelSize(chart.ctx, label);\n  const x = calculateX({properties, options}, labelSize, position, padding);\n  const y = calculateY({properties, options}, labelSize, position, padding);\n  const width = labelSize.width + padding.width;\n  const height = labelSize.height + padding.height;\n  return {\n    x,\n    y,\n    x2: x + width,\n    y2: y + height,\n    width,\n    height,\n    centerX: x + width / 2,\n    centerY: y + height / 2,\n    rotation: label.rotation\n  };\n\n}\n\n/**\n * @typedef {import('chart.js').Point} Point\n */\n\n/**\n * Rotate a `point` relative to `center` point by `angle`\n * @param {Point} point - the point to rotate\n * @param {Point} center - center point for rotation\n * @param {number} angle - angle for rotation, in radians\n * @returns {Point} rotated point\n */\nfunction rotated(point, center, angle) {\n  const cos = Math.cos(angle);\n  const sin = Math.sin(angle);\n  const cx = center.x;\n  const cy = center.y;\n\n  return {\n    x: cx + cos * (point.x - cx) - sin * (point.y - cy),\n    y: cy + sin * (point.x - cx) + cos * (point.y - cy)\n  };\n}\n\nconst moveHooks = ['enter', 'leave'];\n\n/**\n * @typedef { import(\"chart.js\").Chart } Chart\n * @typedef { import('../../types/options').AnnotationPluginOptions } AnnotationPluginOptions\n */\n\nconst eventHooks = moveHooks.concat('click');\n\n/**\n * @param {Chart} chart\n * @param {Object} state\n * @param {AnnotationPluginOptions} options\n */\nfunction updateListeners(chart, state, options) {\n  state.listened = loadHooks(options, eventHooks, state.listeners);\n  state.moveListened = false;\n  state._getElements = getElements; // for testing\n\n  moveHooks.forEach(hook => {\n    if (isFunction(options[hook])) {\n      state.moveListened = true;\n    }\n  });\n\n  if (!state.listened || !state.moveListened) {\n    state.annotations.forEach(scope => {\n      if (!state.listened && isFunction(scope.click)) {\n        state.listened = true;\n      }\n      if (!state.moveListened) {\n        moveHooks.forEach(hook => {\n          if (isFunction(scope[hook])) {\n            state.listened = true;\n            state.moveListened = true;\n          }\n        });\n      }\n    });\n  }\n}\n\n/**\n * @param {Object} state\n * @param {ChartEvent} event\n * @param {AnnotationPluginOptions} options\n * @return {boolean|undefined}\n */\nfunction handleEvent(state, event, options) {\n  if (state.listened) {\n    switch (event.type) {\n    case 'mousemove':\n    case 'mouseout':\n      return handleMoveEvents(state, event, options);\n    case 'click':\n      return handleClickEvents(state, event, options);\n    }\n  }\n}\n\nfunction handleMoveEvents(state, event, options) {\n  if (!state.moveListened) {\n    return;\n  }\n\n  let elements;\n\n  if (event.type === 'mousemove') {\n    elements = getElements(state, event, options.interaction);\n  } else {\n    elements = [];\n  }\n\n  const previous = state.hovered;\n  state.hovered = elements;\n\n  const context = {state, event};\n  let changed = dispatchMoveEvents(context, 'leave', previous, elements);\n  return dispatchMoveEvents(context, 'enter', elements, previous) || changed;\n}\n\nfunction dispatchMoveEvents({state, event}, hook, elements, checkElements) {\n  let changed;\n  for (const element of elements) {\n    if (checkElements.indexOf(element) < 0) {\n      changed = dispatchEvent(element.options[hook] || state.listeners[hook], element, event) || changed;\n    }\n  }\n  return changed;\n}\n\nfunction handleClickEvents(state, event, options) {\n  const listeners = state.listeners;\n  const elements = getElements(state, event, options.interaction);\n  let changed;\n  for (const element of elements) {\n    changed = dispatchEvent(element.options.click || listeners.click, element, event) || changed;\n  }\n  return changed;\n}\n\nfunction dispatchEvent(handler, element, event) {\n  return callback(handler, [element.$context, event]) === true;\n}\n\n/**\n * @typedef { import(\"chart.js\").Chart } Chart\n * @typedef { import('../../types/options').AnnotationPluginOptions } AnnotationPluginOptions\n * @typedef { import('../../types/element').AnnotationElement } AnnotationElement\n */\n\nconst elementHooks = ['afterDraw', 'beforeDraw'];\n\n/**\n * @param {Chart} chart\n * @param {Object} state\n * @param {AnnotationPluginOptions} options\n */\nfunction updateHooks(chart, state, options) {\n  const visibleElements = state.visibleElements;\n  state.hooked = loadHooks(options, elementHooks, state.hooks);\n\n  if (!state.hooked) {\n    visibleElements.forEach(scope => {\n      if (!state.hooked) {\n        elementHooks.forEach(hook => {\n          if (isFunction(scope.options[hook])) {\n            state.hooked = true;\n          }\n        });\n      }\n    });\n  }\n}\n\n/**\n * @param {Object} state\n * @param {AnnotationElement} element\n * @param {string} hook\n */\nfunction invokeHook(state, element, hook) {\n  if (state.hooked) {\n    const callbackHook = element.options[hook] || state.hooks[hook];\n    return callback(callbackHook, [element.$context]);\n  }\n}\n\n/**\n * @typedef { import(\"chart.js\").Chart } Chart\n * @typedef { import(\"chart.js\").Scale } Scale\n * @typedef { import('../../types/options').CoreAnnotationOptions } CoreAnnotationOptions\n */\n\n/**\n * @param {Chart} chart\n * @param {Scale} scale\n * @param {CoreAnnotationOptions[]} annotations\n */\nfunction adjustScaleRange(chart, scale, annotations) {\n  const range = getScaleLimits(chart.scales, scale, annotations);\n  let changed = changeScaleLimit(scale, range, 'min', 'suggestedMin');\n  changed = changeScaleLimit(scale, range, 'max', 'suggestedMax') || changed;\n  if (changed && isFunction(scale.handleTickRangeOptions)) {\n    scale.handleTickRangeOptions();\n  }\n}\n\n/**\n * @param {CoreAnnotationOptions[]} annotations\n * @param {{ [key: string]: Scale }} scales\n */\nfunction verifyScaleOptions(annotations, scales) {\n  for (const annotation of annotations) {\n    verifyScaleIDs(annotation, scales);\n  }\n}\n\nfunction changeScaleLimit(scale, range, limit, suggestedLimit) {\n  if (isFinite(range[limit]) && !scaleLimitDefined(scale.options, limit, suggestedLimit)) {\n    const changed = scale[limit] !== range[limit];\n    scale[limit] = range[limit];\n    return changed;\n  }\n}\n\nfunction scaleLimitDefined(scaleOptions, limit, suggestedLimit) {\n  return defined(scaleOptions[limit]) || defined(scaleOptions[suggestedLimit]);\n}\n\nfunction verifyScaleIDs(annotation, scales) {\n  for (const key of ['scaleID', 'xScaleID', 'yScaleID']) {\n    const scaleID = retrieveScaleID(scales, annotation, key);\n    if (scaleID && !scales[scaleID] && verifyProperties(annotation, key)) {\n      console.warn(`No scale found with id '${scaleID}' for annotation '${annotation.id}'`);\n    }\n  }\n}\n\nfunction verifyProperties(annotation, key) {\n  if (key === 'scaleID') {\n    return true;\n  }\n  const axis = key.charAt(0);\n  for (const prop of ['Min', 'Max', 'Value']) {\n    if (defined(annotation[axis + prop])) {\n      return true;\n    }\n  }\n  return false;\n}\n\nfunction getScaleLimits(scales, scale, annotations) {\n  const axis = scale.axis;\n  const scaleID = scale.id;\n  const scaleIDOption = axis + 'ScaleID';\n  const limits = {\n    min: valueOrDefault(scale.min, Number.NEGATIVE_INFINITY),\n    max: valueOrDefault(scale.max, Number.POSITIVE_INFINITY)\n  };\n  for (const annotation of annotations) {\n    if (annotation.scaleID === scaleID) {\n      updateLimits(annotation, scale, ['value', 'endValue'], limits);\n    } else if (retrieveScaleID(scales, annotation, scaleIDOption) === scaleID) {\n      updateLimits(annotation, scale, [axis + 'Min', axis + 'Max', axis + 'Value'], limits);\n    }\n  }\n  return limits;\n}\n\nfunction updateLimits(annotation, scale, props, limits) {\n  for (const prop of props) {\n    const raw = annotation[prop];\n    if (defined(raw)) {\n      const value = scale.parse(raw);\n      limits.min = Math.min(limits.min, value);\n      limits.max = Math.max(limits.max, value);\n    }\n  }\n}\n\nclass BoxAnnotation extends Element {\n\n  inRange(mouseX, mouseY, axis, useFinalPosition) {\n    const {x, y} = rotated({x: mouseX, y: mouseY}, this.getCenterPoint(useFinalPosition), toRadians(-this.options.rotation));\n    return inBoxRange({x, y}, this.getProps(['x', 'y', 'x2', 'y2'], useFinalPosition), axis, this.options.borderWidth);\n  }\n\n  getCenterPoint(useFinalPosition) {\n    return getElementCenterPoint(this, useFinalPosition);\n  }\n\n  draw(ctx) {\n    ctx.save();\n    translate(ctx, this.getCenterPoint(), this.options.rotation);\n    drawBox(ctx, this, this.options);\n    ctx.restore();\n  }\n\n  get label() {\n    return this.elements && this.elements[0];\n  }\n\n  resolveElementProperties(chart, options) {\n    return resolveBoxAndLabelProperties(chart, options);\n  }\n}\n\nBoxAnnotation.id = 'boxAnnotation';\n\nBoxAnnotation.defaults = {\n  adjustScaleRange: true,\n  backgroundShadowColor: 'transparent',\n  borderCapStyle: 'butt',\n  borderDash: [],\n  borderDashOffset: 0,\n  borderJoinStyle: 'miter',\n  borderRadius: 0,\n  borderShadowColor: 'transparent',\n  borderWidth: 1,\n  display: true,\n  init: undefined,\n  label: {\n    backgroundColor: 'transparent',\n    borderWidth: 0,\n    callout: {\n      display: false\n    },\n    color: 'black',\n    content: null,\n    display: false,\n    drawTime: undefined,\n    font: {\n      family: undefined,\n      lineHeight: undefined,\n      size: undefined,\n      style: undefined,\n      weight: 'bold'\n    },\n    height: undefined,\n    opacity: undefined,\n    padding: 6,\n    position: 'center',\n    rotation: undefined,\n    textAlign: 'start',\n    textStrokeColor: undefined,\n    textStrokeWidth: 0,\n    width: undefined,\n    xAdjust: 0,\n    yAdjust: 0,\n    z: undefined\n  },\n  rotation: 0,\n  shadowBlur: 0,\n  shadowOffsetX: 0,\n  shadowOffsetY: 0,\n  xMax: undefined,\n  xMin: undefined,\n  xScaleID: undefined,\n  yMax: undefined,\n  yMin: undefined,\n  yScaleID: undefined,\n  z: 0\n};\n\nBoxAnnotation.defaultRoutes = {\n  borderColor: 'color',\n  backgroundColor: 'color'\n};\n\nBoxAnnotation.descriptors = {\n  label: {\n    _fallback: true\n  }\n};\n\nconst positions = ['left', 'bottom', 'top', 'right'];\n\nclass LabelAnnotation extends Element {\n\n  inRange(mouseX, mouseY, axis, useFinalPosition) {\n    const {x, y} = rotated({x: mouseX, y: mouseY}, this.getCenterPoint(useFinalPosition), toRadians(-this.rotation));\n    return inBoxRange({x, y}, this.getProps(['x', 'y', 'x2', 'y2'], useFinalPosition), axis, this.options.borderWidth);\n  }\n\n  getCenterPoint(useFinalPosition) {\n    return getElementCenterPoint(this, useFinalPosition);\n  }\n\n  draw(ctx) {\n    const options = this.options;\n    const visible = !defined(this._visible) || this._visible;\n    if (!options.display || !options.content || !visible) {\n      return;\n    }\n    ctx.save();\n    translate(ctx, this.getCenterPoint(), this.rotation);\n    drawCallout(ctx, this);\n    drawBox(ctx, this, options);\n    drawLabel(ctx, getLabelSize(this), options);\n    ctx.restore();\n  }\n\n  resolveElementProperties(chart, options) {\n    let point;\n    if (!isBoundToPoint(options)) {\n      const {centerX, centerY} = resolveBoxProperties(chart, options);\n      point = {x: centerX, y: centerY};\n    } else {\n      point = getChartPoint(chart, options);\n    }\n    const padding = toPadding(options.padding);\n    const labelSize = measureLabelSize(chart.ctx, options);\n    const boxSize = measureRect(point, labelSize, options, padding);\n    return {\n      initProperties: initAnimationProperties(chart, boxSize, options),\n      pointX: point.x,\n      pointY: point.y,\n      ...boxSize,\n      rotation: options.rotation\n    };\n  }\n}\n\nLabelAnnotation.id = 'labelAnnotation';\n\nLabelAnnotation.defaults = {\n  adjustScaleRange: true,\n  backgroundColor: 'transparent',\n  backgroundShadowColor: 'transparent',\n  borderCapStyle: 'butt',\n  borderDash: [],\n  borderDashOffset: 0,\n  borderJoinStyle: 'miter',\n  borderRadius: 0,\n  borderShadowColor: 'transparent',\n  borderWidth: 0,\n  callout: {\n    borderCapStyle: 'butt',\n    borderColor: undefined,\n    borderDash: [],\n    borderDashOffset: 0,\n    borderJoinStyle: 'miter',\n    borderWidth: 1,\n    display: false,\n    margin: 5,\n    position: 'auto',\n    side: 5,\n    start: '50%',\n  },\n  color: 'black',\n  content: null,\n  display: true,\n  font: {\n    family: undefined,\n    lineHeight: undefined,\n    size: undefined,\n    style: undefined,\n    weight: undefined\n  },\n  height: undefined,\n  init: undefined,\n  opacity: undefined,\n  padding: 6,\n  position: 'center',\n  rotation: 0,\n  shadowBlur: 0,\n  shadowOffsetX: 0,\n  shadowOffsetY: 0,\n  textAlign: 'center',\n  textStrokeColor: undefined,\n  textStrokeWidth: 0,\n  width: undefined,\n  xAdjust: 0,\n  xMax: undefined,\n  xMin: undefined,\n  xScaleID: undefined,\n  xValue: undefined,\n  yAdjust: 0,\n  yMax: undefined,\n  yMin: undefined,\n  yScaleID: undefined,\n  yValue: undefined,\n  z: 0\n};\n\nLabelAnnotation.defaultRoutes = {\n  borderColor: 'color'\n};\n\nfunction measureRect(point, size, options, padding) {\n  const width = size.width + padding.width + options.borderWidth;\n  const height = size.height + padding.height + options.borderWidth;\n  const position = toPosition(options.position, 'center');\n  const x = calculatePosition(point.x, width, options.xAdjust, position.x);\n  const y = calculatePosition(point.y, height, options.yAdjust, position.y);\n\n  return {\n    x,\n    y,\n    x2: x + width,\n    y2: y + height,\n    width,\n    height,\n    centerX: x + width / 2,\n    centerY: y + height / 2\n  };\n}\n\nfunction calculatePosition(start, size, adjust = 0, position) {\n  return start - getRelativePosition(size, position) + adjust;\n}\n\nfunction drawCallout(ctx, element) {\n  const {pointX, pointY, options} = element;\n  const callout = options.callout;\n  const calloutPosition = callout && callout.display && resolveCalloutPosition(element, callout);\n  if (!calloutPosition || isPointInRange(element, callout, calloutPosition)) {\n    return;\n  }\n\n  ctx.save();\n  ctx.beginPath();\n  const stroke = setBorderStyle(ctx, callout);\n  if (!stroke) {\n    return ctx.restore();\n  }\n  const {separatorStart, separatorEnd} = getCalloutSeparatorCoord(element, calloutPosition);\n  const {sideStart, sideEnd} = getCalloutSideCoord(element, calloutPosition, separatorStart);\n  if (callout.margin > 0 || options.borderWidth === 0) {\n    ctx.moveTo(separatorStart.x, separatorStart.y);\n    ctx.lineTo(separatorEnd.x, separatorEnd.y);\n  }\n  ctx.moveTo(sideStart.x, sideStart.y);\n  ctx.lineTo(sideEnd.x, sideEnd.y);\n  const rotatedPoint = rotated({x: pointX, y: pointY}, element.getCenterPoint(), toRadians(-element.rotation));\n  ctx.lineTo(rotatedPoint.x, rotatedPoint.y);\n  ctx.stroke();\n  ctx.restore();\n}\n\nfunction getCalloutSeparatorCoord(element, position) {\n  const {x, y, x2, y2} = element;\n  const adjust = getCalloutSeparatorAdjust(element, position);\n  let separatorStart, separatorEnd;\n  if (position === 'left' || position === 'right') {\n    separatorStart = {x: x + adjust, y};\n    separatorEnd = {x: separatorStart.x, y: y2};\n  } else {\n    //  position 'top' or 'bottom'\n    separatorStart = {x, y: y + adjust};\n    separatorEnd = {x: x2, y: separatorStart.y};\n  }\n  return {separatorStart, separatorEnd};\n}\n\nfunction getCalloutSeparatorAdjust(element, position) {\n  const {width, height, options} = element;\n  const adjust = options.callout.margin + options.borderWidth / 2;\n  if (position === 'right') {\n    return width + adjust;\n  } else if (position === 'bottom') {\n    return height + adjust;\n  }\n  return -adjust;\n}\n\nfunction getCalloutSideCoord(element, position, separatorStart) {\n  const {y, width, height, options} = element;\n  const start = options.callout.start;\n  const side = getCalloutSideAdjust(position, options.callout);\n  let sideStart, sideEnd;\n  if (position === 'left' || position === 'right') {\n    sideStart = {x: separatorStart.x, y: y + getSize(height, start)};\n    sideEnd = {x: sideStart.x + side, y: sideStart.y};\n  } else {\n    //  position 'top' or 'bottom'\n    sideStart = {x: separatorStart.x + getSize(width, start), y: separatorStart.y};\n    sideEnd = {x: sideStart.x, y: sideStart.y + side};\n  }\n  return {sideStart, sideEnd};\n}\n\nfunction getCalloutSideAdjust(position, options) {\n  const side = options.side;\n  if (position === 'left' || position === 'top') {\n    return -side;\n  }\n  return side;\n}\n\nfunction resolveCalloutPosition(element, options) {\n  const position = options.position;\n  if (positions.includes(position)) {\n    return position;\n  }\n  return resolveCalloutAutoPosition(element, options);\n}\n\nfunction resolveCalloutAutoPosition(element, options) {\n  const {x, y, x2, y2, width, height, pointX, pointY, centerX, centerY, rotation} = element;\n  const center = {x: centerX, y: centerY};\n  const start = options.start;\n  const xAdjust = getSize(width, start);\n  const yAdjust = getSize(height, start);\n  const xPoints = [x, x + xAdjust, x + xAdjust, x2];\n  const yPoints = [y + yAdjust, y2, y, y2];\n  const result = [];\n  for (let index = 0; index < 4; index++) {\n    const rotatedPoint = rotated({x: xPoints[index], y: yPoints[index]}, center, toRadians(rotation));\n    result.push({\n      position: positions[index],\n      distance: distanceBetweenPoints(rotatedPoint, {x: pointX, y: pointY})\n    });\n  }\n  return result.sort((a, b) => a.distance - b.distance)[0].position;\n}\n\nfunction getLabelSize({x, y, width, height, options}) {\n  const hBorderWidth = options.borderWidth / 2;\n  const padding = toPadding(options.padding);\n  return {\n    x: x + padding.left + hBorderWidth,\n    y: y + padding.top + hBorderWidth,\n    width: width - padding.left - padding.right - options.borderWidth,\n    height: height - padding.top - padding.bottom - options.borderWidth\n  };\n}\n\nfunction isPointInRange(element, callout, position) {\n  const {pointX, pointY} = element;\n  const margin = callout.margin;\n  let x = pointX;\n  let y = pointY;\n  if (position === 'left') {\n    x += margin;\n  } else if (position === 'right') {\n    x -= margin;\n  } else if (position === 'top') {\n    y += margin;\n  } else if (position === 'bottom') {\n    y -= margin;\n  }\n  return element.inRange(x, y);\n}\n\nconst pointInLine = (p1, p2, t) => ({x: p1.x + t * (p2.x - p1.x), y: p1.y + t * (p2.y - p1.y)});\nconst interpolateX = (y, p1, p2) => pointInLine(p1, p2, Math.abs((y - p1.y) / (p2.y - p1.y))).x;\nconst interpolateY = (x, p1, p2) => pointInLine(p1, p2, Math.abs((x - p1.x) / (p2.x - p1.x))).y;\nconst sqr = v => v * v;\nconst rangeLimit = (mouseX, mouseY, {x, y, x2, y2}, axis) => axis === 'y' ? {start: Math.min(y, y2), end: Math.max(y, y2), value: mouseY} : {start: Math.min(x, x2), end: Math.max(x, x2), value: mouseX};\n// http://www.independent-software.com/determining-coordinates-on-a-html-canvas-bezier-curve.html\nconst coordInCurve = (start, cp, end, t) => (1 - t) * (1 - t) * start + 2 * (1 - t) * t * cp + t * t * end;\nconst pointInCurve = (start, cp, end, t) => ({x: coordInCurve(start.x, cp.x, end.x, t), y: coordInCurve(start.y, cp.y, end.y, t)});\nconst coordAngleInCurve = (start, cp, end, t) => 2 * (1 - t) * (cp - start) + 2 * t * (end - cp);\nconst angleInCurve = (start, cp, end, t) => -Math.atan2(coordAngleInCurve(start.x, cp.x, end.x, t), coordAngleInCurve(start.y, cp.y, end.y, t)) + 0.5 * PI;\n\nclass LineAnnotation extends Element {\n\n  inRange(mouseX, mouseY, axis, useFinalPosition) {\n    const hBorderWidth = this.options.borderWidth / 2;\n    if (axis !== 'x' && axis !== 'y') {\n      const point = {mouseX, mouseY};\n      const {path, ctx} = this;\n      if (path) {\n        setBorderStyle(ctx, this.options);\n        const {chart} = this.$context;\n        const mx = mouseX * chart.currentDevicePixelRatio;\n        const my = mouseY * chart.currentDevicePixelRatio;\n        const result = ctx.isPointInStroke(path, mx, my) || isOnLabel(this, point, useFinalPosition);\n        ctx.restore();\n        return result;\n      }\n      const epsilon = sqr(hBorderWidth);\n      return intersects(this, point, epsilon, useFinalPosition) || isOnLabel(this, point, useFinalPosition);\n    }\n    return inAxisRange(this, {mouseX, mouseY}, axis, {hBorderWidth, useFinalPosition});\n  }\n\n  getCenterPoint(useFinalPosition) {\n    return getElementCenterPoint(this, useFinalPosition);\n  }\n\n  draw(ctx) {\n    const {x, y, x2, y2, cp, options} = this;\n\n    ctx.save();\n    if (!setBorderStyle(ctx, options)) {\n      // no border width, then line is not drawn\n      return ctx.restore();\n    }\n    setShadowStyle(ctx, options);\n\n    const length = Math.sqrt(Math.pow(x2 - x, 2) + Math.pow(y2 - y, 2));\n    if (options.curve && cp) {\n      drawCurve(ctx, this, cp, length);\n      return ctx.restore();\n    }\n    const {startOpts, endOpts, startAdjust, endAdjust} = getArrowHeads(this);\n    const angle = Math.atan2(y2 - y, x2 - x);\n    ctx.translate(x, y);\n    ctx.rotate(angle);\n    ctx.beginPath();\n    ctx.moveTo(0 + startAdjust, 0);\n    ctx.lineTo(length - endAdjust, 0);\n    ctx.shadowColor = options.borderShadowColor;\n    ctx.stroke();\n    drawArrowHead(ctx, 0, startAdjust, startOpts);\n    drawArrowHead(ctx, length, -endAdjust, endOpts);\n    ctx.restore();\n  }\n\n  get label() {\n    return this.elements && this.elements[0];\n  }\n\n  resolveElementProperties(chart, options) {\n    const area = resolveLineProperties(chart, options);\n    const {x, y, x2, y2} = area;\n    const inside = isLineInArea(area, chart.chartArea);\n    const properties = inside\n      ? limitLineToArea({x, y}, {x: x2, y: y2}, chart.chartArea)\n      : {x, y, x2, y2, width: Math.abs(x2 - x), height: Math.abs(y2 - y)};\n    properties.centerX = (x2 + x) / 2;\n    properties.centerY = (y2 + y) / 2;\n    properties.initProperties = initAnimationProperties(chart, properties, options);\n    if (options.curve) {\n      const p1 = {x: properties.x, y: properties.y};\n      const p2 = {x: properties.x2, y: properties.y2};\n      properties.cp = getControlPoint(properties, options, distanceBetweenPoints(p1, p2));\n    }\n    const labelProperties = resolveLabelElementProperties(chart, properties, options.label);\n    // additonal prop to manage zoom/pan\n    labelProperties._visible = inside;\n\n    properties.elements = [{\n      type: 'label',\n      optionScope: 'label',\n      properties: labelProperties,\n      initProperties: properties.initProperties\n    }];\n    return properties;\n  }\n}\n\nLineAnnotation.id = 'lineAnnotation';\n\nconst arrowHeadsDefaults = {\n  backgroundColor: undefined,\n  backgroundShadowColor: undefined,\n  borderColor: undefined,\n  borderDash: undefined,\n  borderDashOffset: undefined,\n  borderShadowColor: undefined,\n  borderWidth: undefined,\n  display: undefined,\n  fill: undefined,\n  length: undefined,\n  shadowBlur: undefined,\n  shadowOffsetX: undefined,\n  shadowOffsetY: undefined,\n  width: undefined\n};\n\nLineAnnotation.defaults = {\n  adjustScaleRange: true,\n  arrowHeads: {\n    display: false,\n    end: Object.assign({}, arrowHeadsDefaults),\n    fill: false,\n    length: 12,\n    start: Object.assign({}, arrowHeadsDefaults),\n    width: 6\n  },\n  borderDash: [],\n  borderDashOffset: 0,\n  borderShadowColor: 'transparent',\n  borderWidth: 2,\n  curve: false,\n  controlPoint: {\n    y: '-50%'\n  },\n  display: true,\n  endValue: undefined,\n  init: undefined,\n  label: {\n    backgroundColor: 'rgba(0,0,0,0.8)',\n    backgroundShadowColor: 'transparent',\n    borderCapStyle: 'butt',\n    borderColor: 'black',\n    borderDash: [],\n    borderDashOffset: 0,\n    borderJoinStyle: 'miter',\n    borderRadius: 6,\n    borderShadowColor: 'transparent',\n    borderWidth: 0,\n    callout: Object.assign({}, LabelAnnotation.defaults.callout),\n    color: '#fff',\n    content: null,\n    display: false,\n    drawTime: undefined,\n    font: {\n      family: undefined,\n      lineHeight: undefined,\n      size: undefined,\n      style: undefined,\n      weight: 'bold'\n    },\n    height: undefined,\n    opacity: undefined,\n    padding: 6,\n    position: 'center',\n    rotation: 0,\n    shadowBlur: 0,\n    shadowOffsetX: 0,\n    shadowOffsetY: 0,\n    textAlign: 'center',\n    textStrokeColor: undefined,\n    textStrokeWidth: 0,\n    width: undefined,\n    xAdjust: 0,\n    yAdjust: 0,\n    z: undefined\n  },\n  scaleID: undefined,\n  shadowBlur: 0,\n  shadowOffsetX: 0,\n  shadowOffsetY: 0,\n  value: undefined,\n  xMax: undefined,\n  xMin: undefined,\n  xScaleID: undefined,\n  yMax: undefined,\n  yMin: undefined,\n  yScaleID: undefined,\n  z: 0\n};\n\nLineAnnotation.descriptors = {\n  arrowHeads: {\n    start: {\n      _fallback: true\n    },\n    end: {\n      _fallback: true\n    },\n    _fallback: true\n  }\n};\n\nLineAnnotation.defaultRoutes = {\n  borderColor: 'color'\n};\n\nfunction inAxisRange(element, {mouseX, mouseY}, axis, {hBorderWidth, useFinalPosition}) {\n  const limit = rangeLimit(mouseX, mouseY, element.getProps(['x', 'y', 'x2', 'y2'], useFinalPosition), axis);\n  return (limit.value >= limit.start - hBorderWidth && limit.value <= limit.end + hBorderWidth) || isOnLabel(element, {mouseX, mouseY}, useFinalPosition, axis);\n}\n\nfunction isLineInArea({x, y, x2, y2}, {top, right, bottom, left}) {\n  return !(\n    (x < left && x2 < left) ||\n    (x > right && x2 > right) ||\n    (y < top && y2 < top) ||\n    (y > bottom && y2 > bottom)\n  );\n}\n\nfunction limitPointToArea({x, y}, p2, {top, right, bottom, left}) {\n  if (x < left) {\n    y = interpolateY(left, {x, y}, p2);\n    x = left;\n  }\n  if (x > right) {\n    y = interpolateY(right, {x, y}, p2);\n    x = right;\n  }\n  if (y < top) {\n    x = interpolateX(top, {x, y}, p2);\n    y = top;\n  }\n  if (y > bottom) {\n    x = interpolateX(bottom, {x, y}, p2);\n    y = bottom;\n  }\n  return {x, y};\n}\n\nfunction limitLineToArea(p1, p2, area) {\n  const {x, y} = limitPointToArea(p1, p2, area);\n  const {x: x2, y: y2} = limitPointToArea(p2, p1, area);\n  return {x, y, x2, y2, width: Math.abs(x2 - x), height: Math.abs(y2 - y)};\n}\n\nfunction intersects(element, {mouseX, mouseY}, epsilon = EPSILON, useFinalPosition) {\n  // Adapted from https://stackoverflow.com/a/6853926/25507\n  const {x: x1, y: y1, x2, y2} = element.getProps(['x', 'y', 'x2', 'y2'], useFinalPosition);\n  const dx = x2 - x1;\n  const dy = y2 - y1;\n  const lenSq = sqr(dx) + sqr(dy);\n  const t = lenSq === 0 ? -1 : ((mouseX - x1) * dx + (mouseY - y1) * dy) / lenSq;\n  let xx, yy;\n  if (t < 0) {\n    xx = x1;\n    yy = y1;\n  } else if (t > 1) {\n    xx = x2;\n    yy = y2;\n  } else {\n    xx = x1 + t * dx;\n    yy = y1 + t * dy;\n  }\n  return (sqr(mouseX - xx) + sqr(mouseY - yy)) <= epsilon;\n}\n\nfunction isOnLabel(element, {mouseX, mouseY}, useFinalPosition, axis) {\n  const label = element.label;\n  return label.options.display && label.inRange(mouseX, mouseY, axis, useFinalPosition);\n}\n\nfunction resolveLabelElementProperties(chart, properties, options) {\n  const borderWidth = options.borderWidth;\n  const padding = toPadding(options.padding);\n  const textSize = measureLabelSize(chart.ctx, options);\n  const width = textSize.width + padding.width + borderWidth;\n  const height = textSize.height + padding.height + borderWidth;\n  return calculateLabelPosition(properties, options, {width, height, padding}, chart.chartArea);\n}\n\nfunction calculateAutoRotation(properties) {\n  const {x, y, x2, y2} = properties;\n  const rotation = Math.atan2(y2 - y, x2 - x);\n  // Flip the rotation if it goes > PI/2 or < -PI/2, so label stays upright\n  return rotation > PI / 2 ? rotation - PI : rotation < PI / -2 ? rotation + PI : rotation;\n}\n\nfunction calculateLabelPosition(properties, label, sizes, chartArea) {\n  const {width, height, padding} = sizes;\n  const {xAdjust, yAdjust} = label;\n  const p1 = {x: properties.x, y: properties.y};\n  const p2 = {x: properties.x2, y: properties.y2};\n  const rotation = label.rotation === 'auto' ? calculateAutoRotation(properties) : toRadians(label.rotation);\n  const size = rotatedSize(width, height, rotation);\n  const t = calculateT(properties, label, {labelSize: size, padding}, chartArea);\n  const pt = properties.cp ? pointInCurve(p1, properties.cp, p2, t) : pointInLine(p1, p2, t);\n  const xCoordinateSizes = {size: size.w, min: chartArea.left, max: chartArea.right, padding: padding.left};\n  const yCoordinateSizes = {size: size.h, min: chartArea.top, max: chartArea.bottom, padding: padding.top};\n  const centerX = adjustLabelCoordinate(pt.x, xCoordinateSizes) + xAdjust;\n  const centerY = adjustLabelCoordinate(pt.y, yCoordinateSizes) + yAdjust;\n  return {\n    x: centerX - (width / 2),\n    y: centerY - (height / 2),\n    x2: centerX + (width / 2),\n    y2: centerY + (height / 2),\n    centerX,\n    centerY,\n    pointX: pt.x,\n    pointY: pt.y,\n    width,\n    height,\n    rotation: toDegrees(rotation)\n  };\n}\n\nfunction rotatedSize(width, height, rotation) {\n  const cos = Math.cos(rotation);\n  const sin = Math.sin(rotation);\n  return {\n    w: Math.abs(width * cos) + Math.abs(height * sin),\n    h: Math.abs(width * sin) + Math.abs(height * cos)\n  };\n}\n\nfunction calculateT(properties, label, sizes, chartArea) {\n  let t;\n  const space = spaceAround(properties, chartArea);\n  if (label.position === 'start') {\n    t = calculateTAdjust({w: properties.x2 - properties.x, h: properties.y2 - properties.y}, sizes, label, space);\n  } else if (label.position === 'end') {\n    t = 1 - calculateTAdjust({w: properties.x - properties.x2, h: properties.y - properties.y2}, sizes, label, space);\n  } else {\n    t = getRelativePosition(1, label.position);\n  }\n  return t;\n}\n\nfunction calculateTAdjust(lineSize, sizes, label, space) {\n  const {labelSize, padding} = sizes;\n  const lineW = lineSize.w * space.dx;\n  const lineH = lineSize.h * space.dy;\n  const x = (lineW > 0) && ((labelSize.w / 2 + padding.left - space.x) / lineW);\n  const y = (lineH > 0) && ((labelSize.h / 2 + padding.top - space.y) / lineH);\n  return clamp(Math.max(x, y), 0, 0.25);\n}\n\nfunction spaceAround(properties, chartArea) {\n  const {x, x2, y, y2} = properties;\n  const t = Math.min(y, y2) - chartArea.top;\n  const l = Math.min(x, x2) - chartArea.left;\n  const b = chartArea.bottom - Math.max(y, y2);\n  const r = chartArea.right - Math.max(x, x2);\n  return {\n    x: Math.min(l, r),\n    y: Math.min(t, b),\n    dx: l <= r ? 1 : -1,\n    dy: t <= b ? 1 : -1\n  };\n}\n\nfunction adjustLabelCoordinate(coordinate, labelSizes) {\n  const {size, min, max, padding} = labelSizes;\n  const halfSize = size / 2;\n  if (size > max - min) {\n    // if it does not fit, display as much as possible\n    return (max + min) / 2;\n  }\n  if (min >= (coordinate - padding - halfSize)) {\n    coordinate = min + padding + halfSize;\n  }\n  if (max <= (coordinate + padding + halfSize)) {\n    coordinate = max - padding - halfSize;\n  }\n  return coordinate;\n}\n\nfunction getArrowHeads(line) {\n  const options = line.options;\n  const arrowStartOpts = options.arrowHeads && options.arrowHeads.start;\n  const arrowEndOpts = options.arrowHeads && options.arrowHeads.end;\n  return {\n    startOpts: arrowStartOpts,\n    endOpts: arrowEndOpts,\n    startAdjust: getLineAdjust(line, arrowStartOpts),\n    endAdjust: getLineAdjust(line, arrowEndOpts)\n  };\n}\n\nfunction getLineAdjust(line, arrowOpts) {\n  if (!arrowOpts || !arrowOpts.display) {\n    return 0;\n  }\n  const {length, width} = arrowOpts;\n  const adjust = line.options.borderWidth / 2;\n  const p1 = {x: length, y: width + adjust};\n  const p2 = {x: 0, y: adjust};\n  return Math.abs(interpolateX(0, p1, p2));\n}\n\nfunction drawArrowHead(ctx, offset, adjust, arrowOpts) {\n  if (!arrowOpts || !arrowOpts.display) {\n    return;\n  }\n  const {length, width, fill, backgroundColor, borderColor} = arrowOpts;\n  const arrowOffsetX = Math.abs(offset - length) + adjust;\n  ctx.beginPath();\n  setShadowStyle(ctx, arrowOpts);\n  setBorderStyle(ctx, arrowOpts);\n  ctx.moveTo(arrowOffsetX, -width);\n  ctx.lineTo(offset + adjust, 0);\n  ctx.lineTo(arrowOffsetX, width);\n  if (fill === true) {\n    ctx.fillStyle = backgroundColor || borderColor;\n    ctx.closePath();\n    ctx.fill();\n    ctx.shadowColor = 'transparent';\n  } else {\n    ctx.shadowColor = arrowOpts.borderShadowColor;\n  }\n  ctx.stroke();\n}\n\nfunction getControlPoint(properties, options, distance) {\n  const {x, y, x2, y2, centerX, centerY} = properties;\n  const angle = Math.atan2(y2 - y, x2 - x);\n  const cp = toPosition(options.controlPoint, 0);\n  const point = {\n    x: centerX + getSize(distance, cp.x, false),\n    y: centerY + getSize(distance, cp.y, false)\n  };\n  return rotated(point, {x: centerX, y: centerY}, angle);\n}\n\nfunction drawArrowHeadOnCurve(ctx, {x, y}, {angle, adjust}, arrowOpts) {\n  if (!arrowOpts || !arrowOpts.display) {\n    return;\n  }\n  ctx.save();\n  ctx.translate(x, y);\n  ctx.rotate(angle);\n  drawArrowHead(ctx, 0, -adjust, arrowOpts);\n  ctx.restore();\n}\n\nfunction drawCurve(ctx, element, cp, length) {\n  const {x, y, x2, y2, options} = element;\n  const {startOpts, endOpts, startAdjust, endAdjust} = getArrowHeads(element);\n  const p1 = {x, y};\n  const p2 = {x: x2, y: y2};\n  const startAngle = angleInCurve(p1, cp, p2, 0);\n  const endAngle = angleInCurve(p1, cp, p2, 1) - PI;\n  const ps = pointInCurve(p1, cp, p2, startAdjust / length);\n  const pe = pointInCurve(p1, cp, p2, 1 - endAdjust / length);\n\n  const path = new Path2D();\n  ctx.beginPath();\n  path.moveTo(ps.x, ps.y);\n  path.quadraticCurveTo(cp.x, cp.y, pe.x, pe.y);\n  ctx.shadowColor = options.borderShadowColor;\n  ctx.stroke(path);\n  element.path = path;\n  element.ctx = ctx;\n  drawArrowHeadOnCurve(ctx, ps, {angle: startAngle, adjust: startAdjust}, startOpts);\n  drawArrowHeadOnCurve(ctx, pe, {angle: endAngle, adjust: endAdjust}, endOpts);\n}\n\nclass EllipseAnnotation extends Element {\n\n  inRange(mouseX, mouseY, axis, useFinalPosition) {\n    const rotation = this.options.rotation;\n    const borderWidth = this.options.borderWidth;\n    if (axis !== 'x' && axis !== 'y') {\n      return pointInEllipse({x: mouseX, y: mouseY}, this.getProps(['width', 'height', 'centerX', 'centerY'], useFinalPosition), rotation, borderWidth);\n    }\n    const {x, y, x2, y2} = this.getProps(['x', 'y', 'x2', 'y2'], useFinalPosition);\n    const hBorderWidth = borderWidth / 2;\n    const limit = axis === 'y' ? {start: y, end: y2} : {start: x, end: x2};\n    const rotatedPoint = rotated({x: mouseX, y: mouseY}, this.getCenterPoint(useFinalPosition), toRadians(-rotation));\n    return rotatedPoint[axis] >= limit.start - hBorderWidth - EPSILON && rotatedPoint[axis] <= limit.end + hBorderWidth + EPSILON;\n  }\n\n  getCenterPoint(useFinalPosition) {\n    return getElementCenterPoint(this, useFinalPosition);\n  }\n\n  draw(ctx) {\n    const {width, height, centerX, centerY, options} = this;\n    ctx.save();\n    translate(ctx, this.getCenterPoint(), options.rotation);\n    setShadowStyle(ctx, this.options);\n    ctx.beginPath();\n    ctx.fillStyle = options.backgroundColor;\n    const stroke = setBorderStyle(ctx, options);\n    ctx.ellipse(centerX, centerY, height / 2, width / 2, PI / 2, 0, 2 * PI);\n    ctx.fill();\n    if (stroke) {\n      ctx.shadowColor = options.borderShadowColor;\n      ctx.stroke();\n    }\n    ctx.restore();\n  }\n\n  get label() {\n    return this.elements && this.elements[0];\n  }\n\n  resolveElementProperties(chart, options) {\n    return resolveBoxAndLabelProperties(chart, options);\n  }\n\n}\n\nEllipseAnnotation.id = 'ellipseAnnotation';\n\nEllipseAnnotation.defaults = {\n  adjustScaleRange: true,\n  backgroundShadowColor: 'transparent',\n  borderDash: [],\n  borderDashOffset: 0,\n  borderShadowColor: 'transparent',\n  borderWidth: 1,\n  display: true,\n  init: undefined,\n  label: Object.assign({}, BoxAnnotation.defaults.label),\n  rotation: 0,\n  shadowBlur: 0,\n  shadowOffsetX: 0,\n  shadowOffsetY: 0,\n  xMax: undefined,\n  xMin: undefined,\n  xScaleID: undefined,\n  yMax: undefined,\n  yMin: undefined,\n  yScaleID: undefined,\n  z: 0\n};\n\nEllipseAnnotation.defaultRoutes = {\n  borderColor: 'color',\n  backgroundColor: 'color'\n};\n\nEllipseAnnotation.descriptors = {\n  label: {\n    _fallback: true\n  }\n};\n\nfunction pointInEllipse(p, ellipse, rotation, borderWidth) {\n  const {width, height, centerX, centerY} = ellipse;\n  const xRadius = width / 2;\n  const yRadius = height / 2;\n\n  if (xRadius <= 0 || yRadius <= 0) {\n    return false;\n  }\n  // https://stackoverflow.com/questions/7946187/point-and-ellipse-rotated-position-test-algorithm\n  const angle = toRadians(rotation || 0);\n  const hBorderWidth = borderWidth / 2 || 0;\n  const cosAngle = Math.cos(angle);\n  const sinAngle = Math.sin(angle);\n  const a = Math.pow(cosAngle * (p.x - centerX) + sinAngle * (p.y - centerY), 2);\n  const b = Math.pow(sinAngle * (p.x - centerX) - cosAngle * (p.y - centerY), 2);\n  return (a / Math.pow(xRadius + hBorderWidth, 2)) + (b / Math.pow(yRadius + hBorderWidth, 2)) <= 1.0001;\n}\n\nclass PointAnnotation extends Element {\n\n  inRange(mouseX, mouseY, axis, useFinalPosition) {\n    const {x, y, x2, y2, width} = this.getProps(['x', 'y', 'x2', 'y2', 'width'], useFinalPosition);\n    const borderWidth = this.options.borderWidth;\n    if (axis !== 'x' && axis !== 'y') {\n      return inPointRange({x: mouseX, y: mouseY}, this.getCenterPoint(useFinalPosition), width / 2, borderWidth);\n    }\n    const hBorderWidth = borderWidth / 2;\n    const limit = axis === 'y' ? {start: y, end: y2, value: mouseY} : {start: x, end: x2, value: mouseX};\n    return limit.value >= limit.start - hBorderWidth && limit.value <= limit.end + hBorderWidth;\n  }\n\n  getCenterPoint(useFinalPosition) {\n    return getElementCenterPoint(this, useFinalPosition);\n  }\n\n  draw(ctx) {\n    const options = this.options;\n    const borderWidth = options.borderWidth;\n    if (options.radius < 0.1) {\n      return;\n    }\n    ctx.save();\n    ctx.fillStyle = options.backgroundColor;\n    setShadowStyle(ctx, options);\n    const stroke = setBorderStyle(ctx, options);\n    drawPoint(ctx, this, this.centerX, this.centerY);\n    if (stroke && !isImageOrCanvas(options.pointStyle)) {\n      ctx.shadowColor = options.borderShadowColor;\n      ctx.stroke();\n    }\n    ctx.restore();\n    options.borderWidth = borderWidth;\n  }\n\n  resolveElementProperties(chart, options) {\n    const properties = resolvePointProperties(chart, options);\n    properties.initProperties = initAnimationProperties(chart, properties, options);\n    return properties;\n  }\n}\n\nPointAnnotation.id = 'pointAnnotation';\n\nPointAnnotation.defaults = {\n  adjustScaleRange: true,\n  backgroundShadowColor: 'transparent',\n  borderDash: [],\n  borderDashOffset: 0,\n  borderShadowColor: 'transparent',\n  borderWidth: 1,\n  display: true,\n  init: undefined,\n  pointStyle: 'circle',\n  radius: 10,\n  rotation: 0,\n  shadowBlur: 0,\n  shadowOffsetX: 0,\n  shadowOffsetY: 0,\n  xAdjust: 0,\n  xMax: undefined,\n  xMin: undefined,\n  xScaleID: undefined,\n  xValue: undefined,\n  yAdjust: 0,\n  yMax: undefined,\n  yMin: undefined,\n  yScaleID: undefined,\n  yValue: undefined,\n  z: 0\n};\n\nPointAnnotation.defaultRoutes = {\n  borderColor: 'color',\n  backgroundColor: 'color'\n};\n\nclass PolygonAnnotation extends Element {\n\n  inRange(mouseX, mouseY, axis, useFinalPosition) {\n    if (axis !== 'x' && axis !== 'y') {\n      return this.options.radius >= 0.1 && this.elements.length > 1 && pointIsInPolygon(this.elements, mouseX, mouseY, useFinalPosition);\n    }\n    const rotatedPoint = rotated({x: mouseX, y: mouseY}, this.getCenterPoint(useFinalPosition), toRadians(-this.options.rotation));\n    const axisPoints = this.elements.map((point) => axis === 'y' ? point.bY : point.bX);\n    const start = Math.min(...axisPoints);\n    const end = Math.max(...axisPoints);\n    return rotatedPoint[axis] >= start && rotatedPoint[axis] <= end;\n  }\n\n  getCenterPoint(useFinalPosition) {\n    return getElementCenterPoint(this, useFinalPosition);\n  }\n\n  draw(ctx) {\n    const {elements, options} = this;\n    ctx.save();\n    ctx.beginPath();\n    ctx.fillStyle = options.backgroundColor;\n    setShadowStyle(ctx, options);\n    const stroke = setBorderStyle(ctx, options);\n    let first = true;\n    for (const el of elements) {\n      if (first) {\n        ctx.moveTo(el.x, el.y);\n        first = false;\n      } else {\n        ctx.lineTo(el.x, el.y);\n      }\n    }\n    ctx.closePath();\n    ctx.fill();\n    // If no border, don't draw it\n    if (stroke) {\n      ctx.shadowColor = options.borderShadowColor;\n      ctx.stroke();\n    }\n    ctx.restore();\n  }\n\n  resolveElementProperties(chart, options) {\n    const properties = resolvePointProperties(chart, options);\n    const {sides, rotation} = options;\n    const elements = [];\n    const angle = (2 * PI) / sides;\n    let rad = rotation * RAD_PER_DEG;\n    for (let i = 0; i < sides; i++, rad += angle) {\n      const elProps = buildPointElement(properties, options, rad);\n      elProps.initProperties = initAnimationProperties(chart, properties, options);\n      elements.push(elProps);\n    }\n    properties.elements = elements;\n    return properties;\n  }\n}\n\nPolygonAnnotation.id = 'polygonAnnotation';\n\nPolygonAnnotation.defaults = {\n  adjustScaleRange: true,\n  backgroundShadowColor: 'transparent',\n  borderCapStyle: 'butt',\n  borderDash: [],\n  borderDashOffset: 0,\n  borderJoinStyle: 'miter',\n  borderShadowColor: 'transparent',\n  borderWidth: 1,\n  display: true,\n  init: undefined,\n  point: {\n    radius: 0\n  },\n  radius: 10,\n  rotation: 0,\n  shadowBlur: 0,\n  shadowOffsetX: 0,\n  shadowOffsetY: 0,\n  sides: 3,\n  xAdjust: 0,\n  xMax: undefined,\n  xMin: undefined,\n  xScaleID: undefined,\n  xValue: undefined,\n  yAdjust: 0,\n  yMax: undefined,\n  yMin: undefined,\n  yScaleID: undefined,\n  yValue: undefined,\n  z: 0\n};\n\nPolygonAnnotation.defaultRoutes = {\n  borderColor: 'color',\n  backgroundColor: 'color'\n};\n\nfunction buildPointElement({centerX, centerY}, {radius, borderWidth}, rad) {\n  const halfBorder = borderWidth / 2;\n  const sin = Math.sin(rad);\n  const cos = Math.cos(rad);\n  const point = {x: centerX + sin * radius, y: centerY - cos * radius};\n  return {\n    type: 'point',\n    optionScope: 'point',\n    properties: {\n      x: point.x,\n      y: point.y,\n      centerX: point.x,\n      centerY: point.y,\n      bX: centerX + sin * (radius + halfBorder),\n      bY: centerY - cos * (radius + halfBorder)\n    }\n  };\n}\n\nfunction pointIsInPolygon(points, x, y, useFinalPosition) {\n  let isInside = false;\n  let A = points[points.length - 1].getProps(['bX', 'bY'], useFinalPosition);\n  for (const point of points) {\n    const B = point.getProps(['bX', 'bY'], useFinalPosition);\n    if ((B.bY > y) !== (A.bY > y) && x < (A.bX - B.bX) * (y - B.bY) / (A.bY - B.bY) + B.bX) {\n      isInside = !isInside;\n    }\n    A = B;\n  }\n  return isInside;\n}\n\nconst annotationTypes = {\n  box: BoxAnnotation,\n  ellipse: EllipseAnnotation,\n  label: LabelAnnotation,\n  line: LineAnnotation,\n  point: PointAnnotation,\n  polygon: PolygonAnnotation\n};\n\n/**\n * Register fallback for annotation elements\n * For example lineAnnotation options would be looked through:\n * - the annotation object (options.plugins.annotation.annotations[id])\n * - element options (options.elements.lineAnnotation)\n * - element defaults (defaults.elements.lineAnnotation)\n * - annotation plugin defaults (defaults.plugins.annotation, this is what we are registering here)\n */\nObject.keys(annotationTypes).forEach(key => {\n  defaults.describe(`elements.${annotationTypes[key].id}`, {\n    _fallback: 'plugins.annotation.common'\n  });\n});\n\nconst directUpdater = {\n  update: Object.assign\n};\n\nconst hooks$1 = eventHooks.concat(elementHooks);\nconst resolve = (value, optDefs) => isObject(optDefs) ? resolveObj(value, optDefs) : value;\n\n\n/**\n * @typedef { import(\"chart.js\").Chart } Chart\n * @typedef { import(\"chart.js\").UpdateMode } UpdateMode\n * @typedef { import('../../types/options').AnnotationPluginOptions } AnnotationPluginOptions\n */\n\n/**\n * @param {string} prop\n * @returns {boolean}\n */\nconst isIndexable = (prop) => prop === 'color' || prop === 'font';\n\n/**\n * Resolve the annotation type, checking if is supported.\n * @param {string} [type=line] - annotation type\n * @returns {string} resolved annotation type\n */\nfunction resolveType(type = 'line') {\n  if (annotationTypes[type]) {\n    return type;\n  }\n  console.warn(`Unknown annotation type: '${type}', defaulting to 'line'`);\n  return 'line';\n}\n\n/**\n * @param {Chart} chart\n * @param {Object} state\n * @param {AnnotationPluginOptions} options\n * @param {UpdateMode} mode\n */\nfunction updateElements(chart, state, options, mode) {\n  const animations = resolveAnimations(chart, options.animations, mode);\n\n  const annotations = state.annotations;\n  const elements = resyncElements(state.elements, annotations);\n\n  for (let i = 0; i < annotations.length; i++) {\n    const annotationOptions = annotations[i];\n    const element = getOrCreateElement(elements, i, annotationOptions.type);\n    const resolver = annotationOptions.setContext(getContext(chart, element, annotationOptions));\n    const properties = element.resolveElementProperties(chart, resolver);\n\n    properties.skip = toSkip(properties);\n\n    if ('elements' in properties) {\n      updateSubElements(element, properties.elements, resolver, animations);\n      // Remove the sub-element definitions from properties, so the actual elements\n      // are not overwritten by their definitions\n      delete properties.elements;\n    }\n\n    if (!defined(element.x)) {\n      // If the element is newly created, assing the properties directly - to\n      // make them readily awailable to any scriptable options. If we do not do this,\n      // the properties retruned by `resolveElementProperties` are available only\n      // after options resolution.\n      Object.assign(element, properties);\n    }\n\n    Object.assign(element, properties.initProperties);\n    properties.options = resolveAnnotationOptions(resolver);\n\n    animations.update(element, properties);\n  }\n}\n\nfunction toSkip(properties) {\n  return isNaN(properties.x) || isNaN(properties.y);\n}\n\nfunction resolveAnimations(chart, animOpts, mode) {\n  if (mode === 'reset' || mode === 'none' || mode === 'resize') {\n    return directUpdater;\n  }\n  return new Animations(chart, animOpts);\n}\n\nfunction updateSubElements(mainElement, elements, resolver, animations) {\n  const subElements = mainElement.elements || (mainElement.elements = []);\n  subElements.length = elements.length;\n  for (let i = 0; i < elements.length; i++) {\n    const definition = elements[i];\n    const properties = definition.properties;\n    const subElement = getOrCreateElement(subElements, i, definition.type, definition.initProperties);\n    const subResolver = resolver[definition.optionScope].override(definition);\n    properties.options = resolveAnnotationOptions(subResolver);\n    animations.update(subElement, properties);\n  }\n}\n\nfunction getOrCreateElement(elements, index, type, initProperties) {\n  const elementClass = annotationTypes[resolveType(type)];\n  let element = elements[index];\n  if (!element || !(element instanceof elementClass)) {\n    element = elements[index] = new elementClass();\n    Object.assign(element, initProperties);\n  }\n  return element;\n}\n\nfunction resolveAnnotationOptions(resolver) {\n  const elementClass = annotationTypes[resolveType(resolver.type)];\n  const result = {};\n  result.id = resolver.id;\n  result.type = resolver.type;\n  result.drawTime = resolver.drawTime;\n  Object.assign(result,\n    resolveObj(resolver, elementClass.defaults),\n    resolveObj(resolver, elementClass.defaultRoutes));\n  for (const hook of hooks$1) {\n    result[hook] = resolver[hook];\n  }\n  return result;\n}\n\nfunction resolveObj(resolver, defs) {\n  const result = {};\n  for (const prop of Object.keys(defs)) {\n    const optDefs = defs[prop];\n    const value = resolver[prop];\n    if (isIndexable(prop) && isArray(value)) {\n      result[prop] = value.map((item) => resolve(item, optDefs));\n    } else {\n      result[prop] = resolve(value, optDefs);\n    }\n  }\n  return result;\n}\n\nfunction getContext(chart, element, annotation) {\n  return element.$context || (element.$context = Object.assign(Object.create(chart.getContext()), {\n    element,\n    id: annotation.id,\n    type: 'annotation'\n  }));\n}\n\nfunction resyncElements(elements, annotations) {\n  const count = annotations.length;\n  const start = elements.length;\n\n  if (start < count) {\n    const add = count - start;\n    elements.splice(start, 0, ...new Array(add));\n  } else if (start > count) {\n    elements.splice(count, start - count);\n  }\n  return elements;\n}\n\nvar version = \"3.0.1\";\n\nconst chartStates = new Map();\nconst hooks = eventHooks.concat(elementHooks);\n\nvar annotation = {\n  id: 'annotation',\n\n  version,\n\n  beforeRegister() {\n    requireVersion('chart.js', '4.0', Chart.version);\n  },\n\n  afterRegister() {\n    Chart.register(annotationTypes);\n  },\n\n  afterUnregister() {\n    Chart.unregister(annotationTypes);\n  },\n\n  beforeInit(chart) {\n    chartStates.set(chart, {\n      annotations: [],\n      elements: [],\n      visibleElements: [],\n      listeners: {},\n      listened: false,\n      moveListened: false,\n      hooks: {},\n      hooked: false,\n      hovered: []\n    });\n  },\n\n  beforeUpdate(chart, args, options) {\n    const state = chartStates.get(chart);\n    const annotations = state.annotations = [];\n\n    let annotationOptions = options.annotations;\n    if (isObject(annotationOptions)) {\n      Object.keys(annotationOptions).forEach(key => {\n        const value = annotationOptions[key];\n        if (isObject(value)) {\n          value.id = key;\n          annotations.push(value);\n        }\n      });\n    } else if (isArray(annotationOptions)) {\n      annotations.push(...annotationOptions);\n    }\n    verifyScaleOptions(annotations, chart.scales);\n  },\n\n  afterDataLimits(chart, args) {\n    const state = chartStates.get(chart);\n    adjustScaleRange(chart, args.scale, state.annotations.filter(a => a.display && a.adjustScaleRange));\n  },\n\n  afterUpdate(chart, args, options) {\n    const state = chartStates.get(chart);\n    updateListeners(chart, state, options);\n    updateElements(chart, state, options, args.mode);\n    state.visibleElements = state.elements.filter(el => !el.skip && el.options.display);\n    updateHooks(chart, state, options);\n  },\n\n  beforeDatasetsDraw(chart, _args, options) {\n    draw(chart, 'beforeDatasetsDraw', options.clip);\n  },\n\n  afterDatasetsDraw(chart, _args, options) {\n    draw(chart, 'afterDatasetsDraw', options.clip);\n  },\n\n  beforeDraw(chart, _args, options) {\n    draw(chart, 'beforeDraw', options.clip);\n  },\n\n  afterDraw(chart, _args, options) {\n    draw(chart, 'afterDraw', options.clip);\n  },\n\n  beforeEvent(chart, args, options) {\n    const state = chartStates.get(chart);\n    if (handleEvent(state, args.event, options)) {\n      args.changed = true;\n    }\n  },\n\n  afterDestroy(chart) {\n    chartStates.delete(chart);\n  },\n\n  _getState(chart) {\n    return chartStates.get(chart);\n  },\n\n  defaults: {\n    animations: {\n      numbers: {\n        properties: ['x', 'y', 'x2', 'y2', 'width', 'height', 'centerX', 'centerY', 'pointX', 'pointY', 'radius'],\n        type: 'number'\n      },\n    },\n    clip: true,\n    interaction: {\n      mode: undefined,\n      axis: undefined,\n      intersect: undefined\n    },\n    common: {\n      drawTime: 'afterDatasetsDraw',\n      init: false,\n      label: {\n      }\n    }\n  },\n\n  descriptors: {\n    _indexable: false,\n    _scriptable: (prop) => !hooks.includes(prop) && prop !== 'init',\n    annotations: {\n      _allKeys: false,\n      _fallback: (prop, opts) => `elements.${annotationTypes[resolveType(opts.type)].id}`\n    },\n    interaction: {\n      _fallback: true\n    },\n    common: {\n      label: {\n        _indexable: isIndexable,\n        _fallback: true\n      },\n      _indexable: isIndexable\n    }\n  },\n\n  additionalOptionScopes: ['']\n};\n\nfunction draw(chart, caller, clip) {\n  const {ctx, chartArea} = chart;\n  const state = chartStates.get(chart);\n\n  if (clip) {\n    clipArea(ctx, chartArea);\n  }\n\n  const drawableElements = getDrawableElements(state.visibleElements, caller).sort((a, b) => a.element.options.z - b.element.options.z);\n  for (const item of drawableElements) {\n    drawElement(ctx, chartArea, state, item);\n  }\n\n  if (clip) {\n    unclipArea(ctx);\n  }\n}\n\nfunction getDrawableElements(elements, caller) {\n  const drawableElements = [];\n  for (const el of elements) {\n    if (el.options.drawTime === caller) {\n      drawableElements.push({element: el, main: true});\n    }\n    if (el.elements && el.elements.length) {\n      for (const sub of el.elements) {\n        if (sub.options.display && sub.options.drawTime === caller) {\n          drawableElements.push({element: sub});\n        }\n      }\n    }\n  }\n  return drawableElements;\n}\n\nfunction drawElement(ctx, chartArea, state, item) {\n  const el = item.element;\n  if (item.main) {\n    invokeHook(state, el, 'beforeDraw');\n    el.draw(ctx, chartArea);\n    invokeHook(state, el, 'afterDraw');\n  } else {\n    el.draw(ctx, chartArea);\n  }\n}\n\nexport { annotation as default };\n","import { render } from \"./AI_ReportView.vue?vue&type=template&id=1fac9b27&scoped=true\"\nimport script from \"./AI_ReportView.vue?vue&type=script&lang=js\"\nexport * from \"./AI_ReportView.vue?vue&type=script&lang=js\"\n\nimport \"./AI_ReportView.vue?vue&type=style&index=0&id=1fac9b27&scoped=true&lang=css\"\n\nimport exportComponent from \"../../../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-1fac9b27\"]])\n\nexport default __exports__","import {Chart, registerables} from '../dist/chart.js';\n\nChart.register(...registerables);\n\nexport * from '../dist/chart.js';\nexport default Chart;\n"],"names":["class","style","key","_createElementVNode","_hoisted_5","id","_hoisted_27","_createStaticVNode","_createElementBlock","_hoisted_1","_hoisted_2","_toDisplayString","loginInfo","user_name","_hoisted_3","onClick","_cache","args","$options","analysis","all","_hoisted_7","_hoisted_8","_hoisted_9","_hoisted_10","_hoisted_11","_hoisted_12","_hoisted_13","_hoisted_14","_hoisted_15","_createTextVNode","myRank","_hoisted_16","dateAi","_hoisted_17","_hoisted_18","_hoisted_19","_hoisted_20","_hoisted_21","_hoisted_22","_hoisted_23","_hoisted_24","_hoisted_25","successYN","_hoisted_26","_hoisted_28","_createCommentVNode","_hoisted_29","_hoisted_30","_hoisted_31","_hoisted_32","_hoisted_33","rank","_hoisted_34","_hoisted_35","catchTop","_hoisted_36","_hoisted_37","_hoisted_38","_hoisted_39","_hoisted_40","_hoisted_41","_hoisted_42","mile","_hoisted_43","_hoisted_44","_hoisted_4","_hoisted_6","interaction","modes","point","state","event","filterElements","intersect","nearest","options","getNearestItem","x","axis","y","getElements","mode","inRangeByAxis","element","inRange","getPointByAxis","center","visibleElements","filter","minDistance","Number","POSITIVE_INFINITY","reduce","nearestItems","getCenterPoint","evenPoint","distance","push","sort","a","b","_index","slice","isOlderPart","act","req","length","EPSILON","clamp","from","to","Math","min","max","clampAll","obj","Object","keys","inPointRange","radius","borderWidth","hBorderWidth","pow","inBoxRange","x2","y2","inRangeX","inRangeY","getElementCenterPoint","useFinalPosition","centerX","centerY","getProps","requireVersion","pkg","ver","strict","parts","split","i","parseInt","Error","isPercentString","s","endsWith","toPercent","parseFloat","toPositivePercent","boxAppering","width","height","defaultInitAnimation","box","properties","ellipse","label","line","polygon","getRelativePosition","size","position","getSize","value","positivePercent","calculateTextAlignment","textAlign","toPosition","defaultValue","v","isBoundToPoint","xValue","yValue","initAnimationProperties","chart","initAnim","init","applyDefault","execCallback","loadHooks","hooks","hooksContainer","activated","forEach","hook","type","result","widthCache","Map","notRadius","isNaN","fontsKey","fonts","prev","item","string","isImageOrCanvas","content","toString","translate","ctx","rotation","rotate","t","setBorderStyle","lineCap","borderCapStyle","setLineDash","borderDash","lineDashOffset","borderDashOffset","lineJoin","borderJoinStyle","lineWidth","strokeStyle","borderColor","setShadowStyle","shadowColor","backgroundShadowColor","shadowBlur","shadowOffsetX","shadowOffsetY","measureLabelSize","optFont","font","map","f","strokeWidth","textStrokeWidth","lines","mapKey","join","_measureText","has","set","calculateLabelSize","get","drawBox","rect","save","stroke","fillStyle","backgroundColor","beginPath","w","h","borderRadius","closePath","fill","borderShadowColor","restore","drawLabel","globalAlpha","getOpacity","opacity","drawImage","labels","optColor","color","colors","textBaseline","setTextStrokeStyle","applyLabelDecoration","applyLabelContent","miterLimit","textStrokeColor","drawPoint","pointStyle","rad","drawPointStyle","xOffset","yOffset","cornerRadius","arc","T","moveTo","sin","cos","lineTo","P","H","SQRT1_2","count","text","measureText","lineHeight","lhs","l","lh","strokeText","c","fillText","elementValue","limitedLineScale","xScaleID","start","end","startProp","endProp","yScaleID","scaleValue","scale","fallback","parse","getPixelForValue","retrieveScaleID","scales","scaleID","charAt","axes","values","getDimensionByScale","reverse","getChartPoint","chartArea","xScale","yScale","left","top","resolveBoxProperties","right","bottom","xDim","getChartDimensionByScale","xMin","xMax","yDim","yMin","yMax","resolvePointProperties","adjustCenterX","xAdjust","adjustCenterY","yAdjust","getChartCircle","resolveLineProperties","area","resolveFullLineProperties","resolveLimitedLineProperties","resolveBoxAndLabelProperties","initProperties","elements","optionScope","resolveLabelElementProperties$1","NaN","endValue","isHorizontal","scaleId","dim","calculateX","labelSize","padding","calculatePosition$1","adjust","calculateY","boxOpts","labelOpts","padStart","padEnd","availableSize","callout","display","rotated","angle","cx","cy","moveHooks","eventHooks","concat","updateListeners","listened","listeners","moveListened","_getElements","annotations","scope","click","handleEvent","handleMoveEvents","handleClickEvents","previous","hovered","context","changed","dispatchMoveEvents","checkElements","indexOf","dispatchEvent","handler","$context","elementHooks","updateHooks","hooked","invokeHook","callbackHook","adjustScaleRange","range","getScaleLimits","changeScaleLimit","handleTickRangeOptions","verifyScaleOptions","annotation","verifyScaleIDs","limit","suggestedLimit","scaleLimitDefined","scaleOptions","verifyProperties","console","warn","prop","scaleIDOption","limits","NEGATIVE_INFINITY","updateLimits","props","raw","BoxAnnotation","mouseX","mouseY","this","draw","resolveElementProperties","defaults","undefined","drawTime","family","weight","z","defaultRoutes","descriptors","_fallback","positions","LabelAnnotation","visible","_visible","drawCallout","getLabelSize","boxSize","measureRect","pointX","pointY","calculatePosition","calloutPosition","resolveCalloutPosition","isPointInRange","separatorStart","separatorEnd","getCalloutSeparatorCoord","sideStart","sideEnd","getCalloutSideCoord","margin","rotatedPoint","getCalloutSeparatorAdjust","side","getCalloutSideAdjust","includes","resolveCalloutAutoPosition","xPoints","yPoints","index","pointInLine","p1","p2","interpolateX","abs","interpolateY","sqr","rangeLimit","coordInCurve","cp","pointInCurve","coordAngleInCurve","angleInCurve","atan2","LineAnnotation","path","mx","currentDevicePixelRatio","my","isPointInStroke","isOnLabel","epsilon","intersects","inAxisRange","sqrt","curve","drawCurve","startOpts","endOpts","startAdjust","endAdjust","getArrowHeads","drawArrowHead","inside","isLineInArea","limitLineToArea","getControlPoint","labelProperties","resolveLabelElementProperties","arrowHeadsDefaults","limitPointToArea","x1","y1","dx","dy","lenSq","xx","yy","textSize","calculateLabelPosition","calculateAutoRotation","sizes","rotatedSize","calculateT","pt","xCoordinateSizes","yCoordinateSizes","adjustLabelCoordinate","space","spaceAround","calculateTAdjust","lineSize","lineW","lineH","r","coordinate","labelSizes","halfSize","arrowStartOpts","arrowHeads","arrowEndOpts","getLineAdjust","arrowOpts","offset","arrowOffsetX","controlPoint","drawArrowHeadOnCurve","startAngle","endAngle","ps","pe","Path2D","quadraticCurveTo","assign","EllipseAnnotation","pointInEllipse","p","xRadius","yRadius","cosAngle","sinAngle","PointAnnotation","PolygonAnnotation","pointIsInPolygon","axisPoints","bY","bX","first","el","sides","elProps","buildPointElement","halfBorder","points","isInside","A","B","annotationTypes","d","describe","directUpdater","update","hooks$1","resolve","optDefs","resolveObj","isIndexable","resolveType","updateElements","animations","resolveAnimations","resyncElements","annotationOptions","getOrCreateElement","resolver","setContext","getContext","skip","toSkip","updateSubElements","resolveAnnotationOptions","animOpts","mainElement","subElements","definition","subElement","subResolver","override","elementClass","defs","create","add","splice","Array","version","chartStates","beforeRegister","afterRegister","register","afterUnregister","unregister","beforeInit","beforeUpdate","afterDataLimits","afterUpdate","beforeDatasetsDraw","_args","clip","afterDatasetsDraw","beforeDraw","afterDraw","beforeEvent","afterDestroy","delete","_getState","numbers","common","_indexable","_scriptable","_allKeys","opts","additionalOptionScopes","caller","drawableElements","getDrawableElements","drawElement","main","sub","Chart","annotationPlugin","name","data","hasReport","methods","aitest","response","api","post","params","prompt","user_no","log","error","airank","aiCatch","aiMile","runAnalysis","delay","ms","Promise","setTimeout","mapActions","getReport","$store","dispatch","createCharts","createChart1","createChart2","today","Date","toISOString","alertPromise","analysisAlert","analysisPromise","Swal","title","icon","confirmButtonText","timer","timerProgressBar","imageUrl","require","imageClass","scrollbarPadding","html","getLoginInfo","showCloseButton","didOpen","popup","image","querySelector","img","marginTop","paddingTop","willClose","document","getElementById","myChart1","getChart","destroy","score","chartRank","getPointColor","linearInterpolation","x0","y0","getXPosition","xPosition","datasets","gradient","createLinearGradient","addColorStop","pointRadius","order","pointBackgroundColor","pointBorderColor","pointHoverRadius","responsive","maintainAspectRatio","ticks","stepSize","callback","beginAtZero","grid","plugins","legend","tooltip","callbacks","datasetIndex","parsed","tension","xAxis","yAxis","myChart2","avg_score_json","mile_name","avg_data","average_score","my_data","my_score_json","total_score","pointHoverBackgroundColor","pointHoverBorderColor","config","angleLines","suggestedMin","suggestedMax","pointLabels","mounted","computed","mapGetters","getAll","getRank","getCatchTops","getMile","getDateAi","getMyRank","getChartRank","getAvg_score_json","getMy_score_json","getSuccessYN","watch","immediate","newVal","$nextTick","__exports__","render"],"sourceRoot":""}
"use strict";(self["webpackChunkmile"]=self["webpackChunkmile"]||[]).push([[6494],{6494:function(e,t,n){n.r(t),n.d(t,{default:function(){return J}});var o=n(641),i=n(3751),r=n(33);const s=e=>((0,o.Qi)("data-v-7085385d"),e=e(),(0,o.jt)(),e),a={class:"app-container"},c=s((()=>(0,o.Lk)("div",null,[(0,o.Lk)("h2",null,"Q&A")],-1))),l=s((()=>(0,o.Lk)("div",{class:"category-button list-wrapper"},"카테고리",-1))),u={key:0,class:"dropdown-menu",ref:"dropdownMenu"},d={class:"menu-items"},h=["onClick"],g={key:0},f={key:1},p={class:"notice-count-container"},y={class:"notice-count"},v={class:"checkbox-container"},m=s((()=>(0,o.Lk)("span",{class:"custom-checkbox"},null,-1))),k=s((()=>(0,o.Lk)("span",{class:"checkbox-label"},"최신순",-1))),_={key:0},b=s((()=>(0,o.Lk)("i",{class:"bi bi-pencil",style:{"margin-right":"10px"}},null,-1))),C={class:"search-container"},w=s((()=>(0,o.Lk)("i",{class:"bi bi-search"},null,-1))),P=[w],L={class:"notice-list"},x={key:0},E=["onClick"],D={class:"notice-details"},I={key:0,class:"notice-new"},N={key:1,class:"notice-num"},O={class:"notice-mile"},A={class:"notice-title"},B={class:"notice-date"},X=s((()=>(0,o.Lk)("i",{class:"bi bi-eye"},null,-1))),M={class:"notice-views"},T=s((()=>(0,o.Lk)("i",{class:"fa fa-eye"},null,-1))),Q={key:1},j=s((()=>(0,o.Lk)("p",null,"게시글이 없습니다.",-1))),V=[j],W={class:"pagination"},$=["disabled"],S=["onClick"],F=["disabled"];function K(e,t,n,s,w,j){return(0,o.uX)(),(0,o.CE)("div",a,[(0,o.Lk)("div",{class:"content cards",onClick:t[9]||(t[9]=(...t)=>e.handleClick&&e.handleClick(...t))},[c,(0,o.Lk)("div",{onClick:t[1]||(t[1]=(0,i.D$)(((...e)=>j.toggleCategory&&j.toggleCategory(...e)),["stop"])),class:"QnA",ref:"categoryButton"},[l,w.showCategory?((0,o.uX)(),(0,o.CE)("div",u,[(0,o.Lk)("div",d,[(0,o.Lk)("a",{class:"dropdown-item",onClick:t[0]||(t[0]=e=>j.filterByCategory(null))},"전체"),((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(w.mileages,(e=>((0,o.uX)(),(0,o.CE)("a",{class:"dropdown-item",key:e.mile_no,onClick:t=>j.filterByCategory(e.mile_name)},["기타"===e.mile_name?((0,o.uX)(),(0,o.CE)("span",g,(0,r.v_)(e.mile_name),1)):((0,o.uX)(),(0,o.CE)("span",f,(0,r.v_)(e.mile_name)+" 마일리지",1))],8,h)))),128))])],512)):(0,o.Q3)("",!0)],512),(0,o.Lk)("div",p,[(0,o.Lk)("div",y,"총 "+(0,r.v_)(j.filteredNotices.length)+"건",1),(0,o.Lk)("label",v,[(0,o.bo)((0,o.Lk)("input",{type:"checkbox","onUpdate:modelValue":t[2]||(t[2]=e=>w.sortByDateAsc=e),onChange:t[3]||(t[3]=e=>j.handleCheckboxChange("date"))},null,544),[[i.lH,w.sortByDateAsc]]),m,(0,o.eW)(),k])]),(0,o.Lk)("div",null,[j.isLoggedIn&&j.loginInfo.user_is_admin&&!j.loginInfo.user_is_manager&&j.isChecked?((0,o.uX)(),(0,o.CE)("div",_,[(0,o.Lk)("button",{class:"write-button",onClick:t[4]||(t[4]=(...e)=>j.goToWritePage&&j.goToWritePage(...e))},[b,(0,o.eW)(" 글작성 ")])])):(0,o.Q3)("",!0)]),(0,o.Lk)("div",C,[(0,o.bo)((0,o.Lk)("input",{type:"text","onUpdate:modelValue":t[5]||(t[5]=e=>w.searchQuery=e),placeholder:"제목 및 내용을 검색하세요",class:"input-search"},null,512),[[i.Jo,w.searchQuery]]),(0,o.Lk)("button",{class:"search-button",onClick:t[6]||(t[6]=(...e)=>j.searchNotices&&j.searchNotices(...e))},P)]),(0,o.Lk)("div",L,[j.paginatedNotices.length?((0,o.uX)(),(0,o.CE)("div",x,[((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(j.paginatedNotices,(e=>((0,o.uX)(),(0,o.CE)("div",{class:"input-base list-wrapper",key:e.notice_board_no,onClick:t=>j.handleNoticeClick(e)},[(0,o.Lk)("div",D,[e.is_new?((0,o.uX)(),(0,o.CE)("div",I,(0,r.v_)(e.display_num),1)):((0,o.uX)(),(0,o.CE)("div",N,(0,r.v_)(e.display_num),1)),(0,o.Lk)("div",O,(0,r.v_)(e.mile_name)+" 마일리지",1),(0,o.Lk)("div",A,(0,r.v_)(e.notice_board_title),1),(0,o.Lk)("div",B,(0,r.v_)(j.formatDate(e.notice_board_date)),1),X,(0,o.Lk)("div",M,[(0,o.eW)((0,r.v_)(e.notice_board_hit)+" ",1),T])])],8,E)))),128))])):((0,o.uX)(),(0,o.CE)("div",Q,V))]),(0,o.Lk)("div",W,[(0,o.Lk)("button",{onClick:t[7]||(t[7]=(...e)=>j.prevPage&&j.prevPage(...e)),disabled:1===w.currentPage},"〈",8,$),((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(j.totalPages,(e=>((0,o.uX)(),(0,o.CE)("button",{onClick:t=>j.goToPage(e),class:(0,r.C4)({active:w.currentPage===e}),key:e},(0,r.v_)(e),11,S)))),128)),(0,o.Lk)("button",{onClick:t[8]||(t[8]=(...e)=>j.nextPage&&j.nextPage(...e)),disabled:w.currentPage===j.totalPages},"〉",8,F)])])])}n(4114);var U=n(6278),z=n(7682),R={data(){return{notices:[],mileages:[],showCategory:!1,currentPage:1,itemsPerPage:10,searchQuery:"",selectedCategory:null,isProcessing:!1,sortByDateAsc:!0,sortByViews:!1}},computed:{...(0,U.L8)("login",["getLoginInfo","getIsChecked"]),filteredNotices(){let e=this.notices;if(this.searchQuery){const t=this.searchQuery.toLowerCase();e=e.filter((e=>e.notice_board_title.toLowerCase().includes(t)||e.notice_board_content.toLowerCase().includes(t)))}null!==this.selectedCategory&&(e=e.filter((e=>e.mile_name===this.selectedCategory))),this.sortByViews?e.sort(((e,t)=>t.notice_board_hit-e.notice_board_hit||new Date(t.notice_board_date)-new Date(e.notice_board_date))):this.sortByDateAsc?e.sort(((e,t)=>new Date(t.notice_board_date)-new Date(e.notice_board_date))):e.sort(((e,t)=>new Date(e.notice_board_date)-new Date(t.notice_board_date)));let t=1;return e.map((e=>({...e,is_new:this.isNew(e.notice_board_date),display_num:this.isNew(e.notice_board_date)?"NEW":t++})))},loginInfo(){return this.getLoginInfo},isChecked(){return this.getIsChecked},isLoggedIn(){return!!this.loginInfo},totalPages(){return Math.ceil(this.filteredNotices.length/this.itemsPerPage)},paginatedNotices(){const e=(this.currentPage-1)*this.itemsPerPage,t=e+this.itemsPerPage;return this.filteredNotices.slice(e,t)}},methods:{isNew(e){const t=new Date,n=new Date(e),o=t.getTime()-n.getTime(),i=o/864e5;return i<=7},handleCheckboxChange(e){"views"===e&&this.sortByViews?this.sortByDateAsc=!1:"date"===e&&this.sortByDateAsc&&(this.sortByViews=!1)},toggleCategory(){this.showCategory=!this.showCategory},closeDropdown(){this.showCategory=!1},handleClickOutside(e){this.$refs.dropdownMenu&&!this.$refs.dropdownMenu.contains(e.target)&&this.$refs.categoryButton&&!this.$refs.categoryButton.contains(e.target)&&this.closeDropdown()},goToPage(e){this.currentPage=e},nextPage(){this.currentPage<this.totalPages&&this.currentPage++},prevPage(){this.currentPage>1&&this.currentPage--},goToWritePage(){this.$router.push({name:"noticeWriteAdminView"})},async fetchNotices(){console.log("fetchNotices method called");try{const e=await z.A.get("/notice/list");console.log("Fetched notices:",e.data),this.notices=e.data}catch(e){console.error("Error fetching notices:",e.response?e.response.data:e.message)}},async fetchMileages(){try{const e=await z.A.get("/notice/mileage");console.log("Fetched mileages:",e.data),this.mileages=e.data}catch(e){console.error("Error fetching mileages:",e.response?e.response.data:e.message)}},async handleNoticeClick(e){if(!this.isProcessing){this.isProcessing=!0;try{const t=await z.A.post(`/notice/increment-views/${e.notice_board_no}`);console.log("Increment views response:",t.data);const n=this.notices.findIndex((t=>t.notice_board_no===e.notice_board_no));-1!==n&&(this.notices[n]={...this.notices[n],notice_board_hit:(this.notices[n].notice_board_hit||0)+1}),this.$router.push({name:"noticeDetailView",params:{id:e.notice_board_no,notice:{...e,mile_no:e.mile_no,mile_name:e.mile_name}}})}catch(t){console.error("Error incrementing views:",t.response?t.response.data:t.message)}finally{this.isProcessing=!1}}},formatDate(e){const t={year:"numeric",month:"2-digit",day:"2-digit"};return new Date(e).toLocaleDateString("ko-KR",t)},searchNotices(){this.currentPage=1},filterByCategory(e){this.selectedCategory=e,this.currentPage=1},refreshPage(){this.selectedCategory=null,this.searchQuery="",this.currentPage=1}},mounted(){console.log("loginInfo:",this.loginInfo),console.log("isLoggedIn:",this.isLoggedIn),console.log("isChecked:",this.isChecked),document.addEventListener("click",this.handleClickOutside),this.fetchNotices(),this.fetchMileages()},beforeUnmount(){document.removeEventListener("click",this.handleClickOutside)}},G=n(6262);const H=(0,G.A)(R,[["render",K],["__scopeId","data-v-7085385d"]]);var J=H},9617:function(e,t,n){var o=n(5397),i=n(5610),r=n(6198),s=function(e){return function(t,n,s){var a=o(t),c=r(a);if(0===c)return!e&&-1;var l,u=i(s,c);if(e&&n!==n){while(c>u)if(l=a[u++],l!==l)return!0}else for(;c>u;u++)if((e||u in a)&&a[u]===n)return e||u||0;return!e&&-1}};e.exports={includes:s(!0),indexOf:s(!1)}},4527:function(e,t,n){var o=n(3724),i=n(4376),r=TypeError,s=Object.getOwnPropertyDescriptor,a=o&&!function(){if(void 0!==this)return!0;try{Object.defineProperty([],"length",{writable:!1}).length=1}catch(e){return e instanceof TypeError}}();e.exports=a?function(e,t){if(i(e)&&!s(e,"length").writable)throw new r("Cannot set read only .length");return e.length=t}:function(e,t){return e.length=t}},7740:function(e,t,n){var o=n(9297),i=n(5031),r=n(7347),s=n(4913);e.exports=function(e,t,n){for(var a=i(t),c=s.f,l=r.f,u=0;u<a.length;u++){var d=a[u];o(e,d)||n&&o(n,d)||c(e,d,l(t,d))}}},6837:function(e){var t=TypeError,n=9007199254740991;e.exports=function(e){if(e>n)throw t("Maximum allowed index exceeded");return e}},8727:function(e){e.exports=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"]},6518:function(e,t,n){var o=n(4475),i=n(7347).f,r=n(6699),s=n(6840),a=n(9433),c=n(7740),l=n(2796);e.exports=function(e,t){var n,u,d,h,g,f,p=e.target,y=e.global,v=e.stat;if(u=y?o:v?o[p]||a(p,{}):o[p]&&o[p].prototype,u)for(d in t){if(g=t[d],e.dontCallGetSet?(f=i(u,d),h=f&&f.value):h=u[d],n=l(y?d:p+(v?".":"#")+d,e.forced),!n&&void 0!==h){if(typeof g==typeof h)continue;c(g,h)}(e.sham||h&&h.sham)&&r(g,"sham",!0),s(u,d,g,e)}}},7055:function(e,t,n){var o=n(9504),i=n(9039),r=n(4576),s=Object,a=o("".split);e.exports=i((function(){return!s("z").propertyIsEnumerable(0)}))?function(e){return"String"===r(e)?a(e,""):s(e)}:s},4376:function(e,t,n){var o=n(4576);e.exports=Array.isArray||function(e){return"Array"===o(e)}},2796:function(e,t,n){var o=n(9039),i=n(4901),r=/#|\.prototype\./,s=function(e,t){var n=c[a(e)];return n===u||n!==l&&(i(t)?o(t):!!t)},a=s.normalize=function(e){return String(e).replace(r,".").toLowerCase()},c=s.data={},l=s.NATIVE="N",u=s.POLYFILL="P";e.exports=s},6198:function(e,t,n){var o=n(8014);e.exports=function(e){return o(e.length)}},741:function(e){var t=Math.ceil,n=Math.floor;e.exports=Math.trunc||function(e){var o=+e;return(o>0?n:t)(o)}},7347:function(e,t,n){var o=n(3724),i=n(9565),r=n(8773),s=n(6980),a=n(5397),c=n(6969),l=n(9297),u=n(5917),d=Object.getOwnPropertyDescriptor;t.f=o?d:function(e,t){if(e=a(e),t=c(t),u)try{return d(e,t)}catch(n){}if(l(e,t))return s(!i(r.f,e,t),e[t])}},8480:function(e,t,n){var o=n(1828),i=n(8727),r=i.concat("length","prototype");t.f=Object.getOwnPropertyNames||function(e){return o(e,r)}},3717:function(e,t){t.f=Object.getOwnPropertySymbols},1828:function(e,t,n){var o=n(9504),i=n(9297),r=n(5397),s=n(9617).indexOf,a=n(421),c=o([].push);e.exports=function(e,t){var n,o=r(e),l=0,u=[];for(n in o)!i(a,n)&&i(o,n)&&c(u,n);while(t.length>l)i(o,n=t[l++])&&(~s(u,n)||c(u,n));return u}},8773:function(e,t){var n={}.propertyIsEnumerable,o=Object.getOwnPropertyDescriptor,i=o&&!n.call({1:2},1);t.f=i?function(e){var t=o(this,e);return!!t&&t.enumerable}:n},5031:function(e,t,n){var o=n(7751),i=n(9504),r=n(8480),s=n(3717),a=n(8551),c=i([].concat);e.exports=o("Reflect","ownKeys")||function(e){var t=r.f(a(e)),n=s.f;return n?c(t,n(e)):t}},5610:function(e,t,n){var o=n(1291),i=Math.max,r=Math.min;e.exports=function(e,t){var n=o(e);return n<0?i(n+t,0):r(n,t)}},5397:function(e,t,n){var o=n(7055),i=n(7750);e.exports=function(e){return o(i(e))}},1291:function(e,t,n){var o=n(741);e.exports=function(e){var t=+e;return t!==t||0===t?0:o(t)}},8014:function(e,t,n){var o=n(1291),i=Math.min;e.exports=function(e){var t=o(e);return t>0?i(t,9007199254740991):0}},4114:function(e,t,n){var o=n(6518),i=n(8981),r=n(6198),s=n(4527),a=n(6837),c=n(9039),l=c((function(){return 4294967297!==[].push.call({length:4294967296},1)})),u=function(){try{Object.defineProperty([],"length",{writable:!1}).push()}catch(e){return e instanceof TypeError}},d=l||!u();o({target:"Array",proto:!0,arity:1,forced:d},{push:function(e){var t=i(this),n=r(t),o=arguments.length;a(n+o);for(var c=0;c<o;c++)t[n]=arguments[c],n++;return s(t,n),n}})}}]);
//# sourceMappingURL=6494.525a626a.js.map
"use strict";(self["webpackChunkmile"]=self["webpackChunkmile"]||[]).push([[8644],{8644:function(e,t,i){i.r(t),i.d(t,{default:function(){return Ae}});var n=i(641),s=i(33);const l={class:"cards page-back mx-auto",style:{color:"#4b4a4a"}},a={class:"d-flex"},o={class:"back-container"},c=(0,n.Lk)("span",{class:"arrow"},"❮",-1),r={class:"input-base input-search d-flex justify-content-center mx-auto my-3",style:{width:"600px",background:"#ebebeb"}};function u(e,t,i,u,d,m){return(0,n.uX)(),(0,n.CE)("div",l,[(0,n.Lk)("div",a,[(0,n.Lk)("div",o,[(0,n.Lk)("button",{class:"back-button",onClick:t[0]||(t[0]=(...e)=>m.goBack&&m.goBack(...e))},[c,(0,n.eW)(" 이전 ")])])]),(0,n.Lk)("h2",{class:"bold-x-lg mb-5 ml-5 help-icon",ref:"helpIcon",style:{"font-family":"KB_C3"}},(0,s.v_)(d.mile_name)+" 마일리지 ",513),(0,n.Lk)("div",r,[(0,n.Lk)("button",{class:(0,s.C4)(["tab-container lg3 fw-bold",{active:"status"===d.activeTab}]),onClick:t[1]||(t[1]=e=>m.setActiveTab("status"))}," 취득현황 ",2),(0,n.Lk)("button",{class:(0,s.C4)(["tab-container lg3 fw-bold",{active:"intro"===d.activeTab}]),onClick:t[2]||(t[2]=e=>m.setActiveTab("intro"))}," 마일리지 소개 ",2),(0,n.Lk)("button",{class:(0,s.C4)(["tab-container lg3 fw-bold",{active:"documents"===d.activeTab}]),onClick:t[3]||(t[3]=e=>m.setActiveTab("documents"))}," 마일리지 문서 ",2)]),((0,n.uX)(),(0,n.Wv)((0,n.$y)(m.currentComponent),{mile_no:i.mile_no,onDataLoaded:m.handleDataLoaded,class:"my-5"},null,40,["mile_no","onDataLoaded"]))])}var d=i(6278),m=i(3751);const h={class:"d-flex justify-content-between align-items-center"},g={class:"lg2",style:{padding:"3em"}},p={class:"input-search input-base search-mobile"},f={class:"d-flex justify-content-between align-items-center search-wrapper"},y=(0,n.Lk)("button",null,[(0,n.Lk)("i",{class:"bi bi-search mr-2"})],-1),b={key:0,class:"pr-5 pl-5 pb-5 pt-4",style:{"margin-top":"10vh"}},_={class:"d-flex align-items-center justify-content-between"},k={style:{width:"80%","text-align":"left"}},v={class:"d-flex align-items-center justify-content-start"},L={key:0,style:{width:"5%","padding-left":"3%"}},w=(0,n.Lk)("span",{class:"md",style:{color:"#edbb00"}},"NEW",-1),D=[w],C={class:"d-flex align-items-center justify-content-between",style:{width:"100%"}},M={class:"lg2 pl-5",style:{"margin-left":"3%","text-align":"left","font-family":"KB_C2"}},x={class:"md pl-3",style:{width:"15%","margin-right":"2%","text-align":"right","font-family":"KB_C3"}},E=["onClick"],S=(0,n.Lk)("span",{class:"md",style:{"text-align":"right"}},"파일 다운로드 〉",-1),X=[S],I={key:1,style:{"padding-top":"10vh"}},P=(0,n.Lk)("p",{class:"lg2",style:{"text-align":"center",color:"#aeaeb2","font-family":"KB_C2"}},"검색 결과가 없습니다.",-1),A=[P],T={key:2,style:{"margin-bottom":"3%"}},B=(0,n.Lk)("i",{class:"bi bi-arrow-clockwise lg2"},null,-1);function j(e,t,i,l,a,o){return(0,n.uX)(),(0,n.CE)("div",{style:(0,s.Tr)({height:o.computedHeight})},[(0,n.Lk)("div",h,[(0,n.Lk)("div",g,"총 "+(0,s.v_)(o.documentSum)+"건",1),(0,n.Lk)("div",p,[(0,n.Lk)("div",f,[(0,n.bo)((0,n.Lk)("input",{type:"text","onUpdate:modelValue":t[0]||(t[0]=e=>a.searchQuery=e),onInput:t[1]||(t[1]=(...e)=>o.onSearch&&o.onSearch(...e)),placeholder:"검색어를 입력하세요",class:"w-100 h-100 d-inline-block",style:{"text-align":"left"}},null,544),[[m.Jo,a.searchQuery]]),y])])]),o.filteredDocuments.length>0?((0,n.uX)(),(0,n.CE)("div",b,[((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(o.paginatedDocuments,(e=>((0,n.uX)(),(0,n.CE)("div",{key:e.documnet_mile_no,class:"mx-auto mb-4 border-bottom p-4 input-base input-white list-wrapper",style:{width:"90%",height:"5em","box-shadow":"0 4px 8px rgba(0, 0, 0, 0.2)","background-color":"#FBFBFB"}},[(0,n.Lk)("div",_,[(0,n.Lk)("button",k,[(0,n.Lk)("div",v,[o.isNew(e.document_date)?((0,n.uX)(),(0,n.CE)("div",L,D)):(0,n.Q3)("",!0),(0,n.Lk)("div",C,[(0,n.Lk)("span",M,(0,s.v_)(e.document_file),1),(0,n.Lk)("span",x,(0,s.v_)(o.formatDate(e.document_date)),1)])])]),(0,n.Lk)("button",{onClick:(0,m.D$)((t=>o.downloadDocu(e.document_file)),["stop"])},X,8,E)])])))),128))])):((0,n.uX)(),(0,n.CE)("div",I,A)),o.showLoadButton?((0,n.uX)(),(0,n.CE)("div",T,[(0,n.Lk)("button",{onClick:t[2]||(t[2]=(...e)=>o.loadDocuments&&o.loadDocuments(...e)),class:"lg2",style:{"font-family":"'KB_C1'"}},[B,(0,n.eW)(" 더보기 ")])])):(0,n.Q3)("",!0)],4)}i(4114);var F=i(7682),Q=i(5093),$=i.n(Q),K={name:"AttendanceCom",props:["mile_no"],data(){return{file:null,baseHeight:60,increment:10,buttonHeight:10,searchQuery:"",currentPage:1,itemsPerPage:7,allDocuments:[],countList:0,lastInputTime:0}},methods:{...(0,d.i0)("mileExcel",["mileDocumentLists","getMileDocumentSum","downloadDocument"]),downloadDocu(e){this.downloadDocument({document_file:e})},formatDate(e){return $()(e).format("YYYY-MM-DD")},isNew(e){const t=$()(e),i=$()(),n=$()().subtract(7,"days");return t.isBetween(n,i,null,"[]")},async loadDocuments(){const e=await this.mileDocumentLists({mile_no:this.mile_no,page:this.currentPage,itemsPerPage:this.itemsPerPage});0!=e.data.length&&null!=e.data||console.error("불러올 문서가 존재하지 않습니다."),this.allDocuments.push(...e.data),this.currentPage++;const t=this.mile_no,i=await F.A.get(`/mileage/countListDocuments/${t}`);this.countList=i.data},onSearch(){const e=Date.now(),t=e-this.lastInputTime;t>500&&(this.lastInputTime=e,this.loadDocuments())}},created(){this.mile_no?(this.loadDocuments(),this.getMileDocumentSum(this.mile_no)):console.error("mile_no이 유효하지 않습니다.")},mounted(){console.log("Mile No:",this.mile_no)},computed:{...(0,d.L8)("login",["getLoginInfo"]),...(0,d.L8)("mileExcel",["getArrayMileDocument","getDocumentSum"]),arrayMileDocument(){return this.getArrayMileDocument},computedHeight(){let e=this.baseHeight+this.paginatedDocuments.length*this.increment;return this.paginatedDocuments.length%this.itemsPerPage===0&&this.paginatedDocuments.length,e+=this.buttonHeight/2,`${e}vh`},documentSum(){return this.getDocumentSum},filteredDocuments(){return this.allDocuments.filter((e=>e.document_file.includes(this.searchQuery)))},paginatedDocuments(){return this.filteredDocuments.slice(0,this.currentPage*this.itemsPerPage)},showLoadButton(){const e=this.filteredDocuments.length%this.itemsPerPage===0,t=this.filteredDocuments.length>0,i=this.filteredDocuments.length!==this.countList;return e&&t&&i}},watch:{searchQuery(){this.lastInputTime=Date.now(),this.onSearch()}}},z=i(6262);const W=(0,z.A)(K,[["render",j]]);var H=W;const N=e=>((0,n.Qi)("data-v-9928a768"),e=e(),(0,n.jt)(),e),U={class:"mile-card-content"},Y={class:"mile-title"},V={class:"mile-content-container"},q={class:"mile-content"},J={class:"mile-content-text"},G={class:"mile-detail-button"},O=["onClick"],R=N((()=>(0,n.Lk)("p",null,"상세보기 〉",-1))),Z=[R];function ee(e,t,i,l,a,o){return(0,n.uX)(),(0,n.CE)("div",null,[((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(o.arrayMiles,(e=>((0,n.uX)(),(0,n.CE)("div",{key:e.mile_introduce_no,class:"mile-card"},[(0,n.Lk)("div",U,[(0,n.Lk)("h3",Y,(0,s.v_)(e.mile_title)+" 마일리지",1),(0,n.Lk)("div",V,[(0,n.Lk)("div",q,[(0,n.Lk)("pre",J,(0,s.v_)(e.mile_content),1)]),(0,n.Lk)("div",G,[e.mile_route?((0,n.uX)(),(0,n.CE)("button",{key:0,onClick:t=>o.download(e.mile_route),class:"detail-button text-brown"},Z,8,O)):(0,n.Q3)("",!0)])])])])))),128))])}var te={name:"MileDocument",props:["mile_no"],data(){return{}},methods:{...(0,d.i0)("mile",["getMileDetail","downloadFile"]),showAlert(e,t,i){this.$swal({title:e,icon:t,scrollbarPadding:!1}).then((e=>{e.isConfirmed&&("#"==i?location.reload():this.$router.push(i))}))},download(e){this.downloadFile({mile_route:e})}},async created(){this.mile_no?(this.arrayMiles=await this.getMileDetail(this.mile_no),console.log("이건 가져온 마일리지 소개글",this.arrayMiles),0==this.arrayMiles.length&&this.showAlert("등록된 마일리지 소개 글이 없습니다","warning","/myMileageView")):console.error("mile_no이 유효하지 않습니다.")},mounted(){console.log("Mile No:",this.mile_no)},computed:{...(0,d.L8)("login",["getLoginInfo"]),...(0,d.L8)("mile",["getArrayMiles"]),arrayMiles(){return this.getArrayMiles}},watch:{}};const ie=(0,z.A)(te,[["render",ee],["__scopeId","data-v-9928a768"]]);var ne=ie;const se=e=>((0,n.Qi)("data-v-7ace874a"),e=e(),(0,n.jt)(),e),le={class:"mx-auto",style:{color:"#4b4a4a"}},ae={key:0,class:"row",style:{"margin-left":"7%","margin-right":"7%","margin-top":"7%"}},oe={class:"cards fade-up-item mx-3",style:{"background-color":"#f9f9f9",height:"200px",position:"relative"}},ce={class:"flex-between"},re={class:"flex mb-2"},ue={class:"text-start KB_C3 fw-bolder",style:{"font-size":"16pt",margin:"0"}},de={class:"justify-content-between align-items-center mt-3"},me={class:"w-100"},he={key:0,class:"mb-5"},ge=se((()=>(0,n.Lk)("i",{class:"bi bi-caret-up-fill",style:{color:"#ff5c5c","font-size":"25pt"}},null,-1))),pe=[ge],fe={key:1},ye=se((()=>(0,n.Lk)("span",{class:"fw-bold",style:{color:"#ffa15c","font-size":"25pt"}}," - ",-1))),be=[ye],_e={key:2},ke=se((()=>(0,n.Lk)("i",{class:"bi bi-caret-down-fill",style:{color:"#4d7eff","font-size":"25pt"}},null,-1))),ve=[ke],Le={class:"KB_C2",style:{"font-size":"32pt"}},we={class:"",style:{color:"gray"}},De={key:0,class:"text-star",style:{"font-size":"10pt",color:"gray","margin-top":"35px"}},Ce={key:1,class:"text-star",style:{"font-size":"9pt",color:"gray","margin-top":"20px"}},Me=se((()=>(0,n.Lk)("br",null,null,-1)));function xe(e,t,i,l,a,o){return(0,n.uX)(),(0,n.CE)("div",null,[(0,n.Lk)("div",le,[a.dataLoaded&&o.filteredMileStatus.length>0?((0,n.uX)(),(0,n.CE)("div",ae,[((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(o.filteredMileStatus,((e,t)=>((0,n.uX)(),(0,n.CE)("div",{key:t,class:"col-6 mb-3"},[(0,n.Lk)("div",oe,[(0,n.Lk)("div",ce,[(0,n.Lk)("div",re,[(0,n.Lk)("div",ue,(0,s.v_)(e.score_name),1)])]),(0,n.Lk)("div",de,[(0,n.Lk)("div",me,[e.user_point-e.prev_point>0?((0,n.uX)(),(0,n.CE)("span",he,pe)):e.user_point-e.prev_point==0?((0,n.uX)(),(0,n.CE)("span",fe,be)):e.user_point-e.prev_point<0?((0,n.uX)(),(0,n.CE)("span",_e,ve)):(0,n.Q3)("",!0),(0,n.Lk)("span",Le,(0,s.v_)(e.user_point)+"pt",1),(0,n.eW)("   "),(0,n.Lk)("span",we,"("+(0,s.v_)(e.user_point-e.prev_point)+"pt 증가)",1)])]),o.isMobile?((0,n.uX)(),(0,n.CE)("div",Ce,[(0,n.eW)(" 과거 업데이트 : "+(0,s.v_)(e.prev_date)+" ",1),Me,(0,n.eW)(" 최신 업데이트 : "+(0,s.v_)(e.mile_date),1)])):((0,n.uX)(),(0,n.CE)("div",De," ( 과거 업데이트 일자 : "+(0,s.v_)(e.prev_date)+" / 최신 업데이트 일자 : "+(0,s.v_)(e.mile_date)+" ) ",1))])])))),128))])):(0,n.Q3)("",!0)])])}var Ee={name:"AttendanceCom",props:["mile_no"],data(){return{dataLoaded:!1}},methods:{...(0,d.i0)("mileScore",["getMyMileStatus"]),setTransitionDelay(e,t){e.style.setProperty("--index",t)},applyFadeUpEffect(){console.log("Applying fade-up effect");const e=this.$el.querySelectorAll(".fade-up-item");console.log(`Found ${e.length} items to animate`),e.forEach(((t,i)=>{t.style.setProperty("--index",i),t.style.setProperty("z-index",e.length-i);const n=50,s=n+50*i;setTimeout((()=>{t.classList.add("fade-up-active")}),s)}))},async loadData(){try{const e=this.getLoginInfo;e&&e.user_no&&(await this.getMyMileStatus({user_no:e.user_no,mile_no:this.mile_no}),console.log("상속:",this.getMileStatus[0].mile_name),this.$emit("data-loaded",this.getMileStatus[0].mile_name),this.dataLoaded=!0,this.$nextTick((()=>{this.applyFadeUpEffect()})))}catch(e){console.error("Error loading data:",e)}}},mounted(){this.loadData().then((()=>{this.$nextTick((()=>{this.applyFadeUpEffect()}))}))},computed:{...(0,d.L8)("login",["getLoginInfo"]),...(0,d.L8)("mileScore",["getMileStatus"]),isMobile(){return window.innerWidth<=768},filteredMileStatus(){const e=this.getLoginInfo?this.getLoginInfo.job_no:null;return e?this.getMileStatus.filter((t=>"개인"===e?"공통"===t.job_name||"개인"===t.job_name:"기업"!==e||("공통"===t.job_name||"기업"===t.job_name))):[]}}};const Se=(0,z.A)(Ee,[["render",xe],["__scopeId","data-v-7ace874a"]]);var Xe=Se,Ie={name:"MileageDetailView",components:{MileDocument:H,MileIntro:ne,MileStatusCom:Xe},props:["mile_no"],data(){return{activeTab:"status",mile_name:null}},methods:{...(0,d.i0)("hitMile",["hit_mile"]),setActiveTab(e){this.activeTab=e},goBack(){this.$router.go(-1)},handleDataLoaded(e){this.mile_name=e,console.log("Loaded data from child:",e)}},mounted(){console.log("Mile No:",this.mile_no)},computed:{...(0,d.L8)("login",["getLoginInfo"]),currentComponent(){switch(this.activeTab){case"status":return"MileStatusCom";case"intro":return"MileIntro";case"documents":return"MileDocument";default:return"MileStatusCom"}},watch:{}},created(){this.hit_mile(this.mile_no)}};const Pe=(0,z.A)(Ie,[["render",u]]);var Ae=Pe}}]);
//# sourceMappingURL=8644.519dd7ca.js.map
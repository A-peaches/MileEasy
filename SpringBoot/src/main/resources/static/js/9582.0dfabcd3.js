"use strict";(self["webpackChunkmile"]=self["webpackChunkmile"]||[]).push([[9582],{9582:function(e,t,a){a.r(t),a.d(t,{default:function(){return ea}});var o=a(641);const i={class:"flex",style:{"margin-left":"10%","margin-right":"10%"}},s={class:"left-container",style:{width:"25%"}},n={class:"right-container",style:{width:"70%","margin-left":"1%",position:"sticky",top:"20px",height:"100vh"}};function l(e,t,a,l,r,c){const d=(0,o.g2)("profile"),g=(0,o.g2)("recommand"),h=(0,o.g2)("attendance"),u=(0,o.g2)("favorite"),m=(0,o.g2)("milageCharts");return(0,o.uX)(),(0,o.CE)("div",i,[(0,o.Lk)("div",s,[(0,o.bF)(d,{class:"fade-up-item"}),(0,o.bF)(g,{class:"my-5 fade-up-item",style:{height:"210px"}}),(0,o.bF)(h,{class:"fade-up-item",style:{"min-height":"395px",overflow:"visible"}})]),(0,o.Lk)("div",n,[(0,o.bF)(u,{class:"fade-up-item",style:{width:"100%","margin-bottom":"49px"}}),(0,o.bF)(m,{class:"fade-up-item",style:{width:"100%",height:"430px",overflow:"visible"}})])])}var r=a(3751),c=a(33),d="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAM4AAADSCAYAAAACC/8kAAAAAXNSR0IArs4c6QAABTlJREFUeAHt28FNW1EQhlFKoARKoAQ6hU6SDryynp83LoESiL1FkSXuL0bWzIn0FlFyc5kz74MgJU9PfhAgQIAAAQIECBAgQIAAAQIECBAgQIAAAQIECBAgQIAAAQIECBAgQIAAAQIECBAgQIAAAQIECBAgQIAAAQIECBAgQIAAAQIECBAgQIAAAQIECBAgQIAAAQIECBAgQIAAAQIECBAgQIAAAQIECBAgQIAAAQIECBAgQIAAAQIECBAgQIAAAQIECBAgQIAAAQIECBAgQIAAAQIECBCYKbBt28u2bW/JczweX2fqmXqswDWcj33fv8LnfSygwWcKCGfm3k0dCggnBHR8poBwZu7d1KGAcEJAx2cKCGfm3k0dCggnBHR8poBwZu7d1KGAcEJAx2cKCGfm3k0dCggnBHR8poBwZu7d1KGAcEJAx2cKCGfm3k0dCggnBHR8poBwZu7d1KGAcEJAx2cKCGfm3k0dCggnBHR8poBwZu7d1KGAcEJAx2cKCGfm3k0dCggnBHR8poBwZu7d1KGAcEJAx2cKCGfm3k0dCggnBHR8poBwZu7d1KGAcEJAx2cKCGfm3k0dCggnBHR8poBwZu7d1KGAcEJAx2cKCGfm3k0dCggnBHR8poBwZu7d1KGAcEJAx2cKCGfm3k0dCggnBHR8poBwZu7d1KGAcEJAx2cKCGfm3k0dCggnBHR8poBwZu7d1KGAcEJAx2cKCGfm3k0dCggnBHR8poBwZu7d1KGAcEJAx2cKCGfm3k0dCggnBHR8poBwZu69fOrL5fJ8Op3+dHnO5/Pnvu9f4XPp4nGb4/rJ5KX8xep+4Q01fMnSl9T5PPS7hsL5hYqFE391uvvSPsInJeEI5+Ff0kcI5fvHIBzhCGfhr3XCEY5whPMLFSz8kb7H8T3OwmvjiHCEo4IFAeEIZ+G1cUQ4wlHBgoBwhLPw2jgiHOGoYEFAOMJZeG0cEY5wVLAgIBzhLLw2jghHOCpYEBCOcBZeG0du4ZxOp79dnn3fL9//dfBPf377z3BdPG5zHA6HZ286gbsC108EHz8N5T+///3uJX6RQDcB4XTbqHlKBIRTwuySbgLC6bZR85QICKeE2SXdBITTbaPmKREQTgmzS7oJCKfbRs1TIiCcEmaXdBMQTreNmqdEQDglzC7pJiCcbhs1T4mAcEqYXdJNQDjdNmqeEgHhlDC7pJuAcLpt1DwlAsIpYXZJNwHhdNuoeUoEhFPC7JJuAsLptlHzlAgIp4TZJd0EhNNto+YpERBOCbNLugkIp9tGzVMiIJwSZpd0ExBOt42ap0RAOCXMLukmIJxuGzVPiYBwSphd0k1AON02ap4SAeGUMLukm4Bwum3UPCUCwilhdkk3AeF026h5SgSEU8Lskm4Cwum2UfOUCAinhNkl3QSE022j5ikREE4Js0u6CQin20bNUyIgnBJml3QTEE63jZqnREA4Jcwu6SYgnG4bNU+JgHBKmF3STUA43TZqnhIB4ZQwu6SbgHC6bdQ8JQLCKWF2STcB4XTbqHlKBIRTwuySbgLC6bZR85QInM/n123b3sLnpeSDdQkBAgQIECBAgAABAgQIECBAgAABAgQIECBAgAABAgQIECBAgAABAgQIECBAgAABAgQIECBAgAABAgQIECBAgAABAgQIECBAgAABAgQIECBAgAABAgQIECBAgAABAgQIECBAgAABAgQIECBAgAABAgQIECBAgAABAgQIECBAgAABAgQIECBAgAABAgQIECBAgAABAgQIECBAgACBxxP4B0Wl/cXnXj4dAAAAAElFTkSuQmCC";const g={class:"cards",style:{"background-color":"#f9f9f9",height:"430px"}},h={class:"text-left lg2 KB_C2"},u={class:"flex"},m=["onClick"],p={key:1},f={class:"favorite-text KB_C2 mt-5"},A={class:"flex"},C={class:"KB_C1 mileage-score",style:{"margin-left":"10px","margin-right":"10px",width:"200px"}},v={class:"chart-wrapper mx-auto",style:{width:"290px",position:"relative","margin-left":"0px"}},k={key:0,class:"chart-container"},b=["id"],L={key:1,class:"no-data-message chart-container"},y=(0,o.Lk)("div",{class:"mb-3",style:{position:"absolute","z-index":"0",top:"-10px"}},[(0,o.Lk)("span",null,[(0,o.Lk)("i",{class:"bi bi-exclamation-circle-fill",style:{color:"#FFCA05","font-size":"17pt"}})]),(0,o.Lk)("p",{class:"mt-2"},"마일리지 점수가 없습니다.")],-1),I=[y],x={key:0,class:"modal-overlay"},B={class:"modals-content"},E={class:"modal-body"},_=(0,o.Lk)("p",{class:"text-left fw-bold mb-3",style:{"font-size":"19pt"}}," 즐겨찾기 추가하기 ",-1),w={class:"favorite-options"},D=["onClick"],M={class:"mt-3 text-end"};function Q(e,t,a,i,s,n){return(0,o.uX)(),(0,o.CE)("div",g,[(0,o.Lk)("p",h,[(0,o.eW)(" 즐겨찾기 마일리지  "),(0,o.Lk)("i",{class:"bi bi-plus-circle-fill",style:{color:"#ffca05",cursor:"pointer"},onClick:t[0]||(t[0]=(...e)=>n.openModal&&n.openModal(...e))})]),(0,o.Lk)("div",u,[((0,o.uX)(),(0,o.CE)(o.FK,null,(0,o.pI)(4,((e,a)=>(0,o.Lk)("div",{key:a,class:"cards favorite-card",onClick:e=>n.favoriteList[a]&&n.navigateToLink(n.favoriteList[a].mile_no),style:{cursor:"pointer"}},[n.favoriteList[a]?((0,o.uX)(),(0,o.CE)("div",p,[(0,o.Lk)("p",f,(0,c.v_)(n.favoriteList[a].mile_no)+" 마일리지 ",1),(0,o.Lk)("div",A,[(0,o.Lk)("div",C,(0,c.v_)(n.getMileageScore(n.favoriteList[a]?.mile_no))+"pt ",1),(0,o.Lk)("div",v,[n.hasMileageData(n.favoriteList[a].mile_no)?((0,o.uX)(),(0,o.CE)("div",k,[(0,o.Lk)("canvas",{id:"chart"+a,ref_for:!0,ref:"chart"+a,style:{position:"absolute",top:"-20px",left:"50%",transform:"translateX(-50%)","z-index":"0",height:"190px"}},null,8,b)])):((0,o.uX)(),(0,o.CE)("div",L,I))])])])):((0,o.uX)(),(0,o.CE)("img",{key:0,src:d,class:"addImg mx-auto",onClick:t[1]||(t[1]=(0,r.D$)(((...e)=>n.openModal&&n.openModal(...e)),["stop"]))}))],8,m))),64))]),((0,o.uX)(),(0,o.Wv)(o.Im,{to:"body"},[s.isModalOpen?((0,o.uX)(),(0,o.CE)("div",x,[(0,o.Lk)("div",B,[(0,o.Lk)("span",{class:"close",onClick:t[2]||(t[2]=(...e)=>n.closeModal&&n.closeModal(...e))},"×"),(0,o.Lk)("div",E,[_,(0,o.Lk)("div",w,[((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(n.filteredMileageInfo,((e,t)=>((0,o.uX)(),(0,o.CE)("div",{key:t,class:(0,c.C4)(["btn-favorite favorite-item KB_C2",{selected:s.selectedFavorites.includes(e.mile_name)}]),onClick:t=>n.toggleFavorite(e.mile_name)},(0,c.v_)(e.mile_name),11,D)))),128))])]),(0,o.Lk)("div",M,[(0,o.Lk)("button",{class:"btn-gray KB_C2",onClick:t[3]||(t[3]=(...e)=>n.updateFavorites&&n.updateFavorites(...e)),style:{"font-size":"16pt",width:"20%","box-shadow":"0 2px 4px rgba(0, 0, 0, 0.1)"}}," 등록 ")])])])):(0,o.Q3)("",!0)]))])}a(4114);var F=a(6278),S=a(2022);S.t1.register(...S.$L);var j=S.t1,K={name:"FavoriteCom",data(){return{isModalOpen:!1,selectedFavorites:[],charts:[]}},computed:{...(0,F.L8)("mileage",["getArrayMileage"]),...(0,F.L8)("favorite",["getArrayFavorite"]),...(0,F.L8)("login",["getLoginInfo"]),...(0,F.L8)("mileScore",["getArrayMileScore"]),filteredMileageInfo(){return"기획"==this.loginInfo.job_no?this.getArrayMileage.filter((e=>0==e.mile_is_branch)):this.getArrayMileage},favoriteList(){return this.getArrayFavorite},loginInfo(){return this.getLoginInfo},mileScores(){return this.getArrayMileScore}},methods:{...(0,F.i0)("favorite",["changeFavorite"]),getMileageMax(e){const t=this.mileageInfo.find((t=>t.mile_name==e));return t?.mile_max??"a"},getMileageScore(e){const t=this.mileScores.find((t=>t.mile_no==e));return t?.mile_score_point??"0"},hasMileageData(e){const t=this.mileScores.find((t=>t.mile_no===e));return t&&(0!==t.mile_prev_score||0!==t.mile_score_point)},navigateToLink(e){const t=this.mileScores.find((t=>t.mile_no===e)),a=t?t.mile_link:null;a&&(window.location.href=a)},openModal(){document.body.style.overflow="hidden",this.isModalOpen=!0,this.selectedFavorites=this.favoriteList.map((e=>e.mile_no))},closeModal(){document.body.style.overflow="",this.isModalOpen=!1},toggleFavorite(e){this.selectedFavorites.includes(e)?this.selectedFavorites=this.selectedFavorites.filter((t=>t!==e)):this.selectedFavorites.length<4?this.selectedFavorites.push(e):this.showAlert()},showAlert(){this.$swal({title:"경고",text:"즐겨찾기는 최대 4개까지 선택할 수 있습니다.",icon:"warning",scrollbarPadding:!1})},updateFavorites(){this.$store.dispatch("favorite/changeFavorite",{user_no:this.loginInfo.user_no,favorites:this.selectedFavorites}).then((()=>{this.$store.dispatch("favorite/getFavorite",this.loginInfo.user_no),this.closeModal()})),this.closeModal()},async createChart(e,t,a){const o="chart"+e;await this.$nextTick();const i=this.$refs[o]?.[0];if(i&&i.getContext){this.charts[e]&&this.charts[e].destroy();const o=i.getContext("2d");this.charts[e]=new j(o,{type:"bar",data:{labels:["전월","당월"],datasets:[{label:`마일리지 ${t}`,data:[a.mile_prev_score,a.mile_score_point],backgroundColor:["#FF93E1","#64EDBC"],borderWidth:1}]},options:{animation:!1,scales:{y:{beginAtZero:!0,suggestedMin:0,suggestedMax:10}},plugins:{legend:{display:!1}}}}),console.log("Chart created for index:",e)}else console.warn(`Canvas element with id ${o} not found or does not support getContext.`)},async renderCharts(){console.log("Rendering charts...");for(let e=0;e<this.favoriteList.length;e++){const t=this.favoriteList[e],a=this.mileScores.find((e=>e.mile_no===t.mile_no));a&&await this.createChart(e,t.mile_no,a)}}},watch:{mileScores(e){console.log("mileScores updated:",e),this.renderCharts()},favoriteList(e){console.log("favoriteList updated:",e),this.renderCharts()}},async mounted(){console.log("FavoriteCom mounted"),this.loginInfo&&(await this.$store.dispatch("mileage/getMileage"),await this.$store.dispatch("favorite/getFavorite",this.loginInfo.user_no),await this.$store.dispatch("mileScore/getMileScore",this.loginInfo.user_no),console.log("mileScores after fetch:",this.mileScores),await this.renderCharts())},created(){console.log("FavoriteCom created")}},T=a(6262);const J=(0,T.A)(K,[["render",Q]]);var X=J;const P={class:"cards card-white"},H=(0,o.Lk)("p",{class:"lg2 KB_S4",style:{"margin-right":"90px","margin-bottom":"10px"}},[(0,o.Lk)("i",{class:"bi bi-award-fill",style:{color:"#ffca05"}}),(0,o.eW)(" 오늘의 추천 ")],-1),R={class:"flex",style:{"margin-left":"15px","margin-top":"30px",width:"65%"}},G={key:0},W={class:"KB_S5"},O=(0,o.Lk)("br",null,null,-1),z={key:1},Z=(0,o.Lk)("div",{class:"KB_S5"}," 마일리지 점수가 하나 이상 있어야 멘트가 활성화됩니다. ",-1),U=[Z],N=["src"];function $(e,t,a,i,s,n){const l=(0,o.g2)("router-link");return(0,o.uX)(),(0,o.CE)("div",P,[H,(0,o.Lk)("div",R,[s.recommand&&s.recommand.mile_mention?((0,o.uX)(),(0,o.CE)("div",G,[(0,o.Lk)("div",W,(0,c.v_)(s.recommand.mile_mention),1),O,(0,o.Lk)("div",null,[(0,o.bF)(l,{to:s.recommand.mile_link,style:{color:"#3C2511","text-decoration":"none"},class:"fw-bold"},{default:(0,o.k6)((()=>[(0,o.eW)("바로가기 >")])),_:1},8,["to"])])])):((0,o.uX)(),(0,o.CE)("div",z,U)),(0,o.Lk)("img",{src:s.randomImg,alt:"randomImg",class:"card-image"},null,8,N)])])}var V=a(7682),q={name:"MileRecommand",data(){return{images:[a(3007),a(4708),a(7034),a(2146),a(11),a(8032),a(2857),a(3950),a(2263)],randomImg:null,recommand:null,dataLoaded:!1,checkLoginInfoInterval:null}},methods:{getRandomImg(){const e=Math.floor(Math.random()*this.images.length);return this.images[e]},async getRecommand(){console.log("Fetching recommand data...");try{const e=await V.A.get(`/mileage/getRecommand/${this.loginInfo.user_no}`);this.recommand=e.data,console.log("Recommand data:",this.recommand),this.dataLoaded=!0}catch(e){console.error("Error fetching recommand data:",e),this.dataLoaded=!0}},checkLoginInfo(){console.log("Checking login info..."),this.loginInfo&&(clearInterval(this.checkLoginInfoInterval),console.log("Login info found:",this.loginInfo),this.getRecommand())}},mounted(){this.randomImg=this.getRandomImg(),console.log("Component mounted, random image set:",this.randomImg),this.checkLoginInfoInterval=setInterval((()=>{this.checkLoginInfo()}),1e3)},beforeUnmount(){this.checkLoginInfoInterval&&clearInterval(this.checkLoginInfoInterval)},computed:{...(0,F.L8)("login",["getLoginInfo"]),loginInfo(){return this.getLoginInfo}}};const Y=(0,T.A)(q,[["render",$]]);var ee=Y;const te=e=>((0,o.Qi)("data-v-88af41be"),e=e(),(0,o.jt)(),e),ae={class:"cards",style:{"background-color":"#f9f9f9",height:"450px"}},oe={class:"container d-flex justify-content-between"},ie={class:"title lg2 KB_C2"},se=te((()=>(0,o.Lk)("i",{class:"bi bi-question-circle"},null,-1))),ne=[se],le={key:0,class:"help-popover",ref:"helpPopover"},re=te((()=>(0,o.Lk)("div",{style:{"font-size":"12pt"}},[(0,o.Lk)("span",null,[(0,o.eW)("최근 업데이트일자는 마일리지 정보가 가장 최근에 업데이트된 일자를 의미합니다. "),(0,o.Lk)("br"),(0,o.eW)(" 모든 마일리지가 이 날짜에 변경된 것은 아닐 수 있습니다.")])],-1))),ce=[re],de={class:"tabs text-end lg2"},ge={class:"chart-display"};function he(e,t,a,i,s,n){const l=(0,o.g2)("AgeChart"),r=(0,o.g2)("PositionChart"),d=(0,o.g2)("JobChart");return(0,o.uX)(),(0,o.CE)("div",ae,[(0,o.Lk)("div",oe,[(0,o.Lk)("div",ie,[(0,o.eW)(" 별별 마일리지 "),(0,o.Lk)("span",{class:"mx-2 help-icon",onClick:t[0]||(t[0]=(...e)=>n.toggleHelpPopover&&n.toggleHelpPopover(...e)),ref:"helpIcon"},ne,512),s.showHelpPopover?((0,o.uX)(),(0,o.CE)("div",le,ce,512)):(0,o.Q3)("",!0)]),(0,o.Lk)("div",de,[(0,o.Lk)("span",{onClick:t[1]||(t[1]=e=>s.selectedTab="age"),class:(0,c.C4)([{active:"age"===s.selectedTab,chartTab:!0},"chartTab"])},"연령별",2),(0,o.eW)(" |  "),(0,o.Lk)("span",{onClick:t[2]||(t[2]=e=>s.selectedTab="position"),class:(0,c.C4)([{active:"position"===s.selectedTab,chartTab:!0},"chartTab"])},"직급별",2),(0,o.eW)(" |  "),(0,o.Lk)("span",{onClick:t[3]||(t[3]=e=>s.selectedTab="job"),class:(0,c.C4)([{active:"job"===s.selectedTab,chartTab:!0},"chartTab"])},"직무별",2)])]),(0,o.Lk)("div",ge,["age"===s.selectedTab?((0,o.uX)(),(0,o.Wv)(l,{key:0})):(0,o.Q3)("",!0),"position"===s.selectedTab?((0,o.uX)(),(0,o.Wv)(r,{key:1})):(0,o.Q3)("",!0),"job"===s.selectedTab?((0,o.uX)(),(0,o.Wv)(d,{key:2})):(0,o.Q3)("",!0)])])}var ue=a(5584),me=a(3543);const pe=e=>((0,o.Qi)("data-v-4a1028bc"),e=e(),(0,o.jt)(),e),fe={class:"flex"},Ae=pe((()=>(0,o.Lk)("div",{class:"chart-container mt-3",style:{width:"37%","margin-left":"29px"}},[(0,o.Lk)("canvas",{id:"ageChart"})],-1))),Ce={class:"text-center w-60 mx-auto"},ve=pe((()=>(0,o.Lk)("sup",null,[(0,o.Lk)("img",{src:ue,class:"quote mb-2"})],-1))),ke={class:"KB_C2 ageSpan"},be={class:"KB_C2 ageSpan",style:{"font-size":"23px"}},Le={class:"KB_C2",ageSpan:""},ye=pe((()=>(0,o.Lk)("sup",null,[(0,o.Lk)("img",{src:me,class:"quote mb-2"})],-1))),Ie={key:0,style:{"font-size":"13pt"}},xe={key:1,style:{"font-size":"13pt"}},Be={key:2,style:{"font-size":"13pt"}},Ee={class:"text-end w-100 mt-3"},_e={class:"text-end",style:{"font-size":"10pt",color:"gray"}};function we(e,t,a,i,s,n){return(0,o.uX)(),(0,o.CE)("div",fe,[Ae,(0,o.Lk)("div",Ce,[(0,o.Lk)("p",null,[ve,(0,o.eW)("   "),(0,o.Lk)("span",ke,(0,c.v_)(s.userData[0]+0+"대")+" 마일리지 총 평균 : ",1),(0,o.Lk)("span",be,[(0,o.Lk)("mark",Le,(0,c.v_)(s.ageChartData[s.userData[0]-2])+"점",1)]),(0,o.eW)("  "),ye]),s.userData[1]>s.ageChartData[s.userData[0]-2]?((0,o.uX)(),(0,o.CE)("div",Ie,' "대단해요! '+(0,c.v_)(s.userData[0]+0+"대")+' 평균보다 더 많은 점수를 획득하셨어요. 멋진 성과입니다!" ',1)):s.userData[1]==s.ageChartData[s.userData[0]-2]?((0,o.uX)(),(0,o.CE)("div",xe,' "정말 멋져요! '+(0,c.v_)(s.userData[0]+0+"대")+' 평균과 점수가 비슷해요. 계속해서 좋은 성과를 기대할게요!" ',1)):s.userData[1]<s.ageChartData[s.userData[0]-2]?((0,o.uX)(),(0,o.CE)("div",Be,' "지금도 충분히 잘하고 계세요. 조금만 더 노력하면 '+(0,c.v_)(s.userData[0]+0+"대")+' 평균을 넘을 수 있을 거예요!" ',1)):(0,o.Q3)("",!0)]),(0,o.Lk)("div",Ee,[(0,o.Lk)("span",_e,"( 최근 업데이트 : "+(0,c.v_)(s.userData[2])+" )",1)])])}var De={name:"AgeChart",data(){return{ageChart:null,ageChartData:[],userData:[]}},computed:{...(0,F.L8)("mileScore",["getMileAges"]),...(0,F.L8)("login",["getLoginInfo"]),mileAges(){return this.getMileAges}},methods:{...(0,F.i0)("mileScore",["getMileAge"]),createChart(){const e=document.getElementById("ageChart").getContext("2d");this.ageChart&&this.ageChart.destroy(),new S.t1(e,{type:"doughnut",data:{labels:["20대","30대","40대","50대 이상"],datasets:[{data:this.ageChartData,backgroundColor:["#FFAAE7","#E4E4E4","#FFE78F","#9FEDD1"]}]},options:{responsive:!0,maintainAspectRatio:!1,cutout:"70%",plugins:{legend:{position:"right",padding:20}}},layout:{padding:{top:20,bottom:30}}})},async loadMileAgeData(){await this.getMileAge(this.getLoginInfo.user_no),this.mileAges?(this.ageChartData=[this.mileAges.mile20,this.mileAges.mile30,this.mileAges.mile40,this.mileAges.mile50],this.userData=[this.mileAges.user_age.toString().substring(0,1),this.mileAges.user_sum,this.mileAges.mile_date],this.createChart()):console.error("No data available for mileAges")}},async mounted(){await this.loadMileAgeData()},beforeUnmount(){this.ageChart&&this.ageChart.destroy()}};const Me=(0,T.A)(De,[["render",we],["__scopeId","data-v-4a1028bc"]]);var Qe=Me;const Fe=e=>((0,o.Qi)("data-v-229431db"),e=e(),(0,o.jt)(),e),Se={class:"flex"},je=Fe((()=>(0,o.Lk)("div",{class:"chart-container mt-4"},[(0,o.Lk)("canvas",{id:"positionChart"})],-1))),Ke={class:"text-container mx-auto mt-3"},Te={key:0},Je=Fe((()=>(0,o.Lk)("p",{class:"KB_C2 lg2"},[(0,o.Lk)("span",{class:"lg"},"🙌🏻"),(0,o.eW)(" 정말 대단하세요! ")],-1))),Xe=Fe((()=>(0,o.Lk)("p",null,"당신의 마일리지 점수는 직급별 평균점수보다 높습니다. ",-1))),Pe=[Je,Xe],He={key:1},Re=Fe((()=>(0,o.Lk)("p",{class:"KB_C2 lg2"},[(0,o.Lk)("span",{class:"lg"},"🙌🏻"),(0,o.eW)(" 정말 대단하세요!")],-1))),Ge=Fe((()=>(0,o.Lk)("p",null,"당신의 마일리지 점수는 직급별 평균점수와 비슷합니다. ",-1))),We=[Re,Ge],Oe={key:2},ze=Fe((()=>(0,o.Lk)("p",{class:"KB_C2 lg2"},[(0,o.Lk)("span",{class:"lg"},"💪🏻"),(0,o.eW)(" 아자아자 화이팅!")],-1))),Ze={class:"table table-bordered table-gray mt-3"},Ue={class:"text-end",style:{"font-size":"10pt",color:"gray"}},Ne={class:"KB_C2"},$e=Fe((()=>(0,o.Lk)("td",{class:"KB_C2"},"나의 평균",-1)));function Ve(e,t,a,i,s,n){return(0,o.uX)(),(0,o.CE)("div",Se,[je,(0,o.Lk)("div",Ke,[s.userData[1]>s.positionData[s.userData[0]-1]?((0,o.uX)(),(0,o.CE)("div",Te,Pe)):s.userData[1]==s.positionData[s.userData[0]-1]?((0,o.uX)(),(0,o.CE)("div",He,We)):s.userData[1]<s.positionData[s.userData[0]-1]?((0,o.uX)(),(0,o.CE)("div",Oe,[ze,(0,o.Lk)("p",null,'"'+(0,c.v_)(e.getLoginInfo.position_no)+'" 직급의 평균에 도달하는 날이 멀지 않았어요. ',1)])):(0,o.Q3)("",!0),(0,o.Lk)("table",Ze,[(0,o.Lk)("caption",Ue,"( 최근 업데이트 : "+(0,c.v_)(s.userData[2])+" )",1),(0,o.Lk)("thead",null,[(0,o.Lk)("tr",null,[(0,o.Lk)("td",Ne,(0,c.v_)(e.getLoginInfo.position_no)+" 직급 평균",1),$e])]),(0,o.Lk)("tbody",null,[(0,o.Lk)("tr",null,[(0,o.Lk)("td",null,(0,c.v_)(s.positionData[s.userData[0]-1]),1),(0,o.Lk)("td",null,(0,c.v_)(s.userData[1]),1)])])])])])}var qe={name:"PositionChart",data(){return{positionData:[],userData:[],positionChart:null}},computed:{...(0,F.L8)("mileScore",["getMilePositions"]),...(0,F.L8)("login",["getLoginInfo"])},methods:{...(0,F.i0)("mileScore",["getMilePosition"]),createChart(){const e=document.getElementById("positionChart").getContext("2d");this.positionChart&&this.positionChart.destroy();const t=this.userData,a={id:"customPlugin",afterDatasetsDraw:e=>{const{ctx:a,data:o,chartArea:{top:i}}=e;a.save();const s=o.datasets[0];s.data.forEach(((o,s)=>{const n=e.getDatasetMeta(0),l=n.data[s],r=l.getCenterPoint(),c=10,d=60,g=30,h=10,u=10;a.textAlign="center",a.textBaseline="bottom",a.fillStyle="#000",s===t[0]-1&&(a.fillStyle="white",a.strokeStyle="#CBCBCB",a.lineWidth=1,a.beginPath(),a.moveTo(r.x-d/2+15,i+l.y-g-u-c+5),a.lineTo(r.x+d/2-15,i+l.y-g-u-c+5),a.lineTo(r.x+d/2-15,i+l.y-u-c-3),a.lineTo(r.x+h/2,i+l.y-u-c-3),a.lineTo(r.x,i+l.y-c-5),a.lineTo(r.x-h/2,i+l.y-u-c-3),a.lineTo(r.x-d/2+15,i+l.y-u-c-3),a.closePath(),a.fill(),a.stroke(),a.fillStyle="#000",a.fillText("My",r.x,i+l.y-g-c+13))})),a.restore()}};this.chart=new S.t1(e,{type:"bar",data:{labels:["계장","대리","과장","차장","부장"],datasets:[{data:this.positionData,backgroundColor:["#FFD46A","#FFDA81","#FFE196","#FFE9B5","#FFEDC1"],barThickness:30,maxBarThickness:30}]},options:{responsive:!0,maintainAspectRatio:!1,plugins:{legend:{display:!1}}},plugins:[a]})},async loadMilePositionData(){if(await this.getMilePosition(this.getLoginInfo.user_no),await this.$nextTick(),this.getMilePositions){const e=this.getMilePositions;this.positionData=[e.mile_position1,e.mile_position2,e.mile_position3,e.mile_position4,e.mile_position5],this.userData=[e.user_position,e.user_sum,e.mile_date],this.createChart()}else console.error("No data available for milePosition")}},beforeUnmount(){this.positionChart&&this.positionChart.destroy()},async mounted(){await this.loadMilePositionData()}};const Ye=(0,T.A)(qe,[["render",Ve],["__scopeId","data-v-229431db"]]);var et=Ye;const tt=e=>((0,o.Qi)("data-v-7ccd58f6"),e=e(),(0,o.jt)(),e),at={class:"flex"},ot=tt((()=>(0,o.Lk)("div",{class:"chart-container mt-3",style:{width:"45%","margin-left":"29px"}},[(0,o.Lk)("canvas",{id:"jobChart"})],-1))),it={class:"text-center mx-auto",style:{width:"45%"}},st=tt((()=>(0,o.Lk)("p",{class:"KB_C2 lg2"},"직무별 마일리지 인사이트",-1))),nt=tt((()=>(0,o.Lk)("hr",null,null,-1))),lt={key:0},rt=tt((()=>(0,o.Lk)("br",null,null,-1))),ct={key:1},dt=tt((()=>(0,o.Lk)("br",null,null,-1))),gt={key:2},ht=tt((()=>(0,o.Lk)("br",null,null,-1))),ut={class:"progress-container mx-auto",style:{"margin-top":"80px",width:"90%"}},mt=tt((()=>(0,o.Lk)("span",null,"나의 직급위치",-1))),pt=tt((()=>(0,o.Lk)("div",{class:"progress-bar"},null,-1))),ft=tt((()=>(0,o.Lk)("span",null,"My",-1))),At=[ft],Ct={class:"indicator average",style:{left:"50%","margin-bottom":"12px"}},vt={class:"text-start w-100 mt-3"},kt={class:"text-end",style:{"font-size":"10pt",color:"gray"}};function bt(e,t,a,i,s,n){return(0,o.uX)(),(0,o.CE)("div",at,[ot,(0,o.Lk)("div",it,[st,nt,s.userData[0]>s.jobChartData[s.jobNo]?((0,o.uX)(),(0,o.CE)("div",lt,[(0,o.Lk)("span",null,[(0,o.Lk)("strong",null,'"'+(0,c.v_)(s.userData[2])+'"',1),(0,o.eW)(" 직무의 평균 점수를 뛰어넘는 성과를 이루셨습니다. "),rt,(0,o.eW)(" 뛰어난 성과에 박수를 보냅니다! 앞으로도 많은 발전을 기원합니다. ")])])):(0,o.Q3)("",!0),s.userData[0]==s.jobChartData[s.jobNo]?((0,o.uX)(),(0,o.CE)("div",ct,[(0,o.Lk)("span",null,[(0,o.Lk)("strong",null,'"'+(0,c.v_)(s.userData[2])+'"',1),(0,o.eW)(" 직무의 평균 점수에 도달했습니다. "),dt,(0,o.eW)(" 좋은 성과입니다! 앞으로 더 높은 목표를 향해 나아가세요.")])])):(0,o.Q3)("",!0),s.userData[0]<s.jobChartData[s.jobNo]?((0,o.uX)(),(0,o.CE)("div",gt,[(0,o.Lk)("span",null,[(0,o.Lk)("strong",null,'"'+(0,c.v_)(s.userData[2])+'"',1),(0,o.eW)(" 직무의 평균 점수에 도달하지 못했습니다. "),ht,(0,o.eW)(" 지금도 충분히 잘하고 계십니다. 앞으로 더 좋은 성과를 기대합니다! ")])])):(0,o.Q3)("",!0),(0,o.Lk)("div",ut,[mt,pt,(0,o.Lk)("div",{class:"indicator",style:(0,c.Tr)({left:n.relativeUserScorePercentage+"%"})},At,4),(0,o.Lk)("div",Ct,[(0,o.Lk)("span",null,(0,c.v_)(s.userData[2]),1)])])]),(0,o.Lk)("div",vt,[(0,o.Lk)("span",kt,"( 최근 업데이트 : "+(0,c.v_)(s.userData[1])+" )",1)])])}var Lt={name:"JobChart",data(){return{jobChart:null,jobChartData:[],userData:[],jobs:["개인","기업","기획"],maxValue:null,minValue:null,idxMax:null,jobNo:null,colors:["rgba(255,170,231,0.7)","rgba(111,191,244,0.7)","rgba(255,231,143,0.7)"]}},computed:{...(0,F.L8)("mileScore",["getMileJobs"]),...(0,F.L8)("login",["getLoginInfo"]),mileJobs(){return this.getMileJobs},relativeUserScorePercentage(){const e=this.jobChartData[this.jobNo],t=this.userData[0],a=t-e,o=Math.max(this.maxValue-e,e-this.minValue);return 50+a/o*50}},methods:{...(0,F.i0)("mileScore",["getMileJob"]),createChart(){var e=document.getElementById("jobChart").getContext("2d");new S.t1(e,{type:"bubble",data:{datasets:[{label:this.jobs[0],data:[{x:this.jobChartData[0],y:this.jobChartData[0],r:this.jobChartData[0]/50}],backgroundColor:this.colors[0]},{label:this.jobs[1],data:[{x:this.jobChartData[1],y:this.jobChartData[1],r:this.jobChartData[1]/50}],backgroundColor:this.colors[1]},{label:this.jobs[2],data:[{x:this.jobChartData[2],y:this.jobChartData[2],r:this.jobChartData[2]/50}],backgroundColor:this.colors[2]}]},options:{responsive:!0,maintainAspectRatio:!1,scales:{x:{display:!1,min:100*Math.floor(this.minValue/100)-500,max:100*Math.ceil(this.maxValue/100)+500,ticks:{stepSize:100}},y:{min:100*Math.floor(this.minValue/100)-500,max:100*Math.ceil(this.maxValue/100)+500,ticks:{stepSize:200}}},plugins:{legend:{display:!0,position:"right"},tooltip:{callbacks:{label:function(e){var t=e.dataset.label||"",a=e.parsed.x;return t+": "+a}}}}}})},async loadMileJobData(){try{await this.getMileJob(this.getLoginInfo.user_no),this.mileJobs?(console.log("Fetched mileJobs:",this.mileJobs),this.jobChartData=[this.mileJobs.job1,this.mileJobs.job2,this.mileJobs.job3],this.userData=[this.mileJobs.user_sum,this.mileJobs.mile_date,this.mileJobs.user_job],this.idxMax=this.jobChartData.indexOf(Math.max(...this.jobChartData)),this.maxValue=Math.max(...this.jobChartData),this.minValue=Math.min(...this.jobChartData),this.jobNo=this.jobs.indexOf(this.userData[2]),this.createChart()):console.error("No data available for mileJobs")}catch(e){console.error("Error loading mileJobs data:",e)}}},async mounted(){await this.loadMileJobData()},beforeUnmount(){this.jobChart&&this.jobChart.destroy()}};const yt=(0,T.A)(Lt,[["render",bt],["__scopeId","data-v-7ccd58f6"]]);var It=yt,xt={name:"AttendanceCom",components:{AgeChart:Qe,PositionChart:et,JobChart:It},data(){return{selectedTab:"age",showHelpPopover:!1}},computed:{},methods:{toggleHelpPopover(e){e.stopPropagation(),console.log("toggleHelpPopover 클릭"),this.showHelpPopover=!this.showHelpPopover,console.log("showHelpPopover:",this.showHelpPopover),this.showHelpPopover?document.addEventListener("click",this.handleClickOutside):document.removeEventListener("click",this.handleClickOutside)},handleClickOutside(e){console.log("handleClickOutside 실행"),!this.$refs.helpPopover||this.$refs.helpPopover.contains(e.target)||this.$refs.helpIcon.contains(e.target)||(console.log("팝오버 닫기"),this.showHelpPopover=!1,document.removeEventListener("click",this.handleClickOutside))}},mounted(){},beforeUnmount(){document.removeEventListener("click",this.handleClickOutside)}};const Bt=(0,T.A)(xt,[["render",he],["__scopeId","data-v-88af41be"]]);var Et=Bt;const _t={class:"cards card-white attendance-component"},wt={class:"lg2 KB_S4 text-center position-relative",style:{"margin-bottom":"0px"}},Dt=(0,o.Lk)("i",{class:"bi bi-calendar-check",style:{color:"#42b983"}},null,-1),Mt=(0,o.Lk)("i",{class:"bi bi-chevron-double-right",style:{color:"gray"}},null,-1),Qt=[Mt],Ft={class:"calendar-container",style:{"margin-top":"13px"}},St=(0,o.Lk)("i",{class:"bi bi-chevron-left"},null,-1),jt=(0,o.Lk)("i",{class:"bi bi-chevron-right"},null,-1),Kt={key:1,class:"loading-indicator"};function Tt(e,t,a,i,s,n){const l=(0,o.g2)("vue-cal"),c=(0,o.g2)("Modal");return(0,o.uX)(),(0,o.CE)("div",_t,[(0,o.Lk)("p",wt,[Dt,(0,o.eW)("   출석체크 "),(0,o.Lk)("span",{class:"expand-icon",onClick:t[0]||(t[0]=(0,r.D$)(((...e)=>n.openModal&&n.openModal(...e)),["stop"])),style:{cursor:"pointer"}},Qt)]),(0,o.Lk)("div",Ft,[s.dataLoaded?((0,o.uX)(),(0,o.Wv)(l,{key:0,class:"vuecal--custom-theme vuecal--rounded-theme vuecal--date-picker","hide-view-selector":"",time:!1,"active-view":"month",xsmall:"",style:{height:"300px"},"events-count-on-year-view":"",events:n.attendanceEvents,"time-from":600,"disable-views":["day"]},{"arrow-prev":(0,o.k6)((()=>[St])),"arrow-next":(0,o.k6)((()=>[jt])),_:1},8,["events"])):((0,o.uX)(),(0,o.CE)("div",Kt,"데이터 로딩 중..."))]),((0,o.uX)(),(0,o.Wv)(o.Im,{to:"body"},[s.isModalOpen?((0,o.uX)(),(0,o.Wv)(c,{key:0,onClose:n.closeModal},null,8,["onClose"])):(0,o.Q3)("",!0)]))])}var Jt=a(6150),Xt=a(3366),Pt={components:{VueCal:Jt.A,Modal:Xt.A},name:"AttendanceCom",data(){return{dataLoaded:!1,isModalOpen:!1}},computed:{...(0,F.L8)("attendance",["getArrayAttendance"]),...(0,F.L8)("login",["getLoginInfo"]),attendanceEvents(){return this.getArrayAttendance}},methods:{...(0,F.i0)("attendance",["getAttendance"]),openModal(){this.isModalOpen=!0},closeModal(){this.isModalOpen=!1},async loadAttendanceData(){try{await this.getAttendance(this.getLoginInfo.user_no),this.dataLoaded=!0}catch(e){console.error("출석 데이터 로딩 실패:",e)}}},mounted(){this.loadAttendanceData()}};const Ht=(0,T.A)(Pt,[["render",Tt]]);var Rt=Ht;const Gt={key:"profile",class:"cards fade-up-item",style:{height:"430px"}},Wt=["src"],Ot={class:"lg KB_S4 my-3"},zt={class:"md",style:{"margin-bottom":"0px"}},Zt={class:"md mb-2",style:{"margin-bottom":"0px"}};function Ut(e,t,a,i,s,n){return(0,o.uX)(),(0,o.CE)("div",Gt,[n.loginInfo&&n.loginInfo.user_no?((0,o.uX)(),(0,o.CE)("img",{key:0,src:n.profileImageUrl,class:"profile-large my-3",alt:"Profile Picture",onError:t[0]||(t[0]=(...e)=>n.setDefaultImage&&n.setDefaultImage(...e))},null,40,Wt)):(0,o.Q3)("",!0),(0,o.Lk)("h2",Ot,(0,c.v_)(n.loginInfo?n.loginInfo.user_name:""),1),(0,o.Lk)("p",zt,(0,c.v_)(n.loginInfo?`${n.loginInfo.level_no||""} ${n.loginInfo.position_no||""} | ${n.loginInfo.job_no||""} 직무`:""),1),(0,o.Lk)("p",Zt,(0,c.v_)(n.loginInfo?`${n.loginInfo.dp_no}`:""),1),(0,o.Lk)("button",{class:"btn-yellow KB_C2 my-3",onClick:t[1]||(t[1]=(...e)=>n.goToMyMileageView&&n.goToMyMileageView(...e))},"나의 마일리지")])}var Nt={name:"ProfileCom",data(){},computed:{...(0,F.L8)("login",["getLoginInfo"]),profileImageUrl(){return this.loginInfo&&this.loginInfo.user_no?`http://210.114.18.177:8090/profile/${this.loginInfo.user_no}.jpg`:""},loginInfo(){const e=this.getLoginInfo;return e?{...e,position_no:e.position_no||"",level_no:e.level_no||"",job_no:e.job_no||"",dp_no:e.dp_no||""}:null}},methods:{setDefaultImage(e){e.target.src=a(6468)},goToMyMileageView(){window.location.href="/myMileageView"}}};const $t=(0,T.A)(Nt,[["render",Ut]]);var Vt=$t,qt={name:"UserMainView",components:{favorite:X,recommand:ee,milageCharts:Et,attendance:Rt,profile:Vt},data(){return{}},computed:{...(0,F.L8)("login",["getLoginInfo"]),loginInfo(){return this.getLoginInfo}},methods:{setTransitionDelay(e,t){e.style.setProperty("--index",t)}},mounted(){this.$nextTick((()=>{const e=this.$el.querySelectorAll(".fade-up-item");e.forEach(((e,t)=>{e.style.setProperty("--index",t),e.style.setProperty("z-index",10-t),setTimeout((()=>{e.classList.add("fade-up-active")}),100*t)}))}))}};const Yt=(0,T.A)(qt,[["render",l],["__scopeId","data-v-57cc43ba"]]);var ea=Yt},5584:function(e,t,a){e.exports=a.p+"img/left-quote.79fcccda.png"},3543:function(e,t,a){e.exports=a.p+"img/right-quote.0262f354.png"},3007:function(e,t,a){e.exports=a.p+"img/1.c152b0f8.png"},4708:function(e,t,a){e.exports=a.p+"img/2.711a9678.png"},7034:function(e,t,a){e.exports=a.p+"img/3.bfa4b895.png"},2146:function(e,t,a){e.exports=a.p+"img/4.1cf87dd6.png"},11:function(e,t,a){e.exports=a.p+"img/5.5977a811.png"},8032:function(e,t,a){e.exports=a.p+"img/6.9269f398.png"},2857:function(e,t,a){e.exports=a.p+"img/7.ee3dd3db.png"},3950:function(e,t,a){e.exports=a.p+"img/8.49dcda10.png"},2263:function(e,t,a){e.exports=a.p+"img/9.36ff7324.png"}}]);
//# sourceMappingURL=9582.0dfabcd3.js.map
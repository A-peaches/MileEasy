"use strict";(self["webpackChunkmile"]=self["webpackChunkmile"]||[]).push([[9135],{9135:function(e,t,i){i.r(t),i.d(t,{default:function(){return K}});var l=i(641),s=i(33);const o=e=>((0,l.Qi)("data-v-31e08d04"),e=e(),(0,l.jt)(),e),a={class:"cards page-back mx-auto",style:{color:"#4b4a4a"}},n={class:"bold-x-lg my-5 ml-5",ref:"helpIcon",style:{"font-family":"KB_C3"}},r={key:0,class:"help-popover",ref:"helpPopover"},d=o((()=>(0,l.Lk)("div",{style:{"font-size":"12pt"}},[(0,l.Lk)("span",null,[(0,l.eW)("이것은 마일리지 카드입니다. 여기에서 귀하의 마일리지 포인트와 최대 마일리지, "),(0,l.Lk)("br"),(0,l.eW)(" 그리고 다른 사용자들과 비교한 귀하의 위치를 확인할 수 있습니다.")])],-1))),c=[d],p={key:1,class:"row mx-2",style:{"margin-top":"100px"}},h={class:"cards mx-3 fade-up-item",style:{"background-color":"#f9f9f9",height:"280px",position:"relative"}},v={class:"flex-between"},g={class:"flex mb-2"},m={class:"text-start KB_C3 fw-bolder",style:{"font-size":"18pt",margin:"0"}},u={class:"text-end",style:{top:"-12px",position:"relative"}},f=o((()=>(0,l.Lk)("strong",null,"바로가기 >",-1))),k={class:"flex justify-content-between align-items-center",style:{"padding-bottom":"60px"}},y={style:{width:"55%","font-size":"32pt",position:"relative"}},L={class:"KB_C2"},b={class:"KB_C2 highlight"},_={class:"text-start recent-update"},x={class:"flex progress-container",style:{width:"43%",height:"105%",position:"relative","padding-right":"5%"}},w={class:"progress-bar mb-4"},P=(0,l.Fv)('<div class="marker top" data-v-31e08d04><i class="bi bi-caret-right-fill" data-v-31e08d04></i> 상위 20% </div><div class="marker middle" data-v-31e08d04><i class="bi bi-caret-right-fill" data-v-31e08d04></i> 상위 60% </div><div class="marker bottom" data-v-31e08d04><i class="bi bi-caret-right-fill" data-v-31e08d04></i> 상위 100% </div>',3),M=o((()=>(0,l.Lk)("div",{class:"below-text mb-2 ml-"}," < 총 평균 대비 상위 그래프 > ",-1))),C=o((()=>(0,l.Lk)("div",{class:"my-5"},null,-1)));function H(e,t,i,o,d,H){const E=(0,l.g2)("router-link");return(0,l.uX)(),(0,l.CE)("div",a,[(0,l.Lk)("h2",n,[(0,l.eW)(" 나의 마일리지 "),(0,l.Lk)("i",{class:"bi bi-question-circle help-icon",onClick:t[0]||(t[0]=(...e)=>H.toggleHelpPopover&&H.toggleHelpPopover(...e)),style:{"font-size":"20pt"}})],512),d.showHelpPopover?((0,l.uX)(),(0,l.CE)("div",r,c,512)):(0,l.Q3)("",!0),d.dataLoaded?((0,l.uX)(),(0,l.CE)("div",p,[((0,l.uX)(!0),(0,l.CE)(l.FK,null,(0,l.pI)(H.filteredMyMile,((e,t)=>((0,l.uX)(),(0,l.CE)("div",{key:t,class:"col-6 mb-3"},[(0,l.Lk)("div",h,[(0,l.Lk)("div",v,[(0,l.Lk)("div",g,[(0,l.Lk)("div",m,(0,s.v_)(e.mile_name),1),(0,l.Lk)("div",u,[(0,l.bF)(E,{to:{name:"mileageDetail",params:{mile_no:e.mile_no}},class:"KB_C3 brown",style:{"text-decoration":"none","font-size":"12pt"}},{default:(0,l.k6)((()=>[f])),_:2},1032,["to"])])])]),(0,l.Lk)("div",k,[(0,l.Lk)("div",y,[(0,l.Lk)("span",L,[(0,l.Lk)("span",b,(0,s.v_)(e.user_point),1),(0,l.eW)(" / "+(0,s.v_)(0!=e.mile_max?e.mile_max:"-"),1)]),(0,l.Lk)("div",_," ( 최근 업데이트 : "+(0,s.v_)(e.mile_date)+" ) ",1)]),(0,l.Lk)("div",x,[(0,l.Lk)("div",w,[(0,l.Lk)("div",{class:"progress",style:(0,s.Tr)({height:H.calculateProgressHeight(e.all_point)+"%"})},null,4),P]),M])])])])))),128))])):(0,l.Q3)("",!0),C])}var E=i(6278),I={name:"MyMileageView",data(){return{showHelpPopover:!1,dataLoaded:!1}},methods:{...(0,E.i0)("mileScore",["getMyMiles"]),calculateProgressHeight(e){return 0===e?.1:Math.max(0,Math.min(100,100-e))},setTransitionDelay(e,t){e.style.setProperty("--index",t)},applyFadeUpEffect(){console.log("Applying fade-up effect");const e=this.$el.querySelectorAll(".fade-up-item");console.log(`Found ${e.length} items to animate`),e.forEach(((t,i)=>{t.style.setProperty("--index",i),t.style.setProperty("z-index",e.length-i);const l=50,s=l+50*i;setTimeout((()=>{t.classList.add("fade-up-active")}),s)}))},toggleHelpPopover(e){e.stopPropagation(),console.log("toggleHelpPopover 클릭"),this.showHelpPopover=!this.showHelpPopover,console.log("showHelpPopover:",this.showHelpPopover),this.showHelpPopover?document.addEventListener("click",this.handleClickOutside):document.removeEventListener("click",this.handleClickOutside)},handleClickOutside(e){console.log("handleClickOutside 실행"),!this.$refs.helpPopover||this.$refs.helpPopover.contains(e.target)||this.$refs.helpIcon.contains(e.target)||(console.log("팝오버 닫기"),this.showHelpPopover=!1,document.removeEventListener("click",this.handleClickOutside))}},mounted(){},computed:{...(0,E.L8)("login",["getLoginInfo"]),...(0,E.L8)("mileScore",["getMyMile"]),filteredMyMile(){const e=this.getLoginInfo?this.getLoginInfo.job_no:null;if(!e)return[];let t="기획"===e?this.getMyMile.filter((e=>!1===e.mile_is_branch)):this.getMyMile;const i=Array.from(new Map(t.map((e=>[e.mile_no,e]))).values());return i}},watch:{getLoginInfo:{immediate:!0,handler(e){e&&e.user_no?this.getMyMiles(e.user_no).then((()=>{this.dataLoaded=!0,this.$nextTick((()=>{this.applyFadeUpEffect()}))})):this.dataLoaded=!1}}}},z=i(6262);const F=(0,z.A)(I,[["render",H],["__scopeId","data-v-31e08d04"]]);var K=F}}]);
//# sourceMappingURL=9135.8464f0fa.js.map